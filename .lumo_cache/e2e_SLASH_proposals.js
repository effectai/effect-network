goog.provide("e2e.proposals");
e2e.proposals.owner_acc = e2e.token.owner_acc;
e2e.proposals.token_acc = eos_cljs.core.random_account.call(null,"tkn");
e2e.proposals.prop_acc = eos_cljs.core.random_account.call(null,"prop");
e2e.proposals.stake_acc = eos_cljs.core.random_account.call(null,"stk");
e2e.proposals.dao_acc = e2e.dao.dao_acc;
cljs.core.println.call(null,"prop acc = ",e2e.proposals.prop_acc);
cljs.core.println.call(null,"token acc = ",e2e.proposals.token_acc);
cljs.core.println.call(null,"stake acc = ",e2e.proposals.stake_acc);
e2e.proposals.first_cycle_start_time = (1608292800);
e2e.proposals.proposal_cost = "1.0000 EFX";
e2e.proposals.eos_tx_owner = (function e2e$proposals$eos_tx_owner(contr,action,args){
return eos_cljs.core.transact.call(null,contr,action,args,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"actor","actor",(-1830560481)),e2e.proposals.owner_acc,new cljs.core.Keyword(null,"permission","permission",(-511292572)),"active"], null)], null));
});
e2e.proposals.cljs_test_once_fixtures = new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"before","before",(-1633692388)),(function (){
if((typeof e2e !== 'undefined') && (typeof e2e.proposals !== 'undefined') && (typeof e2e.proposals.t_e2e$proposals11637 !== 'undefined')){
} else {

/**
* @constructor
 * @implements {cljs.core.IWithMeta}
 * @implements {cljs.core.IMeta}
 * @implements {cljs.test.IAsyncTest}
 * @implements {cljs.core.IFn}
*/
e2e.proposals.t_e2e$proposals11637 = (function (meta11638){
this.meta11638 = meta11638;
this.cljs$lang$protocol_mask$partition0$ = 393217;
this.cljs$lang$protocol_mask$partition1$ = 0;
});
e2e.proposals.t_e2e$proposals11637.prototype.cljs$core$IWithMeta$_with_meta$arity$2 = (function (_11639,meta11638__$1){
var self__ = this;
var _11639__$1 = this;
return (new e2e.proposals.t_e2e$proposals11637(meta11638__$1));
});

e2e.proposals.t_e2e$proposals11637.prototype.cljs$core$IMeta$_meta$arity$1 = (function (_11639){
var self__ = this;
var _11639__$1 = this;
return self__.meta11638;
});

e2e.proposals.t_e2e$proposals11637.prototype.cljs$test$IAsyncTest$ = cljs.core.PROTOCOL_SENTINEL;

e2e.proposals.t_e2e$proposals11637.prototype.call = (function (self__,done){
var self__ = this;
var self____$1 = this;
var ___192__auto__ = self____$1;
var c__19__auto__ = cljs.core.async.chan.call(null,(1));
cljs.core.async.impl.dispatch.run.call(null,((function (c__19__auto__,___192__auto__,self____$1){
return (function (){
var f__20__auto__ = (function (){var switch__14__auto__ = ((function (c__19__auto__,___192__auto__,self____$1){
return (function (state_11695){
var state_val_11696 = (state_11695[(1)]);
if((state_val_11696 === (1))){
var inst_11641 = eos_cljs.core.create_account.call(null,e2e.proposals.owner_acc,e2e.proposals.prop_acc);
var inst_11642 = cljs.core.async.interop.p__GT_c.call(null,inst_11641);
var state_11695__$1 = state_11695;
return cljs.core.async.impl.ioc_helpers.take_BANG_.call(null,state_11695__$1,(2),inst_11642);
} else {
if((state_val_11696 === (2))){
var inst_11644 = (state_11695[(7)]);
var inst_11644__$1 = (state_11695[(2)]);
var inst_11645 = (inst_11644__$1 instanceof cljs.core.ExceptionInfo);
var inst_11646 = cljs.core.ex_data.call(null,inst_11644__$1);
var inst_11647 = new cljs.core.Keyword(null,"error","error",(-978969032)).cljs$core$IFn$_invoke$arity$1(inst_11646);
var inst_11648 = cljs.core._EQ_.call(null,inst_11647,new cljs.core.Keyword(null,"promise-error","promise-error",(-90673560)));
var inst_11649 = ((inst_11645) && (inst_11648));
var state_11695__$1 = (function (){var statearr_11697 = state_11695;
(statearr_11697[(7)] = inst_11644__$1);

return statearr_11697;
})();
if(cljs.core.truth_(inst_11649)){
var statearr_11698_11793 = state_11695__$1;
(statearr_11698_11793[(1)] = (3));

} else {
var statearr_11699_11794 = state_11695__$1;
(statearr_11699_11794[(1)] = (4));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_11696 === (3))){
var inst_11644 = (state_11695[(7)]);
var inst_11651 = (function(){throw inst_11644})();
var state_11695__$1 = state_11695;
var statearr_11700_11795 = state_11695__$1;
(statearr_11700_11795[(2)] = inst_11651);

(statearr_11700_11795[(1)] = (5));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_11696 === (4))){
var inst_11644 = (state_11695[(7)]);
var state_11695__$1 = state_11695;
var statearr_11701_11796 = state_11695__$1;
(statearr_11701_11796[(2)] = inst_11644);

(statearr_11701_11796[(1)] = (5));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_11696 === (5))){
var inst_11654 = (state_11695[(2)]);
var inst_11655 = eos_cljs.core.deploy.call(null,e2e.proposals.prop_acc,"contracts/effect-proposals/effect-proposals");
var inst_11656 = cljs.core.async.interop.p__GT_c.call(null,inst_11655);
var state_11695__$1 = (function (){var statearr_11702 = state_11695;
(statearr_11702[(8)] = inst_11654);

return statearr_11702;
})();
return cljs.core.async.impl.ioc_helpers.take_BANG_.call(null,state_11695__$1,(6),inst_11656);
} else {
if((state_val_11696 === (6))){
var inst_11658 = (state_11695[(9)]);
var inst_11658__$1 = (state_11695[(2)]);
var inst_11659 = (inst_11658__$1 instanceof cljs.core.ExceptionInfo);
var inst_11660 = cljs.core.ex_data.call(null,inst_11658__$1);
var inst_11661 = new cljs.core.Keyword(null,"error","error",(-978969032)).cljs$core$IFn$_invoke$arity$1(inst_11660);
var inst_11662 = cljs.core._EQ_.call(null,inst_11661,new cljs.core.Keyword(null,"promise-error","promise-error",(-90673560)));
var inst_11663 = ((inst_11659) && (inst_11662));
var state_11695__$1 = (function (){var statearr_11703 = state_11695;
(statearr_11703[(9)] = inst_11658__$1);

return statearr_11703;
})();
if(cljs.core.truth_(inst_11663)){
var statearr_11704_11797 = state_11695__$1;
(statearr_11704_11797[(1)] = (7));

} else {
var statearr_11705_11798 = state_11695__$1;
(statearr_11705_11798[(1)] = (8));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_11696 === (7))){
var inst_11658 = (state_11695[(9)]);
var inst_11665 = (function(){throw inst_11658})();
var state_11695__$1 = state_11695;
var statearr_11706_11799 = state_11695__$1;
(statearr_11706_11799[(2)] = inst_11665);

(statearr_11706_11799[(1)] = (9));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_11696 === (8))){
var inst_11658 = (state_11695[(9)]);
var state_11695__$1 = state_11695;
var statearr_11707_11800 = state_11695__$1;
(statearr_11707_11800[(2)] = inst_11658);

(statearr_11707_11800[(1)] = (9));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_11696 === (9))){
var inst_11668 = (state_11695[(2)]);
var inst_11669 = cljs.core.PersistentVector.EMPTY_NODE;
var inst_11670 = [e2e.proposals.owner_acc,e2e.proposals.token_acc];
var inst_11671 = (new cljs.core.PersistentVector(null,(2),(5),inst_11669,inst_11670,null));
var inst_11672 = e2e.token.deploy_token.call(null,e2e.proposals.token_acc,inst_11671);
var state_11695__$1 = (function (){var statearr_11708 = state_11695;
(statearr_11708[(10)] = inst_11668);

return statearr_11708;
})();
return cljs.core.async.impl.ioc_helpers.take_BANG_.call(null,state_11695__$1,(10),inst_11672);
} else {
if((state_val_11696 === (10))){
var inst_11674 = (state_11695[(2)]);
var inst_11675 = cljs.core.PersistentVector.EMPTY_NODE;
var inst_11676 = cljs.core.PersistentVector.EMPTY_NODE;
var inst_11677 = [e2e.proposals.owner_acc,"1056569.0000 EFX","37276.0000 NFX"];
var inst_11678 = (new cljs.core.PersistentVector(null,(3),(5),inst_11676,inst_11677,null));
var inst_11679 = cljs.core.PersistentVector.EMPTY_NODE;
var inst_11680 = [e2e.proposals.token_acc,"606645.0000 EFX","24042.0000 NFX"];
var inst_11681 = (new cljs.core.PersistentVector(null,(3),(5),inst_11679,inst_11680,null));
var inst_11682 = [inst_11678,inst_11681];
var inst_11683 = (new cljs.core.PersistentVector(null,(2),(5),inst_11675,inst_11682,null));
var inst_11684 = e2e.stake.deploy_stake.call(null,e2e.proposals.stake_acc,e2e.proposals.token_acc,"4,EFX","4,NFX",inst_11683);
var state_11695__$1 = (function (){var statearr_11709 = state_11695;
(statearr_11709[(11)] = inst_11674);

return statearr_11709;
})();
return cljs.core.async.impl.ioc_helpers.take_BANG_.call(null,state_11695__$1,(11),inst_11684);
} else {
if((state_val_11696 === (11))){
var inst_11686 = (state_11695[(2)]);
var inst_11687 = cljs.core.PersistentVector.EMPTY_NODE;
var inst_11688 = [e2e.proposals.owner_acc,e2e.proposals.token_acc];
var inst_11689 = (new cljs.core.PersistentVector(null,(2),(5),inst_11687,inst_11688,null));
var inst_11690 = e2e.dao.deploy_dao.call(null,e2e.proposals.dao_acc,e2e.proposals.stake_acc,e2e.proposals.prop_acc,e2e.proposals.token_acc,"4,EFX","4,NFX",inst_11689);
var state_11695__$1 = (function (){var statearr_11710 = state_11695;
(statearr_11710[(12)] = inst_11686);

return statearr_11710;
})();
return cljs.core.async.impl.ioc_helpers.take_BANG_.call(null,state_11695__$1,(12),inst_11690);
} else {
if((state_val_11696 === (12))){
var inst_11692 = (state_11695[(2)]);
var inst_11693 = done.call(null);
var state_11695__$1 = (function (){var statearr_11711 = state_11695;
(statearr_11711[(13)] = inst_11692);

return statearr_11711;
})();
return cljs.core.async.impl.ioc_helpers.return_chan.call(null,state_11695__$1,inst_11693);
} else {
return null;
}
}
}
}
}
}
}
}
}
}
}
}
});})(c__19__auto__,___192__auto__,self____$1))
;
return ((function (switch__14__auto__,c__19__auto__,___192__auto__,self____$1){
return (function() {
var e2e$proposals$state_machine__15__auto__ = null;
var e2e$proposals$state_machine__15__auto____0 = (function (){
var statearr_11712 = [null,null,null,null,null,null,null,null,null,null,null,null,null,null];
(statearr_11712[(0)] = e2e$proposals$state_machine__15__auto__);

(statearr_11712[(1)] = (1));

return statearr_11712;
});
var e2e$proposals$state_machine__15__auto____1 = (function (state_11695){
while(true){
var ret_value__16__auto__ = (function (){try{while(true){
var result__17__auto__ = switch__14__auto__.call(null,state_11695);
if(cljs.core.keyword_identical_QMARK_.call(null,result__17__auto__,new cljs.core.Keyword(null,"recur","recur",(-437573268)))){
continue;
} else {
return result__17__auto__;
}
break;
}
}catch (e11713){var ex__18__auto__ = e11713;
var statearr_11714_11801 = state_11695;
(statearr_11714_11801[(2)] = ex__18__auto__);


if(cljs.core.seq.call(null,(state_11695[(4)]))){
var statearr_11715_11802 = state_11695;
(statearr_11715_11802[(1)] = cljs.core.first.call(null,(state_11695[(4)])));

} else {
throw ex__18__auto__;
}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
}})();
if(cljs.core.keyword_identical_QMARK_.call(null,ret_value__16__auto__,new cljs.core.Keyword(null,"recur","recur",(-437573268)))){
var G__11803 = state_11695;
state_11695 = G__11803;
continue;
} else {
return ret_value__16__auto__;
}
break;
}
});
e2e$proposals$state_machine__15__auto__ = function(state_11695){
switch(arguments.length){
case 0:
return e2e$proposals$state_machine__15__auto____0.call(this);
case 1:
return e2e$proposals$state_machine__15__auto____1.call(this,state_11695);
}
throw(new Error('Invalid arity: ' + arguments.length));
};
e2e$proposals$state_machine__15__auto__.cljs$core$IFn$_invoke$arity$0 = e2e$proposals$state_machine__15__auto____0;
e2e$proposals$state_machine__15__auto__.cljs$core$IFn$_invoke$arity$1 = e2e$proposals$state_machine__15__auto____1;
return e2e$proposals$state_machine__15__auto__;
})()
;})(switch__14__auto__,c__19__auto__,___192__auto__,self____$1))
})();
var state__21__auto__ = (function (){var statearr_11716 = f__20__auto__.call(null);
(statearr_11716[(6)] = c__19__auto__);

return statearr_11716;
})();
return cljs.core.async.impl.ioc_helpers.run_state_machine_wrapped.call(null,state__21__auto__);
});})(c__19__auto__,___192__auto__,self____$1))
);

return c__19__auto__;
});

e2e.proposals.t_e2e$proposals11637.prototype.apply = (function (self__,args11640){
var self__ = this;
var self____$1 = this;
return self____$1.call.apply(self____$1,[self____$1].concat(cljs.core.aclone.call(null,args11640)));
});

e2e.proposals.t_e2e$proposals11637.prototype.cljs$core$IFn$_invoke$arity$1 = (function (done){
var self__ = this;
var ___192__auto__ = this;
var c__19__auto__ = cljs.core.async.chan.call(null,(1));
cljs.core.async.impl.dispatch.run.call(null,((function (c__19__auto__,___192__auto__){
return (function (){
var f__20__auto__ = (function (){var switch__14__auto__ = ((function (c__19__auto__,___192__auto__){
return (function (state_11771){
var state_val_11772 = (state_11771[(1)]);
if((state_val_11772 === (1))){
var inst_11717 = eos_cljs.core.create_account.call(null,e2e.proposals.owner_acc,e2e.proposals.prop_acc);
var inst_11718 = cljs.core.async.interop.p__GT_c.call(null,inst_11717);
var state_11771__$1 = state_11771;
return cljs.core.async.impl.ioc_helpers.take_BANG_.call(null,state_11771__$1,(2),inst_11718);
} else {
if((state_val_11772 === (2))){
var inst_11720 = (state_11771[(7)]);
var inst_11720__$1 = (state_11771[(2)]);
var inst_11721 = (inst_11720__$1 instanceof cljs.core.ExceptionInfo);
var inst_11722 = cljs.core.ex_data.call(null,inst_11720__$1);
var inst_11723 = new cljs.core.Keyword(null,"error","error",(-978969032)).cljs$core$IFn$_invoke$arity$1(inst_11722);
var inst_11724 = cljs.core._EQ_.call(null,inst_11723,new cljs.core.Keyword(null,"promise-error","promise-error",(-90673560)));
var inst_11725 = ((inst_11721) && (inst_11724));
var state_11771__$1 = (function (){var statearr_11773 = state_11771;
(statearr_11773[(7)] = inst_11720__$1);

return statearr_11773;
})();
if(cljs.core.truth_(inst_11725)){
var statearr_11774_11804 = state_11771__$1;
(statearr_11774_11804[(1)] = (3));

} else {
var statearr_11775_11805 = state_11771__$1;
(statearr_11775_11805[(1)] = (4));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_11772 === (3))){
var inst_11720 = (state_11771[(7)]);
var inst_11727 = (function(){throw inst_11720})();
var state_11771__$1 = state_11771;
var statearr_11776_11806 = state_11771__$1;
(statearr_11776_11806[(2)] = inst_11727);

(statearr_11776_11806[(1)] = (5));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_11772 === (4))){
var inst_11720 = (state_11771[(7)]);
var state_11771__$1 = state_11771;
var statearr_11777_11807 = state_11771__$1;
(statearr_11777_11807[(2)] = inst_11720);

(statearr_11777_11807[(1)] = (5));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_11772 === (5))){
var inst_11730 = (state_11771[(2)]);
var inst_11731 = eos_cljs.core.deploy.call(null,e2e.proposals.prop_acc,"contracts/effect-proposals/effect-proposals");
var inst_11732 = cljs.core.async.interop.p__GT_c.call(null,inst_11731);
var state_11771__$1 = (function (){var statearr_11778 = state_11771;
(statearr_11778[(8)] = inst_11730);

return statearr_11778;
})();
return cljs.core.async.impl.ioc_helpers.take_BANG_.call(null,state_11771__$1,(6),inst_11732);
} else {
if((state_val_11772 === (6))){
var inst_11734 = (state_11771[(9)]);
var inst_11734__$1 = (state_11771[(2)]);
var inst_11735 = (inst_11734__$1 instanceof cljs.core.ExceptionInfo);
var inst_11736 = cljs.core.ex_data.call(null,inst_11734__$1);
var inst_11737 = new cljs.core.Keyword(null,"error","error",(-978969032)).cljs$core$IFn$_invoke$arity$1(inst_11736);
var inst_11738 = cljs.core._EQ_.call(null,inst_11737,new cljs.core.Keyword(null,"promise-error","promise-error",(-90673560)));
var inst_11739 = ((inst_11735) && (inst_11738));
var state_11771__$1 = (function (){var statearr_11779 = state_11771;
(statearr_11779[(9)] = inst_11734__$1);

return statearr_11779;
})();
if(cljs.core.truth_(inst_11739)){
var statearr_11780_11808 = state_11771__$1;
(statearr_11780_11808[(1)] = (7));

} else {
var statearr_11781_11809 = state_11771__$1;
(statearr_11781_11809[(1)] = (8));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_11772 === (7))){
var inst_11734 = (state_11771[(9)]);
var inst_11741 = (function(){throw inst_11734})();
var state_11771__$1 = state_11771;
var statearr_11782_11810 = state_11771__$1;
(statearr_11782_11810[(2)] = inst_11741);

(statearr_11782_11810[(1)] = (9));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_11772 === (8))){
var inst_11734 = (state_11771[(9)]);
var state_11771__$1 = state_11771;
var statearr_11783_11811 = state_11771__$1;
(statearr_11783_11811[(2)] = inst_11734);

(statearr_11783_11811[(1)] = (9));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_11772 === (9))){
var inst_11744 = (state_11771[(2)]);
var inst_11745 = cljs.core.PersistentVector.EMPTY_NODE;
var inst_11746 = [e2e.proposals.owner_acc,e2e.proposals.token_acc];
var inst_11747 = (new cljs.core.PersistentVector(null,(2),(5),inst_11745,inst_11746,null));
var inst_11748 = e2e.token.deploy_token.call(null,e2e.proposals.token_acc,inst_11747);
var state_11771__$1 = (function (){var statearr_11784 = state_11771;
(statearr_11784[(10)] = inst_11744);

return statearr_11784;
})();
return cljs.core.async.impl.ioc_helpers.take_BANG_.call(null,state_11771__$1,(10),inst_11748);
} else {
if((state_val_11772 === (10))){
var inst_11750 = (state_11771[(2)]);
var inst_11751 = cljs.core.PersistentVector.EMPTY_NODE;
var inst_11752 = cljs.core.PersistentVector.EMPTY_NODE;
var inst_11753 = [e2e.proposals.owner_acc,"1056569.0000 EFX","37276.0000 NFX"];
var inst_11754 = (new cljs.core.PersistentVector(null,(3),(5),inst_11752,inst_11753,null));
var inst_11755 = cljs.core.PersistentVector.EMPTY_NODE;
var inst_11756 = [e2e.proposals.token_acc,"606645.0000 EFX","24042.0000 NFX"];
var inst_11757 = (new cljs.core.PersistentVector(null,(3),(5),inst_11755,inst_11756,null));
var inst_11758 = [inst_11754,inst_11757];
var inst_11759 = (new cljs.core.PersistentVector(null,(2),(5),inst_11751,inst_11758,null));
var inst_11760 = e2e.stake.deploy_stake.call(null,e2e.proposals.stake_acc,e2e.proposals.token_acc,"4,EFX","4,NFX",inst_11759);
var state_11771__$1 = (function (){var statearr_11785 = state_11771;
(statearr_11785[(11)] = inst_11750);

return statearr_11785;
})();
return cljs.core.async.impl.ioc_helpers.take_BANG_.call(null,state_11771__$1,(11),inst_11760);
} else {
if((state_val_11772 === (11))){
var inst_11762 = (state_11771[(2)]);
var inst_11763 = cljs.core.PersistentVector.EMPTY_NODE;
var inst_11764 = [e2e.proposals.owner_acc,e2e.proposals.token_acc];
var inst_11765 = (new cljs.core.PersistentVector(null,(2),(5),inst_11763,inst_11764,null));
var inst_11766 = e2e.dao.deploy_dao.call(null,e2e.proposals.dao_acc,e2e.proposals.stake_acc,e2e.proposals.prop_acc,e2e.proposals.token_acc,"4,EFX","4,NFX",inst_11765);
var state_11771__$1 = (function (){var statearr_11786 = state_11771;
(statearr_11786[(12)] = inst_11762);

return statearr_11786;
})();
return cljs.core.async.impl.ioc_helpers.take_BANG_.call(null,state_11771__$1,(12),inst_11766);
} else {
if((state_val_11772 === (12))){
var inst_11768 = (state_11771[(2)]);
var inst_11769 = done.call(null);
var state_11771__$1 = (function (){var statearr_11787 = state_11771;
(statearr_11787[(13)] = inst_11768);

return statearr_11787;
})();
return cljs.core.async.impl.ioc_helpers.return_chan.call(null,state_11771__$1,inst_11769);
} else {
return null;
}
}
}
}
}
}
}
}
}
}
}
}
});})(c__19__auto__,___192__auto__))
;
return ((function (switch__14__auto__,c__19__auto__,___192__auto__){
return (function() {
var e2e$proposals$state_machine__15__auto__ = null;
var e2e$proposals$state_machine__15__auto____0 = (function (){
var statearr_11788 = [null,null,null,null,null,null,null,null,null,null,null,null,null,null];
(statearr_11788[(0)] = e2e$proposals$state_machine__15__auto__);

(statearr_11788[(1)] = (1));

return statearr_11788;
});
var e2e$proposals$state_machine__15__auto____1 = (function (state_11771){
while(true){
var ret_value__16__auto__ = (function (){try{while(true){
var result__17__auto__ = switch__14__auto__.call(null,state_11771);
if(cljs.core.keyword_identical_QMARK_.call(null,result__17__auto__,new cljs.core.Keyword(null,"recur","recur",(-437573268)))){
continue;
} else {
return result__17__auto__;
}
break;
}
}catch (e11789){var ex__18__auto__ = e11789;
var statearr_11790_11812 = state_11771;
(statearr_11790_11812[(2)] = ex__18__auto__);


if(cljs.core.seq.call(null,(state_11771[(4)]))){
var statearr_11791_11813 = state_11771;
(statearr_11791_11813[(1)] = cljs.core.first.call(null,(state_11771[(4)])));

} else {
throw ex__18__auto__;
}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
}})();
if(cljs.core.keyword_identical_QMARK_.call(null,ret_value__16__auto__,new cljs.core.Keyword(null,"recur","recur",(-437573268)))){
var G__11814 = state_11771;
state_11771 = G__11814;
continue;
} else {
return ret_value__16__auto__;
}
break;
}
});
e2e$proposals$state_machine__15__auto__ = function(state_11771){
switch(arguments.length){
case 0:
return e2e$proposals$state_machine__15__auto____0.call(this);
case 1:
return e2e$proposals$state_machine__15__auto____1.call(this,state_11771);
}
throw(new Error('Invalid arity: ' + arguments.length));
};
e2e$proposals$state_machine__15__auto__.cljs$core$IFn$_invoke$arity$0 = e2e$proposals$state_machine__15__auto____0;
e2e$proposals$state_machine__15__auto__.cljs$core$IFn$_invoke$arity$1 = e2e$proposals$state_machine__15__auto____1;
return e2e$proposals$state_machine__15__auto__;
})()
;})(switch__14__auto__,c__19__auto__,___192__auto__))
})();
var state__21__auto__ = (function (){var statearr_11792 = f__20__auto__.call(null);
(statearr_11792[(6)] = c__19__auto__);

return statearr_11792;
})();
return cljs.core.async.impl.ioc_helpers.run_state_machine_wrapped.call(null,state__21__auto__);
});})(c__19__auto__,___192__auto__))
);

return c__19__auto__;
});

e2e.proposals.t_e2e$proposals11637.getBasis = (function (){
return new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,"meta11638","meta11638",(-698427770),null)], null);
});

e2e.proposals.t_e2e$proposals11637.cljs$lang$type = true;

e2e.proposals.t_e2e$proposals11637.cljs$lang$ctorStr = "e2e.proposals/t_e2e$proposals11637";

e2e.proposals.t_e2e$proposals11637.cljs$lang$ctorPrWriter = (function (this__9776__auto__,writer__9777__auto__,opt__9778__auto__){
return cljs.core._write.call(null,writer__9777__auto__,"e2e.proposals/t_e2e$proposals11637");
});

/**
 * Positional factory function for e2e.proposals/t_e2e$proposals11637.
 */
e2e.proposals.__GT_t_e2e$proposals11637 = (function e2e$proposals$__GT_t_e2e$proposals11637(meta11638){
return (new e2e.proposals.t_e2e$proposals11637(meta11638));
});

}

return (new e2e.proposals.t_e2e$proposals11637(null));
}),new cljs.core.Keyword(null,"after","after",(594996914)),(function (){
return null;
})], null)], null);
e2e.proposals.prop_config = new cljs.core.PersistentArrayMap(null, 6, [new cljs.core.Keyword(null,"cycle_duration_sec","cycle_duration_sec",(2139129571)),(1209600),new cljs.core.Keyword(null,"quorum","quorum",(-1933541141)),(12),new cljs.core.Keyword(null,"cycle_voting_duration_sec","cycle_voting_duration_sec",(-1056353816)),(0),new cljs.core.Keyword(null,"proposal_cost","proposal_cost",(1707335169)),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"quantity","quantity",(-1929050694)),e2e.proposals.proposal_cost,new cljs.core.Keyword(null,"contract","contract",(798152745)),e2e.proposals.token_acc], null),new cljs.core.Keyword(null,"dao_contract","dao_contract",(-366781739)),e2e.proposals.dao_acc,new cljs.core.Keyword(null,"first_cycle_start_time","first_cycle_start_time",(-611660854)),"2020-11-18 12:00:00"], null);
/**
 * Deploy a basic proposal account and fill it with data for testing
 */
e2e.proposals.deploy_proposals = (function e2e$proposals$deploy_proposals(acc){
var c__19__auto__ = cljs.core.async.chan.call(null,(1));
cljs.core.async.impl.dispatch.run.call(null,((function (c__19__auto__){
return (function (){
var f__20__auto__ = (function (){var switch__14__auto__ = ((function (c__19__auto__){
return (function (state_11868){
var state_val_11869 = (state_11868[(1)]);
if((state_val_11869 === (1))){
var state_11868__$1 = state_11868;
var statearr_11870_11902 = state_11868__$1;
(statearr_11870_11902[(2)] = null);

(statearr_11870_11902[(1)] = (2));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_11869 === (2))){
var _ = (function (){var statearr_11871 = state_11868;
(statearr_11871[(4)] = cljs.core.cons.call(null,(5),(state_11868[(4)])));

return statearr_11871;
})();
var inst_11821 = eos_cljs.core.create_account.call(null,e2e.proposals.owner_acc,acc);
var inst_11822 = cljs.core.async.interop.p__GT_c.call(null,inst_11821);
var state_11868__$1 = state_11868;
return cljs.core.async.impl.ioc_helpers.take_BANG_.call(null,state_11868__$1,(6),inst_11822);
} else {
if((state_val_11869 === (3))){
var inst_11866 = (state_11868[(2)]);
var state_11868__$1 = state_11868;
return cljs.core.async.impl.ioc_helpers.return_chan.call(null,state_11868__$1,inst_11866);
} else {
if((state_val_11869 === (4))){
var inst_11815 = (state_11868[(2)]);
var state_11868__$1 = state_11868;
var statearr_11873_11903 = state_11868__$1;
(statearr_11873_11903[(2)] = inst_11815);

(statearr_11873_11903[(1)] = (3));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_11869 === (5))){
var _ = (function (){var statearr_11874 = state_11868;
(statearr_11874[(4)] = cljs.core.rest.call(null,(state_11868[(4)])));

return statearr_11874;
})();
var state_11868__$1 = state_11868;
var ex11872 = (state_11868__$1[(2)]);
var statearr_11875_11904 = state_11868__$1;
(statearr_11875_11904[(5)] = ex11872);


if((ex11872 instanceof Error)){
var statearr_11876_11905 = state_11868__$1;
(statearr_11876_11905[(1)] = (4));

(statearr_11876_11905[(5)] = null);

} else {
throw ex11872;

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_11869 === (6))){
var inst_11824 = (state_11868[(7)]);
var inst_11824__$1 = (state_11868[(2)]);
var inst_11825 = (inst_11824__$1 instanceof cljs.core.ExceptionInfo);
var inst_11826 = cljs.core.ex_data.call(null,inst_11824__$1);
var inst_11827 = new cljs.core.Keyword(null,"error","error",(-978969032)).cljs$core$IFn$_invoke$arity$1(inst_11826);
var inst_11828 = cljs.core._EQ_.call(null,inst_11827,new cljs.core.Keyword(null,"promise-error","promise-error",(-90673560)));
var inst_11829 = ((inst_11825) && (inst_11828));
var state_11868__$1 = (function (){var statearr_11877 = state_11868;
(statearr_11877[(7)] = inst_11824__$1);

return statearr_11877;
})();
if(cljs.core.truth_(inst_11829)){
var statearr_11878_11906 = state_11868__$1;
(statearr_11878_11906[(1)] = (7));

} else {
var statearr_11879_11907 = state_11868__$1;
(statearr_11879_11907[(1)] = (8));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_11869 === (7))){
var inst_11824 = (state_11868[(7)]);
var inst_11831 = (function(){throw inst_11824})();
var state_11868__$1 = state_11868;
var statearr_11880_11908 = state_11868__$1;
(statearr_11880_11908[(2)] = inst_11831);

(statearr_11880_11908[(1)] = (9));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_11869 === (8))){
var inst_11824 = (state_11868[(7)]);
var state_11868__$1 = state_11868;
var statearr_11881_11909 = state_11868__$1;
(statearr_11881_11909[(2)] = inst_11824);

(statearr_11881_11909[(1)] = (9));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_11869 === (9))){
var inst_11834 = (state_11868[(2)]);
var inst_11835 = eos_cljs.core.deploy.call(null,acc,"contracts/effect-proposals/effect-proposals");
var inst_11836 = cljs.core.async.interop.p__GT_c.call(null,inst_11835);
var state_11868__$1 = (function (){var statearr_11882 = state_11868;
(statearr_11882[(8)] = inst_11834);

return statearr_11882;
})();
return cljs.core.async.impl.ioc_helpers.take_BANG_.call(null,state_11868__$1,(10),inst_11836);
} else {
if((state_val_11869 === (10))){
var inst_11838 = (state_11868[(9)]);
var inst_11838__$1 = (state_11868[(2)]);
var inst_11839 = (inst_11838__$1 instanceof cljs.core.ExceptionInfo);
var inst_11840 = cljs.core.ex_data.call(null,inst_11838__$1);
var inst_11841 = new cljs.core.Keyword(null,"error","error",(-978969032)).cljs$core$IFn$_invoke$arity$1(inst_11840);
var inst_11842 = cljs.core._EQ_.call(null,inst_11841,new cljs.core.Keyword(null,"promise-error","promise-error",(-90673560)));
var inst_11843 = ((inst_11839) && (inst_11842));
var state_11868__$1 = (function (){var statearr_11883 = state_11868;
(statearr_11883[(9)] = inst_11838__$1);

return statearr_11883;
})();
if(cljs.core.truth_(inst_11843)){
var statearr_11884_11910 = state_11868__$1;
(statearr_11884_11910[(1)] = (11));

} else {
var statearr_11885_11911 = state_11868__$1;
(statearr_11885_11911[(1)] = (12));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_11869 === (11))){
var inst_11838 = (state_11868[(9)]);
var inst_11845 = (function(){throw inst_11838})();
var state_11868__$1 = state_11868;
var statearr_11886_11912 = state_11868__$1;
(statearr_11886_11912[(2)] = inst_11845);

(statearr_11886_11912[(1)] = (13));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_11869 === (12))){
var inst_11838 = (state_11868[(9)]);
var state_11868__$1 = state_11868;
var statearr_11887_11913 = state_11868__$1;
(statearr_11887_11913[(2)] = inst_11838);

(statearr_11887_11913[(1)] = (13));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_11869 === (13))){
var inst_11848 = (state_11868[(2)]);
var inst_11849 = eos_cljs.core.transact.call(null,acc,"init",e2e.proposals.prop_config);
var inst_11850 = cljs.core.async.interop.p__GT_c.call(null,inst_11849);
var state_11868__$1 = (function (){var statearr_11888 = state_11868;
(statearr_11888[(10)] = inst_11848);

return statearr_11888;
})();
return cljs.core.async.impl.ioc_helpers.take_BANG_.call(null,state_11868__$1,(14),inst_11850);
} else {
if((state_val_11869 === (14))){
var inst_11852 = (state_11868[(11)]);
var inst_11852__$1 = (state_11868[(2)]);
var inst_11853 = (inst_11852__$1 instanceof cljs.core.ExceptionInfo);
var inst_11854 = cljs.core.ex_data.call(null,inst_11852__$1);
var inst_11855 = new cljs.core.Keyword(null,"error","error",(-978969032)).cljs$core$IFn$_invoke$arity$1(inst_11854);
var inst_11856 = cljs.core._EQ_.call(null,inst_11855,new cljs.core.Keyword(null,"promise-error","promise-error",(-90673560)));
var inst_11857 = ((inst_11853) && (inst_11856));
var state_11868__$1 = (function (){var statearr_11889 = state_11868;
(statearr_11889[(11)] = inst_11852__$1);

return statearr_11889;
})();
if(cljs.core.truth_(inst_11857)){
var statearr_11890_11914 = state_11868__$1;
(statearr_11890_11914[(1)] = (15));

} else {
var statearr_11891_11915 = state_11868__$1;
(statearr_11891_11915[(1)] = (16));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_11869 === (15))){
var inst_11852 = (state_11868[(11)]);
var inst_11859 = (function(){throw inst_11852})();
var state_11868__$1 = state_11868;
var statearr_11892_11916 = state_11868__$1;
(statearr_11892_11916[(2)] = inst_11859);

(statearr_11892_11916[(1)] = (17));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_11869 === (16))){
var inst_11852 = (state_11868[(11)]);
var state_11868__$1 = state_11868;
var statearr_11893_11917 = state_11868__$1;
(statearr_11893_11917[(2)] = inst_11852);

(statearr_11893_11917[(1)] = (17));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_11869 === (17))){
var inst_11862 = (state_11868[(2)]);
var inst_11863 = cljs.core.print.call(null,"Deployed proposals");
var _ = (function (){var statearr_11894 = state_11868;
(statearr_11894[(4)] = cljs.core.rest.call(null,(state_11868[(4)])));

return statearr_11894;
})();
var state_11868__$1 = (function (){var statearr_11895 = state_11868;
(statearr_11895[(12)] = inst_11862);

return statearr_11895;
})();
var statearr_11896_11918 = state_11868__$1;
(statearr_11896_11918[(2)] = inst_11863);

(statearr_11896_11918[(1)] = (3));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
return null;
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
});})(c__19__auto__))
;
return ((function (switch__14__auto__,c__19__auto__){
return (function() {
var e2e$proposals$deploy_proposals_$_state_machine__15__auto__ = null;
var e2e$proposals$deploy_proposals_$_state_machine__15__auto____0 = (function (){
var statearr_11897 = [null,null,null,null,null,null,null,null,null,null,null,null,null];
(statearr_11897[(0)] = e2e$proposals$deploy_proposals_$_state_machine__15__auto__);

(statearr_11897[(1)] = (1));

return statearr_11897;
});
var e2e$proposals$deploy_proposals_$_state_machine__15__auto____1 = (function (state_11868){
while(true){
var ret_value__16__auto__ = (function (){try{while(true){
var result__17__auto__ = switch__14__auto__.call(null,state_11868);
if(cljs.core.keyword_identical_QMARK_.call(null,result__17__auto__,new cljs.core.Keyword(null,"recur","recur",(-437573268)))){
continue;
} else {
return result__17__auto__;
}
break;
}
}catch (e11898){var ex__18__auto__ = e11898;
var statearr_11899_11919 = state_11868;
(statearr_11899_11919[(2)] = ex__18__auto__);


if(cljs.core.seq.call(null,(state_11868[(4)]))){
var statearr_11900_11920 = state_11868;
(statearr_11900_11920[(1)] = cljs.core.first.call(null,(state_11868[(4)])));

} else {
throw ex__18__auto__;
}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
}})();
if(cljs.core.keyword_identical_QMARK_.call(null,ret_value__16__auto__,new cljs.core.Keyword(null,"recur","recur",(-437573268)))){
var G__11921 = state_11868;
state_11868 = G__11921;
continue;
} else {
return ret_value__16__auto__;
}
break;
}
});
e2e$proposals$deploy_proposals_$_state_machine__15__auto__ = function(state_11868){
switch(arguments.length){
case 0:
return e2e$proposals$deploy_proposals_$_state_machine__15__auto____0.call(this);
case 1:
return e2e$proposals$deploy_proposals_$_state_machine__15__auto____1.call(this,state_11868);
}
throw(new Error('Invalid arity: ' + arguments.length));
};
e2e$proposals$deploy_proposals_$_state_machine__15__auto__.cljs$core$IFn$_invoke$arity$0 = e2e$proposals$deploy_proposals_$_state_machine__15__auto____0;
e2e$proposals$deploy_proposals_$_state_machine__15__auto__.cljs$core$IFn$_invoke$arity$1 = e2e$proposals$deploy_proposals_$_state_machine__15__auto____1;
return e2e$proposals$deploy_proposals_$_state_machine__15__auto__;
})()
;})(switch__14__auto__,c__19__auto__))
})();
var state__21__auto__ = (function (){var statearr_11901 = f__20__auto__.call(null);
(statearr_11901[(6)] = c__19__auto__);

return statearr_11901;
})();
return cljs.core.async.impl.ioc_helpers.run_state_machine_wrapped.call(null,state__21__auto__);
});})(c__19__auto__))
);

return c__19__auto__;
});
e2e.proposals.init = (function e2e$proposals$init(){
return cljs.test.test_var.call(null,e2e.proposals.init.cljs$lang$var);
});
e2e.proposals.init.cljs$lang$test = (function (){
if((typeof e2e !== 'undefined') && (typeof e2e.proposals !== 'undefined') && (typeof e2e.proposals.t_e2e$proposals11922 !== 'undefined')){
} else {

/**
* @constructor
 * @implements {cljs.core.IWithMeta}
 * @implements {cljs.core.IMeta}
 * @implements {cljs.test.IAsyncTest}
 * @implements {cljs.core.IFn}
*/
e2e.proposals.t_e2e$proposals11922 = (function (meta11923){
this.meta11923 = meta11923;
this.cljs$lang$protocol_mask$partition0$ = 393217;
this.cljs$lang$protocol_mask$partition1$ = 0;
});
e2e.proposals.t_e2e$proposals11922.prototype.cljs$core$IWithMeta$_with_meta$arity$2 = (function (_11924,meta11923__$1){
var self__ = this;
var _11924__$1 = this;
return (new e2e.proposals.t_e2e$proposals11922(meta11923__$1));
});

e2e.proposals.t_e2e$proposals11922.prototype.cljs$core$IMeta$_meta$arity$1 = (function (_11924){
var self__ = this;
var _11924__$1 = this;
return self__.meta11923;
});

e2e.proposals.t_e2e$proposals11922.prototype.cljs$test$IAsyncTest$ = cljs.core.PROTOCOL_SENTINEL;

e2e.proposals.t_e2e$proposals11922.prototype.call = (function (self__,done){
var self__ = this;
var self____$1 = this;
var ___192__auto__ = self____$1;
var c__19__auto__ = cljs.core.async.chan.call(null,(1));
cljs.core.async.impl.dispatch.run.call(null,((function (c__19__auto__,___192__auto__,self____$1){
return (function (){
var f__20__auto__ = (function (){var switch__14__auto__ = ((function (c__19__auto__,___192__auto__,self____$1){
return (function (state_12213){
var state_val_12214 = (state_12213[(1)]);
if((state_val_12214 === (32))){
var inst_12031 = (state_12213[(2)]);
var state_12213__$1 = state_12213;
var statearr_12215_12826 = state_12213__$1;
(statearr_12215_12826[(2)] = inst_12031);

(statearr_12215_12826[(1)] = (29));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12214 === (64))){
var inst_12143 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_12144 = true;
var inst_12145 = [new cljs.core.Keyword(null,"fail","fail",(1706214930)),"can update after init",inst_12144,true];
var inst_12146 = cljs.core.PersistentHashMap.fromArrays(inst_12143,inst_12145);
var inst_12147 = cljs.test.do_report.call(null,inst_12146);
var state_12213__$1 = state_12213;
var statearr_12216_12827 = state_12213__$1;
(statearr_12216_12827[(2)] = inst_12147);

(statearr_12216_12827[(1)] = (65));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12214 === (1))){
var state_12213__$1 = state_12213;
var statearr_12217_12828 = state_12213__$1;
(statearr_12217_12828[(2)] = null);

(statearr_12217_12828[(1)] = (2));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12214 === (33))){
var inst_12014 = (state_12213[(2)]);
var inst_12015 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_12016 = null;
var inst_12017 = [new cljs.core.Keyword(null,"error","error",(-978969032)),"can init",inst_12016,inst_12014];
var inst_12018 = cljs.core.PersistentHashMap.fromArrays(inst_12015,inst_12017);
var inst_12019 = cljs.test.do_report.call(null,inst_12018);
var state_12213__$1 = state_12213;
var statearr_12218_12829 = state_12213__$1;
(statearr_12218_12829[(2)] = inst_12019);

(statearr_12218_12829[(1)] = (32));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12214 === (65))){
var inst_12149 = (state_12213[(2)]);
var _ = (function (){var statearr_12220 = state_12213;
(statearr_12220[(4)] = cljs.core.rest.call(null,(state_12213[(4)])));

return statearr_12220;
})();
var state_12213__$1 = (function (){var statearr_12221 = state_12213;
(statearr_12221[(7)] = inst_12149);

return statearr_12221;
})();
var statearr_12222_12830 = state_12213__$1;
(statearr_12222_12830[(2)] = true);

(statearr_12222_12830[(1)] = (60));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12214 === (2))){
var _ = (function (){var statearr_12223 = state_12213;
(statearr_12223[(4)] = cljs.core.cons.call(null,(5),(state_12213[(4)])));

return statearr_12223;
})();
var state_12213__$1 = state_12213;
var statearr_12224_12831 = state_12213__$1;
(statearr_12224_12831[(2)] = null);

(statearr_12224_12831[(1)] = (6));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12214 === (34))){
var _ = (function (){var statearr_12225 = state_12213;
(statearr_12225[(4)] = cljs.core.rest.call(null,(state_12213[(4)])));

return statearr_12225;
})();
var state_12213__$1 = state_12213;
var ex12219 = (state_12213__$1[(2)]);
var statearr_12226_12832 = state_12213__$1;
(statearr_12226_12832[(5)] = ex12219);


var statearr_12227_12833 = state_12213__$1;
(statearr_12227_12833[(1)] = (33));

(statearr_12227_12833[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12214 === (66))){
var inst_12159 = (state_12213[(8)]);
var inst_12159__$1 = (state_12213[(2)]);
var inst_12160 = (inst_12159__$1 instanceof cljs.core.ExceptionInfo);
var inst_12161 = cljs.core.ex_data.call(null,inst_12159__$1);
var inst_12162 = new cljs.core.Keyword(null,"error","error",(-978969032)).cljs$core$IFn$_invoke$arity$1(inst_12161);
var inst_12163 = cljs.core._EQ_.call(null,inst_12162,new cljs.core.Keyword(null,"promise-error","promise-error",(-90673560)));
var inst_12164 = ((inst_12160) && (inst_12163));
var state_12213__$1 = (function (){var statearr_12229 = state_12213;
(statearr_12229[(8)] = inst_12159__$1);

return statearr_12229;
})();
if(cljs.core.truth_(inst_12164)){
var statearr_12230_12834 = state_12213__$1;
(statearr_12230_12834[(1)] = (67));

} else {
var statearr_12231_12835 = state_12213__$1;
(statearr_12231_12835[(1)] = (68));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12214 === (3))){
var inst_12210 = (state_12213[(2)]);
var inst_12211 = done.call(null);
var state_12213__$1 = (function (){var statearr_12232 = state_12213;
(statearr_12232[(9)] = inst_12210);

return statearr_12232;
})();
return cljs.core.async.impl.ioc_helpers.return_chan.call(null,state_12213__$1,inst_12211);
} else {
if((state_val_12214 === (35))){
var _ = (function (){var statearr_12233 = state_12213;
(statearr_12233[(4)] = cljs.core.rest.call(null,(state_12213[(4)])));

return statearr_12233;
})();
var state_12213__$1 = state_12213;
var ex12228 = (state_12213__$1[(2)]);
var statearr_12234_12836 = state_12213__$1;
(statearr_12234_12836[(5)] = ex12228);


if((ex12228 instanceof Error)){
var statearr_12235_12837 = state_12213__$1;
(statearr_12235_12837[(1)] = (30));

(statearr_12235_12837[(5)] = null);

} else {
throw ex12228;

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12214 === (67))){
var inst_12159 = (state_12213[(8)]);
var inst_12166 = (function(){throw inst_12159})();
var state_12213__$1 = state_12213;
var statearr_12236_12838 = state_12213__$1;
(statearr_12236_12838[(2)] = inst_12166);

(statearr_12236_12838[(1)] = (69));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12214 === (4))){
var inst_11926 = (state_12213[(2)]);
var inst_11927 = cljs.core.prn.call(null,"======== ",inst_11926);
var state_12213__$1 = state_12213;
var statearr_12237_12839 = state_12213__$1;
(statearr_12237_12839[(2)] = inst_11927);

(statearr_12237_12839[(1)] = (3));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12214 === (36))){
var inst_12040 = (state_12213[(10)]);
var inst_12040__$1 = (state_12213[(2)]);
var inst_12041 = (inst_12040__$1 instanceof cljs.core.ExceptionInfo);
var inst_12042 = cljs.core.ex_data.call(null,inst_12040__$1);
var inst_12043 = new cljs.core.Keyword(null,"error","error",(-978969032)).cljs$core$IFn$_invoke$arity$1(inst_12042);
var inst_12044 = cljs.core._EQ_.call(null,inst_12043,new cljs.core.Keyword(null,"promise-error","promise-error",(-90673560)));
var inst_12045 = ((inst_12041) && (inst_12044));
var state_12213__$1 = (function (){var statearr_12239 = state_12213;
(statearr_12239[(10)] = inst_12040__$1);

return statearr_12239;
})();
if(cljs.core.truth_(inst_12045)){
var statearr_12240_12840 = state_12213__$1;
(statearr_12240_12840[(1)] = (37));

} else {
var statearr_12241_12841 = state_12213__$1;
(statearr_12241_12841[(1)] = (38));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12214 === (68))){
var inst_12159 = (state_12213[(8)]);
var state_12213__$1 = state_12213;
var statearr_12242_12842 = state_12213__$1;
(statearr_12242_12842[(2)] = inst_12159);

(statearr_12242_12842[(1)] = (69));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12214 === (5))){
var _ = (function (){var statearr_12243 = state_12213;
(statearr_12243[(4)] = cljs.core.rest.call(null,(state_12213[(4)])));

return statearr_12243;
})();
var state_12213__$1 = state_12213;
var ex12238 = (state_12213__$1[(2)]);
var statearr_12244_12843 = state_12213__$1;
(statearr_12244_12843[(5)] = ex12238);


if((ex12238 instanceof Error)){
var statearr_12245_12844 = state_12213__$1;
(statearr_12245_12844[(1)] = (4));

(statearr_12245_12844[(5)] = null);

} else {
throw ex12238;

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12214 === (37))){
var inst_12040 = (state_12213[(10)]);
var inst_12047 = (function(){throw inst_12040})();
var state_12213__$1 = state_12213;
var statearr_12246_12845 = state_12213__$1;
(statearr_12246_12845[(2)] = inst_12047);

(statearr_12246_12845[(1)] = (39));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12214 === (69))){
var inst_12169 = (state_12213[(2)]);
var state_12213__$1 = (function (){var statearr_12247 = state_12213;
(statearr_12247[(11)] = inst_12169);

return statearr_12247;
})();
var statearr_12248_12846 = state_12213__$1;
(statearr_12248_12846[(2)] = null);

(statearr_12248_12846[(1)] = (70));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12214 === (6))){
var _ = (function (){var statearr_12249 = state_12213;
(statearr_12249[(4)] = cljs.core.cons.call(null,(19),(state_12213[(4)])));

return statearr_12249;
})();
var inst_11977 = eos_cljs.core.transact.call(null,e2e.proposals.prop_acc,"update",e2e.proposals.prop_config);
var inst_11978 = cljs.core.async.interop.p__GT_c.call(null,inst_11977);
var state_12213__$1 = state_12213;
return cljs.core.async.impl.ioc_helpers.take_BANG_.call(null,state_12213__$1,(20),inst_11978);
} else {
if((state_val_12214 === (38))){
var inst_12040 = (state_12213[(10)]);
var state_12213__$1 = state_12213;
var statearr_12250_12847 = state_12213__$1;
(statearr_12250_12847[(2)] = inst_12040);

(statearr_12250_12847[(1)] = (39));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12214 === (70))){
var inst_12169 = (state_12213[(11)]);
var inst_12183 = (state_12213[(12)]);
var inst_12184 = (state_12213[(13)]);
var _ = (function (){var statearr_12251 = state_12213;
(statearr_12251[(4)] = cljs.core.cons.call(null,(73),(state_12213[(4)])));

return statearr_12251;
})();
var inst_12181 = cljs.core.count.call(null,inst_12169);
var inst_12182 = (new cljs.core.List(null,(1),null,(1),null));
var inst_12183__$1 = (new cljs.core.List(null,inst_12181,inst_12182,(2),null));
var inst_12184__$1 = cljs.core.apply.call(null,cljs.core._EQ_,inst_12183__$1);
var state_12213__$1 = (function (){var statearr_12252 = state_12213;
(statearr_12252[(12)] = inst_12183__$1);

(statearr_12252[(13)] = inst_12184__$1);

return statearr_12252;
})();
if(cljs.core.truth_(inst_12184__$1)){
var statearr_12253_12848 = state_12213__$1;
(statearr_12253_12848[(1)] = (74));

} else {
var statearr_12254_12849 = state_12213__$1;
(statearr_12254_12849[(1)] = (75));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12214 === (7))){
var inst_12011 = (state_12213[(2)]);
var state_12213__$1 = (function (){var statearr_12255 = state_12213;
(statearr_12255[(14)] = inst_12011);

return statearr_12255;
})();
var statearr_12256_12850 = state_12213__$1;
(statearr_12256_12850[(2)] = null);

(statearr_12256_12850[(1)] = (28));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12214 === (39))){
var inst_12050 = (state_12213[(2)]);
var state_12213__$1 = (function (){var statearr_12257 = state_12213;
(statearr_12257[(15)] = inst_12050);

return statearr_12257;
})();
var statearr_12258_12851 = state_12213__$1;
(statearr_12258_12851[(2)] = null);

(statearr_12258_12851[(1)] = (40));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12214 === (71))){
var inst_12207 = (state_12213[(2)]);
var _ = (function (){var statearr_12259 = state_12213;
(statearr_12259[(4)] = cljs.core.rest.call(null,(state_12213[(4)])));

return statearr_12259;
})();
var state_12213__$1 = state_12213;
var statearr_12260_12852 = state_12213__$1;
(statearr_12260_12852[(2)] = inst_12207);

(statearr_12260_12852[(1)] = (3));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12214 === (8))){
var inst_11935 = (state_12213[(16)]);
var inst_11936 = (state_12213[(17)]);
var inst_11933 = (state_12213[(2)]);
var inst_11934 = inst_11933.cause;
var inst_11935__$1 = inst_11934.message;
var inst_11936__$1 = clojure.string.ends_with_QMARK_.call(null,inst_11935__$1,"not yet initialized");
var inst_11937 = (!(inst_11936__$1));
var state_12213__$1 = (function (){var statearr_12261 = state_12213;
(statearr_12261[(16)] = inst_11935__$1);

(statearr_12261[(17)] = inst_11936__$1);

return statearr_12261;
})();
if(inst_11937){
var statearr_12262_12853 = state_12213__$1;
(statearr_12262_12853[(1)] = (9));

} else {
var statearr_12263_12854 = state_12213__$1;
(statearr_12263_12854[(1)] = (10));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12214 === (40))){
var _ = (function (){var statearr_12264 = state_12213;
(statearr_12264[(4)] = cljs.core.cons.call(null,(43),(state_12213[(4)])));

return statearr_12264;
})();
var state_12213__$1 = state_12213;
var statearr_12265_12855 = state_12213__$1;
(statearr_12265_12855[(1)] = (44));



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12214 === (72))){
var inst_12170 = (state_12213[(2)]);
var inst_12171 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_12172 = cljs.core.list(new cljs.core.Symbol(null,"=","=",(-1501502141),null),cljs.core.list(new cljs.core.Symbol(null,"count","count",(-514511684),null),new cljs.core.Symbol(null,"rows","rows",(-1804386089),null)),(1));
var inst_12173 = [new cljs.core.Keyword(null,"error","error",(-978969032)),null,inst_12172,inst_12170];
var inst_12174 = cljs.core.PersistentHashMap.fromArrays(inst_12171,inst_12173);
var inst_12175 = cljs.test.do_report.call(null,inst_12174);
var state_12213__$1 = state_12213;
var statearr_12267_12856 = state_12213__$1;
(statearr_12267_12856[(2)] = inst_12175);

(statearr_12267_12856[(1)] = (71));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12214 === (9))){
var inst_11935 = (state_12213[(16)]);
var inst_11939 = ["expected =","not yet initialized"," actual = ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_11935)].join('');
var inst_11940 = cljs.core.prn.call(null,inst_11939);
var state_12213__$1 = state_12213;
var statearr_12269_12857 = state_12213__$1;
(statearr_12269_12857[(2)] = inst_11940);

(statearr_12269_12857[(1)] = (11));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12214 === (41))){
var inst_12078 = (state_12213[(2)]);
var _ = (function (){var statearr_12270 = state_12213;
(statearr_12270[(4)] = cljs.core.rest.call(null,(state_12213[(4)])));

return statearr_12270;
})();
var state_12213__$1 = state_12213;
var statearr_12271_12858 = state_12213__$1;
(statearr_12271_12858[(2)] = inst_12078);

(statearr_12271_12858[(1)] = (29));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12214 === (73))){
var _ = (function (){var statearr_12272 = state_12213;
(statearr_12272[(4)] = cljs.core.rest.call(null,(state_12213[(4)])));

return statearr_12272;
})();
var state_12213__$1 = state_12213;
var ex12268 = (state_12213__$1[(2)]);
var statearr_12273_12859 = state_12213__$1;
(statearr_12273_12859[(5)] = ex12268);


var statearr_12274_12860 = state_12213__$1;
(statearr_12274_12860[(1)] = (72));

(statearr_12274_12860[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12214 === (10))){
var state_12213__$1 = state_12213;
var statearr_12275_12861 = state_12213__$1;
(statearr_12275_12861[(2)] = null);

(statearr_12275_12861[(1)] = (11));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12214 === (42))){
var inst_12051 = (state_12213[(2)]);
var inst_12052 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_12053 = true;
var inst_12054 = [new cljs.core.Keyword(null,"error","error",(-978969032)),"can init",inst_12053,inst_12051];
var inst_12055 = cljs.core.PersistentHashMap.fromArrays(inst_12052,inst_12054);
var inst_12056 = cljs.test.do_report.call(null,inst_12055);
var state_12213__$1 = state_12213;
var statearr_12276_12862 = state_12213__$1;
(statearr_12276_12862[(2)] = inst_12056);

(statearr_12276_12862[(1)] = (41));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12214 === (74))){
var inst_12183 = (state_12213[(12)]);
var inst_12186 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_12187 = cljs.core.list(new cljs.core.Symbol(null,"=","=",(-1501502141),null),cljs.core.list(new cljs.core.Symbol(null,"count","count",(-514511684),null),new cljs.core.Symbol(null,"rows","rows",(-1804386089),null)),(1));
var inst_12188 = cljs.core.cons.call(null,cljs.core._EQ_,inst_12183);
var inst_12189 = [new cljs.core.Keyword(null,"pass","pass",(1574159993)),null,inst_12187,inst_12188];
var inst_12190 = cljs.core.PersistentHashMap.fromArrays(inst_12186,inst_12189);
var inst_12191 = cljs.test.do_report.call(null,inst_12190);
var state_12213__$1 = state_12213;
var statearr_12278_12863 = state_12213__$1;
(statearr_12278_12863[(2)] = inst_12191);

(statearr_12278_12863[(1)] = (76));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12214 === (11))){
var inst_11943 = (state_12213[(2)]);
var state_12213__$1 = (function (){var statearr_12279 = state_12213;
(statearr_12279[(18)] = inst_11943);

return statearr_12279;
})();
var statearr_12280_12864 = state_12213__$1;
(statearr_12280_12864[(2)] = null);

(statearr_12280_12864[(1)] = (12));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12214 === (43))){
var _ = (function (){var statearr_12281 = state_12213;
(statearr_12281[(4)] = cljs.core.rest.call(null,(state_12213[(4)])));

return statearr_12281;
})();
var state_12213__$1 = state_12213;
var ex12277 = (state_12213__$1[(2)]);
var statearr_12282_12865 = state_12213__$1;
(statearr_12282_12865[(5)] = ex12277);


var statearr_12283_12866 = state_12213__$1;
(statearr_12283_12866[(1)] = (42));

(statearr_12283_12866[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12214 === (75))){
var inst_12183 = (state_12213[(12)]);
var inst_12193 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_12194 = cljs.core.list(new cljs.core.Symbol(null,"=","=",(-1501502141),null),cljs.core.list(new cljs.core.Symbol(null,"count","count",(-514511684),null),new cljs.core.Symbol(null,"rows","rows",(-1804386089),null)),(1));
var inst_12195 = new cljs.core.Symbol(null,"not","not",(1044554643),null);
var inst_12196 = new cljs.core.Symbol(null,"=","=",(-1501502141),null);
var inst_12197 = cljs.core.cons.call(null,inst_12196,inst_12183);
var inst_12198 = (new cljs.core.List(null,inst_12197,null,(1),null));
var inst_12199 = (new cljs.core.List(null,inst_12195,inst_12198,(2),null));
var inst_12200 = [new cljs.core.Keyword(null,"fail","fail",(1706214930)),null,inst_12194,inst_12199];
var inst_12201 = cljs.core.PersistentHashMap.fromArrays(inst_12193,inst_12200);
var inst_12202 = cljs.test.do_report.call(null,inst_12201);
var state_12213__$1 = state_12213;
var statearr_12284_12867 = state_12213__$1;
(statearr_12284_12867[(2)] = inst_12202);

(statearr_12284_12867[(1)] = (76));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12214 === (12))){
var inst_11936 = (state_12213[(17)]);
var _ = (function (){var statearr_12285 = state_12213;
(statearr_12285[(4)] = cljs.core.cons.call(null,(15),(state_12213[(4)])));

return statearr_12285;
})();
var state_12213__$1 = state_12213;
if(cljs.core.truth_(inst_11936)){
var statearr_12286_12868 = state_12213__$1;
(statearr_12286_12868[(1)] = (16));

} else {
var statearr_12287_12869 = state_12213__$1;
(statearr_12287_12869[(1)] = (17));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12214 === (44))){
var inst_12063 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_12064 = true;
var inst_12065 = [new cljs.core.Keyword(null,"pass","pass",(1574159993)),"can init",inst_12064,true];
var inst_12066 = cljs.core.PersistentHashMap.fromArrays(inst_12063,inst_12065);
var inst_12067 = cljs.test.do_report.call(null,inst_12066);
var state_12213__$1 = state_12213;
var statearr_12288_12870 = state_12213__$1;
(statearr_12288_12870[(2)] = inst_12067);

(statearr_12288_12870[(1)] = (46));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12214 === (76))){
var inst_12184 = (state_12213[(13)]);
var inst_12204 = (state_12213[(2)]);
var _ = (function (){var statearr_12289 = state_12213;
(statearr_12289[(4)] = cljs.core.rest.call(null,(state_12213[(4)])));

return statearr_12289;
})();
var state_12213__$1 = (function (){var statearr_12290 = state_12213;
(statearr_12290[(19)] = inst_12204);

return statearr_12290;
})();
var statearr_12291_12871 = state_12213__$1;
(statearr_12291_12871[(2)] = inst_12184);

(statearr_12291_12871[(1)] = (71));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12214 === (13))){
var inst_11971 = (state_12213[(2)]);
var state_12213__$1 = state_12213;
var statearr_12292_12872 = state_12213__$1;
(statearr_12292_12872[(2)] = inst_11971);

(statearr_12292_12872[(1)] = (7));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12214 === (45))){
var inst_12069 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_12070 = true;
var inst_12071 = [new cljs.core.Keyword(null,"fail","fail",(1706214930)),"can init",inst_12070,true];
var inst_12072 = cljs.core.PersistentHashMap.fromArrays(inst_12069,inst_12071);
var inst_12073 = cljs.test.do_report.call(null,inst_12072);
var state_12213__$1 = state_12213;
var statearr_12293_12873 = state_12213__$1;
(statearr_12293_12873[(2)] = inst_12073);

(statearr_12293_12873[(1)] = (46));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12214 === (14))){
var inst_11944 = (state_12213[(2)]);
var inst_11945 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_11946 = new cljs.core.Symbol("e2e.macros","pass?","e2e.macros/pass?",(894145299),null);
var inst_11947 = [new cljs.core.Keyword(null,"error","error",(-978969032)),"need init to update",inst_11946,inst_11944];
var inst_11948 = cljs.core.PersistentHashMap.fromArrays(inst_11945,inst_11947);
var inst_11949 = cljs.test.do_report.call(null,inst_11948);
var state_12213__$1 = state_12213;
var statearr_12295_12874 = state_12213__$1;
(statearr_12295_12874[(2)] = inst_11949);

(statearr_12295_12874[(1)] = (13));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12214 === (46))){
var inst_12075 = (state_12213[(2)]);
var _ = (function (){var statearr_12296 = state_12213;
(statearr_12296[(4)] = cljs.core.rest.call(null,(state_12213[(4)])));

return statearr_12296;
})();
var state_12213__$1 = (function (){var statearr_12297 = state_12213;
(statearr_12297[(20)] = inst_12075);

return statearr_12297;
})();
var statearr_12298_12875 = state_12213__$1;
(statearr_12298_12875[(2)] = true);

(statearr_12298_12875[(1)] = (41));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12214 === (15))){
var _ = (function (){var statearr_12299 = state_12213;
(statearr_12299[(4)] = cljs.core.rest.call(null,(state_12213[(4)])));

return statearr_12299;
})();
var state_12213__$1 = state_12213;
var ex12294 = (state_12213__$1[(2)]);
var statearr_12300_12876 = state_12213__$1;
(statearr_12300_12876[(5)] = ex12294);


var statearr_12301_12877 = state_12213__$1;
(statearr_12301_12877[(1)] = (14));

(statearr_12301_12877[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12214 === (47))){
var _ = (function (){var statearr_12302 = state_12213;
(statearr_12302[(4)] = cljs.core.cons.call(null,(54),(state_12213[(4)])));

return statearr_12302;
})();
var inst_12107 = cljs.core.PersistentVector.EMPTY_NODE;
var inst_12108 = [new cljs.core.Keyword(null,"proposal_cost","proposal_cost",(1707335169)),new cljs.core.Keyword(null,"quantity","quantity",(-1929050694))];
var inst_12109 = (new cljs.core.PersistentVector(null,(2),(5),inst_12107,inst_12108,null));
var inst_12110 = cljs.core.assoc_in.call(null,e2e.proposals.prop_config,inst_12109,"0.0000 EFX");
var inst_12111 = eos_cljs.core.transact.call(null,e2e.proposals.prop_acc,"update",inst_12110);
var inst_12112 = cljs.core.async.interop.p__GT_c.call(null,inst_12111);
var state_12213__$1 = state_12213;
return cljs.core.async.impl.ioc_helpers.take_BANG_.call(null,state_12213__$1,(55),inst_12112);
} else {
if((state_val_12214 === (16))){
var inst_11936 = (state_12213[(17)]);
var inst_11956 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_11957 = new cljs.core.Symbol("e2e.macros","pass?","e2e.macros/pass?",(894145299),null);
var inst_11958 = [new cljs.core.Keyword(null,"pass","pass",(1574159993)),"need init to update",inst_11957,inst_11936];
var inst_11959 = cljs.core.PersistentHashMap.fromArrays(inst_11956,inst_11958);
var inst_11960 = cljs.test.do_report.call(null,inst_11959);
var state_12213__$1 = state_12213;
var statearr_12303_12878 = state_12213__$1;
(statearr_12303_12878[(2)] = inst_11960);

(statearr_12303_12878[(1)] = (18));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12214 === (48))){
var inst_12155 = (state_12213[(2)]);
var inst_12156 = eos_cljs.core.get_table_rows.call(null,e2e.proposals.prop_acc,e2e.proposals.prop_acc,"config");
var inst_12157 = cljs.core.async.interop.p__GT_c.call(null,inst_12156);
var state_12213__$1 = (function (){var statearr_12304 = state_12213;
(statearr_12304[(21)] = inst_12155);

return statearr_12304;
})();
return cljs.core.async.impl.ioc_helpers.take_BANG_.call(null,state_12213__$1,(66),inst_12157);
} else {
if((state_val_12214 === (17))){
var inst_11936 = (state_12213[(17)]);
var inst_11962 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_11963 = new cljs.core.Symbol("e2e.macros","pass?","e2e.macros/pass?",(894145299),null);
var inst_11964 = [new cljs.core.Keyword(null,"fail","fail",(1706214930)),"need init to update",inst_11963,inst_11936];
var inst_11965 = cljs.core.PersistentHashMap.fromArrays(inst_11962,inst_11964);
var inst_11966 = cljs.test.do_report.call(null,inst_11965);
var state_12213__$1 = state_12213;
var statearr_12305_12879 = state_12213__$1;
(statearr_12305_12879[(2)] = inst_11966);

(statearr_12305_12879[(1)] = (18));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12214 === (49))){
var inst_12082 = (state_12213[(2)]);
var inst_12083 = cljs.core.prn.call(null,"test failed with ",inst_12082);
var state_12213__$1 = (function (){var statearr_12306 = state_12213;
(statearr_12306[(22)] = inst_12083);

return statearr_12306;
})();
var statearr_12307_12880 = state_12213__$1;
(statearr_12307_12880[(2)] = null);

(statearr_12307_12880[(1)] = (50));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12214 === (18))){
var inst_11936 = (state_12213[(17)]);
var inst_11968 = (state_12213[(2)]);
var _ = (function (){var statearr_12309 = state_12213;
(statearr_12309[(4)] = cljs.core.rest.call(null,(state_12213[(4)])));

return statearr_12309;
})();
var state_12213__$1 = (function (){var statearr_12310 = state_12213;
(statearr_12310[(23)] = inst_11968);

return statearr_12310;
})();
var statearr_12311_12881 = state_12213__$1;
(statearr_12311_12881[(2)] = inst_11936);

(statearr_12311_12881[(1)] = (13));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12214 === (50))){
var _ = (function (){var statearr_12312 = state_12213;
(statearr_12312[(4)] = cljs.core.cons.call(null,(53),(state_12213[(4)])));

return statearr_12312;
})();
var inst_12095 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002))];
var inst_12096 = [new cljs.core.Keyword(null,"fail","fail",(1706214930)),"can update after init"];
var inst_12097 = cljs.core.PersistentHashMap.fromArrays(inst_12095,inst_12096);
var inst_12098 = cljs.test.do_report.call(null,inst_12097);
var ___$1 = (function (){var statearr_12313 = state_12213;
(statearr_12313[(4)] = cljs.core.rest.call(null,(state_12213[(4)])));

return statearr_12313;
})();
var state_12213__$1 = state_12213;
var statearr_12314_12882 = state_12213__$1;
(statearr_12314_12882[(2)] = inst_12098);

(statearr_12314_12882[(1)] = (51));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12214 === (19))){
var _ = (function (){var statearr_12315 = state_12213;
(statearr_12315[(4)] = cljs.core.rest.call(null,(state_12213[(4)])));

return statearr_12315;
})();
var state_12213__$1 = state_12213;
var ex12308 = (state_12213__$1[(2)]);
var statearr_12316_12883 = state_12213__$1;
(statearr_12316_12883[(5)] = ex12308);


if((ex12308 instanceof Error)){
var statearr_12317_12884 = state_12213__$1;
(statearr_12317_12884[(1)] = (8));

(statearr_12317_12884[(5)] = null);

} else {
throw ex12308;

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12214 === (51))){
var inst_12101 = (state_12213[(2)]);
var state_12213__$1 = state_12213;
var statearr_12318_12885 = state_12213__$1;
(statearr_12318_12885[(2)] = inst_12101);

(statearr_12318_12885[(1)] = (48));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12214 === (20))){
var inst_11980 = (state_12213[(24)]);
var inst_11980__$1 = (state_12213[(2)]);
var inst_11981 = (inst_11980__$1 instanceof cljs.core.ExceptionInfo);
var inst_11982 = cljs.core.ex_data.call(null,inst_11980__$1);
var inst_11983 = new cljs.core.Keyword(null,"error","error",(-978969032)).cljs$core$IFn$_invoke$arity$1(inst_11982);
var inst_11984 = cljs.core._EQ_.call(null,inst_11983,new cljs.core.Keyword(null,"promise-error","promise-error",(-90673560)));
var inst_11985 = ((inst_11981) && (inst_11984));
var state_12213__$1 = (function (){var statearr_12319 = state_12213;
(statearr_12319[(24)] = inst_11980__$1);

return statearr_12319;
})();
if(cljs.core.truth_(inst_11985)){
var statearr_12320_12886 = state_12213__$1;
(statearr_12320_12886[(1)] = (21));

} else {
var statearr_12321_12887 = state_12213__$1;
(statearr_12321_12887[(1)] = (22));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12214 === (52))){
var inst_12084 = (state_12213[(2)]);
var inst_12085 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_12086 = null;
var inst_12087 = [new cljs.core.Keyword(null,"error","error",(-978969032)),"can update after init",inst_12086,inst_12084];
var inst_12088 = cljs.core.PersistentHashMap.fromArrays(inst_12085,inst_12087);
var inst_12089 = cljs.test.do_report.call(null,inst_12088);
var state_12213__$1 = state_12213;
var statearr_12323_12888 = state_12213__$1;
(statearr_12323_12888[(2)] = inst_12089);

(statearr_12323_12888[(1)] = (51));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12214 === (21))){
var inst_11980 = (state_12213[(24)]);
var inst_11987 = (function(){throw inst_11980})();
var state_12213__$1 = state_12213;
var statearr_12324_12889 = state_12213__$1;
(statearr_12324_12889[(2)] = inst_11987);

(statearr_12324_12889[(1)] = (23));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12214 === (53))){
var _ = (function (){var statearr_12326 = state_12213;
(statearr_12326[(4)] = cljs.core.rest.call(null,(state_12213[(4)])));

return statearr_12326;
})();
var state_12213__$1 = state_12213;
var ex12322 = (state_12213__$1[(2)]);
var statearr_12327_12890 = state_12213__$1;
(statearr_12327_12890[(5)] = ex12322);


var statearr_12328_12891 = state_12213__$1;
(statearr_12328_12891[(1)] = (52));

(statearr_12328_12891[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12214 === (22))){
var inst_11980 = (state_12213[(24)]);
var state_12213__$1 = state_12213;
var statearr_12329_12892 = state_12213__$1;
(statearr_12329_12892[(2)] = inst_11980);

(statearr_12329_12892[(1)] = (23));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12214 === (54))){
var _ = (function (){var statearr_12330 = state_12213;
(statearr_12330[(4)] = cljs.core.rest.call(null,(state_12213[(4)])));

return statearr_12330;
})();
var state_12213__$1 = state_12213;
var ex12325 = (state_12213__$1[(2)]);
var statearr_12331_12893 = state_12213__$1;
(statearr_12331_12893[(5)] = ex12325);


if((ex12325 instanceof Error)){
var statearr_12332_12894 = state_12213__$1;
(statearr_12332_12894[(1)] = (49));

(statearr_12332_12894[(5)] = null);

} else {
throw ex12325;

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12214 === (23))){
var inst_11990 = (state_12213[(2)]);
var state_12213__$1 = (function (){var statearr_12333 = state_12213;
(statearr_12333[(25)] = inst_11990);

return statearr_12333;
})();
var statearr_12334_12895 = state_12213__$1;
(statearr_12334_12895[(2)] = null);

(statearr_12334_12895[(1)] = (24));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12214 === (55))){
var inst_12114 = (state_12213[(26)]);
var inst_12114__$1 = (state_12213[(2)]);
var inst_12115 = (inst_12114__$1 instanceof cljs.core.ExceptionInfo);
var inst_12116 = cljs.core.ex_data.call(null,inst_12114__$1);
var inst_12117 = new cljs.core.Keyword(null,"error","error",(-978969032)).cljs$core$IFn$_invoke$arity$1(inst_12116);
var inst_12118 = cljs.core._EQ_.call(null,inst_12117,new cljs.core.Keyword(null,"promise-error","promise-error",(-90673560)));
var inst_12119 = ((inst_12115) && (inst_12118));
var state_12213__$1 = (function (){var statearr_12335 = state_12213;
(statearr_12335[(26)] = inst_12114__$1);

return statearr_12335;
})();
if(cljs.core.truth_(inst_12119)){
var statearr_12336_12896 = state_12213__$1;
(statearr_12336_12896[(1)] = (56));

} else {
var statearr_12337_12897 = state_12213__$1;
(statearr_12337_12897[(1)] = (57));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12214 === (24))){
var _ = (function (){var statearr_12338 = state_12213;
(statearr_12338[(4)] = cljs.core.cons.call(null,(27),(state_12213[(4)])));

return statearr_12338;
})();
var inst_12002 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002))];
var inst_12003 = [new cljs.core.Keyword(null,"fail","fail",(1706214930)),"need init to update"];
var inst_12004 = cljs.core.PersistentHashMap.fromArrays(inst_12002,inst_12003);
var inst_12005 = cljs.test.do_report.call(null,inst_12004);
var ___$1 = (function (){var statearr_12339 = state_12213;
(statearr_12339[(4)] = cljs.core.rest.call(null,(state_12213[(4)])));

return statearr_12339;
})();
var state_12213__$1 = state_12213;
var statearr_12340_12898 = state_12213__$1;
(statearr_12340_12898[(2)] = inst_12005);

(statearr_12340_12898[(1)] = (25));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12214 === (56))){
var inst_12114 = (state_12213[(26)]);
var inst_12121 = (function(){throw inst_12114})();
var state_12213__$1 = state_12213;
var statearr_12341_12899 = state_12213__$1;
(statearr_12341_12899[(2)] = inst_12121);

(statearr_12341_12899[(1)] = (58));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12214 === (25))){
var inst_12008 = (state_12213[(2)]);
var _ = (function (){var statearr_12342 = state_12213;
(statearr_12342[(4)] = cljs.core.rest.call(null,(state_12213[(4)])));

return statearr_12342;
})();
var state_12213__$1 = state_12213;
var statearr_12343_12900 = state_12213__$1;
(statearr_12343_12900[(2)] = inst_12008);

(statearr_12343_12900[(1)] = (7));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12214 === (57))){
var inst_12114 = (state_12213[(26)]);
var state_12213__$1 = state_12213;
var statearr_12344_12901 = state_12213__$1;
(statearr_12344_12901[(2)] = inst_12114);

(statearr_12344_12901[(1)] = (58));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12214 === (26))){
var inst_11991 = (state_12213[(2)]);
var inst_11992 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_11993 = null;
var inst_11994 = [new cljs.core.Keyword(null,"error","error",(-978969032)),"need init to update",inst_11993,inst_11991];
var inst_11995 = cljs.core.PersistentHashMap.fromArrays(inst_11992,inst_11994);
var inst_11996 = cljs.test.do_report.call(null,inst_11995);
var state_12213__$1 = state_12213;
var statearr_12346_12902 = state_12213__$1;
(statearr_12346_12902[(2)] = inst_11996);

(statearr_12346_12902[(1)] = (25));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12214 === (58))){
var inst_12124 = (state_12213[(2)]);
var state_12213__$1 = (function (){var statearr_12347 = state_12213;
(statearr_12347[(27)] = inst_12124);

return statearr_12347;
})();
var statearr_12348_12903 = state_12213__$1;
(statearr_12348_12903[(2)] = null);

(statearr_12348_12903[(1)] = (59));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12214 === (27))){
var _ = (function (){var statearr_12349 = state_12213;
(statearr_12349[(4)] = cljs.core.rest.call(null,(state_12213[(4)])));

return statearr_12349;
})();
var state_12213__$1 = state_12213;
var ex12345 = (state_12213__$1[(2)]);
var statearr_12350_12904 = state_12213__$1;
(statearr_12350_12904[(5)] = ex12345);


var statearr_12351_12905 = state_12213__$1;
(statearr_12351_12905[(1)] = (26));

(statearr_12351_12905[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12214 === (59))){
var _ = (function (){var statearr_12352 = state_12213;
(statearr_12352[(4)] = cljs.core.cons.call(null,(62),(state_12213[(4)])));

return statearr_12352;
})();
var state_12213__$1 = state_12213;
var statearr_12353_12906 = state_12213__$1;
(statearr_12353_12906[(1)] = (63));



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12214 === (28))){
var _ = (function (){var statearr_12355 = state_12213;
(statearr_12355[(4)] = cljs.core.cons.call(null,(35),(state_12213[(4)])));

return statearr_12355;
})();
var inst_12037 = eos_cljs.core.transact.call(null,e2e.proposals.prop_acc,"init",e2e.proposals.prop_config);
var inst_12038 = cljs.core.async.interop.p__GT_c.call(null,inst_12037);
var state_12213__$1 = state_12213;
return cljs.core.async.impl.ioc_helpers.take_BANG_.call(null,state_12213__$1,(36),inst_12038);
} else {
if((state_val_12214 === (60))){
var inst_12152 = (state_12213[(2)]);
var _ = (function (){var statearr_12356 = state_12213;
(statearr_12356[(4)] = cljs.core.rest.call(null,(state_12213[(4)])));

return statearr_12356;
})();
var state_12213__$1 = state_12213;
var statearr_12357_12907 = state_12213__$1;
(statearr_12357_12907[(2)] = inst_12152);

(statearr_12357_12907[(1)] = (48));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12214 === (29))){
var inst_12081 = (state_12213[(2)]);
var state_12213__$1 = (function (){var statearr_12358 = state_12213;
(statearr_12358[(28)] = inst_12081);

return statearr_12358;
})();
var statearr_12359_12908 = state_12213__$1;
(statearr_12359_12908[(2)] = null);

(statearr_12359_12908[(1)] = (47));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12214 === (61))){
var inst_12125 = (state_12213[(2)]);
var inst_12126 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_12127 = true;
var inst_12128 = [new cljs.core.Keyword(null,"error","error",(-978969032)),"can update after init",inst_12127,inst_12125];
var inst_12129 = cljs.core.PersistentHashMap.fromArrays(inst_12126,inst_12128);
var inst_12130 = cljs.test.do_report.call(null,inst_12129);
var state_12213__$1 = state_12213;
var statearr_12361_12909 = state_12213__$1;
(statearr_12361_12909[(2)] = inst_12130);

(statearr_12361_12909[(1)] = (60));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12214 === (30))){
var inst_12012 = (state_12213[(2)]);
var inst_12013 = cljs.core.prn.call(null,"test failed with ",inst_12012);
var state_12213__$1 = (function (){var statearr_12362 = state_12213;
(statearr_12362[(29)] = inst_12013);

return statearr_12362;
})();
var statearr_12363_12910 = state_12213__$1;
(statearr_12363_12910[(2)] = null);

(statearr_12363_12910[(1)] = (31));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12214 === (62))){
var _ = (function (){var statearr_12364 = state_12213;
(statearr_12364[(4)] = cljs.core.rest.call(null,(state_12213[(4)])));

return statearr_12364;
})();
var state_12213__$1 = state_12213;
var ex12360 = (state_12213__$1[(2)]);
var statearr_12365_12911 = state_12213__$1;
(statearr_12365_12911[(5)] = ex12360);


var statearr_12366_12912 = state_12213__$1;
(statearr_12366_12912[(1)] = (61));

(statearr_12366_12912[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12214 === (31))){
var _ = (function (){var statearr_12367 = state_12213;
(statearr_12367[(4)] = cljs.core.cons.call(null,(34),(state_12213[(4)])));

return statearr_12367;
})();
var inst_12025 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002))];
var inst_12026 = [new cljs.core.Keyword(null,"fail","fail",(1706214930)),"can init"];
var inst_12027 = cljs.core.PersistentHashMap.fromArrays(inst_12025,inst_12026);
var inst_12028 = cljs.test.do_report.call(null,inst_12027);
var ___$1 = (function (){var statearr_12368 = state_12213;
(statearr_12368[(4)] = cljs.core.rest.call(null,(state_12213[(4)])));

return statearr_12368;
})();
var state_12213__$1 = state_12213;
var statearr_12369_12913 = state_12213__$1;
(statearr_12369_12913[(2)] = inst_12028);

(statearr_12369_12913[(1)] = (32));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12214 === (63))){
var inst_12137 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_12138 = true;
var inst_12139 = [new cljs.core.Keyword(null,"pass","pass",(1574159993)),"can update after init",inst_12138,true];
var inst_12140 = cljs.core.PersistentHashMap.fromArrays(inst_12137,inst_12139);
var inst_12141 = cljs.test.do_report.call(null,inst_12140);
var state_12213__$1 = state_12213;
var statearr_12370_12914 = state_12213__$1;
(statearr_12370_12914[(2)] = inst_12141);

(statearr_12370_12914[(1)] = (65));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
return null;
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
});})(c__19__auto__,___192__auto__,self____$1))
;
return ((function (switch__14__auto__,c__19__auto__,___192__auto__,self____$1){
return (function() {
var e2e$proposals$state_machine__15__auto__ = null;
var e2e$proposals$state_machine__15__auto____0 = (function (){
var statearr_12371 = [null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];
(statearr_12371[(0)] = e2e$proposals$state_machine__15__auto__);

(statearr_12371[(1)] = (1));

return statearr_12371;
});
var e2e$proposals$state_machine__15__auto____1 = (function (state_12213){
while(true){
var ret_value__16__auto__ = (function (){try{while(true){
var result__17__auto__ = switch__14__auto__.call(null,state_12213);
if(cljs.core.keyword_identical_QMARK_.call(null,result__17__auto__,new cljs.core.Keyword(null,"recur","recur",(-437573268)))){
continue;
} else {
return result__17__auto__;
}
break;
}
}catch (e12372){var ex__18__auto__ = e12372;
var statearr_12373_12915 = state_12213;
(statearr_12373_12915[(2)] = ex__18__auto__);


if(cljs.core.seq.call(null,(state_12213[(4)]))){
var statearr_12374_12916 = state_12213;
(statearr_12374_12916[(1)] = cljs.core.first.call(null,(state_12213[(4)])));

} else {
throw ex__18__auto__;
}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
}})();
if(cljs.core.keyword_identical_QMARK_.call(null,ret_value__16__auto__,new cljs.core.Keyword(null,"recur","recur",(-437573268)))){
var G__12917 = state_12213;
state_12213 = G__12917;
continue;
} else {
return ret_value__16__auto__;
}
break;
}
});
e2e$proposals$state_machine__15__auto__ = function(state_12213){
switch(arguments.length){
case 0:
return e2e$proposals$state_machine__15__auto____0.call(this);
case 1:
return e2e$proposals$state_machine__15__auto____1.call(this,state_12213);
}
throw(new Error('Invalid arity: ' + arguments.length));
};
e2e$proposals$state_machine__15__auto__.cljs$core$IFn$_invoke$arity$0 = e2e$proposals$state_machine__15__auto____0;
e2e$proposals$state_machine__15__auto__.cljs$core$IFn$_invoke$arity$1 = e2e$proposals$state_machine__15__auto____1;
return e2e$proposals$state_machine__15__auto__;
})()
;})(switch__14__auto__,c__19__auto__,___192__auto__,self____$1))
})();
var state__21__auto__ = (function (){var statearr_12375 = f__20__auto__.call(null);
(statearr_12375[(6)] = c__19__auto__);

return statearr_12375;
})();
return cljs.core.async.impl.ioc_helpers.run_state_machine_wrapped.call(null,state__21__auto__);
});})(c__19__auto__,___192__auto__,self____$1))
);

return c__19__auto__;
});

e2e.proposals.t_e2e$proposals11922.prototype.apply = (function (self__,args11925){
var self__ = this;
var self____$1 = this;
return self____$1.call.apply(self____$1,[self____$1].concat(cljs.core.aclone.call(null,args11925)));
});

e2e.proposals.t_e2e$proposals11922.prototype.cljs$core$IFn$_invoke$arity$1 = (function (done){
var self__ = this;
var ___192__auto__ = this;
var c__19__auto__ = cljs.core.async.chan.call(null,(1));
cljs.core.async.impl.dispatch.run.call(null,((function (c__19__auto__,___192__auto__){
return (function (){
var f__20__auto__ = (function (){var switch__14__auto__ = ((function (c__19__auto__,___192__auto__){
return (function (state_12663){
var state_val_12664 = (state_12663[(1)]);
if((state_val_12664 === (32))){
var inst_12481 = (state_12663[(2)]);
var state_12663__$1 = state_12663;
var statearr_12665_12918 = state_12663__$1;
(statearr_12665_12918[(2)] = inst_12481);

(statearr_12665_12918[(1)] = (29));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12664 === (64))){
var inst_12593 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_12594 = true;
var inst_12595 = [new cljs.core.Keyword(null,"fail","fail",(1706214930)),"can update after init",inst_12594,true];
var inst_12596 = cljs.core.PersistentHashMap.fromArrays(inst_12593,inst_12595);
var inst_12597 = cljs.test.do_report.call(null,inst_12596);
var state_12663__$1 = state_12663;
var statearr_12666_12919 = state_12663__$1;
(statearr_12666_12919[(2)] = inst_12597);

(statearr_12666_12919[(1)] = (65));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12664 === (1))){
var state_12663__$1 = state_12663;
var statearr_12667_12920 = state_12663__$1;
(statearr_12667_12920[(2)] = null);

(statearr_12667_12920[(1)] = (2));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12664 === (33))){
var inst_12464 = (state_12663[(2)]);
var inst_12465 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_12466 = null;
var inst_12467 = [new cljs.core.Keyword(null,"error","error",(-978969032)),"can init",inst_12466,inst_12464];
var inst_12468 = cljs.core.PersistentHashMap.fromArrays(inst_12465,inst_12467);
var inst_12469 = cljs.test.do_report.call(null,inst_12468);
var state_12663__$1 = state_12663;
var statearr_12668_12921 = state_12663__$1;
(statearr_12668_12921[(2)] = inst_12469);

(statearr_12668_12921[(1)] = (32));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12664 === (65))){
var inst_12599 = (state_12663[(2)]);
var _ = (function (){var statearr_12670 = state_12663;
(statearr_12670[(4)] = cljs.core.rest.call(null,(state_12663[(4)])));

return statearr_12670;
})();
var state_12663__$1 = (function (){var statearr_12671 = state_12663;
(statearr_12671[(7)] = inst_12599);

return statearr_12671;
})();
var statearr_12672_12922 = state_12663__$1;
(statearr_12672_12922[(2)] = true);

(statearr_12672_12922[(1)] = (60));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12664 === (2))){
var _ = (function (){var statearr_12673 = state_12663;
(statearr_12673[(4)] = cljs.core.cons.call(null,(5),(state_12663[(4)])));

return statearr_12673;
})();
var state_12663__$1 = state_12663;
var statearr_12674_12923 = state_12663__$1;
(statearr_12674_12923[(2)] = null);

(statearr_12674_12923[(1)] = (6));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12664 === (34))){
var _ = (function (){var statearr_12675 = state_12663;
(statearr_12675[(4)] = cljs.core.rest.call(null,(state_12663[(4)])));

return statearr_12675;
})();
var state_12663__$1 = state_12663;
var ex12669 = (state_12663__$1[(2)]);
var statearr_12676_12924 = state_12663__$1;
(statearr_12676_12924[(5)] = ex12669);


var statearr_12677_12925 = state_12663__$1;
(statearr_12677_12925[(1)] = (33));

(statearr_12677_12925[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12664 === (66))){
var inst_12609 = (state_12663[(8)]);
var inst_12609__$1 = (state_12663[(2)]);
var inst_12610 = (inst_12609__$1 instanceof cljs.core.ExceptionInfo);
var inst_12611 = cljs.core.ex_data.call(null,inst_12609__$1);
var inst_12612 = new cljs.core.Keyword(null,"error","error",(-978969032)).cljs$core$IFn$_invoke$arity$1(inst_12611);
var inst_12613 = cljs.core._EQ_.call(null,inst_12612,new cljs.core.Keyword(null,"promise-error","promise-error",(-90673560)));
var inst_12614 = ((inst_12610) && (inst_12613));
var state_12663__$1 = (function (){var statearr_12679 = state_12663;
(statearr_12679[(8)] = inst_12609__$1);

return statearr_12679;
})();
if(cljs.core.truth_(inst_12614)){
var statearr_12680_12926 = state_12663__$1;
(statearr_12680_12926[(1)] = (67));

} else {
var statearr_12681_12927 = state_12663__$1;
(statearr_12681_12927[(1)] = (68));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12664 === (3))){
var inst_12660 = (state_12663[(2)]);
var inst_12661 = done.call(null);
var state_12663__$1 = (function (){var statearr_12682 = state_12663;
(statearr_12682[(9)] = inst_12660);

return statearr_12682;
})();
return cljs.core.async.impl.ioc_helpers.return_chan.call(null,state_12663__$1,inst_12661);
} else {
if((state_val_12664 === (35))){
var _ = (function (){var statearr_12683 = state_12663;
(statearr_12683[(4)] = cljs.core.rest.call(null,(state_12663[(4)])));

return statearr_12683;
})();
var state_12663__$1 = state_12663;
var ex12678 = (state_12663__$1[(2)]);
var statearr_12684_12928 = state_12663__$1;
(statearr_12684_12928[(5)] = ex12678);


if((ex12678 instanceof Error)){
var statearr_12685_12929 = state_12663__$1;
(statearr_12685_12929[(1)] = (30));

(statearr_12685_12929[(5)] = null);

} else {
throw ex12678;

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12664 === (67))){
var inst_12609 = (state_12663[(8)]);
var inst_12616 = (function(){throw inst_12609})();
var state_12663__$1 = state_12663;
var statearr_12686_12930 = state_12663__$1;
(statearr_12686_12930[(2)] = inst_12616);

(statearr_12686_12930[(1)] = (69));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12664 === (4))){
var inst_12376 = (state_12663[(2)]);
var inst_12377 = cljs.core.prn.call(null,"======== ",inst_12376);
var state_12663__$1 = state_12663;
var statearr_12687_12931 = state_12663__$1;
(statearr_12687_12931[(2)] = inst_12377);

(statearr_12687_12931[(1)] = (3));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12664 === (36))){
var inst_12490 = (state_12663[(10)]);
var inst_12490__$1 = (state_12663[(2)]);
var inst_12491 = (inst_12490__$1 instanceof cljs.core.ExceptionInfo);
var inst_12492 = cljs.core.ex_data.call(null,inst_12490__$1);
var inst_12493 = new cljs.core.Keyword(null,"error","error",(-978969032)).cljs$core$IFn$_invoke$arity$1(inst_12492);
var inst_12494 = cljs.core._EQ_.call(null,inst_12493,new cljs.core.Keyword(null,"promise-error","promise-error",(-90673560)));
var inst_12495 = ((inst_12491) && (inst_12494));
var state_12663__$1 = (function (){var statearr_12689 = state_12663;
(statearr_12689[(10)] = inst_12490__$1);

return statearr_12689;
})();
if(cljs.core.truth_(inst_12495)){
var statearr_12690_12932 = state_12663__$1;
(statearr_12690_12932[(1)] = (37));

} else {
var statearr_12691_12933 = state_12663__$1;
(statearr_12691_12933[(1)] = (38));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12664 === (68))){
var inst_12609 = (state_12663[(8)]);
var state_12663__$1 = state_12663;
var statearr_12692_12934 = state_12663__$1;
(statearr_12692_12934[(2)] = inst_12609);

(statearr_12692_12934[(1)] = (69));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12664 === (5))){
var _ = (function (){var statearr_12693 = state_12663;
(statearr_12693[(4)] = cljs.core.rest.call(null,(state_12663[(4)])));

return statearr_12693;
})();
var state_12663__$1 = state_12663;
var ex12688 = (state_12663__$1[(2)]);
var statearr_12694_12935 = state_12663__$1;
(statearr_12694_12935[(5)] = ex12688);


if((ex12688 instanceof Error)){
var statearr_12695_12936 = state_12663__$1;
(statearr_12695_12936[(1)] = (4));

(statearr_12695_12936[(5)] = null);

} else {
throw ex12688;

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12664 === (37))){
var inst_12490 = (state_12663[(10)]);
var inst_12497 = (function(){throw inst_12490})();
var state_12663__$1 = state_12663;
var statearr_12696_12937 = state_12663__$1;
(statearr_12696_12937[(2)] = inst_12497);

(statearr_12696_12937[(1)] = (39));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12664 === (69))){
var inst_12619 = (state_12663[(2)]);
var state_12663__$1 = (function (){var statearr_12697 = state_12663;
(statearr_12697[(11)] = inst_12619);

return statearr_12697;
})();
var statearr_12698_12938 = state_12663__$1;
(statearr_12698_12938[(2)] = null);

(statearr_12698_12938[(1)] = (70));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12664 === (6))){
var _ = (function (){var statearr_12699 = state_12663;
(statearr_12699[(4)] = cljs.core.cons.call(null,(19),(state_12663[(4)])));

return statearr_12699;
})();
var inst_12427 = eos_cljs.core.transact.call(null,e2e.proposals.prop_acc,"update",e2e.proposals.prop_config);
var inst_12428 = cljs.core.async.interop.p__GT_c.call(null,inst_12427);
var state_12663__$1 = state_12663;
return cljs.core.async.impl.ioc_helpers.take_BANG_.call(null,state_12663__$1,(20),inst_12428);
} else {
if((state_val_12664 === (38))){
var inst_12490 = (state_12663[(10)]);
var state_12663__$1 = state_12663;
var statearr_12700_12939 = state_12663__$1;
(statearr_12700_12939[(2)] = inst_12490);

(statearr_12700_12939[(1)] = (39));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12664 === (70))){
var inst_12619 = (state_12663[(11)]);
var inst_12633 = (state_12663[(12)]);
var inst_12634 = (state_12663[(13)]);
var _ = (function (){var statearr_12701 = state_12663;
(statearr_12701[(4)] = cljs.core.cons.call(null,(73),(state_12663[(4)])));

return statearr_12701;
})();
var inst_12631 = cljs.core.count.call(null,inst_12619);
var inst_12632 = (new cljs.core.List(null,(1),null,(1),null));
var inst_12633__$1 = (new cljs.core.List(null,inst_12631,inst_12632,(2),null));
var inst_12634__$1 = cljs.core.apply.call(null,cljs.core._EQ_,inst_12633__$1);
var state_12663__$1 = (function (){var statearr_12702 = state_12663;
(statearr_12702[(12)] = inst_12633__$1);

(statearr_12702[(13)] = inst_12634__$1);

return statearr_12702;
})();
if(cljs.core.truth_(inst_12634__$1)){
var statearr_12703_12940 = state_12663__$1;
(statearr_12703_12940[(1)] = (74));

} else {
var statearr_12704_12941 = state_12663__$1;
(statearr_12704_12941[(1)] = (75));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12664 === (7))){
var inst_12461 = (state_12663[(2)]);
var state_12663__$1 = (function (){var statearr_12705 = state_12663;
(statearr_12705[(14)] = inst_12461);

return statearr_12705;
})();
var statearr_12706_12942 = state_12663__$1;
(statearr_12706_12942[(2)] = null);

(statearr_12706_12942[(1)] = (28));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12664 === (39))){
var inst_12500 = (state_12663[(2)]);
var state_12663__$1 = (function (){var statearr_12707 = state_12663;
(statearr_12707[(15)] = inst_12500);

return statearr_12707;
})();
var statearr_12708_12943 = state_12663__$1;
(statearr_12708_12943[(2)] = null);

(statearr_12708_12943[(1)] = (40));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12664 === (71))){
var inst_12657 = (state_12663[(2)]);
var _ = (function (){var statearr_12709 = state_12663;
(statearr_12709[(4)] = cljs.core.rest.call(null,(state_12663[(4)])));

return statearr_12709;
})();
var state_12663__$1 = state_12663;
var statearr_12710_12944 = state_12663__$1;
(statearr_12710_12944[(2)] = inst_12657);

(statearr_12710_12944[(1)] = (3));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12664 === (8))){
var inst_12385 = (state_12663[(16)]);
var inst_12386 = (state_12663[(17)]);
var inst_12383 = (state_12663[(2)]);
var inst_12384 = inst_12383.cause;
var inst_12385__$1 = inst_12384.message;
var inst_12386__$1 = clojure.string.ends_with_QMARK_.call(null,inst_12385__$1,"not yet initialized");
var inst_12387 = (!(inst_12386__$1));
var state_12663__$1 = (function (){var statearr_12711 = state_12663;
(statearr_12711[(16)] = inst_12385__$1);

(statearr_12711[(17)] = inst_12386__$1);

return statearr_12711;
})();
if(inst_12387){
var statearr_12712_12945 = state_12663__$1;
(statearr_12712_12945[(1)] = (9));

} else {
var statearr_12713_12946 = state_12663__$1;
(statearr_12713_12946[(1)] = (10));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12664 === (40))){
var _ = (function (){var statearr_12714 = state_12663;
(statearr_12714[(4)] = cljs.core.cons.call(null,(43),(state_12663[(4)])));

return statearr_12714;
})();
var state_12663__$1 = state_12663;
var statearr_12715_12947 = state_12663__$1;
(statearr_12715_12947[(1)] = (44));



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12664 === (72))){
var inst_12620 = (state_12663[(2)]);
var inst_12621 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_12622 = cljs.core.list(new cljs.core.Symbol(null,"=","=",(-1501502141),null),cljs.core.list(new cljs.core.Symbol(null,"count","count",(-514511684),null),new cljs.core.Symbol(null,"rows","rows",(-1804386089),null)),(1));
var inst_12623 = [new cljs.core.Keyword(null,"error","error",(-978969032)),null,inst_12622,inst_12620];
var inst_12624 = cljs.core.PersistentHashMap.fromArrays(inst_12621,inst_12623);
var inst_12625 = cljs.test.do_report.call(null,inst_12624);
var state_12663__$1 = state_12663;
var statearr_12717_12948 = state_12663__$1;
(statearr_12717_12948[(2)] = inst_12625);

(statearr_12717_12948[(1)] = (71));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12664 === (9))){
var inst_12385 = (state_12663[(16)]);
var inst_12389 = ["expected =","not yet initialized"," actual = ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_12385)].join('');
var inst_12390 = cljs.core.prn.call(null,inst_12389);
var state_12663__$1 = state_12663;
var statearr_12719_12949 = state_12663__$1;
(statearr_12719_12949[(2)] = inst_12390);

(statearr_12719_12949[(1)] = (11));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12664 === (41))){
var inst_12528 = (state_12663[(2)]);
var _ = (function (){var statearr_12720 = state_12663;
(statearr_12720[(4)] = cljs.core.rest.call(null,(state_12663[(4)])));

return statearr_12720;
})();
var state_12663__$1 = state_12663;
var statearr_12721_12950 = state_12663__$1;
(statearr_12721_12950[(2)] = inst_12528);

(statearr_12721_12950[(1)] = (29));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12664 === (73))){
var _ = (function (){var statearr_12722 = state_12663;
(statearr_12722[(4)] = cljs.core.rest.call(null,(state_12663[(4)])));

return statearr_12722;
})();
var state_12663__$1 = state_12663;
var ex12718 = (state_12663__$1[(2)]);
var statearr_12723_12951 = state_12663__$1;
(statearr_12723_12951[(5)] = ex12718);


var statearr_12724_12952 = state_12663__$1;
(statearr_12724_12952[(1)] = (72));

(statearr_12724_12952[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12664 === (10))){
var state_12663__$1 = state_12663;
var statearr_12725_12953 = state_12663__$1;
(statearr_12725_12953[(2)] = null);

(statearr_12725_12953[(1)] = (11));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12664 === (42))){
var inst_12501 = (state_12663[(2)]);
var inst_12502 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_12503 = true;
var inst_12504 = [new cljs.core.Keyword(null,"error","error",(-978969032)),"can init",inst_12503,inst_12501];
var inst_12505 = cljs.core.PersistentHashMap.fromArrays(inst_12502,inst_12504);
var inst_12506 = cljs.test.do_report.call(null,inst_12505);
var state_12663__$1 = state_12663;
var statearr_12726_12954 = state_12663__$1;
(statearr_12726_12954[(2)] = inst_12506);

(statearr_12726_12954[(1)] = (41));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12664 === (74))){
var inst_12633 = (state_12663[(12)]);
var inst_12636 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_12637 = cljs.core.list(new cljs.core.Symbol(null,"=","=",(-1501502141),null),cljs.core.list(new cljs.core.Symbol(null,"count","count",(-514511684),null),new cljs.core.Symbol(null,"rows","rows",(-1804386089),null)),(1));
var inst_12638 = cljs.core.cons.call(null,cljs.core._EQ_,inst_12633);
var inst_12639 = [new cljs.core.Keyword(null,"pass","pass",(1574159993)),null,inst_12637,inst_12638];
var inst_12640 = cljs.core.PersistentHashMap.fromArrays(inst_12636,inst_12639);
var inst_12641 = cljs.test.do_report.call(null,inst_12640);
var state_12663__$1 = state_12663;
var statearr_12728_12955 = state_12663__$1;
(statearr_12728_12955[(2)] = inst_12641);

(statearr_12728_12955[(1)] = (76));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12664 === (11))){
var inst_12393 = (state_12663[(2)]);
var state_12663__$1 = (function (){var statearr_12729 = state_12663;
(statearr_12729[(18)] = inst_12393);

return statearr_12729;
})();
var statearr_12730_12956 = state_12663__$1;
(statearr_12730_12956[(2)] = null);

(statearr_12730_12956[(1)] = (12));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12664 === (43))){
var _ = (function (){var statearr_12731 = state_12663;
(statearr_12731[(4)] = cljs.core.rest.call(null,(state_12663[(4)])));

return statearr_12731;
})();
var state_12663__$1 = state_12663;
var ex12727 = (state_12663__$1[(2)]);
var statearr_12732_12957 = state_12663__$1;
(statearr_12732_12957[(5)] = ex12727);


var statearr_12733_12958 = state_12663__$1;
(statearr_12733_12958[(1)] = (42));

(statearr_12733_12958[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12664 === (75))){
var inst_12633 = (state_12663[(12)]);
var inst_12643 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_12644 = cljs.core.list(new cljs.core.Symbol(null,"=","=",(-1501502141),null),cljs.core.list(new cljs.core.Symbol(null,"count","count",(-514511684),null),new cljs.core.Symbol(null,"rows","rows",(-1804386089),null)),(1));
var inst_12645 = new cljs.core.Symbol(null,"not","not",(1044554643),null);
var inst_12646 = new cljs.core.Symbol(null,"=","=",(-1501502141),null);
var inst_12647 = cljs.core.cons.call(null,inst_12646,inst_12633);
var inst_12648 = (new cljs.core.List(null,inst_12647,null,(1),null));
var inst_12649 = (new cljs.core.List(null,inst_12645,inst_12648,(2),null));
var inst_12650 = [new cljs.core.Keyword(null,"fail","fail",(1706214930)),null,inst_12644,inst_12649];
var inst_12651 = cljs.core.PersistentHashMap.fromArrays(inst_12643,inst_12650);
var inst_12652 = cljs.test.do_report.call(null,inst_12651);
var state_12663__$1 = state_12663;
var statearr_12734_12959 = state_12663__$1;
(statearr_12734_12959[(2)] = inst_12652);

(statearr_12734_12959[(1)] = (76));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12664 === (12))){
var inst_12386 = (state_12663[(17)]);
var _ = (function (){var statearr_12735 = state_12663;
(statearr_12735[(4)] = cljs.core.cons.call(null,(15),(state_12663[(4)])));

return statearr_12735;
})();
var state_12663__$1 = state_12663;
if(cljs.core.truth_(inst_12386)){
var statearr_12736_12960 = state_12663__$1;
(statearr_12736_12960[(1)] = (16));

} else {
var statearr_12737_12961 = state_12663__$1;
(statearr_12737_12961[(1)] = (17));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12664 === (44))){
var inst_12513 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_12514 = true;
var inst_12515 = [new cljs.core.Keyword(null,"pass","pass",(1574159993)),"can init",inst_12514,true];
var inst_12516 = cljs.core.PersistentHashMap.fromArrays(inst_12513,inst_12515);
var inst_12517 = cljs.test.do_report.call(null,inst_12516);
var state_12663__$1 = state_12663;
var statearr_12738_12962 = state_12663__$1;
(statearr_12738_12962[(2)] = inst_12517);

(statearr_12738_12962[(1)] = (46));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12664 === (76))){
var inst_12634 = (state_12663[(13)]);
var inst_12654 = (state_12663[(2)]);
var _ = (function (){var statearr_12739 = state_12663;
(statearr_12739[(4)] = cljs.core.rest.call(null,(state_12663[(4)])));

return statearr_12739;
})();
var state_12663__$1 = (function (){var statearr_12740 = state_12663;
(statearr_12740[(19)] = inst_12654);

return statearr_12740;
})();
var statearr_12741_12963 = state_12663__$1;
(statearr_12741_12963[(2)] = inst_12634);

(statearr_12741_12963[(1)] = (71));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12664 === (13))){
var inst_12421 = (state_12663[(2)]);
var state_12663__$1 = state_12663;
var statearr_12742_12964 = state_12663__$1;
(statearr_12742_12964[(2)] = inst_12421);

(statearr_12742_12964[(1)] = (7));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12664 === (45))){
var inst_12519 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_12520 = true;
var inst_12521 = [new cljs.core.Keyword(null,"fail","fail",(1706214930)),"can init",inst_12520,true];
var inst_12522 = cljs.core.PersistentHashMap.fromArrays(inst_12519,inst_12521);
var inst_12523 = cljs.test.do_report.call(null,inst_12522);
var state_12663__$1 = state_12663;
var statearr_12743_12965 = state_12663__$1;
(statearr_12743_12965[(2)] = inst_12523);

(statearr_12743_12965[(1)] = (46));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12664 === (14))){
var inst_12394 = (state_12663[(2)]);
var inst_12395 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_12396 = new cljs.core.Symbol("e2e.macros","pass?","e2e.macros/pass?",(894145299),null);
var inst_12397 = [new cljs.core.Keyword(null,"error","error",(-978969032)),"need init to update",inst_12396,inst_12394];
var inst_12398 = cljs.core.PersistentHashMap.fromArrays(inst_12395,inst_12397);
var inst_12399 = cljs.test.do_report.call(null,inst_12398);
var state_12663__$1 = state_12663;
var statearr_12745_12966 = state_12663__$1;
(statearr_12745_12966[(2)] = inst_12399);

(statearr_12745_12966[(1)] = (13));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12664 === (46))){
var inst_12525 = (state_12663[(2)]);
var _ = (function (){var statearr_12746 = state_12663;
(statearr_12746[(4)] = cljs.core.rest.call(null,(state_12663[(4)])));

return statearr_12746;
})();
var state_12663__$1 = (function (){var statearr_12747 = state_12663;
(statearr_12747[(20)] = inst_12525);

return statearr_12747;
})();
var statearr_12748_12967 = state_12663__$1;
(statearr_12748_12967[(2)] = true);

(statearr_12748_12967[(1)] = (41));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12664 === (15))){
var _ = (function (){var statearr_12749 = state_12663;
(statearr_12749[(4)] = cljs.core.rest.call(null,(state_12663[(4)])));

return statearr_12749;
})();
var state_12663__$1 = state_12663;
var ex12744 = (state_12663__$1[(2)]);
var statearr_12750_12968 = state_12663__$1;
(statearr_12750_12968[(5)] = ex12744);


var statearr_12751_12969 = state_12663__$1;
(statearr_12751_12969[(1)] = (14));

(statearr_12751_12969[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12664 === (47))){
var _ = (function (){var statearr_12752 = state_12663;
(statearr_12752[(4)] = cljs.core.cons.call(null,(54),(state_12663[(4)])));

return statearr_12752;
})();
var inst_12557 = cljs.core.PersistentVector.EMPTY_NODE;
var inst_12558 = [new cljs.core.Keyword(null,"proposal_cost","proposal_cost",(1707335169)),new cljs.core.Keyword(null,"quantity","quantity",(-1929050694))];
var inst_12559 = (new cljs.core.PersistentVector(null,(2),(5),inst_12557,inst_12558,null));
var inst_12560 = cljs.core.assoc_in.call(null,e2e.proposals.prop_config,inst_12559,"0.0000 EFX");
var inst_12561 = eos_cljs.core.transact.call(null,e2e.proposals.prop_acc,"update",inst_12560);
var inst_12562 = cljs.core.async.interop.p__GT_c.call(null,inst_12561);
var state_12663__$1 = state_12663;
return cljs.core.async.impl.ioc_helpers.take_BANG_.call(null,state_12663__$1,(55),inst_12562);
} else {
if((state_val_12664 === (16))){
var inst_12386 = (state_12663[(17)]);
var inst_12406 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_12407 = new cljs.core.Symbol("e2e.macros","pass?","e2e.macros/pass?",(894145299),null);
var inst_12408 = [new cljs.core.Keyword(null,"pass","pass",(1574159993)),"need init to update",inst_12407,inst_12386];
var inst_12409 = cljs.core.PersistentHashMap.fromArrays(inst_12406,inst_12408);
var inst_12410 = cljs.test.do_report.call(null,inst_12409);
var state_12663__$1 = state_12663;
var statearr_12753_12970 = state_12663__$1;
(statearr_12753_12970[(2)] = inst_12410);

(statearr_12753_12970[(1)] = (18));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12664 === (48))){
var inst_12605 = (state_12663[(2)]);
var inst_12606 = eos_cljs.core.get_table_rows.call(null,e2e.proposals.prop_acc,e2e.proposals.prop_acc,"config");
var inst_12607 = cljs.core.async.interop.p__GT_c.call(null,inst_12606);
var state_12663__$1 = (function (){var statearr_12754 = state_12663;
(statearr_12754[(21)] = inst_12605);

return statearr_12754;
})();
return cljs.core.async.impl.ioc_helpers.take_BANG_.call(null,state_12663__$1,(66),inst_12607);
} else {
if((state_val_12664 === (17))){
var inst_12386 = (state_12663[(17)]);
var inst_12412 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_12413 = new cljs.core.Symbol("e2e.macros","pass?","e2e.macros/pass?",(894145299),null);
var inst_12414 = [new cljs.core.Keyword(null,"fail","fail",(1706214930)),"need init to update",inst_12413,inst_12386];
var inst_12415 = cljs.core.PersistentHashMap.fromArrays(inst_12412,inst_12414);
var inst_12416 = cljs.test.do_report.call(null,inst_12415);
var state_12663__$1 = state_12663;
var statearr_12755_12971 = state_12663__$1;
(statearr_12755_12971[(2)] = inst_12416);

(statearr_12755_12971[(1)] = (18));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12664 === (49))){
var inst_12532 = (state_12663[(2)]);
var inst_12533 = cljs.core.prn.call(null,"test failed with ",inst_12532);
var state_12663__$1 = (function (){var statearr_12756 = state_12663;
(statearr_12756[(22)] = inst_12533);

return statearr_12756;
})();
var statearr_12757_12972 = state_12663__$1;
(statearr_12757_12972[(2)] = null);

(statearr_12757_12972[(1)] = (50));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12664 === (18))){
var inst_12386 = (state_12663[(17)]);
var inst_12418 = (state_12663[(2)]);
var _ = (function (){var statearr_12759 = state_12663;
(statearr_12759[(4)] = cljs.core.rest.call(null,(state_12663[(4)])));

return statearr_12759;
})();
var state_12663__$1 = (function (){var statearr_12760 = state_12663;
(statearr_12760[(23)] = inst_12418);

return statearr_12760;
})();
var statearr_12761_12973 = state_12663__$1;
(statearr_12761_12973[(2)] = inst_12386);

(statearr_12761_12973[(1)] = (13));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12664 === (50))){
var _ = (function (){var statearr_12762 = state_12663;
(statearr_12762[(4)] = cljs.core.cons.call(null,(53),(state_12663[(4)])));

return statearr_12762;
})();
var inst_12545 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002))];
var inst_12546 = [new cljs.core.Keyword(null,"fail","fail",(1706214930)),"can update after init"];
var inst_12547 = cljs.core.PersistentHashMap.fromArrays(inst_12545,inst_12546);
var inst_12548 = cljs.test.do_report.call(null,inst_12547);
var ___$1 = (function (){var statearr_12763 = state_12663;
(statearr_12763[(4)] = cljs.core.rest.call(null,(state_12663[(4)])));

return statearr_12763;
})();
var state_12663__$1 = state_12663;
var statearr_12764_12974 = state_12663__$1;
(statearr_12764_12974[(2)] = inst_12548);

(statearr_12764_12974[(1)] = (51));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12664 === (19))){
var _ = (function (){var statearr_12765 = state_12663;
(statearr_12765[(4)] = cljs.core.rest.call(null,(state_12663[(4)])));

return statearr_12765;
})();
var state_12663__$1 = state_12663;
var ex12758 = (state_12663__$1[(2)]);
var statearr_12766_12975 = state_12663__$1;
(statearr_12766_12975[(5)] = ex12758);


if((ex12758 instanceof Error)){
var statearr_12767_12976 = state_12663__$1;
(statearr_12767_12976[(1)] = (8));

(statearr_12767_12976[(5)] = null);

} else {
throw ex12758;

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12664 === (51))){
var inst_12551 = (state_12663[(2)]);
var state_12663__$1 = state_12663;
var statearr_12768_12977 = state_12663__$1;
(statearr_12768_12977[(2)] = inst_12551);

(statearr_12768_12977[(1)] = (48));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12664 === (20))){
var inst_12430 = (state_12663[(24)]);
var inst_12430__$1 = (state_12663[(2)]);
var inst_12431 = (inst_12430__$1 instanceof cljs.core.ExceptionInfo);
var inst_12432 = cljs.core.ex_data.call(null,inst_12430__$1);
var inst_12433 = new cljs.core.Keyword(null,"error","error",(-978969032)).cljs$core$IFn$_invoke$arity$1(inst_12432);
var inst_12434 = cljs.core._EQ_.call(null,inst_12433,new cljs.core.Keyword(null,"promise-error","promise-error",(-90673560)));
var inst_12435 = ((inst_12431) && (inst_12434));
var state_12663__$1 = (function (){var statearr_12769 = state_12663;
(statearr_12769[(24)] = inst_12430__$1);

return statearr_12769;
})();
if(cljs.core.truth_(inst_12435)){
var statearr_12770_12978 = state_12663__$1;
(statearr_12770_12978[(1)] = (21));

} else {
var statearr_12771_12979 = state_12663__$1;
(statearr_12771_12979[(1)] = (22));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12664 === (52))){
var inst_12534 = (state_12663[(2)]);
var inst_12535 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_12536 = null;
var inst_12537 = [new cljs.core.Keyword(null,"error","error",(-978969032)),"can update after init",inst_12536,inst_12534];
var inst_12538 = cljs.core.PersistentHashMap.fromArrays(inst_12535,inst_12537);
var inst_12539 = cljs.test.do_report.call(null,inst_12538);
var state_12663__$1 = state_12663;
var statearr_12773_12980 = state_12663__$1;
(statearr_12773_12980[(2)] = inst_12539);

(statearr_12773_12980[(1)] = (51));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12664 === (21))){
var inst_12430 = (state_12663[(24)]);
var inst_12437 = (function(){throw inst_12430})();
var state_12663__$1 = state_12663;
var statearr_12774_12981 = state_12663__$1;
(statearr_12774_12981[(2)] = inst_12437);

(statearr_12774_12981[(1)] = (23));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12664 === (53))){
var _ = (function (){var statearr_12776 = state_12663;
(statearr_12776[(4)] = cljs.core.rest.call(null,(state_12663[(4)])));

return statearr_12776;
})();
var state_12663__$1 = state_12663;
var ex12772 = (state_12663__$1[(2)]);
var statearr_12777_12982 = state_12663__$1;
(statearr_12777_12982[(5)] = ex12772);


var statearr_12778_12983 = state_12663__$1;
(statearr_12778_12983[(1)] = (52));

(statearr_12778_12983[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12664 === (22))){
var inst_12430 = (state_12663[(24)]);
var state_12663__$1 = state_12663;
var statearr_12779_12984 = state_12663__$1;
(statearr_12779_12984[(2)] = inst_12430);

(statearr_12779_12984[(1)] = (23));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12664 === (54))){
var _ = (function (){var statearr_12780 = state_12663;
(statearr_12780[(4)] = cljs.core.rest.call(null,(state_12663[(4)])));

return statearr_12780;
})();
var state_12663__$1 = state_12663;
var ex12775 = (state_12663__$1[(2)]);
var statearr_12781_12985 = state_12663__$1;
(statearr_12781_12985[(5)] = ex12775);


if((ex12775 instanceof Error)){
var statearr_12782_12986 = state_12663__$1;
(statearr_12782_12986[(1)] = (49));

(statearr_12782_12986[(5)] = null);

} else {
throw ex12775;

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12664 === (23))){
var inst_12440 = (state_12663[(2)]);
var state_12663__$1 = (function (){var statearr_12783 = state_12663;
(statearr_12783[(25)] = inst_12440);

return statearr_12783;
})();
var statearr_12784_12987 = state_12663__$1;
(statearr_12784_12987[(2)] = null);

(statearr_12784_12987[(1)] = (24));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12664 === (55))){
var inst_12564 = (state_12663[(26)]);
var inst_12564__$1 = (state_12663[(2)]);
var inst_12565 = (inst_12564__$1 instanceof cljs.core.ExceptionInfo);
var inst_12566 = cljs.core.ex_data.call(null,inst_12564__$1);
var inst_12567 = new cljs.core.Keyword(null,"error","error",(-978969032)).cljs$core$IFn$_invoke$arity$1(inst_12566);
var inst_12568 = cljs.core._EQ_.call(null,inst_12567,new cljs.core.Keyword(null,"promise-error","promise-error",(-90673560)));
var inst_12569 = ((inst_12565) && (inst_12568));
var state_12663__$1 = (function (){var statearr_12785 = state_12663;
(statearr_12785[(26)] = inst_12564__$1);

return statearr_12785;
})();
if(cljs.core.truth_(inst_12569)){
var statearr_12786_12988 = state_12663__$1;
(statearr_12786_12988[(1)] = (56));

} else {
var statearr_12787_12989 = state_12663__$1;
(statearr_12787_12989[(1)] = (57));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12664 === (24))){
var _ = (function (){var statearr_12788 = state_12663;
(statearr_12788[(4)] = cljs.core.cons.call(null,(27),(state_12663[(4)])));

return statearr_12788;
})();
var inst_12452 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002))];
var inst_12453 = [new cljs.core.Keyword(null,"fail","fail",(1706214930)),"need init to update"];
var inst_12454 = cljs.core.PersistentHashMap.fromArrays(inst_12452,inst_12453);
var inst_12455 = cljs.test.do_report.call(null,inst_12454);
var ___$1 = (function (){var statearr_12789 = state_12663;
(statearr_12789[(4)] = cljs.core.rest.call(null,(state_12663[(4)])));

return statearr_12789;
})();
var state_12663__$1 = state_12663;
var statearr_12790_12990 = state_12663__$1;
(statearr_12790_12990[(2)] = inst_12455);

(statearr_12790_12990[(1)] = (25));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12664 === (56))){
var inst_12564 = (state_12663[(26)]);
var inst_12571 = (function(){throw inst_12564})();
var state_12663__$1 = state_12663;
var statearr_12791_12991 = state_12663__$1;
(statearr_12791_12991[(2)] = inst_12571);

(statearr_12791_12991[(1)] = (58));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12664 === (25))){
var inst_12458 = (state_12663[(2)]);
var _ = (function (){var statearr_12792 = state_12663;
(statearr_12792[(4)] = cljs.core.rest.call(null,(state_12663[(4)])));

return statearr_12792;
})();
var state_12663__$1 = state_12663;
var statearr_12793_12992 = state_12663__$1;
(statearr_12793_12992[(2)] = inst_12458);

(statearr_12793_12992[(1)] = (7));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12664 === (57))){
var inst_12564 = (state_12663[(26)]);
var state_12663__$1 = state_12663;
var statearr_12794_12993 = state_12663__$1;
(statearr_12794_12993[(2)] = inst_12564);

(statearr_12794_12993[(1)] = (58));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12664 === (26))){
var inst_12441 = (state_12663[(2)]);
var inst_12442 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_12443 = null;
var inst_12444 = [new cljs.core.Keyword(null,"error","error",(-978969032)),"need init to update",inst_12443,inst_12441];
var inst_12445 = cljs.core.PersistentHashMap.fromArrays(inst_12442,inst_12444);
var inst_12446 = cljs.test.do_report.call(null,inst_12445);
var state_12663__$1 = state_12663;
var statearr_12796_12994 = state_12663__$1;
(statearr_12796_12994[(2)] = inst_12446);

(statearr_12796_12994[(1)] = (25));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12664 === (58))){
var inst_12574 = (state_12663[(2)]);
var state_12663__$1 = (function (){var statearr_12797 = state_12663;
(statearr_12797[(27)] = inst_12574);

return statearr_12797;
})();
var statearr_12798_12995 = state_12663__$1;
(statearr_12798_12995[(2)] = null);

(statearr_12798_12995[(1)] = (59));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12664 === (27))){
var _ = (function (){var statearr_12799 = state_12663;
(statearr_12799[(4)] = cljs.core.rest.call(null,(state_12663[(4)])));

return statearr_12799;
})();
var state_12663__$1 = state_12663;
var ex12795 = (state_12663__$1[(2)]);
var statearr_12800_12996 = state_12663__$1;
(statearr_12800_12996[(5)] = ex12795);


var statearr_12801_12997 = state_12663__$1;
(statearr_12801_12997[(1)] = (26));

(statearr_12801_12997[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12664 === (59))){
var _ = (function (){var statearr_12802 = state_12663;
(statearr_12802[(4)] = cljs.core.cons.call(null,(62),(state_12663[(4)])));

return statearr_12802;
})();
var state_12663__$1 = state_12663;
var statearr_12803_12998 = state_12663__$1;
(statearr_12803_12998[(1)] = (63));



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12664 === (28))){
var _ = (function (){var statearr_12805 = state_12663;
(statearr_12805[(4)] = cljs.core.cons.call(null,(35),(state_12663[(4)])));

return statearr_12805;
})();
var inst_12487 = eos_cljs.core.transact.call(null,e2e.proposals.prop_acc,"init",e2e.proposals.prop_config);
var inst_12488 = cljs.core.async.interop.p__GT_c.call(null,inst_12487);
var state_12663__$1 = state_12663;
return cljs.core.async.impl.ioc_helpers.take_BANG_.call(null,state_12663__$1,(36),inst_12488);
} else {
if((state_val_12664 === (60))){
var inst_12602 = (state_12663[(2)]);
var _ = (function (){var statearr_12806 = state_12663;
(statearr_12806[(4)] = cljs.core.rest.call(null,(state_12663[(4)])));

return statearr_12806;
})();
var state_12663__$1 = state_12663;
var statearr_12807_12999 = state_12663__$1;
(statearr_12807_12999[(2)] = inst_12602);

(statearr_12807_12999[(1)] = (48));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12664 === (29))){
var inst_12531 = (state_12663[(2)]);
var state_12663__$1 = (function (){var statearr_12808 = state_12663;
(statearr_12808[(28)] = inst_12531);

return statearr_12808;
})();
var statearr_12809_13000 = state_12663__$1;
(statearr_12809_13000[(2)] = null);

(statearr_12809_13000[(1)] = (47));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12664 === (61))){
var inst_12575 = (state_12663[(2)]);
var inst_12576 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_12577 = true;
var inst_12578 = [new cljs.core.Keyword(null,"error","error",(-978969032)),"can update after init",inst_12577,inst_12575];
var inst_12579 = cljs.core.PersistentHashMap.fromArrays(inst_12576,inst_12578);
var inst_12580 = cljs.test.do_report.call(null,inst_12579);
var state_12663__$1 = state_12663;
var statearr_12811_13001 = state_12663__$1;
(statearr_12811_13001[(2)] = inst_12580);

(statearr_12811_13001[(1)] = (60));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12664 === (30))){
var inst_12462 = (state_12663[(2)]);
var inst_12463 = cljs.core.prn.call(null,"test failed with ",inst_12462);
var state_12663__$1 = (function (){var statearr_12812 = state_12663;
(statearr_12812[(29)] = inst_12463);

return statearr_12812;
})();
var statearr_12813_13002 = state_12663__$1;
(statearr_12813_13002[(2)] = null);

(statearr_12813_13002[(1)] = (31));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12664 === (62))){
var _ = (function (){var statearr_12814 = state_12663;
(statearr_12814[(4)] = cljs.core.rest.call(null,(state_12663[(4)])));

return statearr_12814;
})();
var state_12663__$1 = state_12663;
var ex12810 = (state_12663__$1[(2)]);
var statearr_12815_13003 = state_12663__$1;
(statearr_12815_13003[(5)] = ex12810);


var statearr_12816_13004 = state_12663__$1;
(statearr_12816_13004[(1)] = (61));

(statearr_12816_13004[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12664 === (31))){
var _ = (function (){var statearr_12817 = state_12663;
(statearr_12817[(4)] = cljs.core.cons.call(null,(34),(state_12663[(4)])));

return statearr_12817;
})();
var inst_12475 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002))];
var inst_12476 = [new cljs.core.Keyword(null,"fail","fail",(1706214930)),"can init"];
var inst_12477 = cljs.core.PersistentHashMap.fromArrays(inst_12475,inst_12476);
var inst_12478 = cljs.test.do_report.call(null,inst_12477);
var ___$1 = (function (){var statearr_12818 = state_12663;
(statearr_12818[(4)] = cljs.core.rest.call(null,(state_12663[(4)])));

return statearr_12818;
})();
var state_12663__$1 = state_12663;
var statearr_12819_13005 = state_12663__$1;
(statearr_12819_13005[(2)] = inst_12478);

(statearr_12819_13005[(1)] = (32));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_12664 === (63))){
var inst_12587 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_12588 = true;
var inst_12589 = [new cljs.core.Keyword(null,"pass","pass",(1574159993)),"can update after init",inst_12588,true];
var inst_12590 = cljs.core.PersistentHashMap.fromArrays(inst_12587,inst_12589);
var inst_12591 = cljs.test.do_report.call(null,inst_12590);
var state_12663__$1 = state_12663;
var statearr_12820_13006 = state_12663__$1;
(statearr_12820_13006[(2)] = inst_12591);

(statearr_12820_13006[(1)] = (65));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
return null;
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
});})(c__19__auto__,___192__auto__))
;
return ((function (switch__14__auto__,c__19__auto__,___192__auto__){
return (function() {
var e2e$proposals$state_machine__15__auto__ = null;
var e2e$proposals$state_machine__15__auto____0 = (function (){
var statearr_12821 = [null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];
(statearr_12821[(0)] = e2e$proposals$state_machine__15__auto__);

(statearr_12821[(1)] = (1));

return statearr_12821;
});
var e2e$proposals$state_machine__15__auto____1 = (function (state_12663){
while(true){
var ret_value__16__auto__ = (function (){try{while(true){
var result__17__auto__ = switch__14__auto__.call(null,state_12663);
if(cljs.core.keyword_identical_QMARK_.call(null,result__17__auto__,new cljs.core.Keyword(null,"recur","recur",(-437573268)))){
continue;
} else {
return result__17__auto__;
}
break;
}
}catch (e12822){var ex__18__auto__ = e12822;
var statearr_12823_13007 = state_12663;
(statearr_12823_13007[(2)] = ex__18__auto__);


if(cljs.core.seq.call(null,(state_12663[(4)]))){
var statearr_12824_13008 = state_12663;
(statearr_12824_13008[(1)] = cljs.core.first.call(null,(state_12663[(4)])));

} else {
throw ex__18__auto__;
}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
}})();
if(cljs.core.keyword_identical_QMARK_.call(null,ret_value__16__auto__,new cljs.core.Keyword(null,"recur","recur",(-437573268)))){
var G__13009 = state_12663;
state_12663 = G__13009;
continue;
} else {
return ret_value__16__auto__;
}
break;
}
});
e2e$proposals$state_machine__15__auto__ = function(state_12663){
switch(arguments.length){
case 0:
return e2e$proposals$state_machine__15__auto____0.call(this);
case 1:
return e2e$proposals$state_machine__15__auto____1.call(this,state_12663);
}
throw(new Error('Invalid arity: ' + arguments.length));
};
e2e$proposals$state_machine__15__auto__.cljs$core$IFn$_invoke$arity$0 = e2e$proposals$state_machine__15__auto____0;
e2e$proposals$state_machine__15__auto__.cljs$core$IFn$_invoke$arity$1 = e2e$proposals$state_machine__15__auto____1;
return e2e$proposals$state_machine__15__auto__;
})()
;})(switch__14__auto__,c__19__auto__,___192__auto__))
})();
var state__21__auto__ = (function (){var statearr_12825 = f__20__auto__.call(null);
(statearr_12825[(6)] = c__19__auto__);

return statearr_12825;
})();
return cljs.core.async.impl.ioc_helpers.run_state_machine_wrapped.call(null,state__21__auto__);
});})(c__19__auto__,___192__auto__))
);

return c__19__auto__;
});

e2e.proposals.t_e2e$proposals11922.getBasis = (function (){
return new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,"meta11923","meta11923",(1335643083),null)], null);
});

e2e.proposals.t_e2e$proposals11922.cljs$lang$type = true;

e2e.proposals.t_e2e$proposals11922.cljs$lang$ctorStr = "e2e.proposals/t_e2e$proposals11922";

e2e.proposals.t_e2e$proposals11922.cljs$lang$ctorPrWriter = (function (this__9776__auto__,writer__9777__auto__,opt__9778__auto__){
return cljs.core._write.call(null,writer__9777__auto__,"e2e.proposals/t_e2e$proposals11922");
});

/**
 * Positional factory function for e2e.proposals/t_e2e$proposals11922.
 */
e2e.proposals.__GT_t_e2e$proposals11922 = (function e2e$proposals$__GT_t_e2e$proposals11922(meta11923){
return (new e2e.proposals.t_e2e$proposals11922(meta11923));
});

}

return (new e2e.proposals.t_e2e$proposals11922(null));
});

e2e.proposals.init.cljs$lang$var = new cljs.core.Var(function(){return e2e.proposals.init;},new cljs.core.Symbol("e2e.proposals","init","e2e.proposals/init",(-458618888),null),cljs.core.PersistentHashMap.fromArrays([new cljs.core.Keyword(null,"ns","ns",(441598760)),new cljs.core.Keyword(null,"name","name",(1843675177)),new cljs.core.Keyword(null,"file","file",(-1269645878)),new cljs.core.Keyword(null,"end-column","end-column",(1425389514)),new cljs.core.Keyword(null,"column","column",(2078222095)),new cljs.core.Keyword(null,"line","line",(212345235)),new cljs.core.Keyword(null,"end-line","end-line",(1837326455)),new cljs.core.Keyword(null,"arglists","arglists",(1661989754)),new cljs.core.Keyword(null,"doc","doc",(1913296891)),new cljs.core.Keyword(null,"test","test",(577538877))],[new cljs.core.Symbol(null,"e2e.proposals","e2e.proposals",(1479174227),null),new cljs.core.Symbol(null,"init","init",(-234949907),null),"e2e/proposals.cljs",(14),(1),(60),(60),cljs.core.List.EMPTY,null,(cljs.core.truth_(e2e.proposals.init)?e2e.proposals.init.cljs$lang$test:null)]));
e2e.proposals.base_prop = new cljs.core.PersistentArrayMap(null, 6, [new cljs.core.Keyword(null,"author","author",(2111686192)),e2e.proposals.owner_acc,new cljs.core.Keyword(null,"pay","pay",(-1672734919)),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"field_0","field_0",(-108942754)),new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"quantity","quantity",(-1929050694)),"400.0000 EFX",new cljs.core.Keyword(null,"contract","contract",(798152745)),e2e.proposals.token_acc], null),new cljs.core.Keyword(null,"field_1","field_1",(1792775021)),"2010-01-12"], null)], null),new cljs.core.Keyword(null,"content_hash","content_hash",(121497903)),"aa",new cljs.core.Keyword(null,"category","category",(-593092832)),(0),new cljs.core.Keyword(null,"cycle","cycle",(710365284)),(0),new cljs.core.Keyword(null,"transaction_hash","transaction_hash",(-1321280573)),null], null);
e2e.proposals.proposal_payment = (function e2e$proposals$proposal_payment(){
return cljs.test.test_var.call(null,e2e.proposals.proposal_payment.cljs$lang$var);
});
e2e.proposals.proposal_payment.cljs$lang$test = (function (){
if((typeof e2e !== 'undefined') && (typeof e2e.proposals !== 'undefined') && (typeof e2e.proposals.t_e2e$proposals13010 !== 'undefined')){
} else {

/**
* @constructor
 * @implements {cljs.core.IWithMeta}
 * @implements {cljs.core.IMeta}
 * @implements {cljs.test.IAsyncTest}
 * @implements {cljs.core.IFn}
*/
e2e.proposals.t_e2e$proposals13010 = (function (meta13011){
this.meta13011 = meta13011;
this.cljs$lang$protocol_mask$partition0$ = 393217;
this.cljs$lang$protocol_mask$partition1$ = 0;
});
e2e.proposals.t_e2e$proposals13010.prototype.cljs$core$IWithMeta$_with_meta$arity$2 = (function (_13012,meta13011__$1){
var self__ = this;
var _13012__$1 = this;
return (new e2e.proposals.t_e2e$proposals13010(meta13011__$1));
});

e2e.proposals.t_e2e$proposals13010.prototype.cljs$core$IMeta$_meta$arity$1 = (function (_13012){
var self__ = this;
var _13012__$1 = this;
return self__.meta13011;
});

e2e.proposals.t_e2e$proposals13010.prototype.cljs$test$IAsyncTest$ = cljs.core.PROTOCOL_SENTINEL;

e2e.proposals.t_e2e$proposals13010.prototype.call = (function (self__,done){
var self__ = this;
var self____$1 = this;
var ___192__auto__ = self____$1;
var c__19__auto__ = cljs.core.async.chan.call(null,(1));
cljs.core.async.impl.dispatch.run.call(null,((function (c__19__auto__,___192__auto__,self____$1){
return (function (){
var f__20__auto__ = (function (){var switch__14__auto__ = ((function (c__19__auto__,___192__auto__,self____$1){
return (function (state_13293){
var state_val_13294 = (state_13293[(1)]);
if((state_val_13294 === (32))){
var _ = (function (){var statearr_13295 = state_13293;
(statearr_13295[(4)] = cljs.core.cons.call(null,(45),(state_13293[(4)])));

return statearr_13295;
})();
var inst_13165 = [new cljs.core.Keyword(null,"from","from",(1815293044)),new cljs.core.Keyword(null,"to","to",(192099007)),new cljs.core.Keyword(null,"quantity","quantity",(-1929050694)),new cljs.core.Keyword(null,"memo","memo",(-1928616099))];
var inst_13166 = [e2e.proposals.owner_acc,e2e.proposals.prop_acc,"1.5000 EFX","proposal"];
var inst_13167 = cljs.core.PersistentHashMap.fromArrays(inst_13165,inst_13166);
var inst_13168 = cljs.core.PersistentVector.EMPTY_NODE;
var inst_13169 = [new cljs.core.Keyword(null,"actor","actor",(-1830560481)),new cljs.core.Keyword(null,"permission","permission",(-511292572))];
var inst_13170 = [e2e.proposals.owner_acc,"active"];
var inst_13171 = cljs.core.PersistentHashMap.fromArrays(inst_13169,inst_13170);
var inst_13172 = [inst_13171];
var inst_13173 = (new cljs.core.PersistentVector(null,(1),(5),inst_13168,inst_13172,null));
var inst_13174 = eos_cljs.core.transact.call(null,e2e.proposals.token_acc,"transfer",inst_13167,inst_13173);
var inst_13175 = cljs.core.async.interop.p__GT_c.call(null,inst_13174);
var state_13293__$1 = state_13293;
return cljs.core.async.impl.ioc_helpers.take_BANG_.call(null,state_13293__$1,(46),inst_13175);
} else {
if((state_val_13294 === (64))){
var inst_13246 = (state_13293[(7)]);
var state_13293__$1 = state_13293;
var statearr_13296_13876 = state_13293__$1;
(statearr_13296_13876[(2)] = inst_13246);

(statearr_13296_13876[(1)] = (65));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13294 === (1))){
var state_13293__$1 = state_13293;
var statearr_13297_13877 = state_13293__$1;
(statearr_13297_13877[(2)] = null);

(statearr_13297_13877[(1)] = (2));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13294 === (33))){
var inst_13208 = (state_13293[(2)]);
var state_13293__$1 = (function (){var statearr_13298 = state_13293;
(statearr_13298[(8)] = inst_13208);

return statearr_13298;
})();
var statearr_13299_13878 = state_13293__$1;
(statearr_13299_13878[(2)] = null);

(statearr_13299_13878[(1)] = (54));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13294 === (65))){
var inst_13256 = (state_13293[(2)]);
var state_13293__$1 = (function (){var statearr_13300 = state_13293;
(statearr_13300[(9)] = inst_13256);

return statearr_13300;
})();
var statearr_13301_13879 = state_13293__$1;
(statearr_13301_13879[(2)] = null);

(statearr_13301_13879[(1)] = (66));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13294 === (2))){
var _ = (function (){var statearr_13302 = state_13293;
(statearr_13302[(4)] = cljs.core.cons.call(null,(5),(state_13293[(4)])));

return statearr_13302;
})();
var inst_13021 = eos_cljs.core.transact.call(null,e2e.proposals.prop_acc,"update",e2e.proposals.prop_config);
var inst_13022 = cljs.core.async.interop.p__GT_c.call(null,inst_13021);
var state_13293__$1 = state_13293;
return cljs.core.async.impl.ioc_helpers.take_BANG_.call(null,state_13293__$1,(6),inst_13022);
} else {
if((state_val_13294 === (34))){
var inst_13123 = (state_13293[(10)]);
var inst_13124 = (state_13293[(11)]);
var inst_13121 = (state_13293[(2)]);
var inst_13122 = inst_13121.cause;
var inst_13123__$1 = inst_13122.message;
var inst_13124__$1 = clojure.string.ends_with_QMARK_.call(null,inst_13123__$1,"wrong amount");
var inst_13125 = (!(inst_13124__$1));
var state_13293__$1 = (function (){var statearr_13303 = state_13293;
(statearr_13303[(10)] = inst_13123__$1);

(statearr_13303[(11)] = inst_13124__$1);

return statearr_13303;
})();
if(inst_13125){
var statearr_13304_13880 = state_13293__$1;
(statearr_13304_13880[(1)] = (35));

} else {
var statearr_13305_13881 = state_13293__$1;
(statearr_13305_13881[(1)] = (36));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13294 === (66))){
var _ = (function (){var statearr_13306 = state_13293;
(statearr_13306[(4)] = cljs.core.cons.call(null,(69),(state_13293[(4)])));

return statearr_13306;
})();
var state_13293__$1 = state_13293;
var statearr_13307_13882 = state_13293__$1;
(statearr_13307_13882[(1)] = (70));



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13294 === (3))){
var inst_13290 = (state_13293[(2)]);
var inst_13291 = done.call(null);
var state_13293__$1 = (function (){var statearr_13309 = state_13293;
(statearr_13309[(12)] = inst_13290);

return statearr_13309;
})();
return cljs.core.async.impl.ioc_helpers.return_chan.call(null,state_13293__$1,inst_13291);
} else {
if((state_val_13294 === (35))){
var inst_13123 = (state_13293[(10)]);
var inst_13127 = ["expected =","wrong amount"," actual = ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_13123)].join('');
var inst_13128 = cljs.core.prn.call(null,inst_13127);
var state_13293__$1 = state_13293;
var statearr_13310_13883 = state_13293__$1;
(statearr_13310_13883[(2)] = inst_13128);

(statearr_13310_13883[(1)] = (37));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13294 === (67))){
var inst_13284 = (state_13293[(2)]);
var _ = (function (){var statearr_13311 = state_13293;
(statearr_13311[(4)] = cljs.core.rest.call(null,(state_13293[(4)])));

return statearr_13311;
})();
var state_13293__$1 = state_13293;
var statearr_13312_13884 = state_13293__$1;
(statearr_13312_13884[(2)] = inst_13284);

(statearr_13312_13884[(1)] = (55));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13294 === (4))){
var inst_13014 = (state_13293[(2)]);
var inst_13015 = cljs.core.prn.call(null,inst_13014);
var state_13293__$1 = state_13293;
var statearr_13313_13885 = state_13293__$1;
(statearr_13313_13885[(2)] = inst_13015);

(statearr_13313_13885[(1)] = (3));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13294 === (36))){
var state_13293__$1 = state_13293;
var statearr_13315_13886 = state_13293__$1;
(statearr_13315_13886[(2)] = null);

(statearr_13315_13886[(1)] = (37));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13294 === (68))){
var inst_13257 = (state_13293[(2)]);
var inst_13258 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_13259 = true;
var inst_13260 = [new cljs.core.Keyword(null,"error","error",(-978969032)),"can send correct amount",inst_13259,inst_13257];
var inst_13261 = cljs.core.PersistentHashMap.fromArrays(inst_13258,inst_13260);
var inst_13262 = cljs.test.do_report.call(null,inst_13261);
var state_13293__$1 = state_13293;
var statearr_13316_13887 = state_13293__$1;
(statearr_13316_13887[(2)] = inst_13262);

(statearr_13316_13887[(1)] = (67));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13294 === (5))){
var _ = (function (){var statearr_13318 = state_13293;
(statearr_13318[(4)] = cljs.core.rest.call(null,(state_13293[(4)])));

return statearr_13318;
})();
var state_13293__$1 = state_13293;
var ex13314 = (state_13293__$1[(2)]);
var statearr_13319_13888 = state_13293__$1;
(statearr_13319_13888[(5)] = ex13314);


if((ex13314 instanceof Error)){
var statearr_13320_13889 = state_13293__$1;
(statearr_13320_13889[(1)] = (4));

(statearr_13320_13889[(5)] = null);

} else {
throw ex13314;

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13294 === (37))){
var inst_13131 = (state_13293[(2)]);
var state_13293__$1 = (function (){var statearr_13321 = state_13293;
(statearr_13321[(13)] = inst_13131);

return statearr_13321;
})();
var statearr_13322_13890 = state_13293__$1;
(statearr_13322_13890[(2)] = null);

(statearr_13322_13890[(1)] = (38));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13294 === (69))){
var _ = (function (){var statearr_13323 = state_13293;
(statearr_13323[(4)] = cljs.core.rest.call(null,(state_13293[(4)])));

return statearr_13323;
})();
var state_13293__$1 = state_13293;
var ex13317 = (state_13293__$1[(2)]);
var statearr_13324_13891 = state_13293__$1;
(statearr_13324_13891[(5)] = ex13317);


var statearr_13325_13892 = state_13293__$1;
(statearr_13325_13892[(1)] = (68));

(statearr_13325_13892[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13294 === (6))){
var inst_13024 = (state_13293[(14)]);
var inst_13024__$1 = (state_13293[(2)]);
var inst_13025 = (inst_13024__$1 instanceof cljs.core.ExceptionInfo);
var inst_13026 = cljs.core.ex_data.call(null,inst_13024__$1);
var inst_13027 = new cljs.core.Keyword(null,"error","error",(-978969032)).cljs$core$IFn$_invoke$arity$1(inst_13026);
var inst_13028 = cljs.core._EQ_.call(null,inst_13027,new cljs.core.Keyword(null,"promise-error","promise-error",(-90673560)));
var inst_13029 = ((inst_13025) && (inst_13028));
var state_13293__$1 = (function (){var statearr_13326 = state_13293;
(statearr_13326[(14)] = inst_13024__$1);

return statearr_13326;
})();
if(cljs.core.truth_(inst_13029)){
var statearr_13327_13893 = state_13293__$1;
(statearr_13327_13893[(1)] = (7));

} else {
var statearr_13328_13894 = state_13293__$1;
(statearr_13328_13894[(1)] = (8));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13294 === (38))){
var inst_13124 = (state_13293[(11)]);
var _ = (function (){var statearr_13329 = state_13293;
(statearr_13329[(4)] = cljs.core.cons.call(null,(41),(state_13293[(4)])));

return statearr_13329;
})();
var state_13293__$1 = state_13293;
if(cljs.core.truth_(inst_13124)){
var statearr_13330_13895 = state_13293__$1;
(statearr_13330_13895[(1)] = (42));

} else {
var statearr_13331_13896 = state_13293__$1;
(statearr_13331_13896[(1)] = (43));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13294 === (70))){
var inst_13269 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_13270 = true;
var inst_13271 = [new cljs.core.Keyword(null,"pass","pass",(1574159993)),"can send correct amount",inst_13270,true];
var inst_13272 = cljs.core.PersistentHashMap.fromArrays(inst_13269,inst_13271);
var inst_13273 = cljs.test.do_report.call(null,inst_13272);
var state_13293__$1 = state_13293;
var statearr_13332_13897 = state_13293__$1;
(statearr_13332_13897[(2)] = inst_13273);

(statearr_13332_13897[(1)] = (72));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13294 === (7))){
var inst_13024 = (state_13293[(14)]);
var inst_13031 = (function(){throw inst_13024})();
var state_13293__$1 = state_13293;
var statearr_13333_13898 = state_13293__$1;
(statearr_13333_13898[(2)] = inst_13031);

(statearr_13333_13898[(1)] = (9));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13294 === (39))){
var inst_13159 = (state_13293[(2)]);
var state_13293__$1 = state_13293;
var statearr_13334_13899 = state_13293__$1;
(statearr_13334_13899[(2)] = inst_13159);

(statearr_13334_13899[(1)] = (33));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13294 === (71))){
var inst_13275 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_13276 = true;
var inst_13277 = [new cljs.core.Keyword(null,"fail","fail",(1706214930)),"can send correct amount",inst_13276,true];
var inst_13278 = cljs.core.PersistentHashMap.fromArrays(inst_13275,inst_13277);
var inst_13279 = cljs.test.do_report.call(null,inst_13278);
var state_13293__$1 = state_13293;
var statearr_13335_13900 = state_13293__$1;
(statearr_13335_13900[(2)] = inst_13279);

(statearr_13335_13900[(1)] = (72));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13294 === (8))){
var inst_13024 = (state_13293[(14)]);
var state_13293__$1 = state_13293;
var statearr_13336_13901 = state_13293__$1;
(statearr_13336_13901[(2)] = inst_13024);

(statearr_13336_13901[(1)] = (9));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13294 === (40))){
var inst_13132 = (state_13293[(2)]);
var inst_13133 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_13134 = new cljs.core.Symbol("e2e.macros","pass?","e2e.macros/pass?",(894145299),null);
var inst_13135 = [new cljs.core.Keyword(null,"error","error",(-978969032)),"needs correct amount",inst_13134,inst_13132];
var inst_13136 = cljs.core.PersistentHashMap.fromArrays(inst_13133,inst_13135);
var inst_13137 = cljs.test.do_report.call(null,inst_13136);
var state_13293__$1 = state_13293;
var statearr_13337_13902 = state_13293__$1;
(statearr_13337_13902[(2)] = inst_13137);

(statearr_13337_13902[(1)] = (39));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13294 === (72))){
var inst_13281 = (state_13293[(2)]);
var _ = (function (){var statearr_13339 = state_13293;
(statearr_13339[(4)] = cljs.core.rest.call(null,(state_13293[(4)])));

return statearr_13339;
})();
var state_13293__$1 = (function (){var statearr_13340 = state_13293;
(statearr_13340[(15)] = inst_13281);

return statearr_13340;
})();
var statearr_13341_13903 = state_13293__$1;
(statearr_13341_13903[(2)] = true);

(statearr_13341_13903[(1)] = (67));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13294 === (9))){
var inst_13034 = (state_13293[(2)]);
var state_13293__$1 = (function (){var statearr_13342 = state_13293;
(statearr_13342[(16)] = inst_13034);

return statearr_13342;
})();
var statearr_13343_13904 = state_13293__$1;
(statearr_13343_13904[(2)] = null);

(statearr_13343_13904[(1)] = (10));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13294 === (41))){
var _ = (function (){var statearr_13344 = state_13293;
(statearr_13344[(4)] = cljs.core.rest.call(null,(state_13293[(4)])));

return statearr_13344;
})();
var state_13293__$1 = state_13293;
var ex13338 = (state_13293__$1[(2)]);
var statearr_13345_13905 = state_13293__$1;
(statearr_13345_13905[(5)] = ex13338);


var statearr_13346_13906 = state_13293__$1;
(statearr_13346_13906[(1)] = (40));

(statearr_13346_13906[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13294 === (10))){
var _ = (function (){var statearr_13347 = state_13293;
(statearr_13347[(4)] = cljs.core.cons.call(null,(23),(state_13293[(4)])));

return statearr_13347;
})();
var inst_13079 = cljs.core.assoc.call(null,e2e.proposals.base_prop,new cljs.core.Keyword(null,"content_hash","content_hash",(121497903)),"ee");
var inst_13080 = cljs.core.PersistentVector.EMPTY_NODE;
var inst_13081 = [new cljs.core.Keyword(null,"actor","actor",(-1830560481)),new cljs.core.Keyword(null,"permission","permission",(-511292572))];
var inst_13082 = [e2e.proposals.owner_acc,"active"];
var inst_13083 = cljs.core.PersistentHashMap.fromArrays(inst_13081,inst_13082);
var inst_13084 = [inst_13083];
var inst_13085 = (new cljs.core.PersistentVector(null,(1),(5),inst_13080,inst_13084,null));
var inst_13086 = eos_cljs.core.transact.call(null,e2e.proposals.prop_acc,"createprop",inst_13079,inst_13085);
var inst_13087 = cljs.core.async.interop.p__GT_c.call(null,inst_13086);
var state_13293__$1 = state_13293;
return cljs.core.async.impl.ioc_helpers.take_BANG_.call(null,state_13293__$1,(24),inst_13087);
} else {
if((state_val_13294 === (42))){
var inst_13124 = (state_13293[(11)]);
var inst_13144 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_13145 = new cljs.core.Symbol("e2e.macros","pass?","e2e.macros/pass?",(894145299),null);
var inst_13146 = [new cljs.core.Keyword(null,"pass","pass",(1574159993)),"needs correct amount",inst_13145,inst_13124];
var inst_13147 = cljs.core.PersistentHashMap.fromArrays(inst_13144,inst_13146);
var inst_13148 = cljs.test.do_report.call(null,inst_13147);
var state_13293__$1 = state_13293;
var statearr_13348_13907 = state_13293__$1;
(statearr_13348_13907[(2)] = inst_13148);

(statearr_13348_13907[(1)] = (44));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13294 === (11))){
var inst_13120 = (state_13293[(2)]);
var state_13293__$1 = (function (){var statearr_13349 = state_13293;
(statearr_13349[(17)] = inst_13120);

return statearr_13349;
})();
var statearr_13350_13908 = state_13293__$1;
(statearr_13350_13908[(2)] = null);

(statearr_13350_13908[(1)] = (32));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13294 === (43))){
var inst_13124 = (state_13293[(11)]);
var inst_13150 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_13151 = new cljs.core.Symbol("e2e.macros","pass?","e2e.macros/pass?",(894145299),null);
var inst_13152 = [new cljs.core.Keyword(null,"fail","fail",(1706214930)),"needs correct amount",inst_13151,inst_13124];
var inst_13153 = cljs.core.PersistentHashMap.fromArrays(inst_13150,inst_13152);
var inst_13154 = cljs.test.do_report.call(null,inst_13153);
var state_13293__$1 = state_13293;
var statearr_13351_13909 = state_13293__$1;
(statearr_13351_13909[(2)] = inst_13154);

(statearr_13351_13909[(1)] = (44));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13294 === (12))){
var inst_13037 = (state_13293[(18)]);
var inst_13038 = (state_13293[(19)]);
var inst_13035 = (state_13293[(2)]);
var inst_13036 = inst_13035.cause;
var inst_13037__$1 = inst_13036.message;
var inst_13038__$1 = clojure.string.ends_with_QMARK_.call(null,inst_13037__$1,"no proposal reserved");
var inst_13039 = (!(inst_13038__$1));
var state_13293__$1 = (function (){var statearr_13352 = state_13293;
(statearr_13352[(18)] = inst_13037__$1);

(statearr_13352[(19)] = inst_13038__$1);

return statearr_13352;
})();
if(inst_13039){
var statearr_13353_13910 = state_13293__$1;
(statearr_13353_13910[(1)] = (13));

} else {
var statearr_13354_13911 = state_13293__$1;
(statearr_13354_13911[(1)] = (14));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13294 === (44))){
var inst_13124 = (state_13293[(11)]);
var inst_13156 = (state_13293[(2)]);
var _ = (function (){var statearr_13356 = state_13293;
(statearr_13356[(4)] = cljs.core.rest.call(null,(state_13293[(4)])));

return statearr_13356;
})();
var state_13293__$1 = (function (){var statearr_13357 = state_13293;
(statearr_13357[(20)] = inst_13156);

return statearr_13357;
})();
var statearr_13358_13912 = state_13293__$1;
(statearr_13358_13912[(2)] = inst_13124);

(statearr_13358_13912[(1)] = (39));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13294 === (13))){
var inst_13037 = (state_13293[(18)]);
var inst_13041 = ["expected =","no proposal reserved"," actual = ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_13037)].join('');
var inst_13042 = cljs.core.prn.call(null,inst_13041);
var state_13293__$1 = state_13293;
var statearr_13359_13913 = state_13293__$1;
(statearr_13359_13913[(2)] = inst_13042);

(statearr_13359_13913[(1)] = (15));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13294 === (45))){
var _ = (function (){var statearr_13360 = state_13293;
(statearr_13360[(4)] = cljs.core.rest.call(null,(state_13293[(4)])));

return statearr_13360;
})();
var state_13293__$1 = state_13293;
var ex13355 = (state_13293__$1[(2)]);
var statearr_13361_13914 = state_13293__$1;
(statearr_13361_13914[(5)] = ex13355);


if((ex13355 instanceof Error)){
var statearr_13362_13915 = state_13293__$1;
(statearr_13362_13915[(1)] = (34));

(statearr_13362_13915[(5)] = null);

} else {
throw ex13355;

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13294 === (14))){
var state_13293__$1 = state_13293;
var statearr_13363_13916 = state_13293__$1;
(statearr_13363_13916[(2)] = null);

(statearr_13363_13916[(1)] = (15));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13294 === (46))){
var inst_13177 = (state_13293[(21)]);
var inst_13177__$1 = (state_13293[(2)]);
var inst_13178 = (inst_13177__$1 instanceof cljs.core.ExceptionInfo);
var inst_13179 = cljs.core.ex_data.call(null,inst_13177__$1);
var inst_13180 = new cljs.core.Keyword(null,"error","error",(-978969032)).cljs$core$IFn$_invoke$arity$1(inst_13179);
var inst_13181 = cljs.core._EQ_.call(null,inst_13180,new cljs.core.Keyword(null,"promise-error","promise-error",(-90673560)));
var inst_13182 = ((inst_13178) && (inst_13181));
var state_13293__$1 = (function (){var statearr_13364 = state_13293;
(statearr_13364[(21)] = inst_13177__$1);

return statearr_13364;
})();
if(cljs.core.truth_(inst_13182)){
var statearr_13365_13917 = state_13293__$1;
(statearr_13365_13917[(1)] = (47));

} else {
var statearr_13366_13918 = state_13293__$1;
(statearr_13366_13918[(1)] = (48));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13294 === (15))){
var inst_13045 = (state_13293[(2)]);
var state_13293__$1 = (function (){var statearr_13367 = state_13293;
(statearr_13367[(22)] = inst_13045);

return statearr_13367;
})();
var statearr_13368_13919 = state_13293__$1;
(statearr_13368_13919[(2)] = null);

(statearr_13368_13919[(1)] = (16));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13294 === (47))){
var inst_13177 = (state_13293[(21)]);
var inst_13184 = (function(){throw inst_13177})();
var state_13293__$1 = state_13293;
var statearr_13369_13920 = state_13293__$1;
(statearr_13369_13920[(2)] = inst_13184);

(statearr_13369_13920[(1)] = (49));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13294 === (16))){
var inst_13038 = (state_13293[(19)]);
var _ = (function (){var statearr_13370 = state_13293;
(statearr_13370[(4)] = cljs.core.cons.call(null,(19),(state_13293[(4)])));

return statearr_13370;
})();
var state_13293__$1 = state_13293;
if(cljs.core.truth_(inst_13038)){
var statearr_13371_13921 = state_13293__$1;
(statearr_13371_13921[(1)] = (20));

} else {
var statearr_13372_13922 = state_13293__$1;
(statearr_13372_13922[(1)] = (21));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13294 === (48))){
var inst_13177 = (state_13293[(21)]);
var state_13293__$1 = state_13293;
var statearr_13373_13923 = state_13293__$1;
(statearr_13373_13923[(2)] = inst_13177);

(statearr_13373_13923[(1)] = (49));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13294 === (17))){
var inst_13073 = (state_13293[(2)]);
var state_13293__$1 = state_13293;
var statearr_13374_13924 = state_13293__$1;
(statearr_13374_13924[(2)] = inst_13073);

(statearr_13374_13924[(1)] = (11));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13294 === (49))){
var inst_13187 = (state_13293[(2)]);
var state_13293__$1 = (function (){var statearr_13375 = state_13293;
(statearr_13375[(23)] = inst_13187);

return statearr_13375;
})();
var statearr_13376_13925 = state_13293__$1;
(statearr_13376_13925[(2)] = null);

(statearr_13376_13925[(1)] = (50));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13294 === (18))){
var inst_13046 = (state_13293[(2)]);
var inst_13047 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_13048 = new cljs.core.Symbol("e2e.macros","pass?","e2e.macros/pass?",(894145299),null);
var inst_13049 = [new cljs.core.Keyword(null,"error","error",(-978969032)),"need a reservation",inst_13048,inst_13046];
var inst_13050 = cljs.core.PersistentHashMap.fromArrays(inst_13047,inst_13049);
var inst_13051 = cljs.test.do_report.call(null,inst_13050);
var state_13293__$1 = state_13293;
var statearr_13378_13926 = state_13293__$1;
(statearr_13378_13926[(2)] = inst_13051);

(statearr_13378_13926[(1)] = (17));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13294 === (50))){
var _ = (function (){var statearr_13379 = state_13293;
(statearr_13379[(4)] = cljs.core.cons.call(null,(53),(state_13293[(4)])));

return statearr_13379;
})();
var inst_13199 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002))];
var inst_13200 = [new cljs.core.Keyword(null,"fail","fail",(1706214930)),"needs correct amount"];
var inst_13201 = cljs.core.PersistentHashMap.fromArrays(inst_13199,inst_13200);
var inst_13202 = cljs.test.do_report.call(null,inst_13201);
var ___$1 = (function (){var statearr_13380 = state_13293;
(statearr_13380[(4)] = cljs.core.rest.call(null,(state_13293[(4)])));

return statearr_13380;
})();
var state_13293__$1 = state_13293;
var statearr_13381_13927 = state_13293__$1;
(statearr_13381_13927[(2)] = inst_13202);

(statearr_13381_13927[(1)] = (51));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13294 === (19))){
var _ = (function (){var statearr_13382 = state_13293;
(statearr_13382[(4)] = cljs.core.rest.call(null,(state_13293[(4)])));

return statearr_13382;
})();
var state_13293__$1 = state_13293;
var ex13377 = (state_13293__$1[(2)]);
var statearr_13383_13928 = state_13293__$1;
(statearr_13383_13928[(5)] = ex13377);


var statearr_13384_13929 = state_13293__$1;
(statearr_13384_13929[(1)] = (18));

(statearr_13384_13929[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13294 === (51))){
var inst_13205 = (state_13293[(2)]);
var _ = (function (){var statearr_13385 = state_13293;
(statearr_13385[(4)] = cljs.core.rest.call(null,(state_13293[(4)])));

return statearr_13385;
})();
var state_13293__$1 = state_13293;
var statearr_13386_13930 = state_13293__$1;
(statearr_13386_13930[(2)] = inst_13205);

(statearr_13386_13930[(1)] = (33));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13294 === (20))){
var inst_13038 = (state_13293[(19)]);
var inst_13058 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_13059 = new cljs.core.Symbol("e2e.macros","pass?","e2e.macros/pass?",(894145299),null);
var inst_13060 = [new cljs.core.Keyword(null,"pass","pass",(1574159993)),"need a reservation",inst_13059,inst_13038];
var inst_13061 = cljs.core.PersistentHashMap.fromArrays(inst_13058,inst_13060);
var inst_13062 = cljs.test.do_report.call(null,inst_13061);
var state_13293__$1 = state_13293;
var statearr_13387_13931 = state_13293__$1;
(statearr_13387_13931[(2)] = inst_13062);

(statearr_13387_13931[(1)] = (22));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13294 === (52))){
var inst_13188 = (state_13293[(2)]);
var inst_13189 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_13190 = null;
var inst_13191 = [new cljs.core.Keyword(null,"error","error",(-978969032)),"needs correct amount",inst_13190,inst_13188];
var inst_13192 = cljs.core.PersistentHashMap.fromArrays(inst_13189,inst_13191);
var inst_13193 = cljs.test.do_report.call(null,inst_13192);
var state_13293__$1 = state_13293;
var statearr_13389_13932 = state_13293__$1;
(statearr_13389_13932[(2)] = inst_13193);

(statearr_13389_13932[(1)] = (51));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13294 === (21))){
var inst_13038 = (state_13293[(19)]);
var inst_13064 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_13065 = new cljs.core.Symbol("e2e.macros","pass?","e2e.macros/pass?",(894145299),null);
var inst_13066 = [new cljs.core.Keyword(null,"fail","fail",(1706214930)),"need a reservation",inst_13065,inst_13038];
var inst_13067 = cljs.core.PersistentHashMap.fromArrays(inst_13064,inst_13066);
var inst_13068 = cljs.test.do_report.call(null,inst_13067);
var state_13293__$1 = state_13293;
var statearr_13390_13933 = state_13293__$1;
(statearr_13390_13933[(2)] = inst_13068);

(statearr_13390_13933[(1)] = (22));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13294 === (53))){
var _ = (function (){var statearr_13391 = state_13293;
(statearr_13391[(4)] = cljs.core.rest.call(null,(state_13293[(4)])));

return statearr_13391;
})();
var state_13293__$1 = state_13293;
var ex13388 = (state_13293__$1[(2)]);
var statearr_13392_13934 = state_13293__$1;
(statearr_13392_13934[(5)] = ex13388);


var statearr_13393_13935 = state_13293__$1;
(statearr_13393_13935[(1)] = (52));

(statearr_13393_13935[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13294 === (22))){
var inst_13038 = (state_13293[(19)]);
var inst_13070 = (state_13293[(2)]);
var _ = (function (){var statearr_13395 = state_13293;
(statearr_13395[(4)] = cljs.core.rest.call(null,(state_13293[(4)])));

return statearr_13395;
})();
var state_13293__$1 = (function (){var statearr_13396 = state_13293;
(statearr_13396[(24)] = inst_13070);

return statearr_13396;
})();
var statearr_13397_13936 = state_13293__$1;
(statearr_13397_13936[(2)] = inst_13038);

(statearr_13397_13936[(1)] = (17));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13294 === (54))){
var _ = (function (){var statearr_13398 = state_13293;
(statearr_13398[(4)] = cljs.core.cons.call(null,(61),(state_13293[(4)])));

return statearr_13398;
})();
var inst_13234 = [new cljs.core.Keyword(null,"from","from",(1815293044)),new cljs.core.Keyword(null,"to","to",(192099007)),new cljs.core.Keyword(null,"quantity","quantity",(-1929050694)),new cljs.core.Keyword(null,"memo","memo",(-1928616099))];
var inst_13235 = [e2e.proposals.owner_acc,e2e.proposals.prop_acc,e2e.proposals.proposal_cost,"proposal"];
var inst_13236 = cljs.core.PersistentHashMap.fromArrays(inst_13234,inst_13235);
var inst_13237 = cljs.core.PersistentVector.EMPTY_NODE;
var inst_13238 = [new cljs.core.Keyword(null,"actor","actor",(-1830560481)),new cljs.core.Keyword(null,"permission","permission",(-511292572))];
var inst_13239 = [e2e.proposals.owner_acc,"active"];
var inst_13240 = cljs.core.PersistentHashMap.fromArrays(inst_13238,inst_13239);
var inst_13241 = [inst_13240];
var inst_13242 = (new cljs.core.PersistentVector(null,(1),(5),inst_13237,inst_13241,null));
var inst_13243 = eos_cljs.core.transact.call(null,e2e.proposals.token_acc,"transfer",inst_13236,inst_13242);
var inst_13244 = cljs.core.async.interop.p__GT_c.call(null,inst_13243);
var state_13293__$1 = state_13293;
return cljs.core.async.impl.ioc_helpers.take_BANG_.call(null,state_13293__$1,(62),inst_13244);
} else {
if((state_val_13294 === (23))){
var _ = (function (){var statearr_13399 = state_13293;
(statearr_13399[(4)] = cljs.core.rest.call(null,(state_13293[(4)])));

return statearr_13399;
})();
var state_13293__$1 = state_13293;
var ex13394 = (state_13293__$1[(2)]);
var statearr_13400_13937 = state_13293__$1;
(statearr_13400_13937[(5)] = ex13394);


if((ex13394 instanceof Error)){
var statearr_13401_13938 = state_13293__$1;
(statearr_13401_13938[(1)] = (12));

(statearr_13401_13938[(5)] = null);

} else {
throw ex13394;

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13294 === (55))){
var inst_13287 = (state_13293[(2)]);
var _ = (function (){var statearr_13402 = state_13293;
(statearr_13402[(4)] = cljs.core.rest.call(null,(state_13293[(4)])));

return statearr_13402;
})();
var state_13293__$1 = state_13293;
var statearr_13403_13939 = state_13293__$1;
(statearr_13403_13939[(2)] = inst_13287);

(statearr_13403_13939[(1)] = (3));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13294 === (24))){
var inst_13089 = (state_13293[(25)]);
var inst_13089__$1 = (state_13293[(2)]);
var inst_13090 = (inst_13089__$1 instanceof cljs.core.ExceptionInfo);
var inst_13091 = cljs.core.ex_data.call(null,inst_13089__$1);
var inst_13092 = new cljs.core.Keyword(null,"error","error",(-978969032)).cljs$core$IFn$_invoke$arity$1(inst_13091);
var inst_13093 = cljs.core._EQ_.call(null,inst_13092,new cljs.core.Keyword(null,"promise-error","promise-error",(-90673560)));
var inst_13094 = ((inst_13090) && (inst_13093));
var state_13293__$1 = (function (){var statearr_13404 = state_13293;
(statearr_13404[(25)] = inst_13089__$1);

return statearr_13404;
})();
if(cljs.core.truth_(inst_13094)){
var statearr_13405_13940 = state_13293__$1;
(statearr_13405_13940[(1)] = (25));

} else {
var statearr_13406_13941 = state_13293__$1;
(statearr_13406_13941[(1)] = (26));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13294 === (56))){
var inst_13209 = (state_13293[(2)]);
var inst_13210 = cljs.core.prn.call(null,"test failed with ",inst_13209);
var state_13293__$1 = (function (){var statearr_13407 = state_13293;
(statearr_13407[(26)] = inst_13210);

return statearr_13407;
})();
var statearr_13408_13942 = state_13293__$1;
(statearr_13408_13942[(2)] = null);

(statearr_13408_13942[(1)] = (57));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13294 === (25))){
var inst_13089 = (state_13293[(25)]);
var inst_13096 = (function(){throw inst_13089})();
var state_13293__$1 = state_13293;
var statearr_13409_13943 = state_13293__$1;
(statearr_13409_13943[(2)] = inst_13096);

(statearr_13409_13943[(1)] = (27));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13294 === (57))){
var _ = (function (){var statearr_13410 = state_13293;
(statearr_13410[(4)] = cljs.core.cons.call(null,(60),(state_13293[(4)])));

return statearr_13410;
})();
var inst_13222 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002))];
var inst_13223 = [new cljs.core.Keyword(null,"fail","fail",(1706214930)),"can send correct amount"];
var inst_13224 = cljs.core.PersistentHashMap.fromArrays(inst_13222,inst_13223);
var inst_13225 = cljs.test.do_report.call(null,inst_13224);
var ___$1 = (function (){var statearr_13411 = state_13293;
(statearr_13411[(4)] = cljs.core.rest.call(null,(state_13293[(4)])));

return statearr_13411;
})();
var state_13293__$1 = state_13293;
var statearr_13412_13944 = state_13293__$1;
(statearr_13412_13944[(2)] = inst_13225);

(statearr_13412_13944[(1)] = (58));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13294 === (26))){
var inst_13089 = (state_13293[(25)]);
var state_13293__$1 = state_13293;
var statearr_13413_13945 = state_13293__$1;
(statearr_13413_13945[(2)] = inst_13089);

(statearr_13413_13945[(1)] = (27));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13294 === (58))){
var inst_13228 = (state_13293[(2)]);
var state_13293__$1 = state_13293;
var statearr_13414_13946 = state_13293__$1;
(statearr_13414_13946[(2)] = inst_13228);

(statearr_13414_13946[(1)] = (55));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13294 === (27))){
var inst_13099 = (state_13293[(2)]);
var state_13293__$1 = (function (){var statearr_13415 = state_13293;
(statearr_13415[(27)] = inst_13099);

return statearr_13415;
})();
var statearr_13416_13947 = state_13293__$1;
(statearr_13416_13947[(2)] = null);

(statearr_13416_13947[(1)] = (28));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13294 === (59))){
var inst_13211 = (state_13293[(2)]);
var inst_13212 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_13213 = null;
var inst_13214 = [new cljs.core.Keyword(null,"error","error",(-978969032)),"can send correct amount",inst_13213,inst_13211];
var inst_13215 = cljs.core.PersistentHashMap.fromArrays(inst_13212,inst_13214);
var inst_13216 = cljs.test.do_report.call(null,inst_13215);
var state_13293__$1 = state_13293;
var statearr_13418_13948 = state_13293__$1;
(statearr_13418_13948[(2)] = inst_13216);

(statearr_13418_13948[(1)] = (58));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13294 === (28))){
var _ = (function (){var statearr_13419 = state_13293;
(statearr_13419[(4)] = cljs.core.cons.call(null,(31),(state_13293[(4)])));

return statearr_13419;
})();
var inst_13111 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002))];
var inst_13112 = [new cljs.core.Keyword(null,"fail","fail",(1706214930)),"need a reservation"];
var inst_13113 = cljs.core.PersistentHashMap.fromArrays(inst_13111,inst_13112);
var inst_13114 = cljs.test.do_report.call(null,inst_13113);
var ___$1 = (function (){var statearr_13420 = state_13293;
(statearr_13420[(4)] = cljs.core.rest.call(null,(state_13293[(4)])));

return statearr_13420;
})();
var state_13293__$1 = state_13293;
var statearr_13421_13949 = state_13293__$1;
(statearr_13421_13949[(2)] = inst_13114);

(statearr_13421_13949[(1)] = (29));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13294 === (60))){
var _ = (function (){var statearr_13423 = state_13293;
(statearr_13423[(4)] = cljs.core.rest.call(null,(state_13293[(4)])));

return statearr_13423;
})();
var state_13293__$1 = state_13293;
var ex13417 = (state_13293__$1[(2)]);
var statearr_13424_13950 = state_13293__$1;
(statearr_13424_13950[(5)] = ex13417);


var statearr_13425_13951 = state_13293__$1;
(statearr_13425_13951[(1)] = (59));

(statearr_13425_13951[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13294 === (29))){
var inst_13117 = (state_13293[(2)]);
var _ = (function (){var statearr_13426 = state_13293;
(statearr_13426[(4)] = cljs.core.rest.call(null,(state_13293[(4)])));

return statearr_13426;
})();
var state_13293__$1 = state_13293;
var statearr_13427_13952 = state_13293__$1;
(statearr_13427_13952[(2)] = inst_13117);

(statearr_13427_13952[(1)] = (11));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13294 === (61))){
var _ = (function (){var statearr_13428 = state_13293;
(statearr_13428[(4)] = cljs.core.rest.call(null,(state_13293[(4)])));

return statearr_13428;
})();
var state_13293__$1 = state_13293;
var ex13422 = (state_13293__$1[(2)]);
var statearr_13429_13953 = state_13293__$1;
(statearr_13429_13953[(5)] = ex13422);


if((ex13422 instanceof Error)){
var statearr_13430_13954 = state_13293__$1;
(statearr_13430_13954[(1)] = (56));

(statearr_13430_13954[(5)] = null);

} else {
throw ex13422;

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13294 === (30))){
var inst_13100 = (state_13293[(2)]);
var inst_13101 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_13102 = null;
var inst_13103 = [new cljs.core.Keyword(null,"error","error",(-978969032)),"need a reservation",inst_13102,inst_13100];
var inst_13104 = cljs.core.PersistentHashMap.fromArrays(inst_13101,inst_13103);
var inst_13105 = cljs.test.do_report.call(null,inst_13104);
var state_13293__$1 = state_13293;
var statearr_13432_13955 = state_13293__$1;
(statearr_13432_13955[(2)] = inst_13105);

(statearr_13432_13955[(1)] = (29));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13294 === (62))){
var inst_13246 = (state_13293[(7)]);
var inst_13246__$1 = (state_13293[(2)]);
var inst_13247 = (inst_13246__$1 instanceof cljs.core.ExceptionInfo);
var inst_13248 = cljs.core.ex_data.call(null,inst_13246__$1);
var inst_13249 = new cljs.core.Keyword(null,"error","error",(-978969032)).cljs$core$IFn$_invoke$arity$1(inst_13248);
var inst_13250 = cljs.core._EQ_.call(null,inst_13249,new cljs.core.Keyword(null,"promise-error","promise-error",(-90673560)));
var inst_13251 = ((inst_13247) && (inst_13250));
var state_13293__$1 = (function (){var statearr_13433 = state_13293;
(statearr_13433[(7)] = inst_13246__$1);

return statearr_13433;
})();
if(cljs.core.truth_(inst_13251)){
var statearr_13434_13956 = state_13293__$1;
(statearr_13434_13956[(1)] = (63));

} else {
var statearr_13435_13957 = state_13293__$1;
(statearr_13435_13957[(1)] = (64));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13294 === (31))){
var _ = (function (){var statearr_13436 = state_13293;
(statearr_13436[(4)] = cljs.core.rest.call(null,(state_13293[(4)])));

return statearr_13436;
})();
var state_13293__$1 = state_13293;
var ex13431 = (state_13293__$1[(2)]);
var statearr_13437_13958 = state_13293__$1;
(statearr_13437_13958[(5)] = ex13431);


var statearr_13438_13959 = state_13293__$1;
(statearr_13438_13959[(1)] = (30));

(statearr_13438_13959[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13294 === (63))){
var inst_13246 = (state_13293[(7)]);
var inst_13253 = (function(){throw inst_13246})();
var state_13293__$1 = state_13293;
var statearr_13439_13960 = state_13293__$1;
(statearr_13439_13960[(2)] = inst_13253);

(statearr_13439_13960[(1)] = (65));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
return null;
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
});})(c__19__auto__,___192__auto__,self____$1))
;
return ((function (switch__14__auto__,c__19__auto__,___192__auto__,self____$1){
return (function() {
var e2e$proposals$state_machine__15__auto__ = null;
var e2e$proposals$state_machine__15__auto____0 = (function (){
var statearr_13440 = [null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];
(statearr_13440[(0)] = e2e$proposals$state_machine__15__auto__);

(statearr_13440[(1)] = (1));

return statearr_13440;
});
var e2e$proposals$state_machine__15__auto____1 = (function (state_13293){
while(true){
var ret_value__16__auto__ = (function (){try{while(true){
var result__17__auto__ = switch__14__auto__.call(null,state_13293);
if(cljs.core.keyword_identical_QMARK_.call(null,result__17__auto__,new cljs.core.Keyword(null,"recur","recur",(-437573268)))){
continue;
} else {
return result__17__auto__;
}
break;
}
}catch (e13441){var ex__18__auto__ = e13441;
var statearr_13442_13961 = state_13293;
(statearr_13442_13961[(2)] = ex__18__auto__);


if(cljs.core.seq.call(null,(state_13293[(4)]))){
var statearr_13443_13962 = state_13293;
(statearr_13443_13962[(1)] = cljs.core.first.call(null,(state_13293[(4)])));

} else {
throw ex__18__auto__;
}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
}})();
if(cljs.core.keyword_identical_QMARK_.call(null,ret_value__16__auto__,new cljs.core.Keyword(null,"recur","recur",(-437573268)))){
var G__13963 = state_13293;
state_13293 = G__13963;
continue;
} else {
return ret_value__16__auto__;
}
break;
}
});
e2e$proposals$state_machine__15__auto__ = function(state_13293){
switch(arguments.length){
case 0:
return e2e$proposals$state_machine__15__auto____0.call(this);
case 1:
return e2e$proposals$state_machine__15__auto____1.call(this,state_13293);
}
throw(new Error('Invalid arity: ' + arguments.length));
};
e2e$proposals$state_machine__15__auto__.cljs$core$IFn$_invoke$arity$0 = e2e$proposals$state_machine__15__auto____0;
e2e$proposals$state_machine__15__auto__.cljs$core$IFn$_invoke$arity$1 = e2e$proposals$state_machine__15__auto____1;
return e2e$proposals$state_machine__15__auto__;
})()
;})(switch__14__auto__,c__19__auto__,___192__auto__,self____$1))
})();
var state__21__auto__ = (function (){var statearr_13444 = f__20__auto__.call(null);
(statearr_13444[(6)] = c__19__auto__);

return statearr_13444;
})();
return cljs.core.async.impl.ioc_helpers.run_state_machine_wrapped.call(null,state__21__auto__);
});})(c__19__auto__,___192__auto__,self____$1))
);

return c__19__auto__;
});

e2e.proposals.t_e2e$proposals13010.prototype.apply = (function (self__,args13013){
var self__ = this;
var self____$1 = this;
return self____$1.call.apply(self____$1,[self____$1].concat(cljs.core.aclone.call(null,args13013)));
});

e2e.proposals.t_e2e$proposals13010.prototype.cljs$core$IFn$_invoke$arity$1 = (function (done){
var self__ = this;
var ___192__auto__ = this;
var c__19__auto__ = cljs.core.async.chan.call(null,(1));
cljs.core.async.impl.dispatch.run.call(null,((function (c__19__auto__,___192__auto__){
return (function (){
var f__20__auto__ = (function (){var switch__14__auto__ = ((function (c__19__auto__,___192__auto__){
return (function (state_13724){
var state_val_13725 = (state_13724[(1)]);
if((state_val_13725 === (32))){
var _ = (function (){var statearr_13726 = state_13724;
(statearr_13726[(4)] = cljs.core.cons.call(null,(45),(state_13724[(4)])));

return statearr_13726;
})();
var inst_13596 = [new cljs.core.Keyword(null,"from","from",(1815293044)),new cljs.core.Keyword(null,"to","to",(192099007)),new cljs.core.Keyword(null,"quantity","quantity",(-1929050694)),new cljs.core.Keyword(null,"memo","memo",(-1928616099))];
var inst_13597 = [e2e.proposals.owner_acc,e2e.proposals.prop_acc,"1.5000 EFX","proposal"];
var inst_13598 = cljs.core.PersistentHashMap.fromArrays(inst_13596,inst_13597);
var inst_13599 = cljs.core.PersistentVector.EMPTY_NODE;
var inst_13600 = [new cljs.core.Keyword(null,"actor","actor",(-1830560481)),new cljs.core.Keyword(null,"permission","permission",(-511292572))];
var inst_13601 = [e2e.proposals.owner_acc,"active"];
var inst_13602 = cljs.core.PersistentHashMap.fromArrays(inst_13600,inst_13601);
var inst_13603 = [inst_13602];
var inst_13604 = (new cljs.core.PersistentVector(null,(1),(5),inst_13599,inst_13603,null));
var inst_13605 = eos_cljs.core.transact.call(null,e2e.proposals.token_acc,"transfer",inst_13598,inst_13604);
var inst_13606 = cljs.core.async.interop.p__GT_c.call(null,inst_13605);
var state_13724__$1 = state_13724;
return cljs.core.async.impl.ioc_helpers.take_BANG_.call(null,state_13724__$1,(46),inst_13606);
} else {
if((state_val_13725 === (64))){
var inst_13677 = (state_13724[(7)]);
var state_13724__$1 = state_13724;
var statearr_13727_13964 = state_13724__$1;
(statearr_13727_13964[(2)] = inst_13677);

(statearr_13727_13964[(1)] = (65));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13725 === (1))){
var state_13724__$1 = state_13724;
var statearr_13728_13965 = state_13724__$1;
(statearr_13728_13965[(2)] = null);

(statearr_13728_13965[(1)] = (2));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13725 === (33))){
var inst_13639 = (state_13724[(2)]);
var state_13724__$1 = (function (){var statearr_13729 = state_13724;
(statearr_13729[(8)] = inst_13639);

return statearr_13729;
})();
var statearr_13730_13966 = state_13724__$1;
(statearr_13730_13966[(2)] = null);

(statearr_13730_13966[(1)] = (54));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13725 === (65))){
var inst_13687 = (state_13724[(2)]);
var state_13724__$1 = (function (){var statearr_13731 = state_13724;
(statearr_13731[(9)] = inst_13687);

return statearr_13731;
})();
var statearr_13732_13967 = state_13724__$1;
(statearr_13732_13967[(2)] = null);

(statearr_13732_13967[(1)] = (66));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13725 === (2))){
var _ = (function (){var statearr_13733 = state_13724;
(statearr_13733[(4)] = cljs.core.cons.call(null,(5),(state_13724[(4)])));

return statearr_13733;
})();
var inst_13452 = eos_cljs.core.transact.call(null,e2e.proposals.prop_acc,"update",e2e.proposals.prop_config);
var inst_13453 = cljs.core.async.interop.p__GT_c.call(null,inst_13452);
var state_13724__$1 = state_13724;
return cljs.core.async.impl.ioc_helpers.take_BANG_.call(null,state_13724__$1,(6),inst_13453);
} else {
if((state_val_13725 === (34))){
var inst_13554 = (state_13724[(10)]);
var inst_13555 = (state_13724[(11)]);
var inst_13552 = (state_13724[(2)]);
var inst_13553 = inst_13552.cause;
var inst_13554__$1 = inst_13553.message;
var inst_13555__$1 = clojure.string.ends_with_QMARK_.call(null,inst_13554__$1,"wrong amount");
var inst_13556 = (!(inst_13555__$1));
var state_13724__$1 = (function (){var statearr_13734 = state_13724;
(statearr_13734[(10)] = inst_13554__$1);

(statearr_13734[(11)] = inst_13555__$1);

return statearr_13734;
})();
if(inst_13556){
var statearr_13735_13968 = state_13724__$1;
(statearr_13735_13968[(1)] = (35));

} else {
var statearr_13736_13969 = state_13724__$1;
(statearr_13736_13969[(1)] = (36));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13725 === (66))){
var _ = (function (){var statearr_13737 = state_13724;
(statearr_13737[(4)] = cljs.core.cons.call(null,(69),(state_13724[(4)])));

return statearr_13737;
})();
var state_13724__$1 = state_13724;
var statearr_13738_13970 = state_13724__$1;
(statearr_13738_13970[(1)] = (70));



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13725 === (3))){
var inst_13721 = (state_13724[(2)]);
var inst_13722 = done.call(null);
var state_13724__$1 = (function (){var statearr_13740 = state_13724;
(statearr_13740[(12)] = inst_13721);

return statearr_13740;
})();
return cljs.core.async.impl.ioc_helpers.return_chan.call(null,state_13724__$1,inst_13722);
} else {
if((state_val_13725 === (35))){
var inst_13554 = (state_13724[(10)]);
var inst_13558 = ["expected =","wrong amount"," actual = ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_13554)].join('');
var inst_13559 = cljs.core.prn.call(null,inst_13558);
var state_13724__$1 = state_13724;
var statearr_13741_13971 = state_13724__$1;
(statearr_13741_13971[(2)] = inst_13559);

(statearr_13741_13971[(1)] = (37));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13725 === (67))){
var inst_13715 = (state_13724[(2)]);
var _ = (function (){var statearr_13742 = state_13724;
(statearr_13742[(4)] = cljs.core.rest.call(null,(state_13724[(4)])));

return statearr_13742;
})();
var state_13724__$1 = state_13724;
var statearr_13743_13972 = state_13724__$1;
(statearr_13743_13972[(2)] = inst_13715);

(statearr_13743_13972[(1)] = (55));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13725 === (4))){
var inst_13445 = (state_13724[(2)]);
var inst_13446 = cljs.core.prn.call(null,inst_13445);
var state_13724__$1 = state_13724;
var statearr_13744_13973 = state_13724__$1;
(statearr_13744_13973[(2)] = inst_13446);

(statearr_13744_13973[(1)] = (3));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13725 === (36))){
var state_13724__$1 = state_13724;
var statearr_13746_13974 = state_13724__$1;
(statearr_13746_13974[(2)] = null);

(statearr_13746_13974[(1)] = (37));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13725 === (68))){
var inst_13688 = (state_13724[(2)]);
var inst_13689 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_13690 = true;
var inst_13691 = [new cljs.core.Keyword(null,"error","error",(-978969032)),"can send correct amount",inst_13690,inst_13688];
var inst_13692 = cljs.core.PersistentHashMap.fromArrays(inst_13689,inst_13691);
var inst_13693 = cljs.test.do_report.call(null,inst_13692);
var state_13724__$1 = state_13724;
var statearr_13747_13975 = state_13724__$1;
(statearr_13747_13975[(2)] = inst_13693);

(statearr_13747_13975[(1)] = (67));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13725 === (5))){
var _ = (function (){var statearr_13749 = state_13724;
(statearr_13749[(4)] = cljs.core.rest.call(null,(state_13724[(4)])));

return statearr_13749;
})();
var state_13724__$1 = state_13724;
var ex13745 = (state_13724__$1[(2)]);
var statearr_13750_13976 = state_13724__$1;
(statearr_13750_13976[(5)] = ex13745);


if((ex13745 instanceof Error)){
var statearr_13751_13977 = state_13724__$1;
(statearr_13751_13977[(1)] = (4));

(statearr_13751_13977[(5)] = null);

} else {
throw ex13745;

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13725 === (37))){
var inst_13562 = (state_13724[(2)]);
var state_13724__$1 = (function (){var statearr_13752 = state_13724;
(statearr_13752[(13)] = inst_13562);

return statearr_13752;
})();
var statearr_13753_13978 = state_13724__$1;
(statearr_13753_13978[(2)] = null);

(statearr_13753_13978[(1)] = (38));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13725 === (69))){
var _ = (function (){var statearr_13754 = state_13724;
(statearr_13754[(4)] = cljs.core.rest.call(null,(state_13724[(4)])));

return statearr_13754;
})();
var state_13724__$1 = state_13724;
var ex13748 = (state_13724__$1[(2)]);
var statearr_13755_13979 = state_13724__$1;
(statearr_13755_13979[(5)] = ex13748);


var statearr_13756_13980 = state_13724__$1;
(statearr_13756_13980[(1)] = (68));

(statearr_13756_13980[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13725 === (6))){
var inst_13455 = (state_13724[(14)]);
var inst_13455__$1 = (state_13724[(2)]);
var inst_13456 = (inst_13455__$1 instanceof cljs.core.ExceptionInfo);
var inst_13457 = cljs.core.ex_data.call(null,inst_13455__$1);
var inst_13458 = new cljs.core.Keyword(null,"error","error",(-978969032)).cljs$core$IFn$_invoke$arity$1(inst_13457);
var inst_13459 = cljs.core._EQ_.call(null,inst_13458,new cljs.core.Keyword(null,"promise-error","promise-error",(-90673560)));
var inst_13460 = ((inst_13456) && (inst_13459));
var state_13724__$1 = (function (){var statearr_13757 = state_13724;
(statearr_13757[(14)] = inst_13455__$1);

return statearr_13757;
})();
if(cljs.core.truth_(inst_13460)){
var statearr_13758_13981 = state_13724__$1;
(statearr_13758_13981[(1)] = (7));

} else {
var statearr_13759_13982 = state_13724__$1;
(statearr_13759_13982[(1)] = (8));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13725 === (38))){
var inst_13555 = (state_13724[(11)]);
var _ = (function (){var statearr_13760 = state_13724;
(statearr_13760[(4)] = cljs.core.cons.call(null,(41),(state_13724[(4)])));

return statearr_13760;
})();
var state_13724__$1 = state_13724;
if(cljs.core.truth_(inst_13555)){
var statearr_13761_13983 = state_13724__$1;
(statearr_13761_13983[(1)] = (42));

} else {
var statearr_13762_13984 = state_13724__$1;
(statearr_13762_13984[(1)] = (43));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13725 === (70))){
var inst_13700 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_13701 = true;
var inst_13702 = [new cljs.core.Keyword(null,"pass","pass",(1574159993)),"can send correct amount",inst_13701,true];
var inst_13703 = cljs.core.PersistentHashMap.fromArrays(inst_13700,inst_13702);
var inst_13704 = cljs.test.do_report.call(null,inst_13703);
var state_13724__$1 = state_13724;
var statearr_13763_13985 = state_13724__$1;
(statearr_13763_13985[(2)] = inst_13704);

(statearr_13763_13985[(1)] = (72));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13725 === (7))){
var inst_13455 = (state_13724[(14)]);
var inst_13462 = (function(){throw inst_13455})();
var state_13724__$1 = state_13724;
var statearr_13764_13986 = state_13724__$1;
(statearr_13764_13986[(2)] = inst_13462);

(statearr_13764_13986[(1)] = (9));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13725 === (39))){
var inst_13590 = (state_13724[(2)]);
var state_13724__$1 = state_13724;
var statearr_13765_13987 = state_13724__$1;
(statearr_13765_13987[(2)] = inst_13590);

(statearr_13765_13987[(1)] = (33));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13725 === (71))){
var inst_13706 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_13707 = true;
var inst_13708 = [new cljs.core.Keyword(null,"fail","fail",(1706214930)),"can send correct amount",inst_13707,true];
var inst_13709 = cljs.core.PersistentHashMap.fromArrays(inst_13706,inst_13708);
var inst_13710 = cljs.test.do_report.call(null,inst_13709);
var state_13724__$1 = state_13724;
var statearr_13766_13988 = state_13724__$1;
(statearr_13766_13988[(2)] = inst_13710);

(statearr_13766_13988[(1)] = (72));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13725 === (8))){
var inst_13455 = (state_13724[(14)]);
var state_13724__$1 = state_13724;
var statearr_13767_13989 = state_13724__$1;
(statearr_13767_13989[(2)] = inst_13455);

(statearr_13767_13989[(1)] = (9));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13725 === (40))){
var inst_13563 = (state_13724[(2)]);
var inst_13564 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_13565 = new cljs.core.Symbol("e2e.macros","pass?","e2e.macros/pass?",(894145299),null);
var inst_13566 = [new cljs.core.Keyword(null,"error","error",(-978969032)),"needs correct amount",inst_13565,inst_13563];
var inst_13567 = cljs.core.PersistentHashMap.fromArrays(inst_13564,inst_13566);
var inst_13568 = cljs.test.do_report.call(null,inst_13567);
var state_13724__$1 = state_13724;
var statearr_13768_13990 = state_13724__$1;
(statearr_13768_13990[(2)] = inst_13568);

(statearr_13768_13990[(1)] = (39));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13725 === (72))){
var inst_13712 = (state_13724[(2)]);
var _ = (function (){var statearr_13770 = state_13724;
(statearr_13770[(4)] = cljs.core.rest.call(null,(state_13724[(4)])));

return statearr_13770;
})();
var state_13724__$1 = (function (){var statearr_13771 = state_13724;
(statearr_13771[(15)] = inst_13712);

return statearr_13771;
})();
var statearr_13772_13991 = state_13724__$1;
(statearr_13772_13991[(2)] = true);

(statearr_13772_13991[(1)] = (67));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13725 === (9))){
var inst_13465 = (state_13724[(2)]);
var state_13724__$1 = (function (){var statearr_13773 = state_13724;
(statearr_13773[(16)] = inst_13465);

return statearr_13773;
})();
var statearr_13774_13992 = state_13724__$1;
(statearr_13774_13992[(2)] = null);

(statearr_13774_13992[(1)] = (10));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13725 === (41))){
var _ = (function (){var statearr_13775 = state_13724;
(statearr_13775[(4)] = cljs.core.rest.call(null,(state_13724[(4)])));

return statearr_13775;
})();
var state_13724__$1 = state_13724;
var ex13769 = (state_13724__$1[(2)]);
var statearr_13776_13993 = state_13724__$1;
(statearr_13776_13993[(5)] = ex13769);


var statearr_13777_13994 = state_13724__$1;
(statearr_13777_13994[(1)] = (40));

(statearr_13777_13994[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13725 === (10))){
var _ = (function (){var statearr_13778 = state_13724;
(statearr_13778[(4)] = cljs.core.cons.call(null,(23),(state_13724[(4)])));

return statearr_13778;
})();
var inst_13510 = cljs.core.assoc.call(null,e2e.proposals.base_prop,new cljs.core.Keyword(null,"content_hash","content_hash",(121497903)),"ee");
var inst_13511 = cljs.core.PersistentVector.EMPTY_NODE;
var inst_13512 = [new cljs.core.Keyword(null,"actor","actor",(-1830560481)),new cljs.core.Keyword(null,"permission","permission",(-511292572))];
var inst_13513 = [e2e.proposals.owner_acc,"active"];
var inst_13514 = cljs.core.PersistentHashMap.fromArrays(inst_13512,inst_13513);
var inst_13515 = [inst_13514];
var inst_13516 = (new cljs.core.PersistentVector(null,(1),(5),inst_13511,inst_13515,null));
var inst_13517 = eos_cljs.core.transact.call(null,e2e.proposals.prop_acc,"createprop",inst_13510,inst_13516);
var inst_13518 = cljs.core.async.interop.p__GT_c.call(null,inst_13517);
var state_13724__$1 = state_13724;
return cljs.core.async.impl.ioc_helpers.take_BANG_.call(null,state_13724__$1,(24),inst_13518);
} else {
if((state_val_13725 === (42))){
var inst_13555 = (state_13724[(11)]);
var inst_13575 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_13576 = new cljs.core.Symbol("e2e.macros","pass?","e2e.macros/pass?",(894145299),null);
var inst_13577 = [new cljs.core.Keyword(null,"pass","pass",(1574159993)),"needs correct amount",inst_13576,inst_13555];
var inst_13578 = cljs.core.PersistentHashMap.fromArrays(inst_13575,inst_13577);
var inst_13579 = cljs.test.do_report.call(null,inst_13578);
var state_13724__$1 = state_13724;
var statearr_13779_13995 = state_13724__$1;
(statearr_13779_13995[(2)] = inst_13579);

(statearr_13779_13995[(1)] = (44));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13725 === (11))){
var inst_13551 = (state_13724[(2)]);
var state_13724__$1 = (function (){var statearr_13780 = state_13724;
(statearr_13780[(17)] = inst_13551);

return statearr_13780;
})();
var statearr_13781_13996 = state_13724__$1;
(statearr_13781_13996[(2)] = null);

(statearr_13781_13996[(1)] = (32));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13725 === (43))){
var inst_13555 = (state_13724[(11)]);
var inst_13581 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_13582 = new cljs.core.Symbol("e2e.macros","pass?","e2e.macros/pass?",(894145299),null);
var inst_13583 = [new cljs.core.Keyword(null,"fail","fail",(1706214930)),"needs correct amount",inst_13582,inst_13555];
var inst_13584 = cljs.core.PersistentHashMap.fromArrays(inst_13581,inst_13583);
var inst_13585 = cljs.test.do_report.call(null,inst_13584);
var state_13724__$1 = state_13724;
var statearr_13782_13997 = state_13724__$1;
(statearr_13782_13997[(2)] = inst_13585);

(statearr_13782_13997[(1)] = (44));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13725 === (12))){
var inst_13468 = (state_13724[(18)]);
var inst_13469 = (state_13724[(19)]);
var inst_13466 = (state_13724[(2)]);
var inst_13467 = inst_13466.cause;
var inst_13468__$1 = inst_13467.message;
var inst_13469__$1 = clojure.string.ends_with_QMARK_.call(null,inst_13468__$1,"no proposal reserved");
var inst_13470 = (!(inst_13469__$1));
var state_13724__$1 = (function (){var statearr_13783 = state_13724;
(statearr_13783[(18)] = inst_13468__$1);

(statearr_13783[(19)] = inst_13469__$1);

return statearr_13783;
})();
if(inst_13470){
var statearr_13784_13998 = state_13724__$1;
(statearr_13784_13998[(1)] = (13));

} else {
var statearr_13785_13999 = state_13724__$1;
(statearr_13785_13999[(1)] = (14));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13725 === (44))){
var inst_13555 = (state_13724[(11)]);
var inst_13587 = (state_13724[(2)]);
var _ = (function (){var statearr_13787 = state_13724;
(statearr_13787[(4)] = cljs.core.rest.call(null,(state_13724[(4)])));

return statearr_13787;
})();
var state_13724__$1 = (function (){var statearr_13788 = state_13724;
(statearr_13788[(20)] = inst_13587);

return statearr_13788;
})();
var statearr_13789_14000 = state_13724__$1;
(statearr_13789_14000[(2)] = inst_13555);

(statearr_13789_14000[(1)] = (39));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13725 === (13))){
var inst_13468 = (state_13724[(18)]);
var inst_13472 = ["expected =","no proposal reserved"," actual = ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_13468)].join('');
var inst_13473 = cljs.core.prn.call(null,inst_13472);
var state_13724__$1 = state_13724;
var statearr_13790_14001 = state_13724__$1;
(statearr_13790_14001[(2)] = inst_13473);

(statearr_13790_14001[(1)] = (15));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13725 === (45))){
var _ = (function (){var statearr_13791 = state_13724;
(statearr_13791[(4)] = cljs.core.rest.call(null,(state_13724[(4)])));

return statearr_13791;
})();
var state_13724__$1 = state_13724;
var ex13786 = (state_13724__$1[(2)]);
var statearr_13792_14002 = state_13724__$1;
(statearr_13792_14002[(5)] = ex13786);


if((ex13786 instanceof Error)){
var statearr_13793_14003 = state_13724__$1;
(statearr_13793_14003[(1)] = (34));

(statearr_13793_14003[(5)] = null);

} else {
throw ex13786;

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13725 === (14))){
var state_13724__$1 = state_13724;
var statearr_13794_14004 = state_13724__$1;
(statearr_13794_14004[(2)] = null);

(statearr_13794_14004[(1)] = (15));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13725 === (46))){
var inst_13608 = (state_13724[(21)]);
var inst_13608__$1 = (state_13724[(2)]);
var inst_13609 = (inst_13608__$1 instanceof cljs.core.ExceptionInfo);
var inst_13610 = cljs.core.ex_data.call(null,inst_13608__$1);
var inst_13611 = new cljs.core.Keyword(null,"error","error",(-978969032)).cljs$core$IFn$_invoke$arity$1(inst_13610);
var inst_13612 = cljs.core._EQ_.call(null,inst_13611,new cljs.core.Keyword(null,"promise-error","promise-error",(-90673560)));
var inst_13613 = ((inst_13609) && (inst_13612));
var state_13724__$1 = (function (){var statearr_13795 = state_13724;
(statearr_13795[(21)] = inst_13608__$1);

return statearr_13795;
})();
if(cljs.core.truth_(inst_13613)){
var statearr_13796_14005 = state_13724__$1;
(statearr_13796_14005[(1)] = (47));

} else {
var statearr_13797_14006 = state_13724__$1;
(statearr_13797_14006[(1)] = (48));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13725 === (15))){
var inst_13476 = (state_13724[(2)]);
var state_13724__$1 = (function (){var statearr_13798 = state_13724;
(statearr_13798[(22)] = inst_13476);

return statearr_13798;
})();
var statearr_13799_14007 = state_13724__$1;
(statearr_13799_14007[(2)] = null);

(statearr_13799_14007[(1)] = (16));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13725 === (47))){
var inst_13608 = (state_13724[(21)]);
var inst_13615 = (function(){throw inst_13608})();
var state_13724__$1 = state_13724;
var statearr_13800_14008 = state_13724__$1;
(statearr_13800_14008[(2)] = inst_13615);

(statearr_13800_14008[(1)] = (49));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13725 === (16))){
var inst_13469 = (state_13724[(19)]);
var _ = (function (){var statearr_13801 = state_13724;
(statearr_13801[(4)] = cljs.core.cons.call(null,(19),(state_13724[(4)])));

return statearr_13801;
})();
var state_13724__$1 = state_13724;
if(cljs.core.truth_(inst_13469)){
var statearr_13802_14009 = state_13724__$1;
(statearr_13802_14009[(1)] = (20));

} else {
var statearr_13803_14010 = state_13724__$1;
(statearr_13803_14010[(1)] = (21));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13725 === (48))){
var inst_13608 = (state_13724[(21)]);
var state_13724__$1 = state_13724;
var statearr_13804_14011 = state_13724__$1;
(statearr_13804_14011[(2)] = inst_13608);

(statearr_13804_14011[(1)] = (49));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13725 === (17))){
var inst_13504 = (state_13724[(2)]);
var state_13724__$1 = state_13724;
var statearr_13805_14012 = state_13724__$1;
(statearr_13805_14012[(2)] = inst_13504);

(statearr_13805_14012[(1)] = (11));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13725 === (49))){
var inst_13618 = (state_13724[(2)]);
var state_13724__$1 = (function (){var statearr_13806 = state_13724;
(statearr_13806[(23)] = inst_13618);

return statearr_13806;
})();
var statearr_13807_14013 = state_13724__$1;
(statearr_13807_14013[(2)] = null);

(statearr_13807_14013[(1)] = (50));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13725 === (18))){
var inst_13477 = (state_13724[(2)]);
var inst_13478 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_13479 = new cljs.core.Symbol("e2e.macros","pass?","e2e.macros/pass?",(894145299),null);
var inst_13480 = [new cljs.core.Keyword(null,"error","error",(-978969032)),"need a reservation",inst_13479,inst_13477];
var inst_13481 = cljs.core.PersistentHashMap.fromArrays(inst_13478,inst_13480);
var inst_13482 = cljs.test.do_report.call(null,inst_13481);
var state_13724__$1 = state_13724;
var statearr_13809_14014 = state_13724__$1;
(statearr_13809_14014[(2)] = inst_13482);

(statearr_13809_14014[(1)] = (17));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13725 === (50))){
var _ = (function (){var statearr_13810 = state_13724;
(statearr_13810[(4)] = cljs.core.cons.call(null,(53),(state_13724[(4)])));

return statearr_13810;
})();
var inst_13630 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002))];
var inst_13631 = [new cljs.core.Keyword(null,"fail","fail",(1706214930)),"needs correct amount"];
var inst_13632 = cljs.core.PersistentHashMap.fromArrays(inst_13630,inst_13631);
var inst_13633 = cljs.test.do_report.call(null,inst_13632);
var ___$1 = (function (){var statearr_13811 = state_13724;
(statearr_13811[(4)] = cljs.core.rest.call(null,(state_13724[(4)])));

return statearr_13811;
})();
var state_13724__$1 = state_13724;
var statearr_13812_14015 = state_13724__$1;
(statearr_13812_14015[(2)] = inst_13633);

(statearr_13812_14015[(1)] = (51));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13725 === (19))){
var _ = (function (){var statearr_13813 = state_13724;
(statearr_13813[(4)] = cljs.core.rest.call(null,(state_13724[(4)])));

return statearr_13813;
})();
var state_13724__$1 = state_13724;
var ex13808 = (state_13724__$1[(2)]);
var statearr_13814_14016 = state_13724__$1;
(statearr_13814_14016[(5)] = ex13808);


var statearr_13815_14017 = state_13724__$1;
(statearr_13815_14017[(1)] = (18));

(statearr_13815_14017[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13725 === (51))){
var inst_13636 = (state_13724[(2)]);
var _ = (function (){var statearr_13816 = state_13724;
(statearr_13816[(4)] = cljs.core.rest.call(null,(state_13724[(4)])));

return statearr_13816;
})();
var state_13724__$1 = state_13724;
var statearr_13817_14018 = state_13724__$1;
(statearr_13817_14018[(2)] = inst_13636);

(statearr_13817_14018[(1)] = (33));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13725 === (20))){
var inst_13469 = (state_13724[(19)]);
var inst_13489 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_13490 = new cljs.core.Symbol("e2e.macros","pass?","e2e.macros/pass?",(894145299),null);
var inst_13491 = [new cljs.core.Keyword(null,"pass","pass",(1574159993)),"need a reservation",inst_13490,inst_13469];
var inst_13492 = cljs.core.PersistentHashMap.fromArrays(inst_13489,inst_13491);
var inst_13493 = cljs.test.do_report.call(null,inst_13492);
var state_13724__$1 = state_13724;
var statearr_13818_14019 = state_13724__$1;
(statearr_13818_14019[(2)] = inst_13493);

(statearr_13818_14019[(1)] = (22));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13725 === (52))){
var inst_13619 = (state_13724[(2)]);
var inst_13620 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_13621 = null;
var inst_13622 = [new cljs.core.Keyword(null,"error","error",(-978969032)),"needs correct amount",inst_13621,inst_13619];
var inst_13623 = cljs.core.PersistentHashMap.fromArrays(inst_13620,inst_13622);
var inst_13624 = cljs.test.do_report.call(null,inst_13623);
var state_13724__$1 = state_13724;
var statearr_13820_14020 = state_13724__$1;
(statearr_13820_14020[(2)] = inst_13624);

(statearr_13820_14020[(1)] = (51));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13725 === (21))){
var inst_13469 = (state_13724[(19)]);
var inst_13495 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_13496 = new cljs.core.Symbol("e2e.macros","pass?","e2e.macros/pass?",(894145299),null);
var inst_13497 = [new cljs.core.Keyword(null,"fail","fail",(1706214930)),"need a reservation",inst_13496,inst_13469];
var inst_13498 = cljs.core.PersistentHashMap.fromArrays(inst_13495,inst_13497);
var inst_13499 = cljs.test.do_report.call(null,inst_13498);
var state_13724__$1 = state_13724;
var statearr_13821_14021 = state_13724__$1;
(statearr_13821_14021[(2)] = inst_13499);

(statearr_13821_14021[(1)] = (22));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13725 === (53))){
var _ = (function (){var statearr_13822 = state_13724;
(statearr_13822[(4)] = cljs.core.rest.call(null,(state_13724[(4)])));

return statearr_13822;
})();
var state_13724__$1 = state_13724;
var ex13819 = (state_13724__$1[(2)]);
var statearr_13823_14022 = state_13724__$1;
(statearr_13823_14022[(5)] = ex13819);


var statearr_13824_14023 = state_13724__$1;
(statearr_13824_14023[(1)] = (52));

(statearr_13824_14023[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13725 === (22))){
var inst_13469 = (state_13724[(19)]);
var inst_13501 = (state_13724[(2)]);
var _ = (function (){var statearr_13826 = state_13724;
(statearr_13826[(4)] = cljs.core.rest.call(null,(state_13724[(4)])));

return statearr_13826;
})();
var state_13724__$1 = (function (){var statearr_13827 = state_13724;
(statearr_13827[(24)] = inst_13501);

return statearr_13827;
})();
var statearr_13828_14024 = state_13724__$1;
(statearr_13828_14024[(2)] = inst_13469);

(statearr_13828_14024[(1)] = (17));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13725 === (54))){
var _ = (function (){var statearr_13829 = state_13724;
(statearr_13829[(4)] = cljs.core.cons.call(null,(61),(state_13724[(4)])));

return statearr_13829;
})();
var inst_13665 = [new cljs.core.Keyword(null,"from","from",(1815293044)),new cljs.core.Keyword(null,"to","to",(192099007)),new cljs.core.Keyword(null,"quantity","quantity",(-1929050694)),new cljs.core.Keyword(null,"memo","memo",(-1928616099))];
var inst_13666 = [e2e.proposals.owner_acc,e2e.proposals.prop_acc,e2e.proposals.proposal_cost,"proposal"];
var inst_13667 = cljs.core.PersistentHashMap.fromArrays(inst_13665,inst_13666);
var inst_13668 = cljs.core.PersistentVector.EMPTY_NODE;
var inst_13669 = [new cljs.core.Keyword(null,"actor","actor",(-1830560481)),new cljs.core.Keyword(null,"permission","permission",(-511292572))];
var inst_13670 = [e2e.proposals.owner_acc,"active"];
var inst_13671 = cljs.core.PersistentHashMap.fromArrays(inst_13669,inst_13670);
var inst_13672 = [inst_13671];
var inst_13673 = (new cljs.core.PersistentVector(null,(1),(5),inst_13668,inst_13672,null));
var inst_13674 = eos_cljs.core.transact.call(null,e2e.proposals.token_acc,"transfer",inst_13667,inst_13673);
var inst_13675 = cljs.core.async.interop.p__GT_c.call(null,inst_13674);
var state_13724__$1 = state_13724;
return cljs.core.async.impl.ioc_helpers.take_BANG_.call(null,state_13724__$1,(62),inst_13675);
} else {
if((state_val_13725 === (23))){
var _ = (function (){var statearr_13830 = state_13724;
(statearr_13830[(4)] = cljs.core.rest.call(null,(state_13724[(4)])));

return statearr_13830;
})();
var state_13724__$1 = state_13724;
var ex13825 = (state_13724__$1[(2)]);
var statearr_13831_14025 = state_13724__$1;
(statearr_13831_14025[(5)] = ex13825);


if((ex13825 instanceof Error)){
var statearr_13832_14026 = state_13724__$1;
(statearr_13832_14026[(1)] = (12));

(statearr_13832_14026[(5)] = null);

} else {
throw ex13825;

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13725 === (55))){
var inst_13718 = (state_13724[(2)]);
var _ = (function (){var statearr_13833 = state_13724;
(statearr_13833[(4)] = cljs.core.rest.call(null,(state_13724[(4)])));

return statearr_13833;
})();
var state_13724__$1 = state_13724;
var statearr_13834_14027 = state_13724__$1;
(statearr_13834_14027[(2)] = inst_13718);

(statearr_13834_14027[(1)] = (3));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13725 === (24))){
var inst_13520 = (state_13724[(25)]);
var inst_13520__$1 = (state_13724[(2)]);
var inst_13521 = (inst_13520__$1 instanceof cljs.core.ExceptionInfo);
var inst_13522 = cljs.core.ex_data.call(null,inst_13520__$1);
var inst_13523 = new cljs.core.Keyword(null,"error","error",(-978969032)).cljs$core$IFn$_invoke$arity$1(inst_13522);
var inst_13524 = cljs.core._EQ_.call(null,inst_13523,new cljs.core.Keyword(null,"promise-error","promise-error",(-90673560)));
var inst_13525 = ((inst_13521) && (inst_13524));
var state_13724__$1 = (function (){var statearr_13835 = state_13724;
(statearr_13835[(25)] = inst_13520__$1);

return statearr_13835;
})();
if(cljs.core.truth_(inst_13525)){
var statearr_13836_14028 = state_13724__$1;
(statearr_13836_14028[(1)] = (25));

} else {
var statearr_13837_14029 = state_13724__$1;
(statearr_13837_14029[(1)] = (26));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13725 === (56))){
var inst_13640 = (state_13724[(2)]);
var inst_13641 = cljs.core.prn.call(null,"test failed with ",inst_13640);
var state_13724__$1 = (function (){var statearr_13838 = state_13724;
(statearr_13838[(26)] = inst_13641);

return statearr_13838;
})();
var statearr_13839_14030 = state_13724__$1;
(statearr_13839_14030[(2)] = null);

(statearr_13839_14030[(1)] = (57));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13725 === (25))){
var inst_13520 = (state_13724[(25)]);
var inst_13527 = (function(){throw inst_13520})();
var state_13724__$1 = state_13724;
var statearr_13840_14031 = state_13724__$1;
(statearr_13840_14031[(2)] = inst_13527);

(statearr_13840_14031[(1)] = (27));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13725 === (57))){
var _ = (function (){var statearr_13841 = state_13724;
(statearr_13841[(4)] = cljs.core.cons.call(null,(60),(state_13724[(4)])));

return statearr_13841;
})();
var inst_13653 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002))];
var inst_13654 = [new cljs.core.Keyword(null,"fail","fail",(1706214930)),"can send correct amount"];
var inst_13655 = cljs.core.PersistentHashMap.fromArrays(inst_13653,inst_13654);
var inst_13656 = cljs.test.do_report.call(null,inst_13655);
var ___$1 = (function (){var statearr_13842 = state_13724;
(statearr_13842[(4)] = cljs.core.rest.call(null,(state_13724[(4)])));

return statearr_13842;
})();
var state_13724__$1 = state_13724;
var statearr_13843_14032 = state_13724__$1;
(statearr_13843_14032[(2)] = inst_13656);

(statearr_13843_14032[(1)] = (58));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13725 === (26))){
var inst_13520 = (state_13724[(25)]);
var state_13724__$1 = state_13724;
var statearr_13844_14033 = state_13724__$1;
(statearr_13844_14033[(2)] = inst_13520);

(statearr_13844_14033[(1)] = (27));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13725 === (58))){
var inst_13659 = (state_13724[(2)]);
var state_13724__$1 = state_13724;
var statearr_13845_14034 = state_13724__$1;
(statearr_13845_14034[(2)] = inst_13659);

(statearr_13845_14034[(1)] = (55));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13725 === (27))){
var inst_13530 = (state_13724[(2)]);
var state_13724__$1 = (function (){var statearr_13846 = state_13724;
(statearr_13846[(27)] = inst_13530);

return statearr_13846;
})();
var statearr_13847_14035 = state_13724__$1;
(statearr_13847_14035[(2)] = null);

(statearr_13847_14035[(1)] = (28));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13725 === (59))){
var inst_13642 = (state_13724[(2)]);
var inst_13643 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_13644 = null;
var inst_13645 = [new cljs.core.Keyword(null,"error","error",(-978969032)),"can send correct amount",inst_13644,inst_13642];
var inst_13646 = cljs.core.PersistentHashMap.fromArrays(inst_13643,inst_13645);
var inst_13647 = cljs.test.do_report.call(null,inst_13646);
var state_13724__$1 = state_13724;
var statearr_13849_14036 = state_13724__$1;
(statearr_13849_14036[(2)] = inst_13647);

(statearr_13849_14036[(1)] = (58));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13725 === (28))){
var _ = (function (){var statearr_13850 = state_13724;
(statearr_13850[(4)] = cljs.core.cons.call(null,(31),(state_13724[(4)])));

return statearr_13850;
})();
var inst_13542 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002))];
var inst_13543 = [new cljs.core.Keyword(null,"fail","fail",(1706214930)),"need a reservation"];
var inst_13544 = cljs.core.PersistentHashMap.fromArrays(inst_13542,inst_13543);
var inst_13545 = cljs.test.do_report.call(null,inst_13544);
var ___$1 = (function (){var statearr_13851 = state_13724;
(statearr_13851[(4)] = cljs.core.rest.call(null,(state_13724[(4)])));

return statearr_13851;
})();
var state_13724__$1 = state_13724;
var statearr_13852_14037 = state_13724__$1;
(statearr_13852_14037[(2)] = inst_13545);

(statearr_13852_14037[(1)] = (29));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13725 === (60))){
var _ = (function (){var statearr_13854 = state_13724;
(statearr_13854[(4)] = cljs.core.rest.call(null,(state_13724[(4)])));

return statearr_13854;
})();
var state_13724__$1 = state_13724;
var ex13848 = (state_13724__$1[(2)]);
var statearr_13855_14038 = state_13724__$1;
(statearr_13855_14038[(5)] = ex13848);


var statearr_13856_14039 = state_13724__$1;
(statearr_13856_14039[(1)] = (59));

(statearr_13856_14039[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13725 === (29))){
var inst_13548 = (state_13724[(2)]);
var _ = (function (){var statearr_13857 = state_13724;
(statearr_13857[(4)] = cljs.core.rest.call(null,(state_13724[(4)])));

return statearr_13857;
})();
var state_13724__$1 = state_13724;
var statearr_13858_14040 = state_13724__$1;
(statearr_13858_14040[(2)] = inst_13548);

(statearr_13858_14040[(1)] = (11));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13725 === (61))){
var _ = (function (){var statearr_13859 = state_13724;
(statearr_13859[(4)] = cljs.core.rest.call(null,(state_13724[(4)])));

return statearr_13859;
})();
var state_13724__$1 = state_13724;
var ex13853 = (state_13724__$1[(2)]);
var statearr_13860_14041 = state_13724__$1;
(statearr_13860_14041[(5)] = ex13853);


if((ex13853 instanceof Error)){
var statearr_13861_14042 = state_13724__$1;
(statearr_13861_14042[(1)] = (56));

(statearr_13861_14042[(5)] = null);

} else {
throw ex13853;

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13725 === (30))){
var inst_13531 = (state_13724[(2)]);
var inst_13532 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_13533 = null;
var inst_13534 = [new cljs.core.Keyword(null,"error","error",(-978969032)),"need a reservation",inst_13533,inst_13531];
var inst_13535 = cljs.core.PersistentHashMap.fromArrays(inst_13532,inst_13534);
var inst_13536 = cljs.test.do_report.call(null,inst_13535);
var state_13724__$1 = state_13724;
var statearr_13863_14043 = state_13724__$1;
(statearr_13863_14043[(2)] = inst_13536);

(statearr_13863_14043[(1)] = (29));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13725 === (62))){
var inst_13677 = (state_13724[(7)]);
var inst_13677__$1 = (state_13724[(2)]);
var inst_13678 = (inst_13677__$1 instanceof cljs.core.ExceptionInfo);
var inst_13679 = cljs.core.ex_data.call(null,inst_13677__$1);
var inst_13680 = new cljs.core.Keyword(null,"error","error",(-978969032)).cljs$core$IFn$_invoke$arity$1(inst_13679);
var inst_13681 = cljs.core._EQ_.call(null,inst_13680,new cljs.core.Keyword(null,"promise-error","promise-error",(-90673560)));
var inst_13682 = ((inst_13678) && (inst_13681));
var state_13724__$1 = (function (){var statearr_13864 = state_13724;
(statearr_13864[(7)] = inst_13677__$1);

return statearr_13864;
})();
if(cljs.core.truth_(inst_13682)){
var statearr_13865_14044 = state_13724__$1;
(statearr_13865_14044[(1)] = (63));

} else {
var statearr_13866_14045 = state_13724__$1;
(statearr_13866_14045[(1)] = (64));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13725 === (31))){
var _ = (function (){var statearr_13867 = state_13724;
(statearr_13867[(4)] = cljs.core.rest.call(null,(state_13724[(4)])));

return statearr_13867;
})();
var state_13724__$1 = state_13724;
var ex13862 = (state_13724__$1[(2)]);
var statearr_13868_14046 = state_13724__$1;
(statearr_13868_14046[(5)] = ex13862);


var statearr_13869_14047 = state_13724__$1;
(statearr_13869_14047[(1)] = (30));

(statearr_13869_14047[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_13725 === (63))){
var inst_13677 = (state_13724[(7)]);
var inst_13684 = (function(){throw inst_13677})();
var state_13724__$1 = state_13724;
var statearr_13870_14048 = state_13724__$1;
(statearr_13870_14048[(2)] = inst_13684);

(statearr_13870_14048[(1)] = (65));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
return null;
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
});})(c__19__auto__,___192__auto__))
;
return ((function (switch__14__auto__,c__19__auto__,___192__auto__){
return (function() {
var e2e$proposals$state_machine__15__auto__ = null;
var e2e$proposals$state_machine__15__auto____0 = (function (){
var statearr_13871 = [null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];
(statearr_13871[(0)] = e2e$proposals$state_machine__15__auto__);

(statearr_13871[(1)] = (1));

return statearr_13871;
});
var e2e$proposals$state_machine__15__auto____1 = (function (state_13724){
while(true){
var ret_value__16__auto__ = (function (){try{while(true){
var result__17__auto__ = switch__14__auto__.call(null,state_13724);
if(cljs.core.keyword_identical_QMARK_.call(null,result__17__auto__,new cljs.core.Keyword(null,"recur","recur",(-437573268)))){
continue;
} else {
return result__17__auto__;
}
break;
}
}catch (e13872){var ex__18__auto__ = e13872;
var statearr_13873_14049 = state_13724;
(statearr_13873_14049[(2)] = ex__18__auto__);


if(cljs.core.seq.call(null,(state_13724[(4)]))){
var statearr_13874_14050 = state_13724;
(statearr_13874_14050[(1)] = cljs.core.first.call(null,(state_13724[(4)])));

} else {
throw ex__18__auto__;
}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
}})();
if(cljs.core.keyword_identical_QMARK_.call(null,ret_value__16__auto__,new cljs.core.Keyword(null,"recur","recur",(-437573268)))){
var G__14051 = state_13724;
state_13724 = G__14051;
continue;
} else {
return ret_value__16__auto__;
}
break;
}
});
e2e$proposals$state_machine__15__auto__ = function(state_13724){
switch(arguments.length){
case 0:
return e2e$proposals$state_machine__15__auto____0.call(this);
case 1:
return e2e$proposals$state_machine__15__auto____1.call(this,state_13724);
}
throw(new Error('Invalid arity: ' + arguments.length));
};
e2e$proposals$state_machine__15__auto__.cljs$core$IFn$_invoke$arity$0 = e2e$proposals$state_machine__15__auto____0;
e2e$proposals$state_machine__15__auto__.cljs$core$IFn$_invoke$arity$1 = e2e$proposals$state_machine__15__auto____1;
return e2e$proposals$state_machine__15__auto__;
})()
;})(switch__14__auto__,c__19__auto__,___192__auto__))
})();
var state__21__auto__ = (function (){var statearr_13875 = f__20__auto__.call(null);
(statearr_13875[(6)] = c__19__auto__);

return statearr_13875;
})();
return cljs.core.async.impl.ioc_helpers.run_state_machine_wrapped.call(null,state__21__auto__);
});})(c__19__auto__,___192__auto__))
);

return c__19__auto__;
});

e2e.proposals.t_e2e$proposals13010.getBasis = (function (){
return new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,"meta13011","meta13011",(1269138853),null)], null);
});

e2e.proposals.t_e2e$proposals13010.cljs$lang$type = true;

e2e.proposals.t_e2e$proposals13010.cljs$lang$ctorStr = "e2e.proposals/t_e2e$proposals13010";

e2e.proposals.t_e2e$proposals13010.cljs$lang$ctorPrWriter = (function (this__9776__auto__,writer__9777__auto__,opt__9778__auto__){
return cljs.core._write.call(null,writer__9777__auto__,"e2e.proposals/t_e2e$proposals13010");
});

/**
 * Positional factory function for e2e.proposals/t_e2e$proposals13010.
 */
e2e.proposals.__GT_t_e2e$proposals13010 = (function e2e$proposals$__GT_t_e2e$proposals13010(meta13011){
return (new e2e.proposals.t_e2e$proposals13010(meta13011));
});

}

return (new e2e.proposals.t_e2e$proposals13010(null));
});

e2e.proposals.proposal_payment.cljs$lang$var = new cljs.core.Var(function(){return e2e.proposals.proposal_payment;},new cljs.core.Symbol("e2e.proposals","proposal-payment","e2e.proposals/proposal-payment",(-924459697),null),cljs.core.PersistentHashMap.fromArrays([new cljs.core.Keyword(null,"ns","ns",(441598760)),new cljs.core.Keyword(null,"name","name",(1843675177)),new cljs.core.Keyword(null,"file","file",(-1269645878)),new cljs.core.Keyword(null,"end-column","end-column",(1425389514)),new cljs.core.Keyword(null,"column","column",(2078222095)),new cljs.core.Keyword(null,"line","line",(212345235)),new cljs.core.Keyword(null,"end-line","end-line",(1837326455)),new cljs.core.Keyword(null,"arglists","arglists",(1661989754)),new cljs.core.Keyword(null,"doc","doc",(1913296891)),new cljs.core.Keyword(null,"test","test",(577538877))],[new cljs.core.Symbol(null,"e2e.proposals","e2e.proposals",(1479174227),null),new cljs.core.Symbol(null,"proposal-payment","proposal-payment",(-65968046),null),"e2e/proposals.cljs",(26),(1),(87),(87),cljs.core.List.EMPTY,null,(cljs.core.truth_(e2e.proposals.proposal_payment)?e2e.proposals.proposal_payment.cljs$lang$test:null)]));
e2e.proposals.new_proposal = (function e2e$proposals$new_proposal(){
return cljs.test.test_var.call(null,e2e.proposals.new_proposal.cljs$lang$var);
});
e2e.proposals.new_proposal.cljs$lang$test = (function (){
if((typeof e2e !== 'undefined') && (typeof e2e.proposals !== 'undefined') && (typeof e2e.proposals.t_e2e$proposals14052 !== 'undefined')){
} else {

/**
* @constructor
 * @implements {cljs.core.IWithMeta}
 * @implements {cljs.core.IMeta}
 * @implements {cljs.test.IAsyncTest}
 * @implements {cljs.core.IFn}
*/
e2e.proposals.t_e2e$proposals14052 = (function (meta14053){
this.meta14053 = meta14053;
this.cljs$lang$protocol_mask$partition0$ = 393217;
this.cljs$lang$protocol_mask$partition1$ = 0;
});
e2e.proposals.t_e2e$proposals14052.prototype.cljs$core$IWithMeta$_with_meta$arity$2 = (function (_14054,meta14053__$1){
var self__ = this;
var _14054__$1 = this;
return (new e2e.proposals.t_e2e$proposals14052(meta14053__$1));
});

e2e.proposals.t_e2e$proposals14052.prototype.cljs$core$IMeta$_meta$arity$1 = (function (_14054){
var self__ = this;
var _14054__$1 = this;
return self__.meta14053;
});

e2e.proposals.t_e2e$proposals14052.prototype.cljs$test$IAsyncTest$ = cljs.core.PROTOCOL_SENTINEL;

e2e.proposals.t_e2e$proposals14052.prototype.call = (function (self__,done){
var self__ = this;
var self____$1 = this;
var ___192__auto__ = self____$1;
var c__19__auto__ = cljs.core.async.chan.call(null,(1));
cljs.core.async.impl.dispatch.run.call(null,((function (c__19__auto__,___192__auto__,self____$1){
return (function (){
var f__20__auto__ = (function (){var switch__14__auto__ = ((function (c__19__auto__,___192__auto__,self____$1){
return (function (state_14418){
var state_val_14419 = (state_14418[(1)]);
if((state_val_14419 === (32))){
var inst_14170 = (state_14418[(7)]);
var inst_14170__$1 = (state_14418[(2)]);
var inst_14171 = (inst_14170__$1 instanceof cljs.core.ExceptionInfo);
var inst_14172 = cljs.core.ex_data.call(null,inst_14170__$1);
var inst_14173 = new cljs.core.Keyword(null,"error","error",(-978969032)).cljs$core$IFn$_invoke$arity$1(inst_14172);
var inst_14174 = cljs.core._EQ_.call(null,inst_14173,new cljs.core.Keyword(null,"promise-error","promise-error",(-90673560)));
var inst_14175 = ((inst_14171) && (inst_14174));
var state_14418__$1 = (function (){var statearr_14421 = state_14418;
(statearr_14421[(7)] = inst_14170__$1);

return statearr_14421;
})();
if(cljs.core.truth_(inst_14175)){
var statearr_14422_15144 = state_14418__$1;
(statearr_14422_15144[(1)] = (33));

} else {
var statearr_14423_15145 = state_14418__$1;
(statearr_14423_15145[(1)] = (34));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14419 === (64))){
var _ = (function (){var statearr_14424 = state_14418;
(statearr_14424[(4)] = cljs.core.rest.call(null,(state_14418[(4)])));

return statearr_14424;
})();
var state_14418__$1 = state_14418;
var ex14420 = (state_14418__$1[(2)]);
var statearr_14425_15146 = state_14418__$1;
(statearr_14425_15146[(5)] = ex14420);


var statearr_14426_15147 = state_14418__$1;
(statearr_14426_15147[(1)] = (63));

(statearr_14426_15147[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14419 === (1))){
var state_14418__$1 = state_14418;
var statearr_14428_15148 = state_14418__$1;
(statearr_14428_15148[(2)] = null);

(statearr_14428_15148[(1)] = (2));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14419 === (33))){
var inst_14170 = (state_14418[(7)]);
var inst_14177 = (function(){throw inst_14170})();
var state_14418__$1 = state_14418;
var statearr_14429_15149 = state_14418__$1;
(statearr_14429_15149[(2)] = inst_14177);

(statearr_14429_15149[(1)] = (35));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14419 === (65))){
var _ = (function (){var statearr_14430 = state_14418;
(statearr_14430[(4)] = cljs.core.rest.call(null,(state_14418[(4)])));

return statearr_14430;
})();
var state_14418__$1 = state_14418;
var ex14427 = (state_14418__$1[(2)]);
var statearr_14431_15150 = state_14418__$1;
(statearr_14431_15150[(5)] = ex14427);


if((ex14427 instanceof Error)){
var statearr_14432_15151 = state_14418__$1;
(statearr_14432_15151[(1)] = (60));

(statearr_14432_15151[(5)] = null);

} else {
throw ex14427;

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14419 === (2))){
var _ = (function (){var statearr_14433 = state_14418;
(statearr_14433[(4)] = cljs.core.cons.call(null,(15),(state_14418[(4)])));

return statearr_14433;
})();
var inst_14100 = cljs.core.assoc.call(null,e2e.proposals.base_prop,new cljs.core.Keyword(null,"author","author",(2111686192)),e2e.proposals.prop_acc);
var inst_14101 = eos_cljs.core.transact.call(null,e2e.proposals.prop_acc,"createprop",inst_14100);
var inst_14102 = cljs.core.async.interop.p__GT_c.call(null,inst_14101);
var state_14418__$1 = state_14418;
return cljs.core.async.impl.ioc_helpers.take_BANG_.call(null,state_14418__$1,(16),inst_14102);
} else {
if((state_val_14419 === (34))){
var inst_14170 = (state_14418[(7)]);
var state_14418__$1 = state_14418;
var statearr_14434_15152 = state_14418__$1;
(statearr_14434_15152[(2)] = inst_14170);

(statearr_14434_15152[(1)] = (35));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14419 === (66))){
var inst_14322 = (state_14418[(8)]);
var inst_14322__$1 = (state_14418[(2)]);
var inst_14323 = (inst_14322__$1 instanceof cljs.core.ExceptionInfo);
var inst_14324 = cljs.core.ex_data.call(null,inst_14322__$1);
var inst_14325 = new cljs.core.Keyword(null,"error","error",(-978969032)).cljs$core$IFn$_invoke$arity$1(inst_14324);
var inst_14326 = cljs.core._EQ_.call(null,inst_14325,new cljs.core.Keyword(null,"promise-error","promise-error",(-90673560)));
var inst_14327 = ((inst_14323) && (inst_14326));
var state_14418__$1 = (function (){var statearr_14435 = state_14418;
(statearr_14435[(8)] = inst_14322__$1);

return statearr_14435;
})();
if(cljs.core.truth_(inst_14327)){
var statearr_14436_15153 = state_14418__$1;
(statearr_14436_15153[(1)] = (67));

} else {
var statearr_14437_15154 = state_14418__$1;
(statearr_14437_15154[(1)] = (68));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14419 === (3))){
var inst_14135 = (state_14418[(2)]);
var state_14418__$1 = (function (){var statearr_14438 = state_14418;
(statearr_14438[(9)] = inst_14135);

return statearr_14438;
})();
var statearr_14439_15155 = state_14418__$1;
(statearr_14439_15155[(2)] = null);

(statearr_14439_15155[(1)] = (24));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14419 === (35))){
var inst_14180 = (state_14418[(2)]);
var state_14418__$1 = (function (){var statearr_14440 = state_14418;
(statearr_14440[(10)] = inst_14180);

return statearr_14440;
})();
var statearr_14441_15156 = state_14418__$1;
(statearr_14441_15156[(2)] = null);

(statearr_14441_15156[(1)] = (36));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14419 === (67))){
var inst_14322 = (state_14418[(8)]);
var inst_14329 = (function(){throw inst_14322})();
var state_14418__$1 = state_14418;
var statearr_14442_15157 = state_14418__$1;
(statearr_14442_15157[(2)] = inst_14329);

(statearr_14442_15157[(1)] = (69));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14419 === (4))){
var inst_14058 = (state_14418[(11)]);
var inst_14059 = (state_14418[(12)]);
var inst_14056 = (state_14418[(2)]);
var inst_14057 = inst_14056.cause;
var inst_14058__$1 = inst_14057.message;
var inst_14059__$1 = clojure.string.ends_with_QMARK_.call(null,inst_14058__$1,"not a dao member");
var inst_14060 = (!(inst_14059__$1));
var state_14418__$1 = (function (){var statearr_14443 = state_14418;
(statearr_14443[(11)] = inst_14058__$1);

(statearr_14443[(12)] = inst_14059__$1);

return statearr_14443;
})();
if(inst_14060){
var statearr_14444_15158 = state_14418__$1;
(statearr_14444_15158[(1)] = (5));

} else {
var statearr_14445_15159 = state_14418__$1;
(statearr_14445_15159[(1)] = (6));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14419 === (36))){
var _ = (function (){var statearr_14446 = state_14418;
(statearr_14446[(4)] = cljs.core.cons.call(null,(39),(state_14418[(4)])));

return statearr_14446;
})();
var state_14418__$1 = state_14418;
var statearr_14447_15160 = state_14418__$1;
(statearr_14447_15160[(1)] = (40));



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14419 === (68))){
var inst_14322 = (state_14418[(8)]);
var state_14418__$1 = state_14418;
var statearr_14449_15161 = state_14418__$1;
(statearr_14449_15161[(2)] = inst_14322);

(statearr_14449_15161[(1)] = (69));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14419 === (5))){
var inst_14058 = (state_14418[(11)]);
var inst_14062 = ["expected =","not a dao member"," actual = ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_14058)].join('');
var inst_14063 = cljs.core.prn.call(null,inst_14062);
var state_14418__$1 = state_14418;
var statearr_14450_15162 = state_14418__$1;
(statearr_14450_15162[(2)] = inst_14063);

(statearr_14450_15162[(1)] = (7));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14419 === (37))){
var inst_14208 = (state_14418[(2)]);
var _ = (function (){var statearr_14451 = state_14418;
(statearr_14451[(4)] = cljs.core.rest.call(null,(state_14418[(4)])));

return statearr_14451;
})();
var state_14418__$1 = state_14418;
var statearr_14452_15163 = state_14418__$1;
(statearr_14452_15163[(2)] = inst_14208);

(statearr_14452_15163[(1)] = (25));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14419 === (69))){
var inst_14332 = (state_14418[(2)]);
var state_14418__$1 = (function (){var statearr_14453 = state_14418;
(statearr_14453[(13)] = inst_14332);

return statearr_14453;
})();
var statearr_14454_15164 = state_14418__$1;
(statearr_14454_15164[(2)] = null);

(statearr_14454_15164[(1)] = (70));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14419 === (6))){
var state_14418__$1 = state_14418;
var statearr_14455_15165 = state_14418__$1;
(statearr_14455_15165[(2)] = null);

(statearr_14455_15165[(1)] = (7));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14419 === (38))){
var inst_14181 = (state_14418[(2)]);
var inst_14182 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_14183 = true;
var inst_14184 = [new cljs.core.Keyword(null,"error","error",(-978969032)),"can make a proposal",inst_14183,inst_14181];
var inst_14185 = cljs.core.PersistentHashMap.fromArrays(inst_14182,inst_14184);
var inst_14186 = cljs.test.do_report.call(null,inst_14185);
var state_14418__$1 = state_14418;
var statearr_14456_15166 = state_14418__$1;
(statearr_14456_15166[(2)] = inst_14186);

(statearr_14456_15166[(1)] = (37));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14419 === (70))){
var _ = (function (){var statearr_14458 = state_14418;
(statearr_14458[(4)] = cljs.core.cons.call(null,(73),(state_14418[(4)])));

return statearr_14458;
})();
var state_14418__$1 = state_14418;
var statearr_14459_15167 = state_14418__$1;
(statearr_14459_15167[(1)] = (74));



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14419 === (7))){
var inst_14066 = (state_14418[(2)]);
var state_14418__$1 = (function (){var statearr_14461 = state_14418;
(statearr_14461[(14)] = inst_14066);

return statearr_14461;
})();
var statearr_14462_15168 = state_14418__$1;
(statearr_14462_15168[(2)] = null);

(statearr_14462_15168[(1)] = (8));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14419 === (39))){
var _ = (function (){var statearr_14463 = state_14418;
(statearr_14463[(4)] = cljs.core.rest.call(null,(state_14418[(4)])));

return statearr_14463;
})();
var state_14418__$1 = state_14418;
var ex14457 = (state_14418__$1[(2)]);
var statearr_14464_15169 = state_14418__$1;
(statearr_14464_15169[(5)] = ex14457);


var statearr_14465_15170 = state_14418__$1;
(statearr_14465_15170[(1)] = (38));

(statearr_14465_15170[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14419 === (71))){
var inst_14360 = (state_14418[(2)]);
var _ = (function (){var statearr_14466 = state_14418;
(statearr_14466[(4)] = cljs.core.rest.call(null,(state_14418[(4)])));

return statearr_14466;
})();
var state_14418__$1 = state_14418;
var statearr_14467_15171 = state_14418__$1;
(statearr_14467_15171[(2)] = inst_14360);

(statearr_14467_15171[(1)] = (59));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14419 === (8))){
var inst_14059 = (state_14418[(12)]);
var _ = (function (){var statearr_14468 = state_14418;
(statearr_14468[(4)] = cljs.core.cons.call(null,(11),(state_14418[(4)])));

return statearr_14468;
})();
var state_14418__$1 = state_14418;
if(cljs.core.truth_(inst_14059)){
var statearr_14469_15172 = state_14418__$1;
(statearr_14469_15172[(1)] = (12));

} else {
var statearr_14470_15173 = state_14418__$1;
(statearr_14470_15173[(1)] = (13));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14419 === (40))){
var inst_14193 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_14194 = true;
var inst_14195 = [new cljs.core.Keyword(null,"pass","pass",(1574159993)),"can make a proposal",inst_14194,true];
var inst_14196 = cljs.core.PersistentHashMap.fromArrays(inst_14193,inst_14195);
var inst_14197 = cljs.test.do_report.call(null,inst_14196);
var state_14418__$1 = state_14418;
var statearr_14471_15174 = state_14418__$1;
(statearr_14471_15174[(2)] = inst_14197);

(statearr_14471_15174[(1)] = (42));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14419 === (72))){
var inst_14333 = (state_14418[(2)]);
var inst_14334 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_14335 = true;
var inst_14336 = [new cljs.core.Keyword(null,"error","error",(-978969032)),"can make a second proposal",inst_14335,inst_14333];
var inst_14337 = cljs.core.PersistentHashMap.fromArrays(inst_14334,inst_14336);
var inst_14338 = cljs.test.do_report.call(null,inst_14337);
var state_14418__$1 = state_14418;
var statearr_14472_15175 = state_14418__$1;
(statearr_14472_15175[(2)] = inst_14338);

(statearr_14472_15175[(1)] = (71));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14419 === (9))){
var inst_14094 = (state_14418[(2)]);
var state_14418__$1 = state_14418;
var statearr_14474_15176 = state_14418__$1;
(statearr_14474_15176[(2)] = inst_14094);

(statearr_14474_15176[(1)] = (3));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14419 === (41))){
var inst_14199 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_14200 = true;
var inst_14201 = [new cljs.core.Keyword(null,"fail","fail",(1706214930)),"can make a proposal",inst_14200,true];
var inst_14202 = cljs.core.PersistentHashMap.fromArrays(inst_14199,inst_14201);
var inst_14203 = cljs.test.do_report.call(null,inst_14202);
var state_14418__$1 = state_14418;
var statearr_14475_15177 = state_14418__$1;
(statearr_14475_15177[(2)] = inst_14203);

(statearr_14475_15177[(1)] = (42));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14419 === (73))){
var _ = (function (){var statearr_14476 = state_14418;
(statearr_14476[(4)] = cljs.core.rest.call(null,(state_14418[(4)])));

return statearr_14476;
})();
var state_14418__$1 = state_14418;
var ex14473 = (state_14418__$1[(2)]);
var statearr_14477_15178 = state_14418__$1;
(statearr_14477_15178[(5)] = ex14473);


var statearr_14478_15179 = state_14418__$1;
(statearr_14478_15179[(1)] = (72));

(statearr_14478_15179[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14419 === (10))){
var inst_14067 = (state_14418[(2)]);
var inst_14068 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_14069 = new cljs.core.Symbol("e2e.macros","pass?","e2e.macros/pass?",(894145299),null);
var inst_14070 = [new cljs.core.Keyword(null,"error","error",(-978969032)),"need to be a dao member",inst_14069,inst_14067];
var inst_14071 = cljs.core.PersistentHashMap.fromArrays(inst_14068,inst_14070);
var inst_14072 = cljs.test.do_report.call(null,inst_14071);
var state_14418__$1 = state_14418;
var statearr_14479_15180 = state_14418__$1;
(statearr_14479_15180[(2)] = inst_14072);

(statearr_14479_15180[(1)] = (9));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14419 === (42))){
var inst_14205 = (state_14418[(2)]);
var _ = (function (){var statearr_14481 = state_14418;
(statearr_14481[(4)] = cljs.core.rest.call(null,(state_14418[(4)])));

return statearr_14481;
})();
var state_14418__$1 = (function (){var statearr_14482 = state_14418;
(statearr_14482[(15)] = inst_14205);

return statearr_14482;
})();
var statearr_14483_15181 = state_14418__$1;
(statearr_14483_15181[(2)] = true);

(statearr_14483_15181[(1)] = (37));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14419 === (74))){
var inst_14345 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_14346 = true;
var inst_14347 = [new cljs.core.Keyword(null,"pass","pass",(1574159993)),"can make a second proposal",inst_14346,true];
var inst_14348 = cljs.core.PersistentHashMap.fromArrays(inst_14345,inst_14347);
var inst_14349 = cljs.test.do_report.call(null,inst_14348);
var state_14418__$1 = state_14418;
var statearr_14484_15182 = state_14418__$1;
(statearr_14484_15182[(2)] = inst_14349);

(statearr_14484_15182[(1)] = (76));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14419 === (11))){
var _ = (function (){var statearr_14485 = state_14418;
(statearr_14485[(4)] = cljs.core.rest.call(null,(state_14418[(4)])));

return statearr_14485;
})();
var state_14418__$1 = state_14418;
var ex14480 = (state_14418__$1[(2)]);
var statearr_14486_15183 = state_14418__$1;
(statearr_14486_15183[(5)] = ex14480);


var statearr_14487_15184 = state_14418__$1;
(statearr_14487_15184[(1)] = (10));

(statearr_14487_15184[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14419 === (43))){
var inst_14215 = (state_14418[(16)]);
var inst_14215__$1 = (state_14418[(2)]);
var inst_14216 = (inst_14215__$1 instanceof cljs.core.ExceptionInfo);
var inst_14217 = cljs.core.ex_data.call(null,inst_14215__$1);
var inst_14218 = new cljs.core.Keyword(null,"error","error",(-978969032)).cljs$core$IFn$_invoke$arity$1(inst_14217);
var inst_14219 = cljs.core._EQ_.call(null,inst_14218,new cljs.core.Keyword(null,"promise-error","promise-error",(-90673560)));
var inst_14220 = ((inst_14216) && (inst_14219));
var state_14418__$1 = (function (){var statearr_14488 = state_14418;
(statearr_14488[(16)] = inst_14215__$1);

return statearr_14488;
})();
if(cljs.core.truth_(inst_14220)){
var statearr_14489_15185 = state_14418__$1;
(statearr_14489_15185[(1)] = (44));

} else {
var statearr_14490_15186 = state_14418__$1;
(statearr_14490_15186[(1)] = (45));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14419 === (75))){
var inst_14351 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_14352 = true;
var inst_14353 = [new cljs.core.Keyword(null,"fail","fail",(1706214930)),"can make a second proposal",inst_14352,true];
var inst_14354 = cljs.core.PersistentHashMap.fromArrays(inst_14351,inst_14353);
var inst_14355 = cljs.test.do_report.call(null,inst_14354);
var state_14418__$1 = state_14418;
var statearr_14491_15187 = state_14418__$1;
(statearr_14491_15187[(2)] = inst_14355);

(statearr_14491_15187[(1)] = (76));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14419 === (12))){
var inst_14059 = (state_14418[(12)]);
var inst_14079 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_14080 = new cljs.core.Symbol("e2e.macros","pass?","e2e.macros/pass?",(894145299),null);
var inst_14081 = [new cljs.core.Keyword(null,"pass","pass",(1574159993)),"need to be a dao member",inst_14080,inst_14059];
var inst_14082 = cljs.core.PersistentHashMap.fromArrays(inst_14079,inst_14081);
var inst_14083 = cljs.test.do_report.call(null,inst_14082);
var state_14418__$1 = state_14418;
var statearr_14492_15188 = state_14418__$1;
(statearr_14492_15188[(2)] = inst_14083);

(statearr_14492_15188[(1)] = (14));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14419 === (44))){
var inst_14215 = (state_14418[(16)]);
var inst_14222 = (function(){throw inst_14215})();
var state_14418__$1 = state_14418;
var statearr_14493_15189 = state_14418__$1;
(statearr_14493_15189[(2)] = inst_14222);

(statearr_14493_15189[(1)] = (46));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14419 === (76))){
var inst_14357 = (state_14418[(2)]);
var _ = (function (){var statearr_14494 = state_14418;
(statearr_14494[(4)] = cljs.core.rest.call(null,(state_14418[(4)])));

return statearr_14494;
})();
var state_14418__$1 = (function (){var statearr_14495 = state_14418;
(statearr_14495[(17)] = inst_14357);

return statearr_14495;
})();
var statearr_14496_15190 = state_14418__$1;
(statearr_14496_15190[(2)] = true);

(statearr_14496_15190[(1)] = (71));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14419 === (13))){
var inst_14059 = (state_14418[(12)]);
var inst_14085 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_14086 = new cljs.core.Symbol("e2e.macros","pass?","e2e.macros/pass?",(894145299),null);
var inst_14087 = [new cljs.core.Keyword(null,"fail","fail",(1706214930)),"need to be a dao member",inst_14086,inst_14059];
var inst_14088 = cljs.core.PersistentHashMap.fromArrays(inst_14085,inst_14087);
var inst_14089 = cljs.test.do_report.call(null,inst_14088);
var state_14418__$1 = state_14418;
var statearr_14497_15191 = state_14418__$1;
(statearr_14497_15191[(2)] = inst_14089);

(statearr_14497_15191[(1)] = (14));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14419 === (45))){
var inst_14215 = (state_14418[(16)]);
var state_14418__$1 = state_14418;
var statearr_14498_15192 = state_14418__$1;
(statearr_14498_15192[(2)] = inst_14215);

(statearr_14498_15192[(1)] = (46));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14419 === (77))){
var inst_14367 = (state_14418[(18)]);
var inst_14367__$1 = (state_14418[(2)]);
var inst_14368 = (inst_14367__$1 instanceof cljs.core.ExceptionInfo);
var inst_14369 = cljs.core.ex_data.call(null,inst_14367__$1);
var inst_14370 = new cljs.core.Keyword(null,"error","error",(-978969032)).cljs$core$IFn$_invoke$arity$1(inst_14369);
var inst_14371 = cljs.core._EQ_.call(null,inst_14370,new cljs.core.Keyword(null,"promise-error","promise-error",(-90673560)));
var inst_14372 = ((inst_14368) && (inst_14371));
var state_14418__$1 = (function (){var statearr_14499 = state_14418;
(statearr_14499[(18)] = inst_14367__$1);

return statearr_14499;
})();
if(cljs.core.truth_(inst_14372)){
var statearr_14500_15193 = state_14418__$1;
(statearr_14500_15193[(1)] = (78));

} else {
var statearr_14501_15194 = state_14418__$1;
(statearr_14501_15194[(1)] = (79));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14419 === (14))){
var inst_14059 = (state_14418[(12)]);
var inst_14091 = (state_14418[(2)]);
var _ = (function (){var statearr_14502 = state_14418;
(statearr_14502[(4)] = cljs.core.rest.call(null,(state_14418[(4)])));

return statearr_14502;
})();
var state_14418__$1 = (function (){var statearr_14503 = state_14418;
(statearr_14503[(19)] = inst_14091);

return statearr_14503;
})();
var statearr_14504_15195 = state_14418__$1;
(statearr_14504_15195[(2)] = inst_14059);

(statearr_14504_15195[(1)] = (9));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14419 === (46))){
var inst_14225 = (state_14418[(2)]);
var state_14418__$1 = (function (){var statearr_14506 = state_14418;
(statearr_14506[(20)] = inst_14225);

return statearr_14506;
})();
var statearr_14507_15196 = state_14418__$1;
(statearr_14507_15196[(2)] = null);

(statearr_14507_15196[(1)] = (47));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14419 === (78))){
var inst_14367 = (state_14418[(18)]);
var inst_14374 = (function(){throw inst_14367})();
var state_14418__$1 = state_14418;
var statearr_14508_15197 = state_14418__$1;
(statearr_14508_15197[(2)] = inst_14374);

(statearr_14508_15197[(1)] = (80));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14419 === (15))){
var _ = (function (){var statearr_14509 = state_14418;
(statearr_14509[(4)] = cljs.core.rest.call(null,(state_14418[(4)])));

return statearr_14509;
})();
var state_14418__$1 = state_14418;
var ex14505 = (state_14418__$1[(2)]);
var statearr_14510_15198 = state_14418__$1;
(statearr_14510_15198[(5)] = ex14505);


if((ex14505 instanceof Error)){
var statearr_14511_15199 = state_14418__$1;
(statearr_14511_15199[(1)] = (4));

(statearr_14511_15199[(5)] = null);

} else {
throw ex14505;

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14419 === (47))){
var inst_14225 = (state_14418[(20)]);
var inst_14239 = (state_14418[(21)]);
var inst_14240 = (state_14418[(22)]);
var _ = (function (){var statearr_14512 = state_14418;
(statearr_14512[(4)] = cljs.core.cons.call(null,(50),(state_14418[(4)])));

return statearr_14512;
})();
var inst_14237 = cljs.core.count.call(null,inst_14225);
var inst_14238 = (new cljs.core.List(null,(1),null,(1),null));
var inst_14239__$1 = (new cljs.core.List(null,inst_14237,inst_14238,(2),null));
var inst_14240__$1 = cljs.core.apply.call(null,cljs.core._EQ_,inst_14239__$1);
var state_14418__$1 = (function (){var statearr_14513 = state_14418;
(statearr_14513[(21)] = inst_14239__$1);

(statearr_14513[(22)] = inst_14240__$1);

return statearr_14513;
})();
if(cljs.core.truth_(inst_14240__$1)){
var statearr_14514_15200 = state_14418__$1;
(statearr_14514_15200[(1)] = (51));

} else {
var statearr_14515_15201 = state_14418__$1;
(statearr_14515_15201[(1)] = (52));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14419 === (79))){
var inst_14367 = (state_14418[(18)]);
var state_14418__$1 = state_14418;
var statearr_14516_15202 = state_14418__$1;
(statearr_14516_15202[(2)] = inst_14367);

(statearr_14516_15202[(1)] = (80));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14419 === (16))){
var inst_14104 = (state_14418[(23)]);
var inst_14104__$1 = (state_14418[(2)]);
var inst_14105 = (inst_14104__$1 instanceof cljs.core.ExceptionInfo);
var inst_14106 = cljs.core.ex_data.call(null,inst_14104__$1);
var inst_14107 = new cljs.core.Keyword(null,"error","error",(-978969032)).cljs$core$IFn$_invoke$arity$1(inst_14106);
var inst_14108 = cljs.core._EQ_.call(null,inst_14107,new cljs.core.Keyword(null,"promise-error","promise-error",(-90673560)));
var inst_14109 = ((inst_14105) && (inst_14108));
var state_14418__$1 = (function (){var statearr_14517 = state_14418;
(statearr_14517[(23)] = inst_14104__$1);

return statearr_14517;
})();
if(cljs.core.truth_(inst_14109)){
var statearr_14518_15203 = state_14418__$1;
(statearr_14518_15203[(1)] = (17));

} else {
var statearr_14519_15204 = state_14418__$1;
(statearr_14519_15204[(1)] = (18));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14419 === (48))){
var inst_14263 = (state_14418[(2)]);
var inst_14264 = [new cljs.core.Keyword(null,"from","from",(1815293044)),new cljs.core.Keyword(null,"to","to",(192099007)),new cljs.core.Keyword(null,"quantity","quantity",(-1929050694)),new cljs.core.Keyword(null,"memo","memo",(-1928616099))];
var inst_14265 = [e2e.proposals.owner_acc,e2e.proposals.prop_acc,e2e.proposals.proposal_cost,"proposal"];
var inst_14266 = cljs.core.PersistentHashMap.fromArrays(inst_14264,inst_14265);
var inst_14267 = cljs.core.PersistentVector.EMPTY_NODE;
var inst_14268 = [new cljs.core.Keyword(null,"actor","actor",(-1830560481)),new cljs.core.Keyword(null,"permission","permission",(-511292572))];
var inst_14269 = [e2e.proposals.owner_acc,"active"];
var inst_14270 = cljs.core.PersistentHashMap.fromArrays(inst_14268,inst_14269);
var inst_14271 = [inst_14270];
var inst_14272 = (new cljs.core.PersistentVector(null,(1),(5),inst_14267,inst_14271,null));
var inst_14273 = eos_cljs.core.transact.call(null,e2e.proposals.token_acc,"transfer",inst_14266,inst_14272);
var inst_14274 = cljs.core.async.interop.p__GT_c.call(null,inst_14273);
var state_14418__$1 = (function (){var statearr_14520 = state_14418;
(statearr_14520[(24)] = inst_14263);

return statearr_14520;
})();
return cljs.core.async.impl.ioc_helpers.take_BANG_.call(null,state_14418__$1,(54),inst_14274);
} else {
if((state_val_14419 === (80))){
var inst_14377 = (state_14418[(2)]);
var state_14418__$1 = (function (){var statearr_14521 = state_14418;
(statearr_14521[(25)] = inst_14377);

return statearr_14521;
})();
var statearr_14522_15205 = state_14418__$1;
(statearr_14522_15205[(2)] = null);

(statearr_14522_15205[(1)] = (81));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14419 === (17))){
var inst_14104 = (state_14418[(23)]);
var inst_14111 = (function(){throw inst_14104})();
var state_14418__$1 = state_14418;
var statearr_14523_15206 = state_14418__$1;
(statearr_14523_15206[(2)] = inst_14111);

(statearr_14523_15206[(1)] = (19));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14419 === (49))){
var inst_14226 = (state_14418[(2)]);
var inst_14227 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_14228 = cljs.core.list(new cljs.core.Symbol(null,"=","=",(-1501502141),null),cljs.core.list(new cljs.core.Symbol(null,"count","count",(-514511684),null),new cljs.core.Symbol(null,"rows","rows",(-1804386089),null)),(1));
var inst_14229 = [new cljs.core.Keyword(null,"error","error",(-978969032)),null,inst_14228,inst_14226];
var inst_14230 = cljs.core.PersistentHashMap.fromArrays(inst_14227,inst_14229);
var inst_14231 = cljs.test.do_report.call(null,inst_14230);
var state_14418__$1 = state_14418;
var statearr_14524_15207 = state_14418__$1;
(statearr_14524_15207[(2)] = inst_14231);

(statearr_14524_15207[(1)] = (48));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14419 === (81))){
var inst_14377 = (state_14418[(25)]);
var inst_14391 = (state_14418[(26)]);
var inst_14392 = (state_14418[(27)]);
var _ = (function (){var statearr_14526 = state_14418;
(statearr_14526[(4)] = cljs.core.cons.call(null,(84),(state_14418[(4)])));

return statearr_14526;
})();
var inst_14389 = cljs.core.count.call(null,inst_14377);
var inst_14390 = (new cljs.core.List(null,(2),null,(1),null));
var inst_14391__$1 = (new cljs.core.List(null,inst_14389,inst_14390,(2),null));
var inst_14392__$1 = cljs.core.apply.call(null,cljs.core._EQ_,inst_14391__$1);
var state_14418__$1 = (function (){var statearr_14527 = state_14418;
(statearr_14527[(26)] = inst_14391__$1);

(statearr_14527[(27)] = inst_14392__$1);

return statearr_14527;
})();
if(cljs.core.truth_(inst_14392__$1)){
var statearr_14528_15208 = state_14418__$1;
(statearr_14528_15208[(1)] = (85));

} else {
var statearr_14529_15209 = state_14418__$1;
(statearr_14529_15209[(1)] = (86));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14419 === (18))){
var inst_14104 = (state_14418[(23)]);
var state_14418__$1 = state_14418;
var statearr_14530_15210 = state_14418__$1;
(statearr_14530_15210[(2)] = inst_14104);

(statearr_14530_15210[(1)] = (19));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14419 === (50))){
var _ = (function (){var statearr_14531 = state_14418;
(statearr_14531[(4)] = cljs.core.rest.call(null,(state_14418[(4)])));

return statearr_14531;
})();
var state_14418__$1 = state_14418;
var ex14525 = (state_14418__$1[(2)]);
var statearr_14532_15211 = state_14418__$1;
(statearr_14532_15211[(5)] = ex14525);


var statearr_14533_15212 = state_14418__$1;
(statearr_14533_15212[(1)] = (49));

(statearr_14533_15212[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14419 === (82))){
var inst_14415 = (state_14418[(2)]);
var inst_14416 = done.call(null);
var state_14418__$1 = (function (){var statearr_14534 = state_14418;
(statearr_14534[(28)] = inst_14415);

return statearr_14534;
})();
return cljs.core.async.impl.ioc_helpers.return_chan.call(null,state_14418__$1,inst_14416);
} else {
if((state_val_14419 === (19))){
var inst_14114 = (state_14418[(2)]);
var state_14418__$1 = (function (){var statearr_14535 = state_14418;
(statearr_14535[(29)] = inst_14114);

return statearr_14535;
})();
var statearr_14536_15213 = state_14418__$1;
(statearr_14536_15213[(2)] = null);

(statearr_14536_15213[(1)] = (20));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14419 === (51))){
var inst_14239 = (state_14418[(21)]);
var inst_14242 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_14243 = cljs.core.list(new cljs.core.Symbol(null,"=","=",(-1501502141),null),cljs.core.list(new cljs.core.Symbol(null,"count","count",(-514511684),null),new cljs.core.Symbol(null,"rows","rows",(-1804386089),null)),(1));
var inst_14244 = cljs.core.cons.call(null,cljs.core._EQ_,inst_14239);
var inst_14245 = [new cljs.core.Keyword(null,"pass","pass",(1574159993)),null,inst_14243,inst_14244];
var inst_14246 = cljs.core.PersistentHashMap.fromArrays(inst_14242,inst_14245);
var inst_14247 = cljs.test.do_report.call(null,inst_14246);
var state_14418__$1 = state_14418;
var statearr_14537_15214 = state_14418__$1;
(statearr_14537_15214[(2)] = inst_14247);

(statearr_14537_15214[(1)] = (53));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14419 === (83))){
var inst_14378 = (state_14418[(2)]);
var inst_14379 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_14380 = cljs.core.list(new cljs.core.Symbol(null,"=","=",(-1501502141),null),cljs.core.list(new cljs.core.Symbol(null,"count","count",(-514511684),null),new cljs.core.Symbol(null,"rows","rows",(-1804386089),null)),(2));
var inst_14381 = [new cljs.core.Keyword(null,"error","error",(-978969032)),null,inst_14380,inst_14378];
var inst_14382 = cljs.core.PersistentHashMap.fromArrays(inst_14379,inst_14381);
var inst_14383 = cljs.test.do_report.call(null,inst_14382);
var state_14418__$1 = state_14418;
var statearr_14538_15215 = state_14418__$1;
(statearr_14538_15215[(2)] = inst_14383);

(statearr_14538_15215[(1)] = (82));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14419 === (20))){
var _ = (function (){var statearr_14540 = state_14418;
(statearr_14540[(4)] = cljs.core.cons.call(null,(23),(state_14418[(4)])));

return statearr_14540;
})();
var inst_14126 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002))];
var inst_14127 = [new cljs.core.Keyword(null,"fail","fail",(1706214930)),"need to be a dao member"];
var inst_14128 = cljs.core.PersistentHashMap.fromArrays(inst_14126,inst_14127);
var inst_14129 = cljs.test.do_report.call(null,inst_14128);
var ___$1 = (function (){var statearr_14541 = state_14418;
(statearr_14541[(4)] = cljs.core.rest.call(null,(state_14418[(4)])));

return statearr_14541;
})();
var state_14418__$1 = state_14418;
var statearr_14542_15216 = state_14418__$1;
(statearr_14542_15216[(2)] = inst_14129);

(statearr_14542_15216[(1)] = (21));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14419 === (52))){
var inst_14239 = (state_14418[(21)]);
var inst_14249 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_14250 = cljs.core.list(new cljs.core.Symbol(null,"=","=",(-1501502141),null),cljs.core.list(new cljs.core.Symbol(null,"count","count",(-514511684),null),new cljs.core.Symbol(null,"rows","rows",(-1804386089),null)),(1));
var inst_14251 = new cljs.core.Symbol(null,"not","not",(1044554643),null);
var inst_14252 = new cljs.core.Symbol(null,"=","=",(-1501502141),null);
var inst_14253 = cljs.core.cons.call(null,inst_14252,inst_14239);
var inst_14254 = (new cljs.core.List(null,inst_14253,null,(1),null));
var inst_14255 = (new cljs.core.List(null,inst_14251,inst_14254,(2),null));
var inst_14256 = [new cljs.core.Keyword(null,"fail","fail",(1706214930)),null,inst_14250,inst_14255];
var inst_14257 = cljs.core.PersistentHashMap.fromArrays(inst_14249,inst_14256);
var inst_14258 = cljs.test.do_report.call(null,inst_14257);
var state_14418__$1 = state_14418;
var statearr_14543_15217 = state_14418__$1;
(statearr_14543_15217[(2)] = inst_14258);

(statearr_14543_15217[(1)] = (53));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14419 === (84))){
var _ = (function (){var statearr_14544 = state_14418;
(statearr_14544[(4)] = cljs.core.rest.call(null,(state_14418[(4)])));

return statearr_14544;
})();
var state_14418__$1 = state_14418;
var ex14539 = (state_14418__$1[(2)]);
var statearr_14545_15218 = state_14418__$1;
(statearr_14545_15218[(5)] = ex14539);


var statearr_14546_15219 = state_14418__$1;
(statearr_14546_15219[(1)] = (83));

(statearr_14546_15219[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14419 === (21))){
var inst_14132 = (state_14418[(2)]);
var _ = (function (){var statearr_14547 = state_14418;
(statearr_14547[(4)] = cljs.core.rest.call(null,(state_14418[(4)])));

return statearr_14547;
})();
var state_14418__$1 = state_14418;
var statearr_14548_15220 = state_14418__$1;
(statearr_14548_15220[(2)] = inst_14132);

(statearr_14548_15220[(1)] = (3));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14419 === (53))){
var inst_14240 = (state_14418[(22)]);
var inst_14260 = (state_14418[(2)]);
var _ = (function (){var statearr_14549 = state_14418;
(statearr_14549[(4)] = cljs.core.rest.call(null,(state_14418[(4)])));

return statearr_14549;
})();
var state_14418__$1 = (function (){var statearr_14550 = state_14418;
(statearr_14550[(30)] = inst_14260);

return statearr_14550;
})();
var statearr_14551_15221 = state_14418__$1;
(statearr_14551_15221[(2)] = inst_14240);

(statearr_14551_15221[(1)] = (48));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14419 === (85))){
var inst_14391 = (state_14418[(26)]);
var inst_14394 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_14395 = cljs.core.list(new cljs.core.Symbol(null,"=","=",(-1501502141),null),cljs.core.list(new cljs.core.Symbol(null,"count","count",(-514511684),null),new cljs.core.Symbol(null,"rows","rows",(-1804386089),null)),(2));
var inst_14396 = cljs.core.cons.call(null,cljs.core._EQ_,inst_14391);
var inst_14397 = [new cljs.core.Keyword(null,"pass","pass",(1574159993)),null,inst_14395,inst_14396];
var inst_14398 = cljs.core.PersistentHashMap.fromArrays(inst_14394,inst_14397);
var inst_14399 = cljs.test.do_report.call(null,inst_14398);
var state_14418__$1 = state_14418;
var statearr_14552_15222 = state_14418__$1;
(statearr_14552_15222[(2)] = inst_14399);

(statearr_14552_15222[(1)] = (87));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14419 === (22))){
var inst_14115 = (state_14418[(2)]);
var inst_14116 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_14117 = null;
var inst_14118 = [new cljs.core.Keyword(null,"error","error",(-978969032)),"need to be a dao member",inst_14117,inst_14115];
var inst_14119 = cljs.core.PersistentHashMap.fromArrays(inst_14116,inst_14118);
var inst_14120 = cljs.test.do_report.call(null,inst_14119);
var state_14418__$1 = state_14418;
var statearr_14553_15223 = state_14418__$1;
(statearr_14553_15223[(2)] = inst_14120);

(statearr_14553_15223[(1)] = (21));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14419 === (54))){
var inst_14276 = (state_14418[(31)]);
var inst_14276__$1 = (state_14418[(2)]);
var inst_14277 = (inst_14276__$1 instanceof cljs.core.ExceptionInfo);
var inst_14278 = cljs.core.ex_data.call(null,inst_14276__$1);
var inst_14279 = new cljs.core.Keyword(null,"error","error",(-978969032)).cljs$core$IFn$_invoke$arity$1(inst_14278);
var inst_14280 = cljs.core._EQ_.call(null,inst_14279,new cljs.core.Keyword(null,"promise-error","promise-error",(-90673560)));
var inst_14281 = ((inst_14277) && (inst_14280));
var state_14418__$1 = (function (){var statearr_14555 = state_14418;
(statearr_14555[(31)] = inst_14276__$1);

return statearr_14555;
})();
if(cljs.core.truth_(inst_14281)){
var statearr_14556_15224 = state_14418__$1;
(statearr_14556_15224[(1)] = (55));

} else {
var statearr_14557_15225 = state_14418__$1;
(statearr_14557_15225[(1)] = (56));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14419 === (86))){
var inst_14391 = (state_14418[(26)]);
var inst_14401 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_14402 = cljs.core.list(new cljs.core.Symbol(null,"=","=",(-1501502141),null),cljs.core.list(new cljs.core.Symbol(null,"count","count",(-514511684),null),new cljs.core.Symbol(null,"rows","rows",(-1804386089),null)),(2));
var inst_14403 = new cljs.core.Symbol(null,"not","not",(1044554643),null);
var inst_14404 = new cljs.core.Symbol(null,"=","=",(-1501502141),null);
var inst_14405 = cljs.core.cons.call(null,inst_14404,inst_14391);
var inst_14406 = (new cljs.core.List(null,inst_14405,null,(1),null));
var inst_14407 = (new cljs.core.List(null,inst_14403,inst_14406,(2),null));
var inst_14408 = [new cljs.core.Keyword(null,"fail","fail",(1706214930)),null,inst_14402,inst_14407];
var inst_14409 = cljs.core.PersistentHashMap.fromArrays(inst_14401,inst_14408);
var inst_14410 = cljs.test.do_report.call(null,inst_14409);
var state_14418__$1 = state_14418;
var statearr_14558_15226 = state_14418__$1;
(statearr_14558_15226[(2)] = inst_14410);

(statearr_14558_15226[(1)] = (87));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14419 === (23))){
var _ = (function (){var statearr_14559 = state_14418;
(statearr_14559[(4)] = cljs.core.rest.call(null,(state_14418[(4)])));

return statearr_14559;
})();
var state_14418__$1 = state_14418;
var ex14554 = (state_14418__$1[(2)]);
var statearr_14560_15227 = state_14418__$1;
(statearr_14560_15227[(5)] = ex14554);


var statearr_14561_15228 = state_14418__$1;
(statearr_14561_15228[(1)] = (22));

(statearr_14561_15228[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14419 === (55))){
var inst_14276 = (state_14418[(31)]);
var inst_14283 = (function(){throw inst_14276})();
var state_14418__$1 = state_14418;
var statearr_14562_15229 = state_14418__$1;
(statearr_14562_15229[(2)] = inst_14283);

(statearr_14562_15229[(1)] = (57));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14419 === (87))){
var inst_14392 = (state_14418[(27)]);
var inst_14412 = (state_14418[(2)]);
var _ = (function (){var statearr_14563 = state_14418;
(statearr_14563[(4)] = cljs.core.rest.call(null,(state_14418[(4)])));

return statearr_14563;
})();
var state_14418__$1 = (function (){var statearr_14564 = state_14418;
(statearr_14564[(32)] = inst_14412);

return statearr_14564;
})();
var statearr_14565_15230 = state_14418__$1;
(statearr_14565_15230[(2)] = inst_14392);

(statearr_14565_15230[(1)] = (82));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14419 === (24))){
var _ = (function (){var statearr_14566 = state_14418;
(statearr_14566[(4)] = cljs.core.cons.call(null,(31),(state_14418[(4)])));

return statearr_14566;
})();
var inst_14161 = cljs.core.PersistentVector.EMPTY_NODE;
var inst_14162 = [new cljs.core.Keyword(null,"actor","actor",(-1830560481)),new cljs.core.Keyword(null,"permission","permission",(-511292572))];
var inst_14163 = [e2e.proposals.owner_acc,"active"];
var inst_14164 = cljs.core.PersistentHashMap.fromArrays(inst_14162,inst_14163);
var inst_14165 = [inst_14164];
var inst_14166 = (new cljs.core.PersistentVector(null,(1),(5),inst_14161,inst_14165,null));
var inst_14167 = eos_cljs.core.transact.call(null,e2e.proposals.prop_acc,"createprop",e2e.proposals.base_prop,inst_14166);
var inst_14168 = cljs.core.async.interop.p__GT_c.call(null,inst_14167);
var state_14418__$1 = state_14418;
return cljs.core.async.impl.ioc_helpers.take_BANG_.call(null,state_14418__$1,(32),inst_14168);
} else {
if((state_val_14419 === (56))){
var inst_14276 = (state_14418[(31)]);
var state_14418__$1 = state_14418;
var statearr_14567_15231 = state_14418__$1;
(statearr_14567_15231[(2)] = inst_14276);

(statearr_14567_15231[(1)] = (57));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14419 === (25))){
var inst_14211 = (state_14418[(2)]);
var inst_14212 = eos_cljs.core.get_table_rows.call(null,e2e.proposals.prop_acc,e2e.proposals.prop_acc,"proposal");
var inst_14213 = cljs.core.async.interop.p__GT_c.call(null,inst_14212);
var state_14418__$1 = (function (){var statearr_14568 = state_14418;
(statearr_14568[(33)] = inst_14211);

return statearr_14568;
})();
return cljs.core.async.impl.ioc_helpers.take_BANG_.call(null,state_14418__$1,(43),inst_14213);
} else {
if((state_val_14419 === (57))){
var inst_14286 = (state_14418[(2)]);
var state_14418__$1 = (function (){var statearr_14569 = state_14418;
(statearr_14569[(34)] = inst_14286);

return statearr_14569;
})();
var statearr_14570_15232 = state_14418__$1;
(statearr_14570_15232[(2)] = null);

(statearr_14570_15232[(1)] = (58));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14419 === (26))){
var inst_14136 = (state_14418[(2)]);
var inst_14137 = cljs.core.prn.call(null,"test failed with ",inst_14136);
var state_14418__$1 = (function (){var statearr_14571 = state_14418;
(statearr_14571[(35)] = inst_14137);

return statearr_14571;
})();
var statearr_14572_15233 = state_14418__$1;
(statearr_14572_15233[(2)] = null);

(statearr_14572_15233[(1)] = (27));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14419 === (58))){
var _ = (function (){var statearr_14573 = state_14418;
(statearr_14573[(4)] = cljs.core.cons.call(null,(65),(state_14418[(4)])));

return statearr_14573;
})();
var inst_14312 = cljs.core.assoc.call(null,e2e.proposals.base_prop,new cljs.core.Keyword(null,"content_hash","content_hash",(121497903)),"bb");
var inst_14313 = cljs.core.PersistentVector.EMPTY_NODE;
var inst_14314 = [new cljs.core.Keyword(null,"actor","actor",(-1830560481)),new cljs.core.Keyword(null,"permission","permission",(-511292572))];
var inst_14315 = [e2e.proposals.owner_acc,"active"];
var inst_14316 = cljs.core.PersistentHashMap.fromArrays(inst_14314,inst_14315);
var inst_14317 = [inst_14316];
var inst_14318 = (new cljs.core.PersistentVector(null,(1),(5),inst_14313,inst_14317,null));
var inst_14319 = eos_cljs.core.transact.call(null,e2e.proposals.prop_acc,"createprop",inst_14312,inst_14318);
var inst_14320 = cljs.core.async.interop.p__GT_c.call(null,inst_14319);
var state_14418__$1 = state_14418;
return cljs.core.async.impl.ioc_helpers.take_BANG_.call(null,state_14418__$1,(66),inst_14320);
} else {
if((state_val_14419 === (27))){
var _ = (function (){var statearr_14574 = state_14418;
(statearr_14574[(4)] = cljs.core.cons.call(null,(30),(state_14418[(4)])));

return statearr_14574;
})();
var inst_14149 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002))];
var inst_14150 = [new cljs.core.Keyword(null,"fail","fail",(1706214930)),"can make a proposal"];
var inst_14151 = cljs.core.PersistentHashMap.fromArrays(inst_14149,inst_14150);
var inst_14152 = cljs.test.do_report.call(null,inst_14151);
var ___$1 = (function (){var statearr_14575 = state_14418;
(statearr_14575[(4)] = cljs.core.rest.call(null,(state_14418[(4)])));

return statearr_14575;
})();
var state_14418__$1 = state_14418;
var statearr_14576_15234 = state_14418__$1;
(statearr_14576_15234[(2)] = inst_14152);

(statearr_14576_15234[(1)] = (28));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14419 === (59))){
var inst_14363 = (state_14418[(2)]);
var inst_14364 = eos_cljs.core.get_table_rows.call(null,e2e.proposals.prop_acc,e2e.proposals.prop_acc,"proposal");
var inst_14365 = cljs.core.async.interop.p__GT_c.call(null,inst_14364);
var state_14418__$1 = (function (){var statearr_14577 = state_14418;
(statearr_14577[(36)] = inst_14363);

return statearr_14577;
})();
return cljs.core.async.impl.ioc_helpers.take_BANG_.call(null,state_14418__$1,(77),inst_14365);
} else {
if((state_val_14419 === (28))){
var inst_14155 = (state_14418[(2)]);
var state_14418__$1 = state_14418;
var statearr_14578_15235 = state_14418__$1;
(statearr_14578_15235[(2)] = inst_14155);

(statearr_14578_15235[(1)] = (25));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14419 === (60))){
var inst_14287 = (state_14418[(2)]);
var inst_14288 = cljs.core.prn.call(null,"test failed with ",inst_14287);
var state_14418__$1 = (function (){var statearr_14579 = state_14418;
(statearr_14579[(37)] = inst_14288);

return statearr_14579;
})();
var statearr_14580_15236 = state_14418__$1;
(statearr_14580_15236[(2)] = null);

(statearr_14580_15236[(1)] = (61));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14419 === (29))){
var inst_14138 = (state_14418[(2)]);
var inst_14139 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_14140 = null;
var inst_14141 = [new cljs.core.Keyword(null,"error","error",(-978969032)),"can make a proposal",inst_14140,inst_14138];
var inst_14142 = cljs.core.PersistentHashMap.fromArrays(inst_14139,inst_14141);
var inst_14143 = cljs.test.do_report.call(null,inst_14142);
var state_14418__$1 = state_14418;
var statearr_14582_15237 = state_14418__$1;
(statearr_14582_15237[(2)] = inst_14143);

(statearr_14582_15237[(1)] = (28));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14419 === (61))){
var _ = (function (){var statearr_14583 = state_14418;
(statearr_14583[(4)] = cljs.core.cons.call(null,(64),(state_14418[(4)])));

return statearr_14583;
})();
var inst_14300 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002))];
var inst_14301 = [new cljs.core.Keyword(null,"fail","fail",(1706214930)),"can make a second proposal"];
var inst_14302 = cljs.core.PersistentHashMap.fromArrays(inst_14300,inst_14301);
var inst_14303 = cljs.test.do_report.call(null,inst_14302);
var ___$1 = (function (){var statearr_14584 = state_14418;
(statearr_14584[(4)] = cljs.core.rest.call(null,(state_14418[(4)])));

return statearr_14584;
})();
var state_14418__$1 = state_14418;
var statearr_14585_15238 = state_14418__$1;
(statearr_14585_15238[(2)] = inst_14303);

(statearr_14585_15238[(1)] = (62));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14419 === (30))){
var _ = (function (){var statearr_14587 = state_14418;
(statearr_14587[(4)] = cljs.core.rest.call(null,(state_14418[(4)])));

return statearr_14587;
})();
var state_14418__$1 = state_14418;
var ex14581 = (state_14418__$1[(2)]);
var statearr_14588_15239 = state_14418__$1;
(statearr_14588_15239[(5)] = ex14581);


var statearr_14589_15240 = state_14418__$1;
(statearr_14589_15240[(1)] = (29));

(statearr_14589_15240[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14419 === (62))){
var inst_14306 = (state_14418[(2)]);
var state_14418__$1 = state_14418;
var statearr_14590_15241 = state_14418__$1;
(statearr_14590_15241[(2)] = inst_14306);

(statearr_14590_15241[(1)] = (59));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14419 === (31))){
var _ = (function (){var statearr_14591 = state_14418;
(statearr_14591[(4)] = cljs.core.rest.call(null,(state_14418[(4)])));

return statearr_14591;
})();
var state_14418__$1 = state_14418;
var ex14586 = (state_14418__$1[(2)]);
var statearr_14592_15242 = state_14418__$1;
(statearr_14592_15242[(5)] = ex14586);


if((ex14586 instanceof Error)){
var statearr_14593_15243 = state_14418__$1;
(statearr_14593_15243[(1)] = (26));

(statearr_14593_15243[(5)] = null);

} else {
throw ex14586;

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14419 === (63))){
var inst_14289 = (state_14418[(2)]);
var inst_14290 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_14291 = null;
var inst_14292 = [new cljs.core.Keyword(null,"error","error",(-978969032)),"can make a second proposal",inst_14291,inst_14289];
var inst_14293 = cljs.core.PersistentHashMap.fromArrays(inst_14290,inst_14292);
var inst_14294 = cljs.test.do_report.call(null,inst_14293);
var state_14418__$1 = state_14418;
var statearr_14594_15244 = state_14418__$1;
(statearr_14594_15244[(2)] = inst_14294);

(statearr_14594_15244[(1)] = (62));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
return null;
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
});})(c__19__auto__,___192__auto__,self____$1))
;
return ((function (switch__14__auto__,c__19__auto__,___192__auto__,self____$1){
return (function() {
var e2e$proposals$state_machine__15__auto__ = null;
var e2e$proposals$state_machine__15__auto____0 = (function (){
var statearr_14595 = [null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];
(statearr_14595[(0)] = e2e$proposals$state_machine__15__auto__);

(statearr_14595[(1)] = (1));

return statearr_14595;
});
var e2e$proposals$state_machine__15__auto____1 = (function (state_14418){
while(true){
var ret_value__16__auto__ = (function (){try{while(true){
var result__17__auto__ = switch__14__auto__.call(null,state_14418);
if(cljs.core.keyword_identical_QMARK_.call(null,result__17__auto__,new cljs.core.Keyword(null,"recur","recur",(-437573268)))){
continue;
} else {
return result__17__auto__;
}
break;
}
}catch (e14596){var ex__18__auto__ = e14596;
var statearr_14597_15245 = state_14418;
(statearr_14597_15245[(2)] = ex__18__auto__);


if(cljs.core.seq.call(null,(state_14418[(4)]))){
var statearr_14598_15246 = state_14418;
(statearr_14598_15246[(1)] = cljs.core.first.call(null,(state_14418[(4)])));

} else {
throw ex__18__auto__;
}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
}})();
if(cljs.core.keyword_identical_QMARK_.call(null,ret_value__16__auto__,new cljs.core.Keyword(null,"recur","recur",(-437573268)))){
var G__15247 = state_14418;
state_14418 = G__15247;
continue;
} else {
return ret_value__16__auto__;
}
break;
}
});
e2e$proposals$state_machine__15__auto__ = function(state_14418){
switch(arguments.length){
case 0:
return e2e$proposals$state_machine__15__auto____0.call(this);
case 1:
return e2e$proposals$state_machine__15__auto____1.call(this,state_14418);
}
throw(new Error('Invalid arity: ' + arguments.length));
};
e2e$proposals$state_machine__15__auto__.cljs$core$IFn$_invoke$arity$0 = e2e$proposals$state_machine__15__auto____0;
e2e$proposals$state_machine__15__auto__.cljs$core$IFn$_invoke$arity$1 = e2e$proposals$state_machine__15__auto____1;
return e2e$proposals$state_machine__15__auto__;
})()
;})(switch__14__auto__,c__19__auto__,___192__auto__,self____$1))
})();
var state__21__auto__ = (function (){var statearr_14599 = f__20__auto__.call(null);
(statearr_14599[(6)] = c__19__auto__);

return statearr_14599;
})();
return cljs.core.async.impl.ioc_helpers.run_state_machine_wrapped.call(null,state__21__auto__);
});})(c__19__auto__,___192__auto__,self____$1))
);

return c__19__auto__;
});

e2e.proposals.t_e2e$proposals14052.prototype.apply = (function (self__,args14055){
var self__ = this;
var self____$1 = this;
return self____$1.call.apply(self____$1,[self____$1].concat(cljs.core.aclone.call(null,args14055)));
});

e2e.proposals.t_e2e$proposals14052.prototype.cljs$core$IFn$_invoke$arity$1 = (function (done){
var self__ = this;
var ___192__auto__ = this;
var c__19__auto__ = cljs.core.async.chan.call(null,(1));
cljs.core.async.impl.dispatch.run.call(null,((function (c__19__auto__,___192__auto__){
return (function (){
var f__20__auto__ = (function (){var switch__14__auto__ = ((function (c__19__auto__,___192__auto__){
return (function (state_14962){
var state_val_14963 = (state_14962[(1)]);
if((state_val_14963 === (32))){
var inst_14714 = (state_14962[(7)]);
var inst_14714__$1 = (state_14962[(2)]);
var inst_14715 = (inst_14714__$1 instanceof cljs.core.ExceptionInfo);
var inst_14716 = cljs.core.ex_data.call(null,inst_14714__$1);
var inst_14717 = new cljs.core.Keyword(null,"error","error",(-978969032)).cljs$core$IFn$_invoke$arity$1(inst_14716);
var inst_14718 = cljs.core._EQ_.call(null,inst_14717,new cljs.core.Keyword(null,"promise-error","promise-error",(-90673560)));
var inst_14719 = ((inst_14715) && (inst_14718));
var state_14962__$1 = (function (){var statearr_14965 = state_14962;
(statearr_14965[(7)] = inst_14714__$1);

return statearr_14965;
})();
if(cljs.core.truth_(inst_14719)){
var statearr_14966_15248 = state_14962__$1;
(statearr_14966_15248[(1)] = (33));

} else {
var statearr_14967_15249 = state_14962__$1;
(statearr_14967_15249[(1)] = (34));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14963 === (64))){
var _ = (function (){var statearr_14968 = state_14962;
(statearr_14968[(4)] = cljs.core.rest.call(null,(state_14962[(4)])));

return statearr_14968;
})();
var state_14962__$1 = state_14962;
var ex14964 = (state_14962__$1[(2)]);
var statearr_14969_15250 = state_14962__$1;
(statearr_14969_15250[(5)] = ex14964);


var statearr_14970_15251 = state_14962__$1;
(statearr_14970_15251[(1)] = (63));

(statearr_14970_15251[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14963 === (1))){
var state_14962__$1 = state_14962;
var statearr_14972_15252 = state_14962__$1;
(statearr_14972_15252[(2)] = null);

(statearr_14972_15252[(1)] = (2));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14963 === (33))){
var inst_14714 = (state_14962[(7)]);
var inst_14721 = (function(){throw inst_14714})();
var state_14962__$1 = state_14962;
var statearr_14973_15253 = state_14962__$1;
(statearr_14973_15253[(2)] = inst_14721);

(statearr_14973_15253[(1)] = (35));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14963 === (65))){
var _ = (function (){var statearr_14974 = state_14962;
(statearr_14974[(4)] = cljs.core.rest.call(null,(state_14962[(4)])));

return statearr_14974;
})();
var state_14962__$1 = state_14962;
var ex14971 = (state_14962__$1[(2)]);
var statearr_14975_15254 = state_14962__$1;
(statearr_14975_15254[(5)] = ex14971);


if((ex14971 instanceof Error)){
var statearr_14976_15255 = state_14962__$1;
(statearr_14976_15255[(1)] = (60));

(statearr_14976_15255[(5)] = null);

} else {
throw ex14971;

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14963 === (2))){
var _ = (function (){var statearr_14977 = state_14962;
(statearr_14977[(4)] = cljs.core.cons.call(null,(15),(state_14962[(4)])));

return statearr_14977;
})();
var inst_14644 = cljs.core.assoc.call(null,e2e.proposals.base_prop,new cljs.core.Keyword(null,"author","author",(2111686192)),e2e.proposals.prop_acc);
var inst_14645 = eos_cljs.core.transact.call(null,e2e.proposals.prop_acc,"createprop",inst_14644);
var inst_14646 = cljs.core.async.interop.p__GT_c.call(null,inst_14645);
var state_14962__$1 = state_14962;
return cljs.core.async.impl.ioc_helpers.take_BANG_.call(null,state_14962__$1,(16),inst_14646);
} else {
if((state_val_14963 === (34))){
var inst_14714 = (state_14962[(7)]);
var state_14962__$1 = state_14962;
var statearr_14978_15256 = state_14962__$1;
(statearr_14978_15256[(2)] = inst_14714);

(statearr_14978_15256[(1)] = (35));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14963 === (66))){
var inst_14866 = (state_14962[(8)]);
var inst_14866__$1 = (state_14962[(2)]);
var inst_14867 = (inst_14866__$1 instanceof cljs.core.ExceptionInfo);
var inst_14868 = cljs.core.ex_data.call(null,inst_14866__$1);
var inst_14869 = new cljs.core.Keyword(null,"error","error",(-978969032)).cljs$core$IFn$_invoke$arity$1(inst_14868);
var inst_14870 = cljs.core._EQ_.call(null,inst_14869,new cljs.core.Keyword(null,"promise-error","promise-error",(-90673560)));
var inst_14871 = ((inst_14867) && (inst_14870));
var state_14962__$1 = (function (){var statearr_14979 = state_14962;
(statearr_14979[(8)] = inst_14866__$1);

return statearr_14979;
})();
if(cljs.core.truth_(inst_14871)){
var statearr_14980_15257 = state_14962__$1;
(statearr_14980_15257[(1)] = (67));

} else {
var statearr_14981_15258 = state_14962__$1;
(statearr_14981_15258[(1)] = (68));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14963 === (3))){
var inst_14679 = (state_14962[(2)]);
var state_14962__$1 = (function (){var statearr_14982 = state_14962;
(statearr_14982[(9)] = inst_14679);

return statearr_14982;
})();
var statearr_14983_15259 = state_14962__$1;
(statearr_14983_15259[(2)] = null);

(statearr_14983_15259[(1)] = (24));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14963 === (35))){
var inst_14724 = (state_14962[(2)]);
var state_14962__$1 = (function (){var statearr_14984 = state_14962;
(statearr_14984[(10)] = inst_14724);

return statearr_14984;
})();
var statearr_14985_15260 = state_14962__$1;
(statearr_14985_15260[(2)] = null);

(statearr_14985_15260[(1)] = (36));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14963 === (67))){
var inst_14866 = (state_14962[(8)]);
var inst_14873 = (function(){throw inst_14866})();
var state_14962__$1 = state_14962;
var statearr_14986_15261 = state_14962__$1;
(statearr_14986_15261[(2)] = inst_14873);

(statearr_14986_15261[(1)] = (69));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14963 === (4))){
var inst_14602 = (state_14962[(11)]);
var inst_14603 = (state_14962[(12)]);
var inst_14600 = (state_14962[(2)]);
var inst_14601 = inst_14600.cause;
var inst_14602__$1 = inst_14601.message;
var inst_14603__$1 = clojure.string.ends_with_QMARK_.call(null,inst_14602__$1,"not a dao member");
var inst_14604 = (!(inst_14603__$1));
var state_14962__$1 = (function (){var statearr_14987 = state_14962;
(statearr_14987[(11)] = inst_14602__$1);

(statearr_14987[(12)] = inst_14603__$1);

return statearr_14987;
})();
if(inst_14604){
var statearr_14988_15262 = state_14962__$1;
(statearr_14988_15262[(1)] = (5));

} else {
var statearr_14989_15263 = state_14962__$1;
(statearr_14989_15263[(1)] = (6));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14963 === (36))){
var _ = (function (){var statearr_14990 = state_14962;
(statearr_14990[(4)] = cljs.core.cons.call(null,(39),(state_14962[(4)])));

return statearr_14990;
})();
var state_14962__$1 = state_14962;
var statearr_14991_15264 = state_14962__$1;
(statearr_14991_15264[(1)] = (40));



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14963 === (68))){
var inst_14866 = (state_14962[(8)]);
var state_14962__$1 = state_14962;
var statearr_14993_15265 = state_14962__$1;
(statearr_14993_15265[(2)] = inst_14866);

(statearr_14993_15265[(1)] = (69));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14963 === (5))){
var inst_14602 = (state_14962[(11)]);
var inst_14606 = ["expected =","not a dao member"," actual = ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_14602)].join('');
var inst_14607 = cljs.core.prn.call(null,inst_14606);
var state_14962__$1 = state_14962;
var statearr_14994_15266 = state_14962__$1;
(statearr_14994_15266[(2)] = inst_14607);

(statearr_14994_15266[(1)] = (7));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14963 === (37))){
var inst_14752 = (state_14962[(2)]);
var _ = (function (){var statearr_14995 = state_14962;
(statearr_14995[(4)] = cljs.core.rest.call(null,(state_14962[(4)])));

return statearr_14995;
})();
var state_14962__$1 = state_14962;
var statearr_14996_15267 = state_14962__$1;
(statearr_14996_15267[(2)] = inst_14752);

(statearr_14996_15267[(1)] = (25));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14963 === (69))){
var inst_14876 = (state_14962[(2)]);
var state_14962__$1 = (function (){var statearr_14997 = state_14962;
(statearr_14997[(13)] = inst_14876);

return statearr_14997;
})();
var statearr_14998_15268 = state_14962__$1;
(statearr_14998_15268[(2)] = null);

(statearr_14998_15268[(1)] = (70));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14963 === (6))){
var state_14962__$1 = state_14962;
var statearr_14999_15269 = state_14962__$1;
(statearr_14999_15269[(2)] = null);

(statearr_14999_15269[(1)] = (7));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14963 === (38))){
var inst_14725 = (state_14962[(2)]);
var inst_14726 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_14727 = true;
var inst_14728 = [new cljs.core.Keyword(null,"error","error",(-978969032)),"can make a proposal",inst_14727,inst_14725];
var inst_14729 = cljs.core.PersistentHashMap.fromArrays(inst_14726,inst_14728);
var inst_14730 = cljs.test.do_report.call(null,inst_14729);
var state_14962__$1 = state_14962;
var statearr_15000_15270 = state_14962__$1;
(statearr_15000_15270[(2)] = inst_14730);

(statearr_15000_15270[(1)] = (37));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14963 === (70))){
var _ = (function (){var statearr_15002 = state_14962;
(statearr_15002[(4)] = cljs.core.cons.call(null,(73),(state_14962[(4)])));

return statearr_15002;
})();
var state_14962__$1 = state_14962;
var statearr_15003_15271 = state_14962__$1;
(statearr_15003_15271[(1)] = (74));



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14963 === (7))){
var inst_14610 = (state_14962[(2)]);
var state_14962__$1 = (function (){var statearr_15005 = state_14962;
(statearr_15005[(14)] = inst_14610);

return statearr_15005;
})();
var statearr_15006_15272 = state_14962__$1;
(statearr_15006_15272[(2)] = null);

(statearr_15006_15272[(1)] = (8));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14963 === (39))){
var _ = (function (){var statearr_15007 = state_14962;
(statearr_15007[(4)] = cljs.core.rest.call(null,(state_14962[(4)])));

return statearr_15007;
})();
var state_14962__$1 = state_14962;
var ex15001 = (state_14962__$1[(2)]);
var statearr_15008_15273 = state_14962__$1;
(statearr_15008_15273[(5)] = ex15001);


var statearr_15009_15274 = state_14962__$1;
(statearr_15009_15274[(1)] = (38));

(statearr_15009_15274[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14963 === (71))){
var inst_14904 = (state_14962[(2)]);
var _ = (function (){var statearr_15010 = state_14962;
(statearr_15010[(4)] = cljs.core.rest.call(null,(state_14962[(4)])));

return statearr_15010;
})();
var state_14962__$1 = state_14962;
var statearr_15011_15275 = state_14962__$1;
(statearr_15011_15275[(2)] = inst_14904);

(statearr_15011_15275[(1)] = (59));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14963 === (8))){
var inst_14603 = (state_14962[(12)]);
var _ = (function (){var statearr_15012 = state_14962;
(statearr_15012[(4)] = cljs.core.cons.call(null,(11),(state_14962[(4)])));

return statearr_15012;
})();
var state_14962__$1 = state_14962;
if(cljs.core.truth_(inst_14603)){
var statearr_15013_15276 = state_14962__$1;
(statearr_15013_15276[(1)] = (12));

} else {
var statearr_15014_15277 = state_14962__$1;
(statearr_15014_15277[(1)] = (13));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14963 === (40))){
var inst_14737 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_14738 = true;
var inst_14739 = [new cljs.core.Keyword(null,"pass","pass",(1574159993)),"can make a proposal",inst_14738,true];
var inst_14740 = cljs.core.PersistentHashMap.fromArrays(inst_14737,inst_14739);
var inst_14741 = cljs.test.do_report.call(null,inst_14740);
var state_14962__$1 = state_14962;
var statearr_15015_15278 = state_14962__$1;
(statearr_15015_15278[(2)] = inst_14741);

(statearr_15015_15278[(1)] = (42));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14963 === (72))){
var inst_14877 = (state_14962[(2)]);
var inst_14878 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_14879 = true;
var inst_14880 = [new cljs.core.Keyword(null,"error","error",(-978969032)),"can make a second proposal",inst_14879,inst_14877];
var inst_14881 = cljs.core.PersistentHashMap.fromArrays(inst_14878,inst_14880);
var inst_14882 = cljs.test.do_report.call(null,inst_14881);
var state_14962__$1 = state_14962;
var statearr_15016_15279 = state_14962__$1;
(statearr_15016_15279[(2)] = inst_14882);

(statearr_15016_15279[(1)] = (71));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14963 === (9))){
var inst_14638 = (state_14962[(2)]);
var state_14962__$1 = state_14962;
var statearr_15018_15280 = state_14962__$1;
(statearr_15018_15280[(2)] = inst_14638);

(statearr_15018_15280[(1)] = (3));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14963 === (41))){
var inst_14743 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_14744 = true;
var inst_14745 = [new cljs.core.Keyword(null,"fail","fail",(1706214930)),"can make a proposal",inst_14744,true];
var inst_14746 = cljs.core.PersistentHashMap.fromArrays(inst_14743,inst_14745);
var inst_14747 = cljs.test.do_report.call(null,inst_14746);
var state_14962__$1 = state_14962;
var statearr_15019_15281 = state_14962__$1;
(statearr_15019_15281[(2)] = inst_14747);

(statearr_15019_15281[(1)] = (42));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14963 === (73))){
var _ = (function (){var statearr_15020 = state_14962;
(statearr_15020[(4)] = cljs.core.rest.call(null,(state_14962[(4)])));

return statearr_15020;
})();
var state_14962__$1 = state_14962;
var ex15017 = (state_14962__$1[(2)]);
var statearr_15021_15282 = state_14962__$1;
(statearr_15021_15282[(5)] = ex15017);


var statearr_15022_15283 = state_14962__$1;
(statearr_15022_15283[(1)] = (72));

(statearr_15022_15283[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14963 === (10))){
var inst_14611 = (state_14962[(2)]);
var inst_14612 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_14613 = new cljs.core.Symbol("e2e.macros","pass?","e2e.macros/pass?",(894145299),null);
var inst_14614 = [new cljs.core.Keyword(null,"error","error",(-978969032)),"need to be a dao member",inst_14613,inst_14611];
var inst_14615 = cljs.core.PersistentHashMap.fromArrays(inst_14612,inst_14614);
var inst_14616 = cljs.test.do_report.call(null,inst_14615);
var state_14962__$1 = state_14962;
var statearr_15023_15284 = state_14962__$1;
(statearr_15023_15284[(2)] = inst_14616);

(statearr_15023_15284[(1)] = (9));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14963 === (42))){
var inst_14749 = (state_14962[(2)]);
var _ = (function (){var statearr_15025 = state_14962;
(statearr_15025[(4)] = cljs.core.rest.call(null,(state_14962[(4)])));

return statearr_15025;
})();
var state_14962__$1 = (function (){var statearr_15026 = state_14962;
(statearr_15026[(15)] = inst_14749);

return statearr_15026;
})();
var statearr_15027_15285 = state_14962__$1;
(statearr_15027_15285[(2)] = true);

(statearr_15027_15285[(1)] = (37));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14963 === (74))){
var inst_14889 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_14890 = true;
var inst_14891 = [new cljs.core.Keyword(null,"pass","pass",(1574159993)),"can make a second proposal",inst_14890,true];
var inst_14892 = cljs.core.PersistentHashMap.fromArrays(inst_14889,inst_14891);
var inst_14893 = cljs.test.do_report.call(null,inst_14892);
var state_14962__$1 = state_14962;
var statearr_15028_15286 = state_14962__$1;
(statearr_15028_15286[(2)] = inst_14893);

(statearr_15028_15286[(1)] = (76));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14963 === (11))){
var _ = (function (){var statearr_15029 = state_14962;
(statearr_15029[(4)] = cljs.core.rest.call(null,(state_14962[(4)])));

return statearr_15029;
})();
var state_14962__$1 = state_14962;
var ex15024 = (state_14962__$1[(2)]);
var statearr_15030_15287 = state_14962__$1;
(statearr_15030_15287[(5)] = ex15024);


var statearr_15031_15288 = state_14962__$1;
(statearr_15031_15288[(1)] = (10));

(statearr_15031_15288[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14963 === (43))){
var inst_14759 = (state_14962[(16)]);
var inst_14759__$1 = (state_14962[(2)]);
var inst_14760 = (inst_14759__$1 instanceof cljs.core.ExceptionInfo);
var inst_14761 = cljs.core.ex_data.call(null,inst_14759__$1);
var inst_14762 = new cljs.core.Keyword(null,"error","error",(-978969032)).cljs$core$IFn$_invoke$arity$1(inst_14761);
var inst_14763 = cljs.core._EQ_.call(null,inst_14762,new cljs.core.Keyword(null,"promise-error","promise-error",(-90673560)));
var inst_14764 = ((inst_14760) && (inst_14763));
var state_14962__$1 = (function (){var statearr_15032 = state_14962;
(statearr_15032[(16)] = inst_14759__$1);

return statearr_15032;
})();
if(cljs.core.truth_(inst_14764)){
var statearr_15033_15289 = state_14962__$1;
(statearr_15033_15289[(1)] = (44));

} else {
var statearr_15034_15290 = state_14962__$1;
(statearr_15034_15290[(1)] = (45));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14963 === (75))){
var inst_14895 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_14896 = true;
var inst_14897 = [new cljs.core.Keyword(null,"fail","fail",(1706214930)),"can make a second proposal",inst_14896,true];
var inst_14898 = cljs.core.PersistentHashMap.fromArrays(inst_14895,inst_14897);
var inst_14899 = cljs.test.do_report.call(null,inst_14898);
var state_14962__$1 = state_14962;
var statearr_15035_15291 = state_14962__$1;
(statearr_15035_15291[(2)] = inst_14899);

(statearr_15035_15291[(1)] = (76));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14963 === (12))){
var inst_14603 = (state_14962[(12)]);
var inst_14623 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_14624 = new cljs.core.Symbol("e2e.macros","pass?","e2e.macros/pass?",(894145299),null);
var inst_14625 = [new cljs.core.Keyword(null,"pass","pass",(1574159993)),"need to be a dao member",inst_14624,inst_14603];
var inst_14626 = cljs.core.PersistentHashMap.fromArrays(inst_14623,inst_14625);
var inst_14627 = cljs.test.do_report.call(null,inst_14626);
var state_14962__$1 = state_14962;
var statearr_15036_15292 = state_14962__$1;
(statearr_15036_15292[(2)] = inst_14627);

(statearr_15036_15292[(1)] = (14));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14963 === (44))){
var inst_14759 = (state_14962[(16)]);
var inst_14766 = (function(){throw inst_14759})();
var state_14962__$1 = state_14962;
var statearr_15037_15293 = state_14962__$1;
(statearr_15037_15293[(2)] = inst_14766);

(statearr_15037_15293[(1)] = (46));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14963 === (76))){
var inst_14901 = (state_14962[(2)]);
var _ = (function (){var statearr_15038 = state_14962;
(statearr_15038[(4)] = cljs.core.rest.call(null,(state_14962[(4)])));

return statearr_15038;
})();
var state_14962__$1 = (function (){var statearr_15039 = state_14962;
(statearr_15039[(17)] = inst_14901);

return statearr_15039;
})();
var statearr_15040_15294 = state_14962__$1;
(statearr_15040_15294[(2)] = true);

(statearr_15040_15294[(1)] = (71));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14963 === (13))){
var inst_14603 = (state_14962[(12)]);
var inst_14629 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_14630 = new cljs.core.Symbol("e2e.macros","pass?","e2e.macros/pass?",(894145299),null);
var inst_14631 = [new cljs.core.Keyword(null,"fail","fail",(1706214930)),"need to be a dao member",inst_14630,inst_14603];
var inst_14632 = cljs.core.PersistentHashMap.fromArrays(inst_14629,inst_14631);
var inst_14633 = cljs.test.do_report.call(null,inst_14632);
var state_14962__$1 = state_14962;
var statearr_15041_15295 = state_14962__$1;
(statearr_15041_15295[(2)] = inst_14633);

(statearr_15041_15295[(1)] = (14));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14963 === (45))){
var inst_14759 = (state_14962[(16)]);
var state_14962__$1 = state_14962;
var statearr_15042_15296 = state_14962__$1;
(statearr_15042_15296[(2)] = inst_14759);

(statearr_15042_15296[(1)] = (46));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14963 === (77))){
var inst_14911 = (state_14962[(18)]);
var inst_14911__$1 = (state_14962[(2)]);
var inst_14912 = (inst_14911__$1 instanceof cljs.core.ExceptionInfo);
var inst_14913 = cljs.core.ex_data.call(null,inst_14911__$1);
var inst_14914 = new cljs.core.Keyword(null,"error","error",(-978969032)).cljs$core$IFn$_invoke$arity$1(inst_14913);
var inst_14915 = cljs.core._EQ_.call(null,inst_14914,new cljs.core.Keyword(null,"promise-error","promise-error",(-90673560)));
var inst_14916 = ((inst_14912) && (inst_14915));
var state_14962__$1 = (function (){var statearr_15043 = state_14962;
(statearr_15043[(18)] = inst_14911__$1);

return statearr_15043;
})();
if(cljs.core.truth_(inst_14916)){
var statearr_15044_15297 = state_14962__$1;
(statearr_15044_15297[(1)] = (78));

} else {
var statearr_15045_15298 = state_14962__$1;
(statearr_15045_15298[(1)] = (79));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14963 === (14))){
var inst_14603 = (state_14962[(12)]);
var inst_14635 = (state_14962[(2)]);
var _ = (function (){var statearr_15046 = state_14962;
(statearr_15046[(4)] = cljs.core.rest.call(null,(state_14962[(4)])));

return statearr_15046;
})();
var state_14962__$1 = (function (){var statearr_15047 = state_14962;
(statearr_15047[(19)] = inst_14635);

return statearr_15047;
})();
var statearr_15048_15299 = state_14962__$1;
(statearr_15048_15299[(2)] = inst_14603);

(statearr_15048_15299[(1)] = (9));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14963 === (46))){
var inst_14769 = (state_14962[(2)]);
var state_14962__$1 = (function (){var statearr_15050 = state_14962;
(statearr_15050[(20)] = inst_14769);

return statearr_15050;
})();
var statearr_15051_15300 = state_14962__$1;
(statearr_15051_15300[(2)] = null);

(statearr_15051_15300[(1)] = (47));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14963 === (78))){
var inst_14911 = (state_14962[(18)]);
var inst_14918 = (function(){throw inst_14911})();
var state_14962__$1 = state_14962;
var statearr_15052_15301 = state_14962__$1;
(statearr_15052_15301[(2)] = inst_14918);

(statearr_15052_15301[(1)] = (80));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14963 === (15))){
var _ = (function (){var statearr_15053 = state_14962;
(statearr_15053[(4)] = cljs.core.rest.call(null,(state_14962[(4)])));

return statearr_15053;
})();
var state_14962__$1 = state_14962;
var ex15049 = (state_14962__$1[(2)]);
var statearr_15054_15302 = state_14962__$1;
(statearr_15054_15302[(5)] = ex15049);


if((ex15049 instanceof Error)){
var statearr_15055_15303 = state_14962__$1;
(statearr_15055_15303[(1)] = (4));

(statearr_15055_15303[(5)] = null);

} else {
throw ex15049;

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14963 === (47))){
var inst_14769 = (state_14962[(20)]);
var inst_14783 = (state_14962[(21)]);
var inst_14784 = (state_14962[(22)]);
var _ = (function (){var statearr_15056 = state_14962;
(statearr_15056[(4)] = cljs.core.cons.call(null,(50),(state_14962[(4)])));

return statearr_15056;
})();
var inst_14781 = cljs.core.count.call(null,inst_14769);
var inst_14782 = (new cljs.core.List(null,(1),null,(1),null));
var inst_14783__$1 = (new cljs.core.List(null,inst_14781,inst_14782,(2),null));
var inst_14784__$1 = cljs.core.apply.call(null,cljs.core._EQ_,inst_14783__$1);
var state_14962__$1 = (function (){var statearr_15057 = state_14962;
(statearr_15057[(21)] = inst_14783__$1);

(statearr_15057[(22)] = inst_14784__$1);

return statearr_15057;
})();
if(cljs.core.truth_(inst_14784__$1)){
var statearr_15058_15304 = state_14962__$1;
(statearr_15058_15304[(1)] = (51));

} else {
var statearr_15059_15305 = state_14962__$1;
(statearr_15059_15305[(1)] = (52));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14963 === (79))){
var inst_14911 = (state_14962[(18)]);
var state_14962__$1 = state_14962;
var statearr_15060_15306 = state_14962__$1;
(statearr_15060_15306[(2)] = inst_14911);

(statearr_15060_15306[(1)] = (80));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14963 === (16))){
var inst_14648 = (state_14962[(23)]);
var inst_14648__$1 = (state_14962[(2)]);
var inst_14649 = (inst_14648__$1 instanceof cljs.core.ExceptionInfo);
var inst_14650 = cljs.core.ex_data.call(null,inst_14648__$1);
var inst_14651 = new cljs.core.Keyword(null,"error","error",(-978969032)).cljs$core$IFn$_invoke$arity$1(inst_14650);
var inst_14652 = cljs.core._EQ_.call(null,inst_14651,new cljs.core.Keyword(null,"promise-error","promise-error",(-90673560)));
var inst_14653 = ((inst_14649) && (inst_14652));
var state_14962__$1 = (function (){var statearr_15061 = state_14962;
(statearr_15061[(23)] = inst_14648__$1);

return statearr_15061;
})();
if(cljs.core.truth_(inst_14653)){
var statearr_15062_15307 = state_14962__$1;
(statearr_15062_15307[(1)] = (17));

} else {
var statearr_15063_15308 = state_14962__$1;
(statearr_15063_15308[(1)] = (18));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14963 === (48))){
var inst_14807 = (state_14962[(2)]);
var inst_14808 = [new cljs.core.Keyword(null,"from","from",(1815293044)),new cljs.core.Keyword(null,"to","to",(192099007)),new cljs.core.Keyword(null,"quantity","quantity",(-1929050694)),new cljs.core.Keyword(null,"memo","memo",(-1928616099))];
var inst_14809 = [e2e.proposals.owner_acc,e2e.proposals.prop_acc,e2e.proposals.proposal_cost,"proposal"];
var inst_14810 = cljs.core.PersistentHashMap.fromArrays(inst_14808,inst_14809);
var inst_14811 = cljs.core.PersistentVector.EMPTY_NODE;
var inst_14812 = [new cljs.core.Keyword(null,"actor","actor",(-1830560481)),new cljs.core.Keyword(null,"permission","permission",(-511292572))];
var inst_14813 = [e2e.proposals.owner_acc,"active"];
var inst_14814 = cljs.core.PersistentHashMap.fromArrays(inst_14812,inst_14813);
var inst_14815 = [inst_14814];
var inst_14816 = (new cljs.core.PersistentVector(null,(1),(5),inst_14811,inst_14815,null));
var inst_14817 = eos_cljs.core.transact.call(null,e2e.proposals.token_acc,"transfer",inst_14810,inst_14816);
var inst_14818 = cljs.core.async.interop.p__GT_c.call(null,inst_14817);
var state_14962__$1 = (function (){var statearr_15064 = state_14962;
(statearr_15064[(24)] = inst_14807);

return statearr_15064;
})();
return cljs.core.async.impl.ioc_helpers.take_BANG_.call(null,state_14962__$1,(54),inst_14818);
} else {
if((state_val_14963 === (80))){
var inst_14921 = (state_14962[(2)]);
var state_14962__$1 = (function (){var statearr_15065 = state_14962;
(statearr_15065[(25)] = inst_14921);

return statearr_15065;
})();
var statearr_15066_15309 = state_14962__$1;
(statearr_15066_15309[(2)] = null);

(statearr_15066_15309[(1)] = (81));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14963 === (17))){
var inst_14648 = (state_14962[(23)]);
var inst_14655 = (function(){throw inst_14648})();
var state_14962__$1 = state_14962;
var statearr_15067_15310 = state_14962__$1;
(statearr_15067_15310[(2)] = inst_14655);

(statearr_15067_15310[(1)] = (19));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14963 === (49))){
var inst_14770 = (state_14962[(2)]);
var inst_14771 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_14772 = cljs.core.list(new cljs.core.Symbol(null,"=","=",(-1501502141),null),cljs.core.list(new cljs.core.Symbol(null,"count","count",(-514511684),null),new cljs.core.Symbol(null,"rows","rows",(-1804386089),null)),(1));
var inst_14773 = [new cljs.core.Keyword(null,"error","error",(-978969032)),null,inst_14772,inst_14770];
var inst_14774 = cljs.core.PersistentHashMap.fromArrays(inst_14771,inst_14773);
var inst_14775 = cljs.test.do_report.call(null,inst_14774);
var state_14962__$1 = state_14962;
var statearr_15068_15311 = state_14962__$1;
(statearr_15068_15311[(2)] = inst_14775);

(statearr_15068_15311[(1)] = (48));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14963 === (81))){
var inst_14921 = (state_14962[(25)]);
var inst_14935 = (state_14962[(26)]);
var inst_14936 = (state_14962[(27)]);
var _ = (function (){var statearr_15070 = state_14962;
(statearr_15070[(4)] = cljs.core.cons.call(null,(84),(state_14962[(4)])));

return statearr_15070;
})();
var inst_14933 = cljs.core.count.call(null,inst_14921);
var inst_14934 = (new cljs.core.List(null,(2),null,(1),null));
var inst_14935__$1 = (new cljs.core.List(null,inst_14933,inst_14934,(2),null));
var inst_14936__$1 = cljs.core.apply.call(null,cljs.core._EQ_,inst_14935__$1);
var state_14962__$1 = (function (){var statearr_15071 = state_14962;
(statearr_15071[(26)] = inst_14935__$1);

(statearr_15071[(27)] = inst_14936__$1);

return statearr_15071;
})();
if(cljs.core.truth_(inst_14936__$1)){
var statearr_15072_15312 = state_14962__$1;
(statearr_15072_15312[(1)] = (85));

} else {
var statearr_15073_15313 = state_14962__$1;
(statearr_15073_15313[(1)] = (86));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14963 === (18))){
var inst_14648 = (state_14962[(23)]);
var state_14962__$1 = state_14962;
var statearr_15074_15314 = state_14962__$1;
(statearr_15074_15314[(2)] = inst_14648);

(statearr_15074_15314[(1)] = (19));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14963 === (50))){
var _ = (function (){var statearr_15075 = state_14962;
(statearr_15075[(4)] = cljs.core.rest.call(null,(state_14962[(4)])));

return statearr_15075;
})();
var state_14962__$1 = state_14962;
var ex15069 = (state_14962__$1[(2)]);
var statearr_15076_15315 = state_14962__$1;
(statearr_15076_15315[(5)] = ex15069);


var statearr_15077_15316 = state_14962__$1;
(statearr_15077_15316[(1)] = (49));

(statearr_15077_15316[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14963 === (82))){
var inst_14959 = (state_14962[(2)]);
var inst_14960 = done.call(null);
var state_14962__$1 = (function (){var statearr_15078 = state_14962;
(statearr_15078[(28)] = inst_14959);

return statearr_15078;
})();
return cljs.core.async.impl.ioc_helpers.return_chan.call(null,state_14962__$1,inst_14960);
} else {
if((state_val_14963 === (19))){
var inst_14658 = (state_14962[(2)]);
var state_14962__$1 = (function (){var statearr_15079 = state_14962;
(statearr_15079[(29)] = inst_14658);

return statearr_15079;
})();
var statearr_15080_15317 = state_14962__$1;
(statearr_15080_15317[(2)] = null);

(statearr_15080_15317[(1)] = (20));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14963 === (51))){
var inst_14783 = (state_14962[(21)]);
var inst_14786 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_14787 = cljs.core.list(new cljs.core.Symbol(null,"=","=",(-1501502141),null),cljs.core.list(new cljs.core.Symbol(null,"count","count",(-514511684),null),new cljs.core.Symbol(null,"rows","rows",(-1804386089),null)),(1));
var inst_14788 = cljs.core.cons.call(null,cljs.core._EQ_,inst_14783);
var inst_14789 = [new cljs.core.Keyword(null,"pass","pass",(1574159993)),null,inst_14787,inst_14788];
var inst_14790 = cljs.core.PersistentHashMap.fromArrays(inst_14786,inst_14789);
var inst_14791 = cljs.test.do_report.call(null,inst_14790);
var state_14962__$1 = state_14962;
var statearr_15081_15318 = state_14962__$1;
(statearr_15081_15318[(2)] = inst_14791);

(statearr_15081_15318[(1)] = (53));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14963 === (83))){
var inst_14922 = (state_14962[(2)]);
var inst_14923 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_14924 = cljs.core.list(new cljs.core.Symbol(null,"=","=",(-1501502141),null),cljs.core.list(new cljs.core.Symbol(null,"count","count",(-514511684),null),new cljs.core.Symbol(null,"rows","rows",(-1804386089),null)),(2));
var inst_14925 = [new cljs.core.Keyword(null,"error","error",(-978969032)),null,inst_14924,inst_14922];
var inst_14926 = cljs.core.PersistentHashMap.fromArrays(inst_14923,inst_14925);
var inst_14927 = cljs.test.do_report.call(null,inst_14926);
var state_14962__$1 = state_14962;
var statearr_15082_15319 = state_14962__$1;
(statearr_15082_15319[(2)] = inst_14927);

(statearr_15082_15319[(1)] = (82));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14963 === (20))){
var _ = (function (){var statearr_15084 = state_14962;
(statearr_15084[(4)] = cljs.core.cons.call(null,(23),(state_14962[(4)])));

return statearr_15084;
})();
var inst_14670 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002))];
var inst_14671 = [new cljs.core.Keyword(null,"fail","fail",(1706214930)),"need to be a dao member"];
var inst_14672 = cljs.core.PersistentHashMap.fromArrays(inst_14670,inst_14671);
var inst_14673 = cljs.test.do_report.call(null,inst_14672);
var ___$1 = (function (){var statearr_15085 = state_14962;
(statearr_15085[(4)] = cljs.core.rest.call(null,(state_14962[(4)])));

return statearr_15085;
})();
var state_14962__$1 = state_14962;
var statearr_15086_15320 = state_14962__$1;
(statearr_15086_15320[(2)] = inst_14673);

(statearr_15086_15320[(1)] = (21));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14963 === (52))){
var inst_14783 = (state_14962[(21)]);
var inst_14793 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_14794 = cljs.core.list(new cljs.core.Symbol(null,"=","=",(-1501502141),null),cljs.core.list(new cljs.core.Symbol(null,"count","count",(-514511684),null),new cljs.core.Symbol(null,"rows","rows",(-1804386089),null)),(1));
var inst_14795 = new cljs.core.Symbol(null,"not","not",(1044554643),null);
var inst_14796 = new cljs.core.Symbol(null,"=","=",(-1501502141),null);
var inst_14797 = cljs.core.cons.call(null,inst_14796,inst_14783);
var inst_14798 = (new cljs.core.List(null,inst_14797,null,(1),null));
var inst_14799 = (new cljs.core.List(null,inst_14795,inst_14798,(2),null));
var inst_14800 = [new cljs.core.Keyword(null,"fail","fail",(1706214930)),null,inst_14794,inst_14799];
var inst_14801 = cljs.core.PersistentHashMap.fromArrays(inst_14793,inst_14800);
var inst_14802 = cljs.test.do_report.call(null,inst_14801);
var state_14962__$1 = state_14962;
var statearr_15087_15321 = state_14962__$1;
(statearr_15087_15321[(2)] = inst_14802);

(statearr_15087_15321[(1)] = (53));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14963 === (84))){
var _ = (function (){var statearr_15088 = state_14962;
(statearr_15088[(4)] = cljs.core.rest.call(null,(state_14962[(4)])));

return statearr_15088;
})();
var state_14962__$1 = state_14962;
var ex15083 = (state_14962__$1[(2)]);
var statearr_15089_15322 = state_14962__$1;
(statearr_15089_15322[(5)] = ex15083);


var statearr_15090_15323 = state_14962__$1;
(statearr_15090_15323[(1)] = (83));

(statearr_15090_15323[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14963 === (21))){
var inst_14676 = (state_14962[(2)]);
var _ = (function (){var statearr_15091 = state_14962;
(statearr_15091[(4)] = cljs.core.rest.call(null,(state_14962[(4)])));

return statearr_15091;
})();
var state_14962__$1 = state_14962;
var statearr_15092_15324 = state_14962__$1;
(statearr_15092_15324[(2)] = inst_14676);

(statearr_15092_15324[(1)] = (3));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14963 === (53))){
var inst_14784 = (state_14962[(22)]);
var inst_14804 = (state_14962[(2)]);
var _ = (function (){var statearr_15093 = state_14962;
(statearr_15093[(4)] = cljs.core.rest.call(null,(state_14962[(4)])));

return statearr_15093;
})();
var state_14962__$1 = (function (){var statearr_15094 = state_14962;
(statearr_15094[(30)] = inst_14804);

return statearr_15094;
})();
var statearr_15095_15325 = state_14962__$1;
(statearr_15095_15325[(2)] = inst_14784);

(statearr_15095_15325[(1)] = (48));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14963 === (85))){
var inst_14935 = (state_14962[(26)]);
var inst_14938 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_14939 = cljs.core.list(new cljs.core.Symbol(null,"=","=",(-1501502141),null),cljs.core.list(new cljs.core.Symbol(null,"count","count",(-514511684),null),new cljs.core.Symbol(null,"rows","rows",(-1804386089),null)),(2));
var inst_14940 = cljs.core.cons.call(null,cljs.core._EQ_,inst_14935);
var inst_14941 = [new cljs.core.Keyword(null,"pass","pass",(1574159993)),null,inst_14939,inst_14940];
var inst_14942 = cljs.core.PersistentHashMap.fromArrays(inst_14938,inst_14941);
var inst_14943 = cljs.test.do_report.call(null,inst_14942);
var state_14962__$1 = state_14962;
var statearr_15096_15326 = state_14962__$1;
(statearr_15096_15326[(2)] = inst_14943);

(statearr_15096_15326[(1)] = (87));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14963 === (22))){
var inst_14659 = (state_14962[(2)]);
var inst_14660 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_14661 = null;
var inst_14662 = [new cljs.core.Keyword(null,"error","error",(-978969032)),"need to be a dao member",inst_14661,inst_14659];
var inst_14663 = cljs.core.PersistentHashMap.fromArrays(inst_14660,inst_14662);
var inst_14664 = cljs.test.do_report.call(null,inst_14663);
var state_14962__$1 = state_14962;
var statearr_15097_15327 = state_14962__$1;
(statearr_15097_15327[(2)] = inst_14664);

(statearr_15097_15327[(1)] = (21));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14963 === (54))){
var inst_14820 = (state_14962[(31)]);
var inst_14820__$1 = (state_14962[(2)]);
var inst_14821 = (inst_14820__$1 instanceof cljs.core.ExceptionInfo);
var inst_14822 = cljs.core.ex_data.call(null,inst_14820__$1);
var inst_14823 = new cljs.core.Keyword(null,"error","error",(-978969032)).cljs$core$IFn$_invoke$arity$1(inst_14822);
var inst_14824 = cljs.core._EQ_.call(null,inst_14823,new cljs.core.Keyword(null,"promise-error","promise-error",(-90673560)));
var inst_14825 = ((inst_14821) && (inst_14824));
var state_14962__$1 = (function (){var statearr_15099 = state_14962;
(statearr_15099[(31)] = inst_14820__$1);

return statearr_15099;
})();
if(cljs.core.truth_(inst_14825)){
var statearr_15100_15328 = state_14962__$1;
(statearr_15100_15328[(1)] = (55));

} else {
var statearr_15101_15329 = state_14962__$1;
(statearr_15101_15329[(1)] = (56));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14963 === (86))){
var inst_14935 = (state_14962[(26)]);
var inst_14945 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_14946 = cljs.core.list(new cljs.core.Symbol(null,"=","=",(-1501502141),null),cljs.core.list(new cljs.core.Symbol(null,"count","count",(-514511684),null),new cljs.core.Symbol(null,"rows","rows",(-1804386089),null)),(2));
var inst_14947 = new cljs.core.Symbol(null,"not","not",(1044554643),null);
var inst_14948 = new cljs.core.Symbol(null,"=","=",(-1501502141),null);
var inst_14949 = cljs.core.cons.call(null,inst_14948,inst_14935);
var inst_14950 = (new cljs.core.List(null,inst_14949,null,(1),null));
var inst_14951 = (new cljs.core.List(null,inst_14947,inst_14950,(2),null));
var inst_14952 = [new cljs.core.Keyword(null,"fail","fail",(1706214930)),null,inst_14946,inst_14951];
var inst_14953 = cljs.core.PersistentHashMap.fromArrays(inst_14945,inst_14952);
var inst_14954 = cljs.test.do_report.call(null,inst_14953);
var state_14962__$1 = state_14962;
var statearr_15102_15330 = state_14962__$1;
(statearr_15102_15330[(2)] = inst_14954);

(statearr_15102_15330[(1)] = (87));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14963 === (23))){
var _ = (function (){var statearr_15103 = state_14962;
(statearr_15103[(4)] = cljs.core.rest.call(null,(state_14962[(4)])));

return statearr_15103;
})();
var state_14962__$1 = state_14962;
var ex15098 = (state_14962__$1[(2)]);
var statearr_15104_15331 = state_14962__$1;
(statearr_15104_15331[(5)] = ex15098);


var statearr_15105_15332 = state_14962__$1;
(statearr_15105_15332[(1)] = (22));

(statearr_15105_15332[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14963 === (55))){
var inst_14820 = (state_14962[(31)]);
var inst_14827 = (function(){throw inst_14820})();
var state_14962__$1 = state_14962;
var statearr_15106_15333 = state_14962__$1;
(statearr_15106_15333[(2)] = inst_14827);

(statearr_15106_15333[(1)] = (57));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14963 === (87))){
var inst_14936 = (state_14962[(27)]);
var inst_14956 = (state_14962[(2)]);
var _ = (function (){var statearr_15107 = state_14962;
(statearr_15107[(4)] = cljs.core.rest.call(null,(state_14962[(4)])));

return statearr_15107;
})();
var state_14962__$1 = (function (){var statearr_15108 = state_14962;
(statearr_15108[(32)] = inst_14956);

return statearr_15108;
})();
var statearr_15109_15334 = state_14962__$1;
(statearr_15109_15334[(2)] = inst_14936);

(statearr_15109_15334[(1)] = (82));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14963 === (24))){
var _ = (function (){var statearr_15110 = state_14962;
(statearr_15110[(4)] = cljs.core.cons.call(null,(31),(state_14962[(4)])));

return statearr_15110;
})();
var inst_14705 = cljs.core.PersistentVector.EMPTY_NODE;
var inst_14706 = [new cljs.core.Keyword(null,"actor","actor",(-1830560481)),new cljs.core.Keyword(null,"permission","permission",(-511292572))];
var inst_14707 = [e2e.proposals.owner_acc,"active"];
var inst_14708 = cljs.core.PersistentHashMap.fromArrays(inst_14706,inst_14707);
var inst_14709 = [inst_14708];
var inst_14710 = (new cljs.core.PersistentVector(null,(1),(5),inst_14705,inst_14709,null));
var inst_14711 = eos_cljs.core.transact.call(null,e2e.proposals.prop_acc,"createprop",e2e.proposals.base_prop,inst_14710);
var inst_14712 = cljs.core.async.interop.p__GT_c.call(null,inst_14711);
var state_14962__$1 = state_14962;
return cljs.core.async.impl.ioc_helpers.take_BANG_.call(null,state_14962__$1,(32),inst_14712);
} else {
if((state_val_14963 === (56))){
var inst_14820 = (state_14962[(31)]);
var state_14962__$1 = state_14962;
var statearr_15111_15335 = state_14962__$1;
(statearr_15111_15335[(2)] = inst_14820);

(statearr_15111_15335[(1)] = (57));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14963 === (25))){
var inst_14755 = (state_14962[(2)]);
var inst_14756 = eos_cljs.core.get_table_rows.call(null,e2e.proposals.prop_acc,e2e.proposals.prop_acc,"proposal");
var inst_14757 = cljs.core.async.interop.p__GT_c.call(null,inst_14756);
var state_14962__$1 = (function (){var statearr_15112 = state_14962;
(statearr_15112[(33)] = inst_14755);

return statearr_15112;
})();
return cljs.core.async.impl.ioc_helpers.take_BANG_.call(null,state_14962__$1,(43),inst_14757);
} else {
if((state_val_14963 === (57))){
var inst_14830 = (state_14962[(2)]);
var state_14962__$1 = (function (){var statearr_15113 = state_14962;
(statearr_15113[(34)] = inst_14830);

return statearr_15113;
})();
var statearr_15114_15336 = state_14962__$1;
(statearr_15114_15336[(2)] = null);

(statearr_15114_15336[(1)] = (58));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14963 === (26))){
var inst_14680 = (state_14962[(2)]);
var inst_14681 = cljs.core.prn.call(null,"test failed with ",inst_14680);
var state_14962__$1 = (function (){var statearr_15115 = state_14962;
(statearr_15115[(35)] = inst_14681);

return statearr_15115;
})();
var statearr_15116_15337 = state_14962__$1;
(statearr_15116_15337[(2)] = null);

(statearr_15116_15337[(1)] = (27));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14963 === (58))){
var _ = (function (){var statearr_15117 = state_14962;
(statearr_15117[(4)] = cljs.core.cons.call(null,(65),(state_14962[(4)])));

return statearr_15117;
})();
var inst_14856 = cljs.core.assoc.call(null,e2e.proposals.base_prop,new cljs.core.Keyword(null,"content_hash","content_hash",(121497903)),"bb");
var inst_14857 = cljs.core.PersistentVector.EMPTY_NODE;
var inst_14858 = [new cljs.core.Keyword(null,"actor","actor",(-1830560481)),new cljs.core.Keyword(null,"permission","permission",(-511292572))];
var inst_14859 = [e2e.proposals.owner_acc,"active"];
var inst_14860 = cljs.core.PersistentHashMap.fromArrays(inst_14858,inst_14859);
var inst_14861 = [inst_14860];
var inst_14862 = (new cljs.core.PersistentVector(null,(1),(5),inst_14857,inst_14861,null));
var inst_14863 = eos_cljs.core.transact.call(null,e2e.proposals.prop_acc,"createprop",inst_14856,inst_14862);
var inst_14864 = cljs.core.async.interop.p__GT_c.call(null,inst_14863);
var state_14962__$1 = state_14962;
return cljs.core.async.impl.ioc_helpers.take_BANG_.call(null,state_14962__$1,(66),inst_14864);
} else {
if((state_val_14963 === (27))){
var _ = (function (){var statearr_15118 = state_14962;
(statearr_15118[(4)] = cljs.core.cons.call(null,(30),(state_14962[(4)])));

return statearr_15118;
})();
var inst_14693 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002))];
var inst_14694 = [new cljs.core.Keyword(null,"fail","fail",(1706214930)),"can make a proposal"];
var inst_14695 = cljs.core.PersistentHashMap.fromArrays(inst_14693,inst_14694);
var inst_14696 = cljs.test.do_report.call(null,inst_14695);
var ___$1 = (function (){var statearr_15119 = state_14962;
(statearr_15119[(4)] = cljs.core.rest.call(null,(state_14962[(4)])));

return statearr_15119;
})();
var state_14962__$1 = state_14962;
var statearr_15120_15338 = state_14962__$1;
(statearr_15120_15338[(2)] = inst_14696);

(statearr_15120_15338[(1)] = (28));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14963 === (59))){
var inst_14907 = (state_14962[(2)]);
var inst_14908 = eos_cljs.core.get_table_rows.call(null,e2e.proposals.prop_acc,e2e.proposals.prop_acc,"proposal");
var inst_14909 = cljs.core.async.interop.p__GT_c.call(null,inst_14908);
var state_14962__$1 = (function (){var statearr_15121 = state_14962;
(statearr_15121[(36)] = inst_14907);

return statearr_15121;
})();
return cljs.core.async.impl.ioc_helpers.take_BANG_.call(null,state_14962__$1,(77),inst_14909);
} else {
if((state_val_14963 === (28))){
var inst_14699 = (state_14962[(2)]);
var state_14962__$1 = state_14962;
var statearr_15122_15339 = state_14962__$1;
(statearr_15122_15339[(2)] = inst_14699);

(statearr_15122_15339[(1)] = (25));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14963 === (60))){
var inst_14831 = (state_14962[(2)]);
var inst_14832 = cljs.core.prn.call(null,"test failed with ",inst_14831);
var state_14962__$1 = (function (){var statearr_15123 = state_14962;
(statearr_15123[(37)] = inst_14832);

return statearr_15123;
})();
var statearr_15124_15340 = state_14962__$1;
(statearr_15124_15340[(2)] = null);

(statearr_15124_15340[(1)] = (61));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14963 === (29))){
var inst_14682 = (state_14962[(2)]);
var inst_14683 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_14684 = null;
var inst_14685 = [new cljs.core.Keyword(null,"error","error",(-978969032)),"can make a proposal",inst_14684,inst_14682];
var inst_14686 = cljs.core.PersistentHashMap.fromArrays(inst_14683,inst_14685);
var inst_14687 = cljs.test.do_report.call(null,inst_14686);
var state_14962__$1 = state_14962;
var statearr_15126_15341 = state_14962__$1;
(statearr_15126_15341[(2)] = inst_14687);

(statearr_15126_15341[(1)] = (28));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14963 === (61))){
var _ = (function (){var statearr_15127 = state_14962;
(statearr_15127[(4)] = cljs.core.cons.call(null,(64),(state_14962[(4)])));

return statearr_15127;
})();
var inst_14844 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002))];
var inst_14845 = [new cljs.core.Keyword(null,"fail","fail",(1706214930)),"can make a second proposal"];
var inst_14846 = cljs.core.PersistentHashMap.fromArrays(inst_14844,inst_14845);
var inst_14847 = cljs.test.do_report.call(null,inst_14846);
var ___$1 = (function (){var statearr_15128 = state_14962;
(statearr_15128[(4)] = cljs.core.rest.call(null,(state_14962[(4)])));

return statearr_15128;
})();
var state_14962__$1 = state_14962;
var statearr_15129_15342 = state_14962__$1;
(statearr_15129_15342[(2)] = inst_14847);

(statearr_15129_15342[(1)] = (62));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14963 === (30))){
var _ = (function (){var statearr_15131 = state_14962;
(statearr_15131[(4)] = cljs.core.rest.call(null,(state_14962[(4)])));

return statearr_15131;
})();
var state_14962__$1 = state_14962;
var ex15125 = (state_14962__$1[(2)]);
var statearr_15132_15343 = state_14962__$1;
(statearr_15132_15343[(5)] = ex15125);


var statearr_15133_15344 = state_14962__$1;
(statearr_15133_15344[(1)] = (29));

(statearr_15133_15344[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14963 === (62))){
var inst_14850 = (state_14962[(2)]);
var state_14962__$1 = state_14962;
var statearr_15134_15345 = state_14962__$1;
(statearr_15134_15345[(2)] = inst_14850);

(statearr_15134_15345[(1)] = (59));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14963 === (31))){
var _ = (function (){var statearr_15135 = state_14962;
(statearr_15135[(4)] = cljs.core.rest.call(null,(state_14962[(4)])));

return statearr_15135;
})();
var state_14962__$1 = state_14962;
var ex15130 = (state_14962__$1[(2)]);
var statearr_15136_15346 = state_14962__$1;
(statearr_15136_15346[(5)] = ex15130);


if((ex15130 instanceof Error)){
var statearr_15137_15347 = state_14962__$1;
(statearr_15137_15347[(1)] = (26));

(statearr_15137_15347[(5)] = null);

} else {
throw ex15130;

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_14963 === (63))){
var inst_14833 = (state_14962[(2)]);
var inst_14834 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_14835 = null;
var inst_14836 = [new cljs.core.Keyword(null,"error","error",(-978969032)),"can make a second proposal",inst_14835,inst_14833];
var inst_14837 = cljs.core.PersistentHashMap.fromArrays(inst_14834,inst_14836);
var inst_14838 = cljs.test.do_report.call(null,inst_14837);
var state_14962__$1 = state_14962;
var statearr_15138_15348 = state_14962__$1;
(statearr_15138_15348[(2)] = inst_14838);

(statearr_15138_15348[(1)] = (62));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
return null;
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
});})(c__19__auto__,___192__auto__))
;
return ((function (switch__14__auto__,c__19__auto__,___192__auto__){
return (function() {
var e2e$proposals$state_machine__15__auto__ = null;
var e2e$proposals$state_machine__15__auto____0 = (function (){
var statearr_15139 = [null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];
(statearr_15139[(0)] = e2e$proposals$state_machine__15__auto__);

(statearr_15139[(1)] = (1));

return statearr_15139;
});
var e2e$proposals$state_machine__15__auto____1 = (function (state_14962){
while(true){
var ret_value__16__auto__ = (function (){try{while(true){
var result__17__auto__ = switch__14__auto__.call(null,state_14962);
if(cljs.core.keyword_identical_QMARK_.call(null,result__17__auto__,new cljs.core.Keyword(null,"recur","recur",(-437573268)))){
continue;
} else {
return result__17__auto__;
}
break;
}
}catch (e15140){var ex__18__auto__ = e15140;
var statearr_15141_15349 = state_14962;
(statearr_15141_15349[(2)] = ex__18__auto__);


if(cljs.core.seq.call(null,(state_14962[(4)]))){
var statearr_15142_15350 = state_14962;
(statearr_15142_15350[(1)] = cljs.core.first.call(null,(state_14962[(4)])));

} else {
throw ex__18__auto__;
}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
}})();
if(cljs.core.keyword_identical_QMARK_.call(null,ret_value__16__auto__,new cljs.core.Keyword(null,"recur","recur",(-437573268)))){
var G__15351 = state_14962;
state_14962 = G__15351;
continue;
} else {
return ret_value__16__auto__;
}
break;
}
});
e2e$proposals$state_machine__15__auto__ = function(state_14962){
switch(arguments.length){
case 0:
return e2e$proposals$state_machine__15__auto____0.call(this);
case 1:
return e2e$proposals$state_machine__15__auto____1.call(this,state_14962);
}
throw(new Error('Invalid arity: ' + arguments.length));
};
e2e$proposals$state_machine__15__auto__.cljs$core$IFn$_invoke$arity$0 = e2e$proposals$state_machine__15__auto____0;
e2e$proposals$state_machine__15__auto__.cljs$core$IFn$_invoke$arity$1 = e2e$proposals$state_machine__15__auto____1;
return e2e$proposals$state_machine__15__auto__;
})()
;})(switch__14__auto__,c__19__auto__,___192__auto__))
})();
var state__21__auto__ = (function (){var statearr_15143 = f__20__auto__.call(null);
(statearr_15143[(6)] = c__19__auto__);

return statearr_15143;
})();
return cljs.core.async.impl.ioc_helpers.run_state_machine_wrapped.call(null,state__21__auto__);
});})(c__19__auto__,___192__auto__))
);

return c__19__auto__;
});

e2e.proposals.t_e2e$proposals14052.getBasis = (function (){
return new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,"meta14053","meta14053",(-1298504794),null)], null);
});

e2e.proposals.t_e2e$proposals14052.cljs$lang$type = true;

e2e.proposals.t_e2e$proposals14052.cljs$lang$ctorStr = "e2e.proposals/t_e2e$proposals14052";

e2e.proposals.t_e2e$proposals14052.cljs$lang$ctorPrWriter = (function (this__9776__auto__,writer__9777__auto__,opt__9778__auto__){
return cljs.core._write.call(null,writer__9777__auto__,"e2e.proposals/t_e2e$proposals14052");
});

/**
 * Positional factory function for e2e.proposals/t_e2e$proposals14052.
 */
e2e.proposals.__GT_t_e2e$proposals14052 = (function e2e$proposals$__GT_t_e2e$proposals14052(meta14053){
return (new e2e.proposals.t_e2e$proposals14052(meta14053));
});

}

return (new e2e.proposals.t_e2e$proposals14052(null));
});

e2e.proposals.new_proposal.cljs$lang$var = new cljs.core.Var(function(){return e2e.proposals.new_proposal;},new cljs.core.Symbol("e2e.proposals","new-proposal","e2e.proposals/new-proposal",(-713004459),null),cljs.core.PersistentHashMap.fromArrays([new cljs.core.Keyword(null,"ns","ns",(441598760)),new cljs.core.Keyword(null,"name","name",(1843675177)),new cljs.core.Keyword(null,"file","file",(-1269645878)),new cljs.core.Keyword(null,"end-column","end-column",(1425389514)),new cljs.core.Keyword(null,"column","column",(2078222095)),new cljs.core.Keyword(null,"line","line",(212345235)),new cljs.core.Keyword(null,"end-line","end-line",(1837326455)),new cljs.core.Keyword(null,"arglists","arglists",(1661989754)),new cljs.core.Keyword(null,"doc","doc",(1913296891)),new cljs.core.Keyword(null,"test","test",(577538877))],[new cljs.core.Symbol(null,"e2e.proposals","e2e.proposals",(1479174227),null),new cljs.core.Symbol(null,"new-proposal","new-proposal",(-1057710210),null),"e2e/proposals.cljs",(22),(1),(113),(113),cljs.core.List.EMPTY,null,(cljs.core.truth_(e2e.proposals.new_proposal)?e2e.proposals.new_proposal.cljs$lang$test:null)]));
e2e.proposals.update_proposal = (function e2e$proposals$update_proposal(){
return cljs.test.test_var.call(null,e2e.proposals.update_proposal.cljs$lang$var);
});
e2e.proposals.update_proposal.cljs$lang$test = (function (){
if((typeof e2e !== 'undefined') && (typeof e2e.proposals !== 'undefined') && (typeof e2e.proposals.t_e2e$proposals15352 !== 'undefined')){
} else {

/**
* @constructor
 * @implements {cljs.core.IWithMeta}
 * @implements {cljs.core.IMeta}
 * @implements {cljs.test.IAsyncTest}
 * @implements {cljs.core.IFn}
*/
e2e.proposals.t_e2e$proposals15352 = (function (meta15353){
this.meta15353 = meta15353;
this.cljs$lang$protocol_mask$partition0$ = 393217;
this.cljs$lang$protocol_mask$partition1$ = 0;
});
e2e.proposals.t_e2e$proposals15352.prototype.cljs$core$IWithMeta$_with_meta$arity$2 = (function (_15354,meta15353__$1){
var self__ = this;
var _15354__$1 = this;
return (new e2e.proposals.t_e2e$proposals15352(meta15353__$1));
});

e2e.proposals.t_e2e$proposals15352.prototype.cljs$core$IMeta$_meta$arity$1 = (function (_15354){
var self__ = this;
var _15354__$1 = this;
return self__.meta15353;
});

e2e.proposals.t_e2e$proposals15352.prototype.cljs$test$IAsyncTest$ = cljs.core.PROTOCOL_SENTINEL;

e2e.proposals.t_e2e$proposals15352.prototype.call = (function (self__,done){
var self__ = this;
var self____$1 = this;
var ___192__auto__ = self____$1;
var c__19__auto__ = cljs.core.async.chan.call(null,(1));
cljs.core.async.impl.dispatch.run.call(null,((function (c__19__auto__,___192__auto__,self____$1){
return (function (){
var f__20__auto__ = (function (){var switch__14__auto__ = ((function (c__19__auto__,___192__auto__,self____$1){
return (function (state_15512){
var state_val_15513 = (state_15512[(1)]);
if((state_val_15513 === (32))){
var inst_15478 = (state_15512[(2)]);
var state_15512__$1 = (function (){var statearr_15514 = state_15512;
(statearr_15514[(7)] = inst_15478);

return statearr_15514;
})();
var statearr_15515_15842 = state_15512__$1;
(statearr_15515_15842[(2)] = null);

(statearr_15515_15842[(1)] = (33));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_15513 === (1))){
var state_15512__$1 = state_15512;
var statearr_15516_15843 = state_15512__$1;
(statearr_15516_15843[(2)] = null);

(statearr_15516_15843[(1)] = (2));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_15513 === (33))){
var _ = (function (){var statearr_15517 = state_15512;
(statearr_15517[(4)] = cljs.core.cons.call(null,(36),(state_15512[(4)])));

return statearr_15517;
})();
var state_15512__$1 = state_15512;
var statearr_15518_15844 = state_15512__$1;
(statearr_15518_15844[(1)] = (37));



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_15513 === (2))){
var _ = (function (){var statearr_15520 = state_15512;
(statearr_15520[(4)] = cljs.core.cons.call(null,(9),(state_15512[(4)])));

return statearr_15520;
})();
var inst_15381 = cljs.core.assoc.call(null,e2e.proposals.base_prop,new cljs.core.Keyword(null,"id","id",(-1388402092)),(0),new cljs.core.Keyword(null,"cycle","cycle",(710365284)),(2));
var inst_15382 = cljs.core.PersistentVector.EMPTY_NODE;
var inst_15383 = [new cljs.core.Keyword(null,"actor","actor",(-1830560481)),new cljs.core.Keyword(null,"permission","permission",(-511292572))];
var inst_15384 = [e2e.proposals.owner_acc,"active"];
var inst_15385 = cljs.core.PersistentHashMap.fromArrays(inst_15383,inst_15384);
var inst_15386 = [inst_15385];
var inst_15387 = (new cljs.core.PersistentVector(null,(1),(5),inst_15382,inst_15386,null));
var inst_15388 = eos_cljs.core.transact.call(null,e2e.proposals.prop_acc,"updateprop",inst_15381,inst_15387);
var inst_15389 = cljs.core.async.interop.p__GT_c.call(null,inst_15388);
var state_15512__$1 = state_15512;
return cljs.core.async.impl.ioc_helpers.take_BANG_.call(null,state_15512__$1,(10),inst_15389);
} else {
if((state_val_15513 === (34))){
var inst_15506 = (state_15512[(2)]);
var _ = (function (){var statearr_15521 = state_15512;
(statearr_15521[(4)] = cljs.core.rest.call(null,(state_15512[(4)])));

return statearr_15521;
})();
var state_15512__$1 = state_15512;
var statearr_15522_15845 = state_15512__$1;
(statearr_15522_15845[(2)] = inst_15506);

(statearr_15522_15845[(1)] = (22));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_15513 === (3))){
var inst_15432 = (state_15512[(2)]);
var state_15512__$1 = (function (){var statearr_15523 = state_15512;
(statearr_15523[(8)] = inst_15432);

return statearr_15523;
})();
var statearr_15524_15846 = state_15512__$1;
(statearr_15524_15846[(2)] = null);

(statearr_15524_15846[(1)] = (21));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_15513 === (35))){
var inst_15479 = (state_15512[(2)]);
var inst_15480 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_15481 = true;
var inst_15482 = [new cljs.core.Keyword(null,"error","error",(-978969032)),"can update proposal",inst_15481,inst_15479];
var inst_15483 = cljs.core.PersistentHashMap.fromArrays(inst_15480,inst_15482);
var inst_15484 = cljs.test.do_report.call(null,inst_15483);
var state_15512__$1 = state_15512;
var statearr_15526_15847 = state_15512__$1;
(statearr_15526_15847[(2)] = inst_15484);

(statearr_15526_15847[(1)] = (34));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_15513 === (4))){
var inst_15356 = (state_15512[(2)]);
var inst_15357 = cljs.core.prn.call(null,"test failed with ",inst_15356);
var state_15512__$1 = (function (){var statearr_15527 = state_15512;
(statearr_15527[(9)] = inst_15357);

return statearr_15527;
})();
var statearr_15528_15848 = state_15512__$1;
(statearr_15528_15848[(2)] = null);

(statearr_15528_15848[(1)] = (5));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_15513 === (36))){
var _ = (function (){var statearr_15529 = state_15512;
(statearr_15529[(4)] = cljs.core.rest.call(null,(state_15512[(4)])));

return statearr_15529;
})();
var state_15512__$1 = state_15512;
var ex15525 = (state_15512__$1[(2)]);
var statearr_15530_15849 = state_15512__$1;
(statearr_15530_15849[(5)] = ex15525);


var statearr_15531_15850 = state_15512__$1;
(statearr_15531_15850[(1)] = (35));

(statearr_15531_15850[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_15513 === (5))){
var _ = (function (){var statearr_15532 = state_15512;
(statearr_15532[(4)] = cljs.core.cons.call(null,(8),(state_15512[(4)])));

return statearr_15532;
})();
var inst_15369 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002))];
var inst_15370 = [new cljs.core.Keyword(null,"fail","fail",(1706214930)),"can update proposal"];
var inst_15371 = cljs.core.PersistentHashMap.fromArrays(inst_15369,inst_15370);
var inst_15372 = cljs.test.do_report.call(null,inst_15371);
var ___$1 = (function (){var statearr_15533 = state_15512;
(statearr_15533[(4)] = cljs.core.rest.call(null,(state_15512[(4)])));

return statearr_15533;
})();
var state_15512__$1 = state_15512;
var statearr_15534_15851 = state_15512__$1;
(statearr_15534_15851[(2)] = inst_15372);

(statearr_15534_15851[(1)] = (6));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_15513 === (37))){
var inst_15491 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_15492 = true;
var inst_15493 = [new cljs.core.Keyword(null,"pass","pass",(1574159993)),"can update proposal",inst_15492,true];
var inst_15494 = cljs.core.PersistentHashMap.fromArrays(inst_15491,inst_15493);
var inst_15495 = cljs.test.do_report.call(null,inst_15494);
var state_15512__$1 = state_15512;
var statearr_15535_15852 = state_15512__$1;
(statearr_15535_15852[(2)] = inst_15495);

(statearr_15535_15852[(1)] = (39));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_15513 === (6))){
var inst_15375 = (state_15512[(2)]);
var state_15512__$1 = state_15512;
var statearr_15536_15853 = state_15512__$1;
(statearr_15536_15853[(2)] = inst_15375);

(statearr_15536_15853[(1)] = (3));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_15513 === (38))){
var inst_15497 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_15498 = true;
var inst_15499 = [new cljs.core.Keyword(null,"fail","fail",(1706214930)),"can update proposal",inst_15498,true];
var inst_15500 = cljs.core.PersistentHashMap.fromArrays(inst_15497,inst_15499);
var inst_15501 = cljs.test.do_report.call(null,inst_15500);
var state_15512__$1 = state_15512;
var statearr_15537_15854 = state_15512__$1;
(statearr_15537_15854[(2)] = inst_15501);

(statearr_15537_15854[(1)] = (39));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_15513 === (7))){
var inst_15358 = (state_15512[(2)]);
var inst_15359 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_15360 = null;
var inst_15361 = [new cljs.core.Keyword(null,"error","error",(-978969032)),"can update proposal",inst_15360,inst_15358];
var inst_15362 = cljs.core.PersistentHashMap.fromArrays(inst_15359,inst_15361);
var inst_15363 = cljs.test.do_report.call(null,inst_15362);
var state_15512__$1 = state_15512;
var statearr_15539_15855 = state_15512__$1;
(statearr_15539_15855[(2)] = inst_15363);

(statearr_15539_15855[(1)] = (6));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_15513 === (39))){
var inst_15503 = (state_15512[(2)]);
var _ = (function (){var statearr_15541 = state_15512;
(statearr_15541[(4)] = cljs.core.rest.call(null,(state_15512[(4)])));

return statearr_15541;
})();
var state_15512__$1 = (function (){var statearr_15542 = state_15512;
(statearr_15542[(10)] = inst_15503);

return statearr_15542;
})();
var statearr_15543_15856 = state_15512__$1;
(statearr_15543_15856[(2)] = true);

(statearr_15543_15856[(1)] = (34));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_15513 === (8))){
var _ = (function (){var statearr_15544 = state_15512;
(statearr_15544[(4)] = cljs.core.rest.call(null,(state_15512[(4)])));

return statearr_15544;
})();
var state_15512__$1 = state_15512;
var ex15538 = (state_15512__$1[(2)]);
var statearr_15545_15857 = state_15512__$1;
(statearr_15545_15857[(5)] = ex15538);


var statearr_15546_15858 = state_15512__$1;
(statearr_15546_15858[(1)] = (7));

(statearr_15546_15858[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_15513 === (9))){
var _ = (function (){var statearr_15547 = state_15512;
(statearr_15547[(4)] = cljs.core.rest.call(null,(state_15512[(4)])));

return statearr_15547;
})();
var state_15512__$1 = state_15512;
var ex15540 = (state_15512__$1[(2)]);
var statearr_15548_15859 = state_15512__$1;
(statearr_15548_15859[(5)] = ex15540);


if((ex15540 instanceof Error)){
var statearr_15549_15860 = state_15512__$1;
(statearr_15549_15860[(1)] = (4));

(statearr_15549_15860[(5)] = null);

} else {
throw ex15540;

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_15513 === (10))){
var inst_15391 = (state_15512[(11)]);
var inst_15391__$1 = (state_15512[(2)]);
var inst_15392 = (inst_15391__$1 instanceof cljs.core.ExceptionInfo);
var inst_15393 = cljs.core.ex_data.call(null,inst_15391__$1);
var inst_15394 = new cljs.core.Keyword(null,"error","error",(-978969032)).cljs$core$IFn$_invoke$arity$1(inst_15393);
var inst_15395 = cljs.core._EQ_.call(null,inst_15394,new cljs.core.Keyword(null,"promise-error","promise-error",(-90673560)));
var inst_15396 = ((inst_15392) && (inst_15395));
var state_15512__$1 = (function (){var statearr_15550 = state_15512;
(statearr_15550[(11)] = inst_15391__$1);

return statearr_15550;
})();
if(cljs.core.truth_(inst_15396)){
var statearr_15551_15861 = state_15512__$1;
(statearr_15551_15861[(1)] = (11));

} else {
var statearr_15552_15862 = state_15512__$1;
(statearr_15552_15862[(1)] = (12));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_15513 === (11))){
var inst_15391 = (state_15512[(11)]);
var inst_15398 = (function(){throw inst_15391})();
var state_15512__$1 = state_15512;
var statearr_15553_15863 = state_15512__$1;
(statearr_15553_15863[(2)] = inst_15398);

(statearr_15553_15863[(1)] = (13));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_15513 === (12))){
var inst_15391 = (state_15512[(11)]);
var state_15512__$1 = state_15512;
var statearr_15554_15864 = state_15512__$1;
(statearr_15554_15864[(2)] = inst_15391);

(statearr_15554_15864[(1)] = (13));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_15513 === (13))){
var inst_15401 = (state_15512[(2)]);
var state_15512__$1 = (function (){var statearr_15555 = state_15512;
(statearr_15555[(12)] = inst_15401);

return statearr_15555;
})();
var statearr_15556_15865 = state_15512__$1;
(statearr_15556_15865[(2)] = null);

(statearr_15556_15865[(1)] = (14));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_15513 === (14))){
var _ = (function (){var statearr_15557 = state_15512;
(statearr_15557[(4)] = cljs.core.cons.call(null,(17),(state_15512[(4)])));

return statearr_15557;
})();
var state_15512__$1 = state_15512;
var statearr_15558_15866 = state_15512__$1;
(statearr_15558_15866[(1)] = (18));



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_15513 === (15))){
var inst_15429 = (state_15512[(2)]);
var _ = (function (){var statearr_15561 = state_15512;
(statearr_15561[(4)] = cljs.core.rest.call(null,(state_15512[(4)])));

return statearr_15561;
})();
var state_15512__$1 = state_15512;
var statearr_15562_15867 = state_15512__$1;
(statearr_15562_15867[(2)] = inst_15429);

(statearr_15562_15867[(1)] = (3));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_15513 === (16))){
var inst_15402 = (state_15512[(2)]);
var inst_15403 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_15404 = true;
var inst_15405 = [new cljs.core.Keyword(null,"error","error",(-978969032)),"can update proposal",inst_15404,inst_15402];
var inst_15406 = cljs.core.PersistentHashMap.fromArrays(inst_15403,inst_15405);
var inst_15407 = cljs.test.do_report.call(null,inst_15406);
var state_15512__$1 = state_15512;
var statearr_15563_15868 = state_15512__$1;
(statearr_15563_15868[(2)] = inst_15407);

(statearr_15563_15868[(1)] = (15));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_15513 === (17))){
var _ = (function (){var statearr_15564 = state_15512;
(statearr_15564[(4)] = cljs.core.rest.call(null,(state_15512[(4)])));

return statearr_15564;
})();
var state_15512__$1 = state_15512;
var ex15560 = (state_15512__$1[(2)]);
var statearr_15565_15869 = state_15512__$1;
(statearr_15565_15869[(5)] = ex15560);


var statearr_15566_15870 = state_15512__$1;
(statearr_15566_15870[(1)] = (16));

(statearr_15566_15870[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_15513 === (18))){
var inst_15414 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_15415 = true;
var inst_15416 = [new cljs.core.Keyword(null,"pass","pass",(1574159993)),"can update proposal",inst_15415,true];
var inst_15417 = cljs.core.PersistentHashMap.fromArrays(inst_15414,inst_15416);
var inst_15418 = cljs.test.do_report.call(null,inst_15417);
var state_15512__$1 = state_15512;
var statearr_15567_15871 = state_15512__$1;
(statearr_15567_15871[(2)] = inst_15418);

(statearr_15567_15871[(1)] = (20));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_15513 === (19))){
var inst_15420 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_15421 = true;
var inst_15422 = [new cljs.core.Keyword(null,"fail","fail",(1706214930)),"can update proposal",inst_15421,true];
var inst_15423 = cljs.core.PersistentHashMap.fromArrays(inst_15420,inst_15422);
var inst_15424 = cljs.test.do_report.call(null,inst_15423);
var state_15512__$1 = state_15512;
var statearr_15568_15872 = state_15512__$1;
(statearr_15568_15872[(2)] = inst_15424);

(statearr_15568_15872[(1)] = (20));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_15513 === (20))){
var inst_15426 = (state_15512[(2)]);
var _ = (function (){var statearr_15569 = state_15512;
(statearr_15569[(4)] = cljs.core.rest.call(null,(state_15512[(4)])));

return statearr_15569;
})();
var state_15512__$1 = (function (){var statearr_15570 = state_15512;
(statearr_15570[(13)] = inst_15426);

return statearr_15570;
})();
var statearr_15571_15873 = state_15512__$1;
(statearr_15571_15873[(2)] = true);

(statearr_15571_15873[(1)] = (15));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_15513 === (21))){
var _ = (function (){var statearr_15572 = state_15512;
(statearr_15572[(4)] = cljs.core.cons.call(null,(28),(state_15512[(4)])));

return statearr_15572;
})();
var inst_15458 = cljs.core.assoc.call(null,e2e.proposals.base_prop,new cljs.core.Keyword(null,"id","id",(-1388402092)),(1),new cljs.core.Keyword(null,"cycle","cycle",(710365284)),(2));
var inst_15459 = cljs.core.PersistentVector.EMPTY_NODE;
var inst_15460 = [new cljs.core.Keyword(null,"actor","actor",(-1830560481)),new cljs.core.Keyword(null,"permission","permission",(-511292572))];
var inst_15461 = [e2e.proposals.owner_acc,"active"];
var inst_15462 = cljs.core.PersistentHashMap.fromArrays(inst_15460,inst_15461);
var inst_15463 = [inst_15462];
var inst_15464 = (new cljs.core.PersistentVector(null,(1),(5),inst_15459,inst_15463,null));
var inst_15465 = eos_cljs.core.transact.call(null,e2e.proposals.prop_acc,"updateprop",inst_15458,inst_15464);
var inst_15466 = cljs.core.async.interop.p__GT_c.call(null,inst_15465);
var state_15512__$1 = state_15512;
return cljs.core.async.impl.ioc_helpers.take_BANG_.call(null,state_15512__$1,(29),inst_15466);
} else {
if((state_val_15513 === (22))){
var inst_15509 = (state_15512[(2)]);
var inst_15510 = done.call(null);
var state_15512__$1 = (function (){var statearr_15573 = state_15512;
(statearr_15573[(14)] = inst_15509);

return statearr_15573;
})();
return cljs.core.async.impl.ioc_helpers.return_chan.call(null,state_15512__$1,inst_15510);
} else {
if((state_val_15513 === (23))){
var inst_15433 = (state_15512[(2)]);
var inst_15434 = cljs.core.prn.call(null,"test failed with ",inst_15433);
var state_15512__$1 = (function (){var statearr_15574 = state_15512;
(statearr_15574[(15)] = inst_15434);

return statearr_15574;
})();
var statearr_15575_15874 = state_15512__$1;
(statearr_15575_15874[(2)] = null);

(statearr_15575_15874[(1)] = (24));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_15513 === (24))){
var _ = (function (){var statearr_15576 = state_15512;
(statearr_15576[(4)] = cljs.core.cons.call(null,(27),(state_15512[(4)])));

return statearr_15576;
})();
var inst_15446 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002))];
var inst_15447 = [new cljs.core.Keyword(null,"fail","fail",(1706214930)),"can update proposal"];
var inst_15448 = cljs.core.PersistentHashMap.fromArrays(inst_15446,inst_15447);
var inst_15449 = cljs.test.do_report.call(null,inst_15448);
var ___$1 = (function (){var statearr_15577 = state_15512;
(statearr_15577[(4)] = cljs.core.rest.call(null,(state_15512[(4)])));

return statearr_15577;
})();
var state_15512__$1 = state_15512;
var statearr_15578_15875 = state_15512__$1;
(statearr_15578_15875[(2)] = inst_15449);

(statearr_15578_15875[(1)] = (25));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_15513 === (25))){
var inst_15452 = (state_15512[(2)]);
var state_15512__$1 = state_15512;
var statearr_15580_15876 = state_15512__$1;
(statearr_15580_15876[(2)] = inst_15452);

(statearr_15580_15876[(1)] = (22));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_15513 === (26))){
var inst_15435 = (state_15512[(2)]);
var inst_15436 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_15437 = null;
var inst_15438 = [new cljs.core.Keyword(null,"error","error",(-978969032)),"can update proposal",inst_15437,inst_15435];
var inst_15439 = cljs.core.PersistentHashMap.fromArrays(inst_15436,inst_15438);
var inst_15440 = cljs.test.do_report.call(null,inst_15439);
var state_15512__$1 = state_15512;
var statearr_15582_15877 = state_15512__$1;
(statearr_15582_15877[(2)] = inst_15440);

(statearr_15582_15877[(1)] = (25));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_15513 === (27))){
var _ = (function (){var statearr_15583 = state_15512;
(statearr_15583[(4)] = cljs.core.rest.call(null,(state_15512[(4)])));

return statearr_15583;
})();
var state_15512__$1 = state_15512;
var ex15579 = (state_15512__$1[(2)]);
var statearr_15584_15878 = state_15512__$1;
(statearr_15584_15878[(5)] = ex15579);


var statearr_15585_15879 = state_15512__$1;
(statearr_15585_15879[(1)] = (26));

(statearr_15585_15879[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_15513 === (28))){
var _ = (function (){var statearr_15586 = state_15512;
(statearr_15586[(4)] = cljs.core.rest.call(null,(state_15512[(4)])));

return statearr_15586;
})();
var state_15512__$1 = state_15512;
var ex15581 = (state_15512__$1[(2)]);
var statearr_15587_15880 = state_15512__$1;
(statearr_15587_15880[(5)] = ex15581);


if((ex15581 instanceof Error)){
var statearr_15588_15881 = state_15512__$1;
(statearr_15588_15881[(1)] = (23));

(statearr_15588_15881[(5)] = null);

} else {
throw ex15581;

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_15513 === (29))){
var inst_15468 = (state_15512[(16)]);
var inst_15468__$1 = (state_15512[(2)]);
var inst_15469 = (inst_15468__$1 instanceof cljs.core.ExceptionInfo);
var inst_15470 = cljs.core.ex_data.call(null,inst_15468__$1);
var inst_15471 = new cljs.core.Keyword(null,"error","error",(-978969032)).cljs$core$IFn$_invoke$arity$1(inst_15470);
var inst_15472 = cljs.core._EQ_.call(null,inst_15471,new cljs.core.Keyword(null,"promise-error","promise-error",(-90673560)));
var inst_15473 = ((inst_15469) && (inst_15472));
var state_15512__$1 = (function (){var statearr_15589 = state_15512;
(statearr_15589[(16)] = inst_15468__$1);

return statearr_15589;
})();
if(cljs.core.truth_(inst_15473)){
var statearr_15590_15882 = state_15512__$1;
(statearr_15590_15882[(1)] = (30));

} else {
var statearr_15591_15883 = state_15512__$1;
(statearr_15591_15883[(1)] = (31));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_15513 === (30))){
var inst_15468 = (state_15512[(16)]);
var inst_15475 = (function(){throw inst_15468})();
var state_15512__$1 = state_15512;
var statearr_15592_15884 = state_15512__$1;
(statearr_15592_15884[(2)] = inst_15475);

(statearr_15592_15884[(1)] = (32));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_15513 === (31))){
var inst_15468 = (state_15512[(16)]);
var state_15512__$1 = state_15512;
var statearr_15593_15885 = state_15512__$1;
(statearr_15593_15885[(2)] = inst_15468);

(statearr_15593_15885[(1)] = (32));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
return null;
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
});})(c__19__auto__,___192__auto__,self____$1))
;
return ((function (switch__14__auto__,c__19__auto__,___192__auto__,self____$1){
return (function() {
var e2e$proposals$state_machine__15__auto__ = null;
var e2e$proposals$state_machine__15__auto____0 = (function (){
var statearr_15594 = [null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];
(statearr_15594[(0)] = e2e$proposals$state_machine__15__auto__);

(statearr_15594[(1)] = (1));

return statearr_15594;
});
var e2e$proposals$state_machine__15__auto____1 = (function (state_15512){
while(true){
var ret_value__16__auto__ = (function (){try{while(true){
var result__17__auto__ = switch__14__auto__.call(null,state_15512);
if(cljs.core.keyword_identical_QMARK_.call(null,result__17__auto__,new cljs.core.Keyword(null,"recur","recur",(-437573268)))){
continue;
} else {
return result__17__auto__;
}
break;
}
}catch (e15595){var ex__18__auto__ = e15595;
var statearr_15596_15886 = state_15512;
(statearr_15596_15886[(2)] = ex__18__auto__);


if(cljs.core.seq.call(null,(state_15512[(4)]))){
var statearr_15597_15887 = state_15512;
(statearr_15597_15887[(1)] = cljs.core.first.call(null,(state_15512[(4)])));

} else {
throw ex__18__auto__;
}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
}})();
if(cljs.core.keyword_identical_QMARK_.call(null,ret_value__16__auto__,new cljs.core.Keyword(null,"recur","recur",(-437573268)))){
var G__15888 = state_15512;
state_15512 = G__15888;
continue;
} else {
return ret_value__16__auto__;
}
break;
}
});
e2e$proposals$state_machine__15__auto__ = function(state_15512){
switch(arguments.length){
case 0:
return e2e$proposals$state_machine__15__auto____0.call(this);
case 1:
return e2e$proposals$state_machine__15__auto____1.call(this,state_15512);
}
throw(new Error('Invalid arity: ' + arguments.length));
};
e2e$proposals$state_machine__15__auto__.cljs$core$IFn$_invoke$arity$0 = e2e$proposals$state_machine__15__auto____0;
e2e$proposals$state_machine__15__auto__.cljs$core$IFn$_invoke$arity$1 = e2e$proposals$state_machine__15__auto____1;
return e2e$proposals$state_machine__15__auto__;
})()
;})(switch__14__auto__,c__19__auto__,___192__auto__,self____$1))
})();
var state__21__auto__ = (function (){var statearr_15598 = f__20__auto__.call(null);
(statearr_15598[(6)] = c__19__auto__);

return statearr_15598;
})();
return cljs.core.async.impl.ioc_helpers.run_state_machine_wrapped.call(null,state__21__auto__);
});})(c__19__auto__,___192__auto__,self____$1))
);

return c__19__auto__;
});

e2e.proposals.t_e2e$proposals15352.prototype.apply = (function (self__,args15355){
var self__ = this;
var self____$1 = this;
return self____$1.call.apply(self____$1,[self____$1].concat(cljs.core.aclone.call(null,args15355)));
});

e2e.proposals.t_e2e$proposals15352.prototype.cljs$core$IFn$_invoke$arity$1 = (function (done){
var self__ = this;
var ___192__auto__ = this;
var c__19__auto__ = cljs.core.async.chan.call(null,(1));
cljs.core.async.impl.dispatch.run.call(null,((function (c__19__auto__,___192__auto__){
return (function (){
var f__20__auto__ = (function (){var switch__14__auto__ = ((function (c__19__auto__,___192__auto__){
return (function (state_15755){
var state_val_15756 = (state_15755[(1)]);
if((state_val_15756 === (32))){
var inst_15721 = (state_15755[(2)]);
var state_15755__$1 = (function (){var statearr_15757 = state_15755;
(statearr_15757[(7)] = inst_15721);

return statearr_15757;
})();
var statearr_15758_15889 = state_15755__$1;
(statearr_15758_15889[(2)] = null);

(statearr_15758_15889[(1)] = (33));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_15756 === (1))){
var state_15755__$1 = state_15755;
var statearr_15759_15890 = state_15755__$1;
(statearr_15759_15890[(2)] = null);

(statearr_15759_15890[(1)] = (2));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_15756 === (33))){
var _ = (function (){var statearr_15760 = state_15755;
(statearr_15760[(4)] = cljs.core.cons.call(null,(36),(state_15755[(4)])));

return statearr_15760;
})();
var state_15755__$1 = state_15755;
var statearr_15761_15891 = state_15755__$1;
(statearr_15761_15891[(1)] = (37));



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_15756 === (2))){
var _ = (function (){var statearr_15763 = state_15755;
(statearr_15763[(4)] = cljs.core.cons.call(null,(9),(state_15755[(4)])));

return statearr_15763;
})();
var inst_15624 = cljs.core.assoc.call(null,e2e.proposals.base_prop,new cljs.core.Keyword(null,"id","id",(-1388402092)),(0),new cljs.core.Keyword(null,"cycle","cycle",(710365284)),(2));
var inst_15625 = cljs.core.PersistentVector.EMPTY_NODE;
var inst_15626 = [new cljs.core.Keyword(null,"actor","actor",(-1830560481)),new cljs.core.Keyword(null,"permission","permission",(-511292572))];
var inst_15627 = [e2e.proposals.owner_acc,"active"];
var inst_15628 = cljs.core.PersistentHashMap.fromArrays(inst_15626,inst_15627);
var inst_15629 = [inst_15628];
var inst_15630 = (new cljs.core.PersistentVector(null,(1),(5),inst_15625,inst_15629,null));
var inst_15631 = eos_cljs.core.transact.call(null,e2e.proposals.prop_acc,"updateprop",inst_15624,inst_15630);
var inst_15632 = cljs.core.async.interop.p__GT_c.call(null,inst_15631);
var state_15755__$1 = state_15755;
return cljs.core.async.impl.ioc_helpers.take_BANG_.call(null,state_15755__$1,(10),inst_15632);
} else {
if((state_val_15756 === (34))){
var inst_15749 = (state_15755[(2)]);
var _ = (function (){var statearr_15764 = state_15755;
(statearr_15764[(4)] = cljs.core.rest.call(null,(state_15755[(4)])));

return statearr_15764;
})();
var state_15755__$1 = state_15755;
var statearr_15765_15892 = state_15755__$1;
(statearr_15765_15892[(2)] = inst_15749);

(statearr_15765_15892[(1)] = (22));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_15756 === (3))){
var inst_15675 = (state_15755[(2)]);
var state_15755__$1 = (function (){var statearr_15766 = state_15755;
(statearr_15766[(8)] = inst_15675);

return statearr_15766;
})();
var statearr_15767_15893 = state_15755__$1;
(statearr_15767_15893[(2)] = null);

(statearr_15767_15893[(1)] = (21));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_15756 === (35))){
var inst_15722 = (state_15755[(2)]);
var inst_15723 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_15724 = true;
var inst_15725 = [new cljs.core.Keyword(null,"error","error",(-978969032)),"can update proposal",inst_15724,inst_15722];
var inst_15726 = cljs.core.PersistentHashMap.fromArrays(inst_15723,inst_15725);
var inst_15727 = cljs.test.do_report.call(null,inst_15726);
var state_15755__$1 = state_15755;
var statearr_15769_15894 = state_15755__$1;
(statearr_15769_15894[(2)] = inst_15727);

(statearr_15769_15894[(1)] = (34));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_15756 === (4))){
var inst_15599 = (state_15755[(2)]);
var inst_15600 = cljs.core.prn.call(null,"test failed with ",inst_15599);
var state_15755__$1 = (function (){var statearr_15770 = state_15755;
(statearr_15770[(9)] = inst_15600);

return statearr_15770;
})();
var statearr_15771_15895 = state_15755__$1;
(statearr_15771_15895[(2)] = null);

(statearr_15771_15895[(1)] = (5));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_15756 === (36))){
var _ = (function (){var statearr_15772 = state_15755;
(statearr_15772[(4)] = cljs.core.rest.call(null,(state_15755[(4)])));

return statearr_15772;
})();
var state_15755__$1 = state_15755;
var ex15768 = (state_15755__$1[(2)]);
var statearr_15773_15896 = state_15755__$1;
(statearr_15773_15896[(5)] = ex15768);


var statearr_15774_15897 = state_15755__$1;
(statearr_15774_15897[(1)] = (35));

(statearr_15774_15897[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_15756 === (5))){
var _ = (function (){var statearr_15775 = state_15755;
(statearr_15775[(4)] = cljs.core.cons.call(null,(8),(state_15755[(4)])));

return statearr_15775;
})();
var inst_15612 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002))];
var inst_15613 = [new cljs.core.Keyword(null,"fail","fail",(1706214930)),"can update proposal"];
var inst_15614 = cljs.core.PersistentHashMap.fromArrays(inst_15612,inst_15613);
var inst_15615 = cljs.test.do_report.call(null,inst_15614);
var ___$1 = (function (){var statearr_15776 = state_15755;
(statearr_15776[(4)] = cljs.core.rest.call(null,(state_15755[(4)])));

return statearr_15776;
})();
var state_15755__$1 = state_15755;
var statearr_15777_15898 = state_15755__$1;
(statearr_15777_15898[(2)] = inst_15615);

(statearr_15777_15898[(1)] = (6));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_15756 === (37))){
var inst_15734 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_15735 = true;
var inst_15736 = [new cljs.core.Keyword(null,"pass","pass",(1574159993)),"can update proposal",inst_15735,true];
var inst_15737 = cljs.core.PersistentHashMap.fromArrays(inst_15734,inst_15736);
var inst_15738 = cljs.test.do_report.call(null,inst_15737);
var state_15755__$1 = state_15755;
var statearr_15778_15899 = state_15755__$1;
(statearr_15778_15899[(2)] = inst_15738);

(statearr_15778_15899[(1)] = (39));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_15756 === (6))){
var inst_15618 = (state_15755[(2)]);
var state_15755__$1 = state_15755;
var statearr_15779_15900 = state_15755__$1;
(statearr_15779_15900[(2)] = inst_15618);

(statearr_15779_15900[(1)] = (3));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_15756 === (38))){
var inst_15740 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_15741 = true;
var inst_15742 = [new cljs.core.Keyword(null,"fail","fail",(1706214930)),"can update proposal",inst_15741,true];
var inst_15743 = cljs.core.PersistentHashMap.fromArrays(inst_15740,inst_15742);
var inst_15744 = cljs.test.do_report.call(null,inst_15743);
var state_15755__$1 = state_15755;
var statearr_15780_15901 = state_15755__$1;
(statearr_15780_15901[(2)] = inst_15744);

(statearr_15780_15901[(1)] = (39));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_15756 === (7))){
var inst_15601 = (state_15755[(2)]);
var inst_15602 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_15603 = null;
var inst_15604 = [new cljs.core.Keyword(null,"error","error",(-978969032)),"can update proposal",inst_15603,inst_15601];
var inst_15605 = cljs.core.PersistentHashMap.fromArrays(inst_15602,inst_15604);
var inst_15606 = cljs.test.do_report.call(null,inst_15605);
var state_15755__$1 = state_15755;
var statearr_15782_15902 = state_15755__$1;
(statearr_15782_15902[(2)] = inst_15606);

(statearr_15782_15902[(1)] = (6));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_15756 === (39))){
var inst_15746 = (state_15755[(2)]);
var _ = (function (){var statearr_15784 = state_15755;
(statearr_15784[(4)] = cljs.core.rest.call(null,(state_15755[(4)])));

return statearr_15784;
})();
var state_15755__$1 = (function (){var statearr_15785 = state_15755;
(statearr_15785[(10)] = inst_15746);

return statearr_15785;
})();
var statearr_15786_15903 = state_15755__$1;
(statearr_15786_15903[(2)] = true);

(statearr_15786_15903[(1)] = (34));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_15756 === (8))){
var _ = (function (){var statearr_15787 = state_15755;
(statearr_15787[(4)] = cljs.core.rest.call(null,(state_15755[(4)])));

return statearr_15787;
})();
var state_15755__$1 = state_15755;
var ex15781 = (state_15755__$1[(2)]);
var statearr_15788_15904 = state_15755__$1;
(statearr_15788_15904[(5)] = ex15781);


var statearr_15789_15905 = state_15755__$1;
(statearr_15789_15905[(1)] = (7));

(statearr_15789_15905[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_15756 === (9))){
var _ = (function (){var statearr_15790 = state_15755;
(statearr_15790[(4)] = cljs.core.rest.call(null,(state_15755[(4)])));

return statearr_15790;
})();
var state_15755__$1 = state_15755;
var ex15783 = (state_15755__$1[(2)]);
var statearr_15791_15906 = state_15755__$1;
(statearr_15791_15906[(5)] = ex15783);


if((ex15783 instanceof Error)){
var statearr_15792_15907 = state_15755__$1;
(statearr_15792_15907[(1)] = (4));

(statearr_15792_15907[(5)] = null);

} else {
throw ex15783;

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_15756 === (10))){
var inst_15634 = (state_15755[(11)]);
var inst_15634__$1 = (state_15755[(2)]);
var inst_15635 = (inst_15634__$1 instanceof cljs.core.ExceptionInfo);
var inst_15636 = cljs.core.ex_data.call(null,inst_15634__$1);
var inst_15637 = new cljs.core.Keyword(null,"error","error",(-978969032)).cljs$core$IFn$_invoke$arity$1(inst_15636);
var inst_15638 = cljs.core._EQ_.call(null,inst_15637,new cljs.core.Keyword(null,"promise-error","promise-error",(-90673560)));
var inst_15639 = ((inst_15635) && (inst_15638));
var state_15755__$1 = (function (){var statearr_15793 = state_15755;
(statearr_15793[(11)] = inst_15634__$1);

return statearr_15793;
})();
if(cljs.core.truth_(inst_15639)){
var statearr_15794_15908 = state_15755__$1;
(statearr_15794_15908[(1)] = (11));

} else {
var statearr_15795_15909 = state_15755__$1;
(statearr_15795_15909[(1)] = (12));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_15756 === (11))){
var inst_15634 = (state_15755[(11)]);
var inst_15641 = (function(){throw inst_15634})();
var state_15755__$1 = state_15755;
var statearr_15796_15910 = state_15755__$1;
(statearr_15796_15910[(2)] = inst_15641);

(statearr_15796_15910[(1)] = (13));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_15756 === (12))){
var inst_15634 = (state_15755[(11)]);
var state_15755__$1 = state_15755;
var statearr_15797_15911 = state_15755__$1;
(statearr_15797_15911[(2)] = inst_15634);

(statearr_15797_15911[(1)] = (13));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_15756 === (13))){
var inst_15644 = (state_15755[(2)]);
var state_15755__$1 = (function (){var statearr_15798 = state_15755;
(statearr_15798[(12)] = inst_15644);

return statearr_15798;
})();
var statearr_15799_15912 = state_15755__$1;
(statearr_15799_15912[(2)] = null);

(statearr_15799_15912[(1)] = (14));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_15756 === (14))){
var _ = (function (){var statearr_15800 = state_15755;
(statearr_15800[(4)] = cljs.core.cons.call(null,(17),(state_15755[(4)])));

return statearr_15800;
})();
var state_15755__$1 = state_15755;
var statearr_15801_15913 = state_15755__$1;
(statearr_15801_15913[(1)] = (18));



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_15756 === (15))){
var inst_15672 = (state_15755[(2)]);
var _ = (function (){var statearr_15804 = state_15755;
(statearr_15804[(4)] = cljs.core.rest.call(null,(state_15755[(4)])));

return statearr_15804;
})();
var state_15755__$1 = state_15755;
var statearr_15805_15914 = state_15755__$1;
(statearr_15805_15914[(2)] = inst_15672);

(statearr_15805_15914[(1)] = (3));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_15756 === (16))){
var inst_15645 = (state_15755[(2)]);
var inst_15646 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_15647 = true;
var inst_15648 = [new cljs.core.Keyword(null,"error","error",(-978969032)),"can update proposal",inst_15647,inst_15645];
var inst_15649 = cljs.core.PersistentHashMap.fromArrays(inst_15646,inst_15648);
var inst_15650 = cljs.test.do_report.call(null,inst_15649);
var state_15755__$1 = state_15755;
var statearr_15806_15915 = state_15755__$1;
(statearr_15806_15915[(2)] = inst_15650);

(statearr_15806_15915[(1)] = (15));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_15756 === (17))){
var _ = (function (){var statearr_15807 = state_15755;
(statearr_15807[(4)] = cljs.core.rest.call(null,(state_15755[(4)])));

return statearr_15807;
})();
var state_15755__$1 = state_15755;
var ex15803 = (state_15755__$1[(2)]);
var statearr_15808_15916 = state_15755__$1;
(statearr_15808_15916[(5)] = ex15803);


var statearr_15809_15917 = state_15755__$1;
(statearr_15809_15917[(1)] = (16));

(statearr_15809_15917[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_15756 === (18))){
var inst_15657 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_15658 = true;
var inst_15659 = [new cljs.core.Keyword(null,"pass","pass",(1574159993)),"can update proposal",inst_15658,true];
var inst_15660 = cljs.core.PersistentHashMap.fromArrays(inst_15657,inst_15659);
var inst_15661 = cljs.test.do_report.call(null,inst_15660);
var state_15755__$1 = state_15755;
var statearr_15810_15918 = state_15755__$1;
(statearr_15810_15918[(2)] = inst_15661);

(statearr_15810_15918[(1)] = (20));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_15756 === (19))){
var inst_15663 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_15664 = true;
var inst_15665 = [new cljs.core.Keyword(null,"fail","fail",(1706214930)),"can update proposal",inst_15664,true];
var inst_15666 = cljs.core.PersistentHashMap.fromArrays(inst_15663,inst_15665);
var inst_15667 = cljs.test.do_report.call(null,inst_15666);
var state_15755__$1 = state_15755;
var statearr_15811_15919 = state_15755__$1;
(statearr_15811_15919[(2)] = inst_15667);

(statearr_15811_15919[(1)] = (20));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_15756 === (20))){
var inst_15669 = (state_15755[(2)]);
var _ = (function (){var statearr_15812 = state_15755;
(statearr_15812[(4)] = cljs.core.rest.call(null,(state_15755[(4)])));

return statearr_15812;
})();
var state_15755__$1 = (function (){var statearr_15813 = state_15755;
(statearr_15813[(13)] = inst_15669);

return statearr_15813;
})();
var statearr_15814_15920 = state_15755__$1;
(statearr_15814_15920[(2)] = true);

(statearr_15814_15920[(1)] = (15));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_15756 === (21))){
var _ = (function (){var statearr_15815 = state_15755;
(statearr_15815[(4)] = cljs.core.cons.call(null,(28),(state_15755[(4)])));

return statearr_15815;
})();
var inst_15701 = cljs.core.assoc.call(null,e2e.proposals.base_prop,new cljs.core.Keyword(null,"id","id",(-1388402092)),(1),new cljs.core.Keyword(null,"cycle","cycle",(710365284)),(2));
var inst_15702 = cljs.core.PersistentVector.EMPTY_NODE;
var inst_15703 = [new cljs.core.Keyword(null,"actor","actor",(-1830560481)),new cljs.core.Keyword(null,"permission","permission",(-511292572))];
var inst_15704 = [e2e.proposals.owner_acc,"active"];
var inst_15705 = cljs.core.PersistentHashMap.fromArrays(inst_15703,inst_15704);
var inst_15706 = [inst_15705];
var inst_15707 = (new cljs.core.PersistentVector(null,(1),(5),inst_15702,inst_15706,null));
var inst_15708 = eos_cljs.core.transact.call(null,e2e.proposals.prop_acc,"updateprop",inst_15701,inst_15707);
var inst_15709 = cljs.core.async.interop.p__GT_c.call(null,inst_15708);
var state_15755__$1 = state_15755;
return cljs.core.async.impl.ioc_helpers.take_BANG_.call(null,state_15755__$1,(29),inst_15709);
} else {
if((state_val_15756 === (22))){
var inst_15752 = (state_15755[(2)]);
var inst_15753 = done.call(null);
var state_15755__$1 = (function (){var statearr_15816 = state_15755;
(statearr_15816[(14)] = inst_15752);

return statearr_15816;
})();
return cljs.core.async.impl.ioc_helpers.return_chan.call(null,state_15755__$1,inst_15753);
} else {
if((state_val_15756 === (23))){
var inst_15676 = (state_15755[(2)]);
var inst_15677 = cljs.core.prn.call(null,"test failed with ",inst_15676);
var state_15755__$1 = (function (){var statearr_15817 = state_15755;
(statearr_15817[(15)] = inst_15677);

return statearr_15817;
})();
var statearr_15818_15921 = state_15755__$1;
(statearr_15818_15921[(2)] = null);

(statearr_15818_15921[(1)] = (24));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_15756 === (24))){
var _ = (function (){var statearr_15819 = state_15755;
(statearr_15819[(4)] = cljs.core.cons.call(null,(27),(state_15755[(4)])));

return statearr_15819;
})();
var inst_15689 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002))];
var inst_15690 = [new cljs.core.Keyword(null,"fail","fail",(1706214930)),"can update proposal"];
var inst_15691 = cljs.core.PersistentHashMap.fromArrays(inst_15689,inst_15690);
var inst_15692 = cljs.test.do_report.call(null,inst_15691);
var ___$1 = (function (){var statearr_15820 = state_15755;
(statearr_15820[(4)] = cljs.core.rest.call(null,(state_15755[(4)])));

return statearr_15820;
})();
var state_15755__$1 = state_15755;
var statearr_15821_15922 = state_15755__$1;
(statearr_15821_15922[(2)] = inst_15692);

(statearr_15821_15922[(1)] = (25));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_15756 === (25))){
var inst_15695 = (state_15755[(2)]);
var state_15755__$1 = state_15755;
var statearr_15823_15923 = state_15755__$1;
(statearr_15823_15923[(2)] = inst_15695);

(statearr_15823_15923[(1)] = (22));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_15756 === (26))){
var inst_15678 = (state_15755[(2)]);
var inst_15679 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_15680 = null;
var inst_15681 = [new cljs.core.Keyword(null,"error","error",(-978969032)),"can update proposal",inst_15680,inst_15678];
var inst_15682 = cljs.core.PersistentHashMap.fromArrays(inst_15679,inst_15681);
var inst_15683 = cljs.test.do_report.call(null,inst_15682);
var state_15755__$1 = state_15755;
var statearr_15825_15924 = state_15755__$1;
(statearr_15825_15924[(2)] = inst_15683);

(statearr_15825_15924[(1)] = (25));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_15756 === (27))){
var _ = (function (){var statearr_15826 = state_15755;
(statearr_15826[(4)] = cljs.core.rest.call(null,(state_15755[(4)])));

return statearr_15826;
})();
var state_15755__$1 = state_15755;
var ex15822 = (state_15755__$1[(2)]);
var statearr_15827_15925 = state_15755__$1;
(statearr_15827_15925[(5)] = ex15822);


var statearr_15828_15926 = state_15755__$1;
(statearr_15828_15926[(1)] = (26));

(statearr_15828_15926[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_15756 === (28))){
var _ = (function (){var statearr_15829 = state_15755;
(statearr_15829[(4)] = cljs.core.rest.call(null,(state_15755[(4)])));

return statearr_15829;
})();
var state_15755__$1 = state_15755;
var ex15824 = (state_15755__$1[(2)]);
var statearr_15830_15927 = state_15755__$1;
(statearr_15830_15927[(5)] = ex15824);


if((ex15824 instanceof Error)){
var statearr_15831_15928 = state_15755__$1;
(statearr_15831_15928[(1)] = (23));

(statearr_15831_15928[(5)] = null);

} else {
throw ex15824;

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_15756 === (29))){
var inst_15711 = (state_15755[(16)]);
var inst_15711__$1 = (state_15755[(2)]);
var inst_15712 = (inst_15711__$1 instanceof cljs.core.ExceptionInfo);
var inst_15713 = cljs.core.ex_data.call(null,inst_15711__$1);
var inst_15714 = new cljs.core.Keyword(null,"error","error",(-978969032)).cljs$core$IFn$_invoke$arity$1(inst_15713);
var inst_15715 = cljs.core._EQ_.call(null,inst_15714,new cljs.core.Keyword(null,"promise-error","promise-error",(-90673560)));
var inst_15716 = ((inst_15712) && (inst_15715));
var state_15755__$1 = (function (){var statearr_15832 = state_15755;
(statearr_15832[(16)] = inst_15711__$1);

return statearr_15832;
})();
if(cljs.core.truth_(inst_15716)){
var statearr_15833_15929 = state_15755__$1;
(statearr_15833_15929[(1)] = (30));

} else {
var statearr_15834_15930 = state_15755__$1;
(statearr_15834_15930[(1)] = (31));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_15756 === (30))){
var inst_15711 = (state_15755[(16)]);
var inst_15718 = (function(){throw inst_15711})();
var state_15755__$1 = state_15755;
var statearr_15835_15931 = state_15755__$1;
(statearr_15835_15931[(2)] = inst_15718);

(statearr_15835_15931[(1)] = (32));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_15756 === (31))){
var inst_15711 = (state_15755[(16)]);
var state_15755__$1 = state_15755;
var statearr_15836_15932 = state_15755__$1;
(statearr_15836_15932[(2)] = inst_15711);

(statearr_15836_15932[(1)] = (32));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
return null;
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
});})(c__19__auto__,___192__auto__))
;
return ((function (switch__14__auto__,c__19__auto__,___192__auto__){
return (function() {
var e2e$proposals$state_machine__15__auto__ = null;
var e2e$proposals$state_machine__15__auto____0 = (function (){
var statearr_15837 = [null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];
(statearr_15837[(0)] = e2e$proposals$state_machine__15__auto__);

(statearr_15837[(1)] = (1));

return statearr_15837;
});
var e2e$proposals$state_machine__15__auto____1 = (function (state_15755){
while(true){
var ret_value__16__auto__ = (function (){try{while(true){
var result__17__auto__ = switch__14__auto__.call(null,state_15755);
if(cljs.core.keyword_identical_QMARK_.call(null,result__17__auto__,new cljs.core.Keyword(null,"recur","recur",(-437573268)))){
continue;
} else {
return result__17__auto__;
}
break;
}
}catch (e15838){var ex__18__auto__ = e15838;
var statearr_15839_15933 = state_15755;
(statearr_15839_15933[(2)] = ex__18__auto__);


if(cljs.core.seq.call(null,(state_15755[(4)]))){
var statearr_15840_15934 = state_15755;
(statearr_15840_15934[(1)] = cljs.core.first.call(null,(state_15755[(4)])));

} else {
throw ex__18__auto__;
}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
}})();
if(cljs.core.keyword_identical_QMARK_.call(null,ret_value__16__auto__,new cljs.core.Keyword(null,"recur","recur",(-437573268)))){
var G__15935 = state_15755;
state_15755 = G__15935;
continue;
} else {
return ret_value__16__auto__;
}
break;
}
});
e2e$proposals$state_machine__15__auto__ = function(state_15755){
switch(arguments.length){
case 0:
return e2e$proposals$state_machine__15__auto____0.call(this);
case 1:
return e2e$proposals$state_machine__15__auto____1.call(this,state_15755);
}
throw(new Error('Invalid arity: ' + arguments.length));
};
e2e$proposals$state_machine__15__auto__.cljs$core$IFn$_invoke$arity$0 = e2e$proposals$state_machine__15__auto____0;
e2e$proposals$state_machine__15__auto__.cljs$core$IFn$_invoke$arity$1 = e2e$proposals$state_machine__15__auto____1;
return e2e$proposals$state_machine__15__auto__;
})()
;})(switch__14__auto__,c__19__auto__,___192__auto__))
})();
var state__21__auto__ = (function (){var statearr_15841 = f__20__auto__.call(null);
(statearr_15841[(6)] = c__19__auto__);

return statearr_15841;
})();
return cljs.core.async.impl.ioc_helpers.run_state_machine_wrapped.call(null,state__21__auto__);
});})(c__19__auto__,___192__auto__))
);

return c__19__auto__;
});

e2e.proposals.t_e2e$proposals15352.getBasis = (function (){
return new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,"meta15353","meta15353",(1560710785),null)], null);
});

e2e.proposals.t_e2e$proposals15352.cljs$lang$type = true;

e2e.proposals.t_e2e$proposals15352.cljs$lang$ctorStr = "e2e.proposals/t_e2e$proposals15352";

e2e.proposals.t_e2e$proposals15352.cljs$lang$ctorPrWriter = (function (this__9776__auto__,writer__9777__auto__,opt__9778__auto__){
return cljs.core._write.call(null,writer__9777__auto__,"e2e.proposals/t_e2e$proposals15352");
});

/**
 * Positional factory function for e2e.proposals/t_e2e$proposals15352.
 */
e2e.proposals.__GT_t_e2e$proposals15352 = (function e2e$proposals$__GT_t_e2e$proposals15352(meta15353){
return (new e2e.proposals.t_e2e$proposals15352(meta15353));
});

}

return (new e2e.proposals.t_e2e$proposals15352(null));
});

e2e.proposals.update_proposal.cljs$lang$var = new cljs.core.Var(function(){return e2e.proposals.update_proposal;},new cljs.core.Symbol("e2e.proposals","update-proposal","e2e.proposals/update-proposal",(-1251182518),null),cljs.core.PersistentHashMap.fromArrays([new cljs.core.Keyword(null,"ns","ns",(441598760)),new cljs.core.Keyword(null,"name","name",(1843675177)),new cljs.core.Keyword(null,"file","file",(-1269645878)),new cljs.core.Keyword(null,"end-column","end-column",(1425389514)),new cljs.core.Keyword(null,"column","column",(2078222095)),new cljs.core.Keyword(null,"line","line",(212345235)),new cljs.core.Keyword(null,"end-line","end-line",(1837326455)),new cljs.core.Keyword(null,"arglists","arglists",(1661989754)),new cljs.core.Keyword(null,"doc","doc",(1913296891)),new cljs.core.Keyword(null,"test","test",(577538877))],[new cljs.core.Symbol(null,"e2e.proposals","e2e.proposals",(1479174227),null),new cljs.core.Symbol(null,"update-proposal","update-proposal",(-1609555119),null),"e2e/proposals.cljs",(25),(1),(142),(142),cljs.core.List.EMPTY,null,(cljs.core.truth_(e2e.proposals.update_proposal)?e2e.proposals.update_proposal.cljs$lang$test:null)]));
e2e.proposals.cycle_add = (function e2e$proposals$cycle_add(){
return cljs.test.test_var.call(null,e2e.proposals.cycle_add.cljs$lang$var);
});
e2e.proposals.cycle_add.cljs$lang$test = (function (){
if((typeof e2e !== 'undefined') && (typeof e2e.proposals !== 'undefined') && (typeof e2e.proposals.t_e2e$proposals15936 !== 'undefined')){
} else {

/**
* @constructor
 * @implements {cljs.core.IWithMeta}
 * @implements {cljs.core.IMeta}
 * @implements {cljs.test.IAsyncTest}
 * @implements {cljs.core.IFn}
*/
e2e.proposals.t_e2e$proposals15936 = (function (meta15937){
this.meta15937 = meta15937;
this.cljs$lang$protocol_mask$partition0$ = 393217;
this.cljs$lang$protocol_mask$partition1$ = 0;
});
e2e.proposals.t_e2e$proposals15936.prototype.cljs$core$IWithMeta$_with_meta$arity$2 = (function (_15938,meta15937__$1){
var self__ = this;
var _15938__$1 = this;
return (new e2e.proposals.t_e2e$proposals15936(meta15937__$1));
});

e2e.proposals.t_e2e$proposals15936.prototype.cljs$core$IMeta$_meta$arity$1 = (function (_15938){
var self__ = this;
var _15938__$1 = this;
return self__.meta15937;
});

e2e.proposals.t_e2e$proposals15936.prototype.cljs$test$IAsyncTest$ = cljs.core.PROTOCOL_SENTINEL;

e2e.proposals.t_e2e$proposals15936.prototype.call = (function (self__,done){
var self__ = this;
var self____$1 = this;
var ___192__auto__ = self____$1;
var c__19__auto__ = cljs.core.async.chan.call(null,(1));
cljs.core.async.impl.dispatch.run.call(null,((function (c__19__auto__,___192__auto__,self____$1){
return (function (){
var f__20__auto__ = (function (){var switch__14__auto__ = ((function (c__19__auto__,___192__auto__,self____$1){
return (function (state_16570){
var state_val_16571 = (state_16570[(1)]);
if((state_val_16571 === (32))){
var inst_16066 = (state_16570[(2)]);
var state_16570__$1 = (function (){var statearr_16573 = state_16570;
(statearr_16573[(7)] = inst_16066);

return statearr_16573;
})();
var statearr_16574_17836 = state_16570__$1;
(statearr_16574_17836[(2)] = null);

(statearr_16574_17836[(1)] = (33));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (64))){
var state_16570__$1 = state_16570;
var statearr_16575_17837 = state_16570__$1;
(statearr_16575_17837[(2)] = false);

(statearr_16575_17837[(1)] = (65));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (96))){
var inst_16313 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_16314 = true;
var inst_16315 = [new cljs.core.Keyword(null,"fail","fail",(1706214930)),"can progress cycle",inst_16314,true];
var inst_16316 = cljs.core.PersistentHashMap.fromArrays(inst_16313,inst_16315);
var inst_16317 = cljs.test.do_report.call(null,inst_16316);
var state_16570__$1 = state_16570;
var statearr_16576_17838 = state_16570__$1;
(statearr_16576_17838[(2)] = inst_16317);

(statearr_16576_17838[(1)] = (97));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (128))){
var _ = (function (){var statearr_16577 = state_16570;
(statearr_16577[(4)] = cljs.core.rest.call(null,(state_16570[(4)])));

return statearr_16577;
})();
var state_16570__$1 = state_16570;
var ex16572 = (state_16570__$1[(2)]);
var statearr_16578_17839 = state_16570__$1;
(statearr_16578_17839[(5)] = ex16572);


var statearr_16579_17840 = state_16570__$1;
(statearr_16579_17840[(1)] = (127));

(statearr_16579_17840[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (160))){
var inst_16544 = (state_16570[(8)]);
var inst_16564 = (state_16570[(2)]);
var _ = (function (){var statearr_16580 = state_16570;
(statearr_16580[(4)] = cljs.core.rest.call(null,(state_16570[(4)])));

return statearr_16580;
})();
var state_16570__$1 = (function (){var statearr_16581 = state_16570;
(statearr_16581[(9)] = inst_16564);

return statearr_16581;
})();
var statearr_16582_17841 = state_16570__$1;
(statearr_16582_17841[(2)] = inst_16544);

(statearr_16582_17841[(1)] = (155));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (1))){
var state_16570__$1 = state_16570;
var statearr_16583_17842 = state_16570__$1;
(statearr_16583_17842[(2)] = null);

(statearr_16583_17842[(1)] = (2));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (33))){
var _ = (function (){var statearr_16584 = state_16570;
(statearr_16584[(4)] = cljs.core.cons.call(null,(36),(state_16570[(4)])));

return statearr_16584;
})();
var state_16570__$1 = state_16570;
var statearr_16585_17843 = state_16570__$1;
(statearr_16585_17843[(1)] = (37));



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (65))){
var inst_16211 = (state_16570[(2)]);
var state_16570__$1 = state_16570;
if(cljs.core.truth_(inst_16211)){
var statearr_16588_17844 = state_16570__$1;
(statearr_16588_17844[(1)] = (69));

} else {
var statearr_16589_17845 = state_16570__$1;
(statearr_16589_17845[(1)] = (70));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (97))){
var inst_16319 = (state_16570[(2)]);
var _ = (function (){var statearr_16590 = state_16570;
(statearr_16590[(4)] = cljs.core.rest.call(null,(state_16570[(4)])));

return statearr_16590;
})();
var state_16570__$1 = (function (){var statearr_16591 = state_16570;
(statearr_16591[(10)] = inst_16319);

return statearr_16591;
})();
var statearr_16592_17846 = state_16570__$1;
(statearr_16592_17846[(2)] = true);

(statearr_16592_17846[(1)] = (92));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (129))){
var _ = (function (){var statearr_16593 = state_16570;
(statearr_16593[(4)] = cljs.core.rest.call(null,(state_16570[(4)])));

return statearr_16593;
})();
var state_16570__$1 = state_16570;
var ex16587 = (state_16570__$1[(2)]);
var statearr_16594_17847 = state_16570__$1;
(statearr_16594_17847[(5)] = ex16587);


if((ex16587 instanceof Error)){
var statearr_16595_17848 = state_16570__$1;
(statearr_16595_17848[(1)] = (124));

(statearr_16595_17848[(5)] = null);

} else {
throw ex16587;

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (2))){
var _ = (function (){var statearr_16596 = state_16570;
(statearr_16596[(4)] = cljs.core.cons.call(null,(9),(state_16570[(4)])));

return statearr_16596;
})();
var inst_15965 = [new cljs.core.Keyword(null,"start_time","start_time",(889556682)),new cljs.core.Keyword(null,"budget","budget",(-405386281))];
var inst_15966 = cljs.core.PersistentVector.EMPTY_NODE;
var inst_15967 = [new cljs.core.Keyword(null,"quantity","quantity",(-1929050694)),new cljs.core.Keyword(null,"contract","contract",(798152745))];
var inst_15968 = ["326000.0000 EFX",e2e.proposals.token_acc];
var inst_15969 = cljs.core.PersistentHashMap.fromArrays(inst_15967,inst_15968);
var inst_15970 = [inst_15969];
var inst_15971 = (new cljs.core.PersistentVector(null,(1),(5),inst_15966,inst_15970,null));
var inst_15972 = ["2021-01-01 12:00:00",inst_15971];
var inst_15973 = cljs.core.PersistentHashMap.fromArrays(inst_15965,inst_15972);
var inst_15974 = eos_cljs.core.transact.call(null,e2e.proposals.prop_acc,"addcycle",inst_15973);
var inst_15975 = cljs.core.async.interop.p__GT_c.call(null,inst_15974);
var state_16570__$1 = state_16570;
return cljs.core.async.impl.ioc_helpers.take_BANG_.call(null,state_16570__$1,(10),inst_15975);
} else {
if((state_val_16571 === (34))){
var inst_16094 = (state_16570[(2)]);
var _ = (function (){var statearr_16597 = state_16570;
(statearr_16597[(4)] = cljs.core.rest.call(null,(state_16570[(4)])));

return statearr_16597;
})();
var state_16570__$1 = state_16570;
var statearr_16598_17849 = state_16570__$1;
(statearr_16598_17849[(2)] = inst_16094);

(statearr_16598_17849[(1)] = (22));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (66))){
var state_16570__$1 = state_16570;
var statearr_16599_17850 = state_16570__$1;
(statearr_16599_17850[(2)] = true);

(statearr_16599_17850[(1)] = (68));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (98))){
var inst_16333 = (state_16570[(11)]);
var inst_16333__$1 = (state_16570[(2)]);
var inst_16334 = (inst_16333__$1 instanceof cljs.core.ExceptionInfo);
var inst_16335 = cljs.core.ex_data.call(null,inst_16333__$1);
var inst_16336 = new cljs.core.Keyword(null,"error","error",(-978969032)).cljs$core$IFn$_invoke$arity$1(inst_16335);
var inst_16337 = cljs.core._EQ_.call(null,inst_16336,new cljs.core.Keyword(null,"promise-error","promise-error",(-90673560)));
var inst_16338 = ((inst_16334) && (inst_16337));
var state_16570__$1 = (function (){var statearr_16600 = state_16570;
(statearr_16600[(11)] = inst_16333__$1);

return statearr_16600;
})();
if(cljs.core.truth_(inst_16338)){
var statearr_16601_17851 = state_16570__$1;
(statearr_16601_17851[(1)] = (99));

} else {
var statearr_16602_17852 = state_16570__$1;
(statearr_16602_17852[(1)] = (100));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (130))){
var inst_16448 = (state_16570[(12)]);
var inst_16448__$1 = (state_16570[(2)]);
var inst_16449 = (inst_16448__$1 instanceof cljs.core.ExceptionInfo);
var inst_16450 = cljs.core.ex_data.call(null,inst_16448__$1);
var inst_16451 = new cljs.core.Keyword(null,"error","error",(-978969032)).cljs$core$IFn$_invoke$arity$1(inst_16450);
var inst_16452 = cljs.core._EQ_.call(null,inst_16451,new cljs.core.Keyword(null,"promise-error","promise-error",(-90673560)));
var inst_16453 = ((inst_16449) && (inst_16452));
var state_16570__$1 = (function (){var statearr_16603 = state_16570;
(statearr_16603[(12)] = inst_16448__$1);

return statearr_16603;
})();
if(cljs.core.truth_(inst_16453)){
var statearr_16604_17853 = state_16570__$1;
(statearr_16604_17853[(1)] = (131));

} else {
var statearr_16605_17854 = state_16570__$1;
(statearr_16605_17854[(1)] = (132));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (3))){
var inst_16018 = (state_16570[(2)]);
var state_16570__$1 = (function (){var statearr_16606 = state_16570;
(statearr_16606[(13)] = inst_16018);

return statearr_16606;
})();
var statearr_16607_17855 = state_16570__$1;
(statearr_16607_17855[(2)] = null);

(statearr_16607_17855[(1)] = (21));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (35))){
var inst_16067 = (state_16570[(2)]);
var inst_16068 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_16069 = true;
var inst_16070 = [new cljs.core.Keyword(null,"error","error",(-978969032)),null,inst_16069,inst_16067];
var inst_16071 = cljs.core.PersistentHashMap.fromArrays(inst_16068,inst_16070);
var inst_16072 = cljs.test.do_report.call(null,inst_16071);
var state_16570__$1 = state_16570;
var statearr_16608_17856 = state_16570__$1;
(statearr_16608_17856[(2)] = inst_16072);

(statearr_16608_17856[(1)] = (34));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (67))){
var state_16570__$1 = state_16570;
var statearr_16609_17857 = state_16570__$1;
(statearr_16609_17857[(2)] = false);

(statearr_16609_17857[(1)] = (68));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (99))){
var inst_16333 = (state_16570[(11)]);
var inst_16340 = (function(){throw inst_16333})();
var state_16570__$1 = state_16570;
var statearr_16610_17858 = state_16570__$1;
(statearr_16610_17858[(2)] = inst_16340);

(statearr_16610_17858[(1)] = (101));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (131))){
var inst_16448 = (state_16570[(12)]);
var inst_16455 = (function(){throw inst_16448})();
var state_16570__$1 = state_16570;
var statearr_16612_17859 = state_16570__$1;
(statearr_16612_17859[(2)] = inst_16455);

(statearr_16612_17859[(1)] = (133));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (4))){
var inst_15940 = (state_16570[(2)]);
var inst_15941 = cljs.core.prn.call(null,"test failed with ",inst_15940);
var state_16570__$1 = (function (){var statearr_16613 = state_16570;
(statearr_16613[(14)] = inst_15941);

return statearr_16613;
})();
var statearr_16614_17860 = state_16570__$1;
(statearr_16614_17860[(2)] = null);

(statearr_16614_17860[(1)] = (5));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (36))){
var _ = (function (){var statearr_16615 = state_16570;
(statearr_16615[(4)] = cljs.core.rest.call(null,(state_16570[(4)])));

return statearr_16615;
})();
var state_16570__$1 = state_16570;
var ex16611 = (state_16570__$1[(2)]);
var statearr_16616_17861 = state_16570__$1;
(statearr_16616_17861[(5)] = ex16611);


var statearr_16617_17862 = state_16570__$1;
(statearr_16617_17862[(1)] = (35));

(statearr_16617_17862[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (68))){
var inst_16208 = (state_16570[(2)]);
var state_16570__$1 = state_16570;
var statearr_16618_17863 = state_16570__$1;
(statearr_16618_17863[(2)] = inst_16208);

(statearr_16618_17863[(1)] = (65));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (100))){
var inst_16333 = (state_16570[(11)]);
var state_16570__$1 = state_16570;
var statearr_16619_17864 = state_16570__$1;
(statearr_16619_17864[(2)] = inst_16333);

(statearr_16619_17864[(1)] = (101));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (132))){
var inst_16448 = (state_16570[(12)]);
var state_16570__$1 = state_16570;
var statearr_16620_17865 = state_16570__$1;
(statearr_16620_17865[(2)] = inst_16448);

(statearr_16620_17865[(1)] = (133));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (5))){
var _ = (function (){var statearr_16621 = state_16570;
(statearr_16621[(4)] = cljs.core.cons.call(null,(8),(state_16570[(4)])));

return statearr_16621;
})();
var inst_15953 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002))];
var inst_15954 = [new cljs.core.Keyword(null,"fail","fail",(1706214930)),null];
var inst_15955 = cljs.core.PersistentHashMap.fromArrays(inst_15953,inst_15954);
var inst_15956 = cljs.test.do_report.call(null,inst_15955);
var ___$1 = (function (){var statearr_16622 = state_16570;
(statearr_16622[(4)] = cljs.core.rest.call(null,(state_16570[(4)])));

return statearr_16622;
})();
var state_16570__$1 = state_16570;
var statearr_16623_17866 = state_16570__$1;
(statearr_16623_17866[(2)] = inst_15956);

(statearr_16623_17866[(1)] = (6));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (37))){
var inst_16079 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_16080 = true;
var inst_16081 = [new cljs.core.Keyword(null,"pass","pass",(1574159993)),null,inst_16080,true];
var inst_16082 = cljs.core.PersistentHashMap.fromArrays(inst_16079,inst_16081);
var inst_16083 = cljs.test.do_report.call(null,inst_16082);
var state_16570__$1 = state_16570;
var statearr_16624_17867 = state_16570__$1;
(statearr_16624_17867[(2)] = inst_16083);

(statearr_16624_17867[(1)] = (39));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (69))){
var inst_16195 = (state_16570[(15)]);
var inst_16213 = cljs.core.apply.call(null,cljs.core.hash_map,inst_16195);
var state_16570__$1 = state_16570;
var statearr_16625_17868 = state_16570__$1;
(statearr_16625_17868[(2)] = inst_16213);

(statearr_16625_17868[(1)] = (71));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (101))){
var inst_16344 = (state_16570[(16)]);
var inst_16343 = (state_16570[(2)]);
var inst_16344__$1 = cljs.core.nth.call(null,inst_16343,(0),null);
var inst_16346 = (inst_16344__$1 == null);
var inst_16347 = cljs.core.not.call(null,inst_16346);
var state_16570__$1 = (function (){var statearr_16626 = state_16570;
(statearr_16626[(16)] = inst_16344__$1);

return statearr_16626;
})();
if(inst_16347){
var statearr_16627_17869 = state_16570__$1;
(statearr_16627_17869[(1)] = (102));

} else {
var statearr_16628_17870 = state_16570__$1;
(statearr_16628_17870[(1)] = (103));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (133))){
var inst_16458 = (state_16570[(2)]);
var state_16570__$1 = (function (){var statearr_16629 = state_16570;
(statearr_16629[(17)] = inst_16458);

return statearr_16629;
})();
var statearr_16630_17871 = state_16570__$1;
(statearr_16630_17871[(2)] = null);

(statearr_16630_17871[(1)] = (134));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (6))){
var inst_15959 = (state_16570[(2)]);
var state_16570__$1 = state_16570;
var statearr_16631_17872 = state_16570__$1;
(statearr_16631_17872[(2)] = inst_15959);

(statearr_16631_17872[(1)] = (3));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (38))){
var inst_16085 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_16086 = true;
var inst_16087 = [new cljs.core.Keyword(null,"fail","fail",(1706214930)),null,inst_16086,true];
var inst_16088 = cljs.core.PersistentHashMap.fromArrays(inst_16085,inst_16087);
var inst_16089 = cljs.test.do_report.call(null,inst_16088);
var state_16570__$1 = state_16570;
var statearr_16632_17873 = state_16570__$1;
(statearr_16632_17873[(2)] = inst_16089);

(statearr_16632_17873[(1)] = (39));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (70))){
var inst_16195 = (state_16570[(15)]);
var state_16570__$1 = state_16570;
var statearr_16633_17874 = state_16570__$1;
(statearr_16633_17874[(2)] = inst_16195);

(statearr_16633_17874[(1)] = (71));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (102))){
var inst_16344 = (state_16570[(16)]);
var inst_16349 = inst_16344.cljs$lang$protocol_mask$partition0$;
var inst_16350 = (inst_16349 & (64));
var inst_16351 = inst_16344.cljs$core$ISeq$;
var inst_16352 = (cljs.core.PROTOCOL_SENTINEL === inst_16351);
var inst_16353 = ((inst_16350) || (inst_16352));
var state_16570__$1 = state_16570;
if(cljs.core.truth_(inst_16353)){
var statearr_16634_17875 = state_16570__$1;
(statearr_16634_17875[(1)] = (105));

} else {
var statearr_16635_17876 = state_16570__$1;
(statearr_16635_17876[(1)] = (106));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (134))){
var _ = (function (){var statearr_16636 = state_16570;
(statearr_16636[(4)] = cljs.core.cons.call(null,(137),(state_16570[(4)])));

return statearr_16636;
})();
var state_16570__$1 = state_16570;
var statearr_16637_17877 = state_16570__$1;
(statearr_16637_17877[(1)] = (138));



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (7))){
var inst_15942 = (state_16570[(2)]);
var inst_15943 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_15944 = null;
var inst_15945 = [new cljs.core.Keyword(null,"error","error",(-978969032)),null,inst_15944,inst_15942];
var inst_15946 = cljs.core.PersistentHashMap.fromArrays(inst_15943,inst_15945);
var inst_15947 = cljs.test.do_report.call(null,inst_15946);
var state_16570__$1 = state_16570;
var statearr_16639_17878 = state_16570__$1;
(statearr_16639_17878[(2)] = inst_15947);

(statearr_16639_17878[(1)] = (6));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (39))){
var inst_16091 = (state_16570[(2)]);
var _ = (function (){var statearr_16640 = state_16570;
(statearr_16640[(4)] = cljs.core.rest.call(null,(state_16570[(4)])));

return statearr_16640;
})();
var state_16570__$1 = (function (){var statearr_16641 = state_16570;
(statearr_16641[(18)] = inst_16091);

return statearr_16641;
})();
var statearr_16642_17879 = state_16570__$1;
(statearr_16642_17879[(2)] = true);

(statearr_16642_17879[(1)] = (34));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (71))){
var inst_16216 = (state_16570[(2)]);
var inst_16217 = cljs.core.get.call(null,inst_16216,"current_cycle");
var state_16570__$1 = (function (){var statearr_16643 = state_16570;
(statearr_16643[(19)] = inst_16217);

return statearr_16643;
})();
var statearr_16644_17880 = state_16570__$1;
(statearr_16644_17880[(2)] = null);

(statearr_16644_17880[(1)] = (72));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (103))){
var state_16570__$1 = state_16570;
var statearr_16646_17881 = state_16570__$1;
(statearr_16646_17881[(2)] = false);

(statearr_16646_17881[(1)] = (104));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (135))){
var inst_16486 = (state_16570[(2)]);
var _ = (function (){var statearr_16647 = state_16570;
(statearr_16647[(4)] = cljs.core.rest.call(null,(state_16570[(4)])));

return statearr_16647;
})();
var state_16570__$1 = state_16570;
var statearr_16648_17882 = state_16570__$1;
(statearr_16648_17882[(2)] = inst_16486);

(statearr_16648_17882[(1)] = (123));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (8))){
var _ = (function (){var statearr_16649 = state_16570;
(statearr_16649[(4)] = cljs.core.rest.call(null,(state_16570[(4)])));

return statearr_16649;
})();
var state_16570__$1 = state_16570;
var ex16645 = (state_16570__$1[(2)]);
var statearr_16650_17883 = state_16570__$1;
(statearr_16650_17883[(5)] = ex16645);


var statearr_16651_17884 = state_16570__$1;
(statearr_16651_17884[(1)] = (7));

(statearr_16651_17884[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (40))){
var _ = (function (){var statearr_16652 = state_16570;
(statearr_16652[(4)] = cljs.core.cons.call(null,(47),(state_16570[(4)])));

return statearr_16652;
})();
var inst_16123 = [new cljs.core.Keyword(null,"start_time","start_time",(889556682)),new cljs.core.Keyword(null,"budget","budget",(-405386281))];
var inst_16124 = cljs.core.PersistentVector.EMPTY_NODE;
var inst_16125 = [new cljs.core.Keyword(null,"quantity","quantity",(-1929050694)),new cljs.core.Keyword(null,"contract","contract",(798152745))];
var inst_16126 = ["326000.2000 EFX",e2e.proposals.token_acc];
var inst_16127 = cljs.core.PersistentHashMap.fromArrays(inst_16125,inst_16126);
var inst_16128 = [inst_16127];
var inst_16129 = (new cljs.core.PersistentVector(null,(1),(5),inst_16124,inst_16128,null));
var inst_16130 = ["2021-01-01 12:00:00",inst_16129];
var inst_16131 = cljs.core.PersistentHashMap.fromArrays(inst_16123,inst_16130);
var inst_16132 = eos_cljs.core.transact.call(null,e2e.proposals.prop_acc,"addcycle",inst_16131);
var inst_16133 = cljs.core.async.interop.p__GT_c.call(null,inst_16132);
var state_16570__$1 = state_16570;
return cljs.core.async.impl.ioc_helpers.take_BANG_.call(null,state_16570__$1,(48),inst_16133);
} else {
if((state_val_16571 === (72))){
var inst_16217 = (state_16570[(19)]);
var inst_16230 = (state_16570[(20)]);
var inst_16231 = (state_16570[(21)]);
var _ = (function (){var statearr_16653 = state_16570;
(statearr_16653[(4)] = cljs.core.cons.call(null,(75),(state_16570[(4)])));

return statearr_16653;
})();
var inst_16229 = (new cljs.core.List(null,(0),null,(1),null));
var inst_16230__$1 = (new cljs.core.List(null,inst_16217,inst_16229,(2),null));
var inst_16231__$1 = cljs.core.apply.call(null,cljs.core._EQ_,inst_16230__$1);
var state_16570__$1 = (function (){var statearr_16654 = state_16570;
(statearr_16654[(20)] = inst_16230__$1);

(statearr_16654[(21)] = inst_16231__$1);

return statearr_16654;
})();
if(cljs.core.truth_(inst_16231__$1)){
var statearr_16655_17885 = state_16570__$1;
(statearr_16655_17885[(1)] = (76));

} else {
var statearr_16656_17886 = state_16570__$1;
(statearr_16656_17886[(1)] = (77));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (104))){
var inst_16360 = (state_16570[(2)]);
var state_16570__$1 = state_16570;
if(cljs.core.truth_(inst_16360)){
var statearr_16658_17887 = state_16570__$1;
(statearr_16658_17887[(1)] = (108));

} else {
var statearr_16659_17888 = state_16570__$1;
(statearr_16659_17888[(1)] = (109));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (136))){
var inst_16459 = (state_16570[(2)]);
var inst_16460 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_16461 = true;
var inst_16462 = [new cljs.core.Keyword(null,"error","error",(-978969032)),"can progress cycle",inst_16461,inst_16459];
var inst_16463 = cljs.core.PersistentHashMap.fromArrays(inst_16460,inst_16462);
var inst_16464 = cljs.test.do_report.call(null,inst_16463);
var state_16570__$1 = state_16570;
var statearr_16660_17889 = state_16570__$1;
(statearr_16660_17889[(2)] = inst_16464);

(statearr_16660_17889[(1)] = (135));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (9))){
var _ = (function (){var statearr_16661 = state_16570;
(statearr_16661[(4)] = cljs.core.rest.call(null,(state_16570[(4)])));

return statearr_16661;
})();
var state_16570__$1 = state_16570;
var ex16657 = (state_16570__$1[(2)]);
var statearr_16662_17890 = state_16570__$1;
(statearr_16662_17890[(5)] = ex16657);


if((ex16657 instanceof Error)){
var statearr_16663_17891 = state_16570__$1;
(statearr_16663_17891[(1)] = (4));

(statearr_16663_17891[(5)] = null);

} else {
throw ex16657;

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (41))){
var inst_16176 = (state_16570[(2)]);
var inst_16181 = eos_cljs.core.get_table_rows.call(null,e2e.proposals.prop_acc,e2e.proposals.prop_acc,"config");
var inst_16182 = cljs.core.async.interop.p__GT_c.call(null,inst_16181);
var state_16570__$1 = (function (){var statearr_16664 = state_16570;
(statearr_16664[(22)] = inst_16176);

return statearr_16664;
})();
return cljs.core.async.impl.ioc_helpers.take_BANG_.call(null,state_16570__$1,(59),inst_16182);
} else {
if((state_val_16571 === (73))){
var inst_16254 = (state_16570[(2)]);
var state_16570__$1 = (function (){var statearr_16666 = state_16570;
(statearr_16666[(23)] = inst_16254);

return statearr_16666;
})();
var statearr_16667_17892 = state_16570__$1;
(statearr_16667_17892[(2)] = null);

(statearr_16667_17892[(1)] = (79));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (105))){
var state_16570__$1 = state_16570;
var statearr_16668_17893 = state_16570__$1;
(statearr_16668_17893[(2)] = true);

(statearr_16668_17893[(1)] = (107));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (137))){
var _ = (function (){var statearr_16669 = state_16570;
(statearr_16669[(4)] = cljs.core.rest.call(null,(state_16570[(4)])));

return statearr_16669;
})();
var state_16570__$1 = state_16570;
var ex16665 = (state_16570__$1[(2)]);
var statearr_16670_17894 = state_16570__$1;
(statearr_16670_17894[(5)] = ex16665);


var statearr_16671_17895 = state_16570__$1;
(statearr_16671_17895[(1)] = (136));

(statearr_16671_17895[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (10))){
var inst_15977 = (state_16570[(24)]);
var inst_15977__$1 = (state_16570[(2)]);
var inst_15978 = (inst_15977__$1 instanceof cljs.core.ExceptionInfo);
var inst_15979 = cljs.core.ex_data.call(null,inst_15977__$1);
var inst_15980 = new cljs.core.Keyword(null,"error","error",(-978969032)).cljs$core$IFn$_invoke$arity$1(inst_15979);
var inst_15981 = cljs.core._EQ_.call(null,inst_15980,new cljs.core.Keyword(null,"promise-error","promise-error",(-90673560)));
var inst_15982 = ((inst_15978) && (inst_15981));
var state_16570__$1 = (function (){var statearr_16672 = state_16570;
(statearr_16672[(24)] = inst_15977__$1);

return statearr_16672;
})();
if(cljs.core.truth_(inst_15982)){
var statearr_16673_17896 = state_16570__$1;
(statearr_16673_17896[(1)] = (11));

} else {
var statearr_16674_17897 = state_16570__$1;
(statearr_16674_17897[(1)] = (12));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (42))){
var inst_16098 = (state_16570[(2)]);
var inst_16099 = cljs.core.prn.call(null,"test failed with ",inst_16098);
var state_16570__$1 = (function (){var statearr_16675 = state_16570;
(statearr_16675[(25)] = inst_16099);

return statearr_16675;
})();
var statearr_16676_17898 = state_16570__$1;
(statearr_16676_17898[(2)] = null);

(statearr_16676_17898[(1)] = (43));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (74))){
var inst_16218 = (state_16570[(2)]);
var inst_16219 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_16220 = cljs.core.list(new cljs.core.Symbol(null,"=","=",(-1501502141),null),new cljs.core.Symbol(null,"cycle","cycle",(-1944070485),null),(0));
var inst_16221 = [new cljs.core.Keyword(null,"error","error",(-978969032)),null,inst_16220,inst_16218];
var inst_16222 = cljs.core.PersistentHashMap.fromArrays(inst_16219,inst_16221);
var inst_16223 = cljs.test.do_report.call(null,inst_16222);
var state_16570__$1 = state_16570;
var statearr_16677_17899 = state_16570__$1;
(statearr_16677_17899[(2)] = inst_16223);

(statearr_16677_17899[(1)] = (73));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (106))){
var state_16570__$1 = state_16570;
var statearr_16678_17900 = state_16570__$1;
(statearr_16678_17900[(2)] = false);

(statearr_16678_17900[(1)] = (107));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (138))){
var inst_16471 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_16472 = true;
var inst_16473 = [new cljs.core.Keyword(null,"pass","pass",(1574159993)),"can progress cycle",inst_16472,true];
var inst_16474 = cljs.core.PersistentHashMap.fromArrays(inst_16471,inst_16473);
var inst_16475 = cljs.test.do_report.call(null,inst_16474);
var state_16570__$1 = state_16570;
var statearr_16679_17901 = state_16570__$1;
(statearr_16679_17901[(2)] = inst_16475);

(statearr_16679_17901[(1)] = (140));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (11))){
var inst_15977 = (state_16570[(24)]);
var inst_15984 = (function(){throw inst_15977})();
var state_16570__$1 = state_16570;
var statearr_16681_17902 = state_16570__$1;
(statearr_16681_17902[(2)] = inst_15984);

(statearr_16681_17902[(1)] = (13));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (43))){
var _ = (function (){var statearr_16682 = state_16570;
(statearr_16682[(4)] = cljs.core.cons.call(null,(46),(state_16570[(4)])));

return statearr_16682;
})();
var inst_16111 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002))];
var inst_16112 = [new cljs.core.Keyword(null,"fail","fail",(1706214930)),null];
var inst_16113 = cljs.core.PersistentHashMap.fromArrays(inst_16111,inst_16112);
var inst_16114 = cljs.test.do_report.call(null,inst_16113);
var ___$1 = (function (){var statearr_16683 = state_16570;
(statearr_16683[(4)] = cljs.core.rest.call(null,(state_16570[(4)])));

return statearr_16683;
})();
var state_16570__$1 = state_16570;
var statearr_16684_17903 = state_16570__$1;
(statearr_16684_17903[(2)] = inst_16114);

(statearr_16684_17903[(1)] = (44));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (75))){
var _ = (function (){var statearr_16685 = state_16570;
(statearr_16685[(4)] = cljs.core.rest.call(null,(state_16570[(4)])));

return statearr_16685;
})();
var state_16570__$1 = state_16570;
var ex16680 = (state_16570__$1[(2)]);
var statearr_16686_17904 = state_16570__$1;
(statearr_16686_17904[(5)] = ex16680);


var statearr_16687_17905 = state_16570__$1;
(statearr_16687_17905[(1)] = (74));

(statearr_16687_17905[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (107))){
var inst_16357 = (state_16570[(2)]);
var state_16570__$1 = state_16570;
var statearr_16688_17906 = state_16570__$1;
(statearr_16688_17906[(2)] = inst_16357);

(statearr_16688_17906[(1)] = (104));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (139))){
var inst_16477 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_16478 = true;
var inst_16479 = [new cljs.core.Keyword(null,"fail","fail",(1706214930)),"can progress cycle",inst_16478,true];
var inst_16480 = cljs.core.PersistentHashMap.fromArrays(inst_16477,inst_16479);
var inst_16481 = cljs.test.do_report.call(null,inst_16480);
var state_16570__$1 = state_16570;
var statearr_16689_17907 = state_16570__$1;
(statearr_16689_17907[(2)] = inst_16481);

(statearr_16689_17907[(1)] = (140));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (12))){
var inst_15977 = (state_16570[(24)]);
var state_16570__$1 = state_16570;
var statearr_16690_17908 = state_16570__$1;
(statearr_16690_17908[(2)] = inst_15977);

(statearr_16690_17908[(1)] = (13));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (44))){
var inst_16117 = (state_16570[(2)]);
var state_16570__$1 = state_16570;
var statearr_16691_17909 = state_16570__$1;
(statearr_16691_17909[(2)] = inst_16117);

(statearr_16691_17909[(1)] = (41));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (76))){
var inst_16230 = (state_16570[(20)]);
var inst_16233 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_16234 = cljs.core.list(new cljs.core.Symbol(null,"=","=",(-1501502141),null),new cljs.core.Symbol(null,"cycle","cycle",(-1944070485),null),(0));
var inst_16235 = cljs.core.cons.call(null,cljs.core._EQ_,inst_16230);
var inst_16236 = [new cljs.core.Keyword(null,"pass","pass",(1574159993)),null,inst_16234,inst_16235];
var inst_16237 = cljs.core.PersistentHashMap.fromArrays(inst_16233,inst_16236);
var inst_16238 = cljs.test.do_report.call(null,inst_16237);
var state_16570__$1 = state_16570;
var statearr_16692_17910 = state_16570__$1;
(statearr_16692_17910[(2)] = inst_16238);

(statearr_16692_17910[(1)] = (78));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (108))){
var inst_16344 = (state_16570[(16)]);
var inst_16362 = cljs.core.apply.call(null,cljs.core.hash_map,inst_16344);
var state_16570__$1 = state_16570;
var statearr_16693_17911 = state_16570__$1;
(statearr_16693_17911[(2)] = inst_16362);

(statearr_16693_17911[(1)] = (110));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (140))){
var inst_16483 = (state_16570[(2)]);
var _ = (function (){var statearr_16694 = state_16570;
(statearr_16694[(4)] = cljs.core.rest.call(null,(state_16570[(4)])));

return statearr_16694;
})();
var state_16570__$1 = (function (){var statearr_16695 = state_16570;
(statearr_16695[(26)] = inst_16483);

return statearr_16695;
})();
var statearr_16696_17912 = state_16570__$1;
(statearr_16696_17912[(2)] = true);

(statearr_16696_17912[(1)] = (135));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (13))){
var inst_15987 = (state_16570[(2)]);
var state_16570__$1 = (function (){var statearr_16697 = state_16570;
(statearr_16697[(27)] = inst_15987);

return statearr_16697;
})();
var statearr_16698_17913 = state_16570__$1;
(statearr_16698_17913[(2)] = null);

(statearr_16698_17913[(1)] = (14));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (45))){
var inst_16100 = (state_16570[(2)]);
var inst_16101 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_16102 = null;
var inst_16103 = [new cljs.core.Keyword(null,"error","error",(-978969032)),null,inst_16102,inst_16100];
var inst_16104 = cljs.core.PersistentHashMap.fromArrays(inst_16101,inst_16103);
var inst_16105 = cljs.test.do_report.call(null,inst_16104);
var state_16570__$1 = state_16570;
var statearr_16699_17914 = state_16570__$1;
(statearr_16699_17914[(2)] = inst_16105);

(statearr_16699_17914[(1)] = (44));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (77))){
var inst_16230 = (state_16570[(20)]);
var inst_16240 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_16241 = cljs.core.list(new cljs.core.Symbol(null,"=","=",(-1501502141),null),new cljs.core.Symbol(null,"cycle","cycle",(-1944070485),null),(0));
var inst_16242 = new cljs.core.Symbol(null,"not","not",(1044554643),null);
var inst_16243 = new cljs.core.Symbol(null,"=","=",(-1501502141),null);
var inst_16244 = cljs.core.cons.call(null,inst_16243,inst_16230);
var inst_16245 = (new cljs.core.List(null,inst_16244,null,(1),null));
var inst_16246 = (new cljs.core.List(null,inst_16242,inst_16245,(2),null));
var inst_16247 = [new cljs.core.Keyword(null,"fail","fail",(1706214930)),null,inst_16241,inst_16246];
var inst_16248 = cljs.core.PersistentHashMap.fromArrays(inst_16240,inst_16247);
var inst_16249 = cljs.test.do_report.call(null,inst_16248);
var state_16570__$1 = state_16570;
var statearr_16700_17915 = state_16570__$1;
(statearr_16700_17915[(2)] = inst_16249);

(statearr_16700_17915[(1)] = (78));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (109))){
var inst_16344 = (state_16570[(16)]);
var state_16570__$1 = state_16570;
var statearr_16701_17916 = state_16570__$1;
(statearr_16701_17916[(2)] = inst_16344);

(statearr_16701_17916[(1)] = (110));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (141))){
var inst_16497 = (state_16570[(28)]);
var inst_16497__$1 = (state_16570[(2)]);
var inst_16498 = (inst_16497__$1 instanceof cljs.core.ExceptionInfo);
var inst_16499 = cljs.core.ex_data.call(null,inst_16497__$1);
var inst_16500 = new cljs.core.Keyword(null,"error","error",(-978969032)).cljs$core$IFn$_invoke$arity$1(inst_16499);
var inst_16501 = cljs.core._EQ_.call(null,inst_16500,new cljs.core.Keyword(null,"promise-error","promise-error",(-90673560)));
var inst_16502 = ((inst_16498) && (inst_16501));
var state_16570__$1 = (function (){var statearr_16703 = state_16570;
(statearr_16703[(28)] = inst_16497__$1);

return statearr_16703;
})();
if(cljs.core.truth_(inst_16502)){
var statearr_16704_17917 = state_16570__$1;
(statearr_16704_17917[(1)] = (142));

} else {
var statearr_16705_17918 = state_16570__$1;
(statearr_16705_17918[(1)] = (143));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (14))){
var _ = (function (){var statearr_16706 = state_16570;
(statearr_16706[(4)] = cljs.core.cons.call(null,(17),(state_16570[(4)])));

return statearr_16706;
})();
var state_16570__$1 = state_16570;
var statearr_16707_17919 = state_16570__$1;
(statearr_16707_17919[(1)] = (18));



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (46))){
var _ = (function (){var statearr_16709 = state_16570;
(statearr_16709[(4)] = cljs.core.rest.call(null,(state_16570[(4)])));

return statearr_16709;
})();
var state_16570__$1 = state_16570;
var ex16702 = (state_16570__$1[(2)]);
var statearr_16710_17920 = state_16570__$1;
(statearr_16710_17920[(5)] = ex16702);


var statearr_16711_17921 = state_16570__$1;
(statearr_16711_17921[(1)] = (45));

(statearr_16711_17921[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (78))){
var inst_16231 = (state_16570[(21)]);
var inst_16251 = (state_16570[(2)]);
var _ = (function (){var statearr_16712 = state_16570;
(statearr_16712[(4)] = cljs.core.rest.call(null,(state_16570[(4)])));

return statearr_16712;
})();
var state_16570__$1 = (function (){var statearr_16713 = state_16570;
(statearr_16713[(29)] = inst_16251);

return statearr_16713;
})();
var statearr_16714_17922 = state_16570__$1;
(statearr_16714_17922[(2)] = inst_16231);

(statearr_16714_17922[(1)] = (73));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (110))){
var inst_16365 = (state_16570[(2)]);
var inst_16366 = cljs.core.get.call(null,inst_16365,"current_cycle");
var state_16570__$1 = (function (){var statearr_16715 = state_16570;
(statearr_16715[(30)] = inst_16366);

return statearr_16715;
})();
var statearr_16716_17923 = state_16570__$1;
(statearr_16716_17923[(2)] = null);

(statearr_16716_17923[(1)] = (111));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (142))){
var inst_16497 = (state_16570[(28)]);
var inst_16504 = (function(){throw inst_16497})();
var state_16570__$1 = state_16570;
var statearr_16718_17924 = state_16570__$1;
(statearr_16718_17924[(2)] = inst_16504);

(statearr_16718_17924[(1)] = (144));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (15))){
var inst_16015 = (state_16570[(2)]);
var _ = (function (){var statearr_16719 = state_16570;
(statearr_16719[(4)] = cljs.core.rest.call(null,(state_16570[(4)])));

return statearr_16719;
})();
var state_16570__$1 = state_16570;
var statearr_16720_17925 = state_16570__$1;
(statearr_16720_17925[(2)] = inst_16015);

(statearr_16720_17925[(1)] = (3));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (47))){
var _ = (function (){var statearr_16721 = state_16570;
(statearr_16721[(4)] = cljs.core.rest.call(null,(state_16570[(4)])));

return statearr_16721;
})();
var state_16570__$1 = state_16570;
var ex16717 = (state_16570__$1[(2)]);
var statearr_16722_17926 = state_16570__$1;
(statearr_16722_17926[(5)] = ex16717);


if((ex16717 instanceof Error)){
var statearr_16723_17927 = state_16570__$1;
(statearr_16723_17927[(1)] = (42));

(statearr_16723_17927[(5)] = null);

} else {
throw ex16717;

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (79))){
var _ = (function (){var statearr_16724 = state_16570;
(statearr_16724[(4)] = cljs.core.cons.call(null,(86),(state_16570[(4)])));

return statearr_16724;
})();
var inst_16280 = cljs.core.PersistentHashMap.EMPTY;
var inst_16281 = eos_cljs.core.transact.call(null,e2e.proposals.prop_acc,"cycleupdate",inst_16280);
var inst_16282 = cljs.core.async.interop.p__GT_c.call(null,inst_16281);
var state_16570__$1 = state_16570;
return cljs.core.async.impl.ioc_helpers.take_BANG_.call(null,state_16570__$1,(87),inst_16282);
} else {
if((state_val_16571 === (111))){
var inst_16366 = (state_16570[(30)]);
var inst_16379 = (state_16570[(31)]);
var inst_16380 = (state_16570[(32)]);
var _ = (function (){var statearr_16725 = state_16570;
(statearr_16725[(4)] = cljs.core.cons.call(null,(114),(state_16570[(4)])));

return statearr_16725;
})();
var inst_16378 = (new cljs.core.List(null,(1),null,(1),null));
var inst_16379__$1 = (new cljs.core.List(null,inst_16366,inst_16378,(2),null));
var inst_16380__$1 = cljs.core.apply.call(null,cljs.core._EQ_,inst_16379__$1);
var state_16570__$1 = (function (){var statearr_16726 = state_16570;
(statearr_16726[(31)] = inst_16379__$1);

(statearr_16726[(32)] = inst_16380__$1);

return statearr_16726;
})();
if(cljs.core.truth_(inst_16380__$1)){
var statearr_16727_17928 = state_16570__$1;
(statearr_16727_17928[(1)] = (115));

} else {
var statearr_16728_17929 = state_16570__$1;
(statearr_16728_17929[(1)] = (116));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (143))){
var inst_16497 = (state_16570[(28)]);
var state_16570__$1 = state_16570;
var statearr_16729_17930 = state_16570__$1;
(statearr_16729_17930[(2)] = inst_16497);

(statearr_16729_17930[(1)] = (144));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (16))){
var inst_15988 = (state_16570[(2)]);
var inst_15989 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_15990 = true;
var inst_15991 = [new cljs.core.Keyword(null,"error","error",(-978969032)),null,inst_15990,inst_15988];
var inst_15992 = cljs.core.PersistentHashMap.fromArrays(inst_15989,inst_15991);
var inst_15993 = cljs.test.do_report.call(null,inst_15992);
var state_16570__$1 = state_16570;
var statearr_16730_17931 = state_16570__$1;
(statearr_16730_17931[(2)] = inst_15993);

(statearr_16730_17931[(1)] = (15));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (48))){
var inst_16135 = (state_16570[(33)]);
var inst_16135__$1 = (state_16570[(2)]);
var inst_16136 = (inst_16135__$1 instanceof cljs.core.ExceptionInfo);
var inst_16137 = cljs.core.ex_data.call(null,inst_16135__$1);
var inst_16138 = new cljs.core.Keyword(null,"error","error",(-978969032)).cljs$core$IFn$_invoke$arity$1(inst_16137);
var inst_16139 = cljs.core._EQ_.call(null,inst_16138,new cljs.core.Keyword(null,"promise-error","promise-error",(-90673560)));
var inst_16140 = ((inst_16136) && (inst_16139));
var state_16570__$1 = (function (){var statearr_16731 = state_16570;
(statearr_16731[(33)] = inst_16135__$1);

return statearr_16731;
})();
if(cljs.core.truth_(inst_16140)){
var statearr_16732_17932 = state_16570__$1;
(statearr_16732_17932[(1)] = (49));

} else {
var statearr_16733_17933 = state_16570__$1;
(statearr_16733_17933[(1)] = (50));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (80))){
var inst_16325 = (state_16570[(2)]);
var inst_16330 = eos_cljs.core.get_table_rows.call(null,e2e.proposals.prop_acc,e2e.proposals.prop_acc,"config");
var inst_16331 = cljs.core.async.interop.p__GT_c.call(null,inst_16330);
var state_16570__$1 = (function (){var statearr_16734 = state_16570;
(statearr_16734[(34)] = inst_16325);

return statearr_16734;
})();
return cljs.core.async.impl.ioc_helpers.take_BANG_.call(null,state_16570__$1,(98),inst_16331);
} else {
if((state_val_16571 === (112))){
var inst_16403 = (state_16570[(2)]);
var inst_16404 = Promise.resolve((1));
var inst_16405 = eos_cljs.core.wait_block.call(null,inst_16404);
var inst_16406 = cljs.core.async.interop.p__GT_c.call(null,inst_16405);
var state_16570__$1 = (function (){var statearr_16736 = state_16570;
(statearr_16736[(35)] = inst_16403);

return statearr_16736;
})();
return cljs.core.async.impl.ioc_helpers.take_BANG_.call(null,state_16570__$1,(118),inst_16406);
} else {
if((state_val_16571 === (144))){
var inst_16508 = (state_16570[(36)]);
var inst_16507 = (state_16570[(2)]);
var inst_16508__$1 = cljs.core.nth.call(null,inst_16507,(0),null);
var inst_16510 = (inst_16508__$1 == null);
var inst_16511 = cljs.core.not.call(null,inst_16510);
var state_16570__$1 = (function (){var statearr_16737 = state_16570;
(statearr_16737[(36)] = inst_16508__$1);

return statearr_16737;
})();
if(inst_16511){
var statearr_16738_17934 = state_16570__$1;
(statearr_16738_17934[(1)] = (145));

} else {
var statearr_16739_17935 = state_16570__$1;
(statearr_16739_17935[(1)] = (146));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (17))){
var _ = (function (){var statearr_16740 = state_16570;
(statearr_16740[(4)] = cljs.core.rest.call(null,(state_16570[(4)])));

return statearr_16740;
})();
var state_16570__$1 = state_16570;
var ex16735 = (state_16570__$1[(2)]);
var statearr_16741_17936 = state_16570__$1;
(statearr_16741_17936[(5)] = ex16735);


var statearr_16742_17937 = state_16570__$1;
(statearr_16742_17937[(1)] = (16));

(statearr_16742_17937[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (49))){
var inst_16135 = (state_16570[(33)]);
var inst_16142 = (function(){throw inst_16135})();
var state_16570__$1 = state_16570;
var statearr_16743_17938 = state_16570__$1;
(statearr_16743_17938[(2)] = inst_16142);

(statearr_16743_17938[(1)] = (51));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (81))){
var inst_16255 = (state_16570[(2)]);
var inst_16256 = cljs.core.prn.call(null,"test failed with ",inst_16255);
var state_16570__$1 = (function (){var statearr_16744 = state_16570;
(statearr_16744[(37)] = inst_16256);

return statearr_16744;
})();
var statearr_16745_17939 = state_16570__$1;
(statearr_16745_17939[(2)] = null);

(statearr_16745_17939[(1)] = (82));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (113))){
var inst_16367 = (state_16570[(2)]);
var inst_16368 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_16369 = cljs.core.list(new cljs.core.Symbol(null,"=","=",(-1501502141),null),new cljs.core.Symbol(null,"cycle","cycle",(-1944070485),null),(1));
var inst_16370 = [new cljs.core.Keyword(null,"error","error",(-978969032)),null,inst_16369,inst_16367];
var inst_16371 = cljs.core.PersistentHashMap.fromArrays(inst_16368,inst_16370);
var inst_16372 = cljs.test.do_report.call(null,inst_16371);
var state_16570__$1 = state_16570;
var statearr_16746_17940 = state_16570__$1;
(statearr_16746_17940[(2)] = inst_16372);

(statearr_16746_17940[(1)] = (112));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (145))){
var inst_16508 = (state_16570[(36)]);
var inst_16513 = inst_16508.cljs$lang$protocol_mask$partition0$;
var inst_16514 = (inst_16513 & (64));
var inst_16515 = inst_16508.cljs$core$ISeq$;
var inst_16516 = (cljs.core.PROTOCOL_SENTINEL === inst_16515);
var inst_16517 = ((inst_16514) || (inst_16516));
var state_16570__$1 = state_16570;
if(cljs.core.truth_(inst_16517)){
var statearr_16747_17941 = state_16570__$1;
(statearr_16747_17941[(1)] = (148));

} else {
var statearr_16748_17942 = state_16570__$1;
(statearr_16748_17942[(1)] = (149));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (18))){
var inst_16000 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_16001 = true;
var inst_16002 = [new cljs.core.Keyword(null,"pass","pass",(1574159993)),null,inst_16001,true];
var inst_16003 = cljs.core.PersistentHashMap.fromArrays(inst_16000,inst_16002);
var inst_16004 = cljs.test.do_report.call(null,inst_16003);
var state_16570__$1 = state_16570;
var statearr_16749_17943 = state_16570__$1;
(statearr_16749_17943[(2)] = inst_16004);

(statearr_16749_17943[(1)] = (20));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (50))){
var inst_16135 = (state_16570[(33)]);
var state_16570__$1 = state_16570;
var statearr_16751_17944 = state_16570__$1;
(statearr_16751_17944[(2)] = inst_16135);

(statearr_16751_17944[(1)] = (51));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (82))){
var _ = (function (){var statearr_16752 = state_16570;
(statearr_16752[(4)] = cljs.core.cons.call(null,(85),(state_16570[(4)])));

return statearr_16752;
})();
var inst_16268 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002))];
var inst_16269 = [new cljs.core.Keyword(null,"fail","fail",(1706214930)),"can progress cycle"];
var inst_16270 = cljs.core.PersistentHashMap.fromArrays(inst_16268,inst_16269);
var inst_16271 = cljs.test.do_report.call(null,inst_16270);
var ___$1 = (function (){var statearr_16753 = state_16570;
(statearr_16753[(4)] = cljs.core.rest.call(null,(state_16570[(4)])));

return statearr_16753;
})();
var state_16570__$1 = state_16570;
var statearr_16754_17945 = state_16570__$1;
(statearr_16754_17945[(2)] = inst_16271);

(statearr_16754_17945[(1)] = (83));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (114))){
var _ = (function (){var statearr_16755 = state_16570;
(statearr_16755[(4)] = cljs.core.rest.call(null,(state_16570[(4)])));

return statearr_16755;
})();
var state_16570__$1 = state_16570;
var ex16750 = (state_16570__$1[(2)]);
var statearr_16756_17946 = state_16570__$1;
(statearr_16756_17946[(5)] = ex16750);


var statearr_16757_17947 = state_16570__$1;
(statearr_16757_17947[(1)] = (113));

(statearr_16757_17947[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (146))){
var state_16570__$1 = state_16570;
var statearr_16758_17948 = state_16570__$1;
(statearr_16758_17948[(2)] = false);

(statearr_16758_17948[(1)] = (147));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (19))){
var inst_16006 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_16007 = true;
var inst_16008 = [new cljs.core.Keyword(null,"fail","fail",(1706214930)),null,inst_16007,true];
var inst_16009 = cljs.core.PersistentHashMap.fromArrays(inst_16006,inst_16008);
var inst_16010 = cljs.test.do_report.call(null,inst_16009);
var state_16570__$1 = state_16570;
var statearr_16759_17949 = state_16570__$1;
(statearr_16759_17949[(2)] = inst_16010);

(statearr_16759_17949[(1)] = (20));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (51))){
var inst_16145 = (state_16570[(2)]);
var state_16570__$1 = (function (){var statearr_16760 = state_16570;
(statearr_16760[(38)] = inst_16145);

return statearr_16760;
})();
var statearr_16761_17950 = state_16570__$1;
(statearr_16761_17950[(2)] = null);

(statearr_16761_17950[(1)] = (52));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (83))){
var inst_16274 = (state_16570[(2)]);
var state_16570__$1 = state_16570;
var statearr_16762_17951 = state_16570__$1;
(statearr_16762_17951[(2)] = inst_16274);

(statearr_16762_17951[(1)] = (80));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (115))){
var inst_16379 = (state_16570[(31)]);
var inst_16382 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_16383 = cljs.core.list(new cljs.core.Symbol(null,"=","=",(-1501502141),null),new cljs.core.Symbol(null,"cycle","cycle",(-1944070485),null),(1));
var inst_16384 = cljs.core.cons.call(null,cljs.core._EQ_,inst_16379);
var inst_16385 = [new cljs.core.Keyword(null,"pass","pass",(1574159993)),null,inst_16383,inst_16384];
var inst_16386 = cljs.core.PersistentHashMap.fromArrays(inst_16382,inst_16385);
var inst_16387 = cljs.test.do_report.call(null,inst_16386);
var state_16570__$1 = state_16570;
var statearr_16763_17952 = state_16570__$1;
(statearr_16763_17952[(2)] = inst_16387);

(statearr_16763_17952[(1)] = (117));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (147))){
var inst_16524 = (state_16570[(2)]);
var state_16570__$1 = state_16570;
if(cljs.core.truth_(inst_16524)){
var statearr_16764_17953 = state_16570__$1;
(statearr_16764_17953[(1)] = (151));

} else {
var statearr_16765_17954 = state_16570__$1;
(statearr_16765_17954[(1)] = (152));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (20))){
var inst_16012 = (state_16570[(2)]);
var _ = (function (){var statearr_16766 = state_16570;
(statearr_16766[(4)] = cljs.core.rest.call(null,(state_16570[(4)])));

return statearr_16766;
})();
var state_16570__$1 = (function (){var statearr_16767 = state_16570;
(statearr_16767[(39)] = inst_16012);

return statearr_16767;
})();
var statearr_16768_17955 = state_16570__$1;
(statearr_16768_17955[(2)] = true);

(statearr_16768_17955[(1)] = (15));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (52))){
var _ = (function (){var statearr_16769 = state_16570;
(statearr_16769[(4)] = cljs.core.cons.call(null,(55),(state_16570[(4)])));

return statearr_16769;
})();
var state_16570__$1 = state_16570;
var statearr_16770_17956 = state_16570__$1;
(statearr_16770_17956[(1)] = (56));



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (84))){
var inst_16257 = (state_16570[(2)]);
var inst_16258 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_16259 = null;
var inst_16260 = [new cljs.core.Keyword(null,"error","error",(-978969032)),"can progress cycle",inst_16259,inst_16257];
var inst_16261 = cljs.core.PersistentHashMap.fromArrays(inst_16258,inst_16260);
var inst_16262 = cljs.test.do_report.call(null,inst_16261);
var state_16570__$1 = state_16570;
var statearr_16772_17957 = state_16570__$1;
(statearr_16772_17957[(2)] = inst_16262);

(statearr_16772_17957[(1)] = (83));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (116))){
var inst_16379 = (state_16570[(31)]);
var inst_16389 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_16390 = cljs.core.list(new cljs.core.Symbol(null,"=","=",(-1501502141),null),new cljs.core.Symbol(null,"cycle","cycle",(-1944070485),null),(1));
var inst_16391 = new cljs.core.Symbol(null,"not","not",(1044554643),null);
var inst_16392 = new cljs.core.Symbol(null,"=","=",(-1501502141),null);
var inst_16393 = cljs.core.cons.call(null,inst_16392,inst_16379);
var inst_16394 = (new cljs.core.List(null,inst_16393,null,(1),null));
var inst_16395 = (new cljs.core.List(null,inst_16391,inst_16394,(2),null));
var inst_16396 = [new cljs.core.Keyword(null,"fail","fail",(1706214930)),null,inst_16390,inst_16395];
var inst_16397 = cljs.core.PersistentHashMap.fromArrays(inst_16389,inst_16396);
var inst_16398 = cljs.test.do_report.call(null,inst_16397);
var state_16570__$1 = state_16570;
var statearr_16773_17958 = state_16570__$1;
(statearr_16773_17958[(2)] = inst_16398);

(statearr_16773_17958[(1)] = (117));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (148))){
var state_16570__$1 = state_16570;
var statearr_16774_17959 = state_16570__$1;
(statearr_16774_17959[(2)] = true);

(statearr_16774_17959[(1)] = (150));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (21))){
var _ = (function (){var statearr_16776 = state_16570;
(statearr_16776[(4)] = cljs.core.cons.call(null,(28),(state_16570[(4)])));

return statearr_16776;
})();
var inst_16044 = [new cljs.core.Keyword(null,"start_time","start_time",(889556682)),new cljs.core.Keyword(null,"budget","budget",(-405386281))];
var inst_16045 = cljs.core.PersistentVector.EMPTY_NODE;
var inst_16046 = [new cljs.core.Keyword(null,"quantity","quantity",(-1929050694)),new cljs.core.Keyword(null,"contract","contract",(798152745))];
var inst_16047 = ["500.1000 EFX",e2e.proposals.token_acc];
var inst_16048 = cljs.core.PersistentHashMap.fromArrays(inst_16046,inst_16047);
var inst_16049 = [inst_16048];
var inst_16050 = (new cljs.core.PersistentVector(null,(1),(5),inst_16045,inst_16049,null));
var inst_16051 = ["2021-01-01 12:00:00",inst_16050];
var inst_16052 = cljs.core.PersistentHashMap.fromArrays(inst_16044,inst_16051);
var inst_16053 = eos_cljs.core.transact.call(null,e2e.proposals.prop_acc,"addcycle",inst_16052);
var inst_16054 = cljs.core.async.interop.p__GT_c.call(null,inst_16053);
var state_16570__$1 = state_16570;
return cljs.core.async.impl.ioc_helpers.take_BANG_.call(null,state_16570__$1,(29),inst_16054);
} else {
if((state_val_16571 === (53))){
var inst_16173 = (state_16570[(2)]);
var _ = (function (){var statearr_16777 = state_16570;
(statearr_16777[(4)] = cljs.core.rest.call(null,(state_16570[(4)])));

return statearr_16777;
})();
var state_16570__$1 = state_16570;
var statearr_16778_17960 = state_16570__$1;
(statearr_16778_17960[(2)] = inst_16173);

(statearr_16778_17960[(1)] = (41));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (85))){
var _ = (function (){var statearr_16779 = state_16570;
(statearr_16779[(4)] = cljs.core.rest.call(null,(state_16570[(4)])));

return statearr_16779;
})();
var state_16570__$1 = state_16570;
var ex16775 = (state_16570__$1[(2)]);
var statearr_16780_17961 = state_16570__$1;
(statearr_16780_17961[(5)] = ex16775);


var statearr_16781_17962 = state_16570__$1;
(statearr_16781_17962[(1)] = (84));

(statearr_16781_17962[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (117))){
var inst_16380 = (state_16570[(32)]);
var inst_16400 = (state_16570[(2)]);
var _ = (function (){var statearr_16782 = state_16570;
(statearr_16782[(4)] = cljs.core.rest.call(null,(state_16570[(4)])));

return statearr_16782;
})();
var state_16570__$1 = (function (){var statearr_16783 = state_16570;
(statearr_16783[(40)] = inst_16400);

return statearr_16783;
})();
var statearr_16784_17963 = state_16570__$1;
(statearr_16784_17963[(2)] = inst_16380);

(statearr_16784_17963[(1)] = (112));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (149))){
var state_16570__$1 = state_16570;
var statearr_16785_17964 = state_16570__$1;
(statearr_16785_17964[(2)] = false);

(statearr_16785_17964[(1)] = (150));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (22))){
var inst_16097 = (state_16570[(2)]);
var state_16570__$1 = (function (){var statearr_16787 = state_16570;
(statearr_16787[(41)] = inst_16097);

return statearr_16787;
})();
var statearr_16788_17965 = state_16570__$1;
(statearr_16788_17965[(2)] = null);

(statearr_16788_17965[(1)] = (40));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (54))){
var inst_16146 = (state_16570[(2)]);
var inst_16147 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_16148 = true;
var inst_16149 = [new cljs.core.Keyword(null,"error","error",(-978969032)),null,inst_16148,inst_16146];
var inst_16150 = cljs.core.PersistentHashMap.fromArrays(inst_16147,inst_16149);
var inst_16151 = cljs.test.do_report.call(null,inst_16150);
var state_16570__$1 = state_16570;
var statearr_16789_17966 = state_16570__$1;
(statearr_16789_17966[(2)] = inst_16151);

(statearr_16789_17966[(1)] = (53));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (86))){
var _ = (function (){var statearr_16790 = state_16570;
(statearr_16790[(4)] = cljs.core.rest.call(null,(state_16570[(4)])));

return statearr_16790;
})();
var state_16570__$1 = state_16570;
var ex16786 = (state_16570__$1[(2)]);
var statearr_16791_17967 = state_16570__$1;
(statearr_16791_17967[(5)] = ex16786);


if((ex16786 instanceof Error)){
var statearr_16792_17968 = state_16570__$1;
(statearr_16792_17968[(1)] = (81));

(statearr_16792_17968[(5)] = null);

} else {
throw ex16786;

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (118))){
var inst_16408 = (state_16570[(42)]);
var inst_16408__$1 = (state_16570[(2)]);
var inst_16409 = (inst_16408__$1 instanceof cljs.core.ExceptionInfo);
var inst_16410 = cljs.core.ex_data.call(null,inst_16408__$1);
var inst_16411 = new cljs.core.Keyword(null,"error","error",(-978969032)).cljs$core$IFn$_invoke$arity$1(inst_16410);
var inst_16412 = cljs.core._EQ_.call(null,inst_16411,new cljs.core.Keyword(null,"promise-error","promise-error",(-90673560)));
var inst_16413 = ((inst_16409) && (inst_16412));
var state_16570__$1 = (function (){var statearr_16793 = state_16570;
(statearr_16793[(42)] = inst_16408__$1);

return statearr_16793;
})();
if(cljs.core.truth_(inst_16413)){
var statearr_16794_17969 = state_16570__$1;
(statearr_16794_17969[(1)] = (119));

} else {
var statearr_16795_17970 = state_16570__$1;
(statearr_16795_17970[(1)] = (120));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (150))){
var inst_16521 = (state_16570[(2)]);
var state_16570__$1 = state_16570;
var statearr_16797_17971 = state_16570__$1;
(statearr_16797_17971[(2)] = inst_16521);

(statearr_16797_17971[(1)] = (147));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (23))){
var inst_16019 = (state_16570[(2)]);
var inst_16020 = cljs.core.prn.call(null,"test failed with ",inst_16019);
var state_16570__$1 = (function (){var statearr_16798 = state_16570;
(statearr_16798[(43)] = inst_16020);

return statearr_16798;
})();
var statearr_16799_17972 = state_16570__$1;
(statearr_16799_17972[(2)] = null);

(statearr_16799_17972[(1)] = (24));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (55))){
var _ = (function (){var statearr_16800 = state_16570;
(statearr_16800[(4)] = cljs.core.rest.call(null,(state_16570[(4)])));

return statearr_16800;
})();
var state_16570__$1 = state_16570;
var ex16796 = (state_16570__$1[(2)]);
var statearr_16801_17973 = state_16570__$1;
(statearr_16801_17973[(5)] = ex16796);


var statearr_16802_17974 = state_16570__$1;
(statearr_16802_17974[(1)] = (54));

(statearr_16802_17974[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (87))){
var inst_16284 = (state_16570[(44)]);
var inst_16284__$1 = (state_16570[(2)]);
var inst_16285 = (inst_16284__$1 instanceof cljs.core.ExceptionInfo);
var inst_16286 = cljs.core.ex_data.call(null,inst_16284__$1);
var inst_16287 = new cljs.core.Keyword(null,"error","error",(-978969032)).cljs$core$IFn$_invoke$arity$1(inst_16286);
var inst_16288 = cljs.core._EQ_.call(null,inst_16287,new cljs.core.Keyword(null,"promise-error","promise-error",(-90673560)));
var inst_16289 = ((inst_16285) && (inst_16288));
var state_16570__$1 = (function (){var statearr_16803 = state_16570;
(statearr_16803[(44)] = inst_16284__$1);

return statearr_16803;
})();
if(cljs.core.truth_(inst_16289)){
var statearr_16804_17975 = state_16570__$1;
(statearr_16804_17975[(1)] = (88));

} else {
var statearr_16805_17976 = state_16570__$1;
(statearr_16805_17976[(1)] = (89));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (119))){
var inst_16408 = (state_16570[(42)]);
var inst_16415 = (function(){throw inst_16408})();
var state_16570__$1 = state_16570;
var statearr_16806_17977 = state_16570__$1;
(statearr_16806_17977[(2)] = inst_16415);

(statearr_16806_17977[(1)] = (121));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (151))){
var inst_16508 = (state_16570[(36)]);
var inst_16526 = cljs.core.apply.call(null,cljs.core.hash_map,inst_16508);
var state_16570__$1 = state_16570;
var statearr_16807_17978 = state_16570__$1;
(statearr_16807_17978[(2)] = inst_16526);

(statearr_16807_17978[(1)] = (153));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (24))){
var _ = (function (){var statearr_16808 = state_16570;
(statearr_16808[(4)] = cljs.core.cons.call(null,(27),(state_16570[(4)])));

return statearr_16808;
})();
var inst_16032 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002))];
var inst_16033 = [new cljs.core.Keyword(null,"fail","fail",(1706214930)),null];
var inst_16034 = cljs.core.PersistentHashMap.fromArrays(inst_16032,inst_16033);
var inst_16035 = cljs.test.do_report.call(null,inst_16034);
var ___$1 = (function (){var statearr_16809 = state_16570;
(statearr_16809[(4)] = cljs.core.rest.call(null,(state_16570[(4)])));

return statearr_16809;
})();
var state_16570__$1 = state_16570;
var statearr_16810_17979 = state_16570__$1;
(statearr_16810_17979[(2)] = inst_16035);

(statearr_16810_17979[(1)] = (25));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (56))){
var inst_16158 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_16159 = true;
var inst_16160 = [new cljs.core.Keyword(null,"pass","pass",(1574159993)),null,inst_16159,true];
var inst_16161 = cljs.core.PersistentHashMap.fromArrays(inst_16158,inst_16160);
var inst_16162 = cljs.test.do_report.call(null,inst_16161);
var state_16570__$1 = state_16570;
var statearr_16811_17980 = state_16570__$1;
(statearr_16811_17980[(2)] = inst_16162);

(statearr_16811_17980[(1)] = (58));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (88))){
var inst_16284 = (state_16570[(44)]);
var inst_16291 = (function(){throw inst_16284})();
var state_16570__$1 = state_16570;
var statearr_16812_17981 = state_16570__$1;
(statearr_16812_17981[(2)] = inst_16291);

(statearr_16812_17981[(1)] = (90));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (120))){
var inst_16408 = (state_16570[(42)]);
var state_16570__$1 = state_16570;
var statearr_16813_17982 = state_16570__$1;
(statearr_16813_17982[(2)] = inst_16408);

(statearr_16813_17982[(1)] = (121));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (152))){
var inst_16508 = (state_16570[(36)]);
var state_16570__$1 = state_16570;
var statearr_16814_17983 = state_16570__$1;
(statearr_16814_17983[(2)] = inst_16508);

(statearr_16814_17983[(1)] = (153));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (25))){
var inst_16038 = (state_16570[(2)]);
var state_16570__$1 = state_16570;
var statearr_16815_17984 = state_16570__$1;
(statearr_16815_17984[(2)] = inst_16038);

(statearr_16815_17984[(1)] = (22));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (57))){
var inst_16164 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_16165 = true;
var inst_16166 = [new cljs.core.Keyword(null,"fail","fail",(1706214930)),null,inst_16165,true];
var inst_16167 = cljs.core.PersistentHashMap.fromArrays(inst_16164,inst_16166);
var inst_16168 = cljs.test.do_report.call(null,inst_16167);
var state_16570__$1 = state_16570;
var statearr_16816_17985 = state_16570__$1;
(statearr_16816_17985[(2)] = inst_16168);

(statearr_16816_17985[(1)] = (58));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (89))){
var inst_16284 = (state_16570[(44)]);
var state_16570__$1 = state_16570;
var statearr_16817_17986 = state_16570__$1;
(statearr_16817_17986[(2)] = inst_16284);

(statearr_16817_17986[(1)] = (90));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (121))){
var inst_16418 = (state_16570[(2)]);
var state_16570__$1 = (function (){var statearr_16818 = state_16570;
(statearr_16818[(45)] = inst_16418);

return statearr_16818;
})();
var statearr_16819_17987 = state_16570__$1;
(statearr_16819_17987[(2)] = null);

(statearr_16819_17987[(1)] = (122));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (153))){
var inst_16529 = (state_16570[(2)]);
var inst_16530 = cljs.core.get.call(null,inst_16529,"current_cycle");
var state_16570__$1 = (function (){var statearr_16820 = state_16570;
(statearr_16820[(46)] = inst_16530);

return statearr_16820;
})();
var statearr_16821_17988 = state_16570__$1;
(statearr_16821_17988[(2)] = null);

(statearr_16821_17988[(1)] = (154));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (26))){
var inst_16021 = (state_16570[(2)]);
var inst_16022 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_16023 = null;
var inst_16024 = [new cljs.core.Keyword(null,"error","error",(-978969032)),null,inst_16023,inst_16021];
var inst_16025 = cljs.core.PersistentHashMap.fromArrays(inst_16022,inst_16024);
var inst_16026 = cljs.test.do_report.call(null,inst_16025);
var state_16570__$1 = state_16570;
var statearr_16822_17989 = state_16570__$1;
(statearr_16822_17989[(2)] = inst_16026);

(statearr_16822_17989[(1)] = (25));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (58))){
var inst_16170 = (state_16570[(2)]);
var _ = (function (){var statearr_16823 = state_16570;
(statearr_16823[(4)] = cljs.core.rest.call(null,(state_16570[(4)])));

return statearr_16823;
})();
var state_16570__$1 = (function (){var statearr_16824 = state_16570;
(statearr_16824[(47)] = inst_16170);

return statearr_16824;
})();
var statearr_16825_17990 = state_16570__$1;
(statearr_16825_17990[(2)] = true);

(statearr_16825_17990[(1)] = (53));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (90))){
var inst_16294 = (state_16570[(2)]);
var state_16570__$1 = (function (){var statearr_16826 = state_16570;
(statearr_16826[(48)] = inst_16294);

return statearr_16826;
})();
var statearr_16827_17991 = state_16570__$1;
(statearr_16827_17991[(2)] = null);

(statearr_16827_17991[(1)] = (91));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (122))){
var _ = (function (){var statearr_16829 = state_16570;
(statearr_16829[(4)] = cljs.core.cons.call(null,(129),(state_16570[(4)])));

return statearr_16829;
})();
var inst_16444 = cljs.core.PersistentHashMap.EMPTY;
var inst_16445 = eos_cljs.core.transact.call(null,e2e.proposals.prop_acc,"cycleupdate",inst_16444);
var inst_16446 = cljs.core.async.interop.p__GT_c.call(null,inst_16445);
var state_16570__$1 = state_16570;
return cljs.core.async.impl.ioc_helpers.take_BANG_.call(null,state_16570__$1,(130),inst_16446);
} else {
if((state_val_16571 === (154))){
var inst_16530 = (state_16570[(46)]);
var inst_16543 = (state_16570[(49)]);
var inst_16544 = (state_16570[(8)]);
var _ = (function (){var statearr_16830 = state_16570;
(statearr_16830[(4)] = cljs.core.cons.call(null,(157),(state_16570[(4)])));

return statearr_16830;
})();
var inst_16542 = (new cljs.core.List(null,(2),null,(1),null));
var inst_16543__$1 = (new cljs.core.List(null,inst_16530,inst_16542,(2),null));
var inst_16544__$1 = cljs.core.apply.call(null,cljs.core._EQ_,inst_16543__$1);
var state_16570__$1 = (function (){var statearr_16831 = state_16570;
(statearr_16831[(49)] = inst_16543__$1);

(statearr_16831[(8)] = inst_16544__$1);

return statearr_16831;
})();
if(cljs.core.truth_(inst_16544__$1)){
var statearr_16832_17992 = state_16570__$1;
(statearr_16832_17992[(1)] = (158));

} else {
var statearr_16833_17993 = state_16570__$1;
(statearr_16833_17993[(1)] = (159));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (27))){
var _ = (function (){var statearr_16834 = state_16570;
(statearr_16834[(4)] = cljs.core.rest.call(null,(state_16570[(4)])));

return statearr_16834;
})();
var state_16570__$1 = state_16570;
var ex16828 = (state_16570__$1[(2)]);
var statearr_16835_17994 = state_16570__$1;
(statearr_16835_17994[(5)] = ex16828);


var statearr_16836_17995 = state_16570__$1;
(statearr_16836_17995[(1)] = (26));

(statearr_16836_17995[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (59))){
var inst_16184 = (state_16570[(50)]);
var inst_16184__$1 = (state_16570[(2)]);
var inst_16185 = (inst_16184__$1 instanceof cljs.core.ExceptionInfo);
var inst_16186 = cljs.core.ex_data.call(null,inst_16184__$1);
var inst_16187 = new cljs.core.Keyword(null,"error","error",(-978969032)).cljs$core$IFn$_invoke$arity$1(inst_16186);
var inst_16188 = cljs.core._EQ_.call(null,inst_16187,new cljs.core.Keyword(null,"promise-error","promise-error",(-90673560)));
var inst_16189 = ((inst_16185) && (inst_16188));
var state_16570__$1 = (function (){var statearr_16837 = state_16570;
(statearr_16837[(50)] = inst_16184__$1);

return statearr_16837;
})();
if(cljs.core.truth_(inst_16189)){
var statearr_16838_17996 = state_16570__$1;
(statearr_16838_17996[(1)] = (60));

} else {
var statearr_16839_17997 = state_16570__$1;
(statearr_16839_17997[(1)] = (61));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (91))){
var _ = (function (){var statearr_16840 = state_16570;
(statearr_16840[(4)] = cljs.core.cons.call(null,(94),(state_16570[(4)])));

return statearr_16840;
})();
var state_16570__$1 = state_16570;
var statearr_16841_17998 = state_16570__$1;
(statearr_16841_17998[(1)] = (95));



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (123))){
var inst_16489 = (state_16570[(2)]);
var inst_16494 = eos_cljs.core.get_table_rows.call(null,e2e.proposals.prop_acc,e2e.proposals.prop_acc,"config");
var inst_16495 = cljs.core.async.interop.p__GT_c.call(null,inst_16494);
var state_16570__$1 = (function (){var statearr_16844 = state_16570;
(statearr_16844[(51)] = inst_16489);

return statearr_16844;
})();
return cljs.core.async.impl.ioc_helpers.take_BANG_.call(null,state_16570__$1,(141),inst_16495);
} else {
if((state_val_16571 === (155))){
var inst_16567 = (state_16570[(2)]);
var inst_16568 = done.call(null);
var state_16570__$1 = (function (){var statearr_16845 = state_16570;
(statearr_16845[(52)] = inst_16567);

return statearr_16845;
})();
return cljs.core.async.impl.ioc_helpers.return_chan.call(null,state_16570__$1,inst_16568);
} else {
if((state_val_16571 === (28))){
var _ = (function (){var statearr_16846 = state_16570;
(statearr_16846[(4)] = cljs.core.rest.call(null,(state_16570[(4)])));

return statearr_16846;
})();
var state_16570__$1 = state_16570;
var ex16843 = (state_16570__$1[(2)]);
var statearr_16847_17999 = state_16570__$1;
(statearr_16847_17999[(5)] = ex16843);


if((ex16843 instanceof Error)){
var statearr_16848_18000 = state_16570__$1;
(statearr_16848_18000[(1)] = (23));

(statearr_16848_18000[(5)] = null);

} else {
throw ex16843;

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (60))){
var inst_16184 = (state_16570[(50)]);
var inst_16191 = (function(){throw inst_16184})();
var state_16570__$1 = state_16570;
var statearr_16849_18001 = state_16570__$1;
(statearr_16849_18001[(2)] = inst_16191);

(statearr_16849_18001[(1)] = (62));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (92))){
var inst_16322 = (state_16570[(2)]);
var _ = (function (){var statearr_16850 = state_16570;
(statearr_16850[(4)] = cljs.core.rest.call(null,(state_16570[(4)])));

return statearr_16850;
})();
var state_16570__$1 = state_16570;
var statearr_16851_18002 = state_16570__$1;
(statearr_16851_18002[(2)] = inst_16322);

(statearr_16851_18002[(1)] = (80));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (124))){
var inst_16419 = (state_16570[(2)]);
var inst_16420 = cljs.core.prn.call(null,"test failed with ",inst_16419);
var state_16570__$1 = (function (){var statearr_16852 = state_16570;
(statearr_16852[(53)] = inst_16420);

return statearr_16852;
})();
var statearr_16853_18003 = state_16570__$1;
(statearr_16853_18003[(2)] = null);

(statearr_16853_18003[(1)] = (125));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (156))){
var inst_16531 = (state_16570[(2)]);
var inst_16532 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_16533 = cljs.core.list(new cljs.core.Symbol(null,"=","=",(-1501502141),null),new cljs.core.Symbol(null,"cycle","cycle",(-1944070485),null),(2));
var inst_16534 = [new cljs.core.Keyword(null,"error","error",(-978969032)),null,inst_16533,inst_16531];
var inst_16535 = cljs.core.PersistentHashMap.fromArrays(inst_16532,inst_16534);
var inst_16536 = cljs.test.do_report.call(null,inst_16535);
var state_16570__$1 = state_16570;
var statearr_16854_18004 = state_16570__$1;
(statearr_16854_18004[(2)] = inst_16536);

(statearr_16854_18004[(1)] = (155));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (29))){
var inst_16056 = (state_16570[(54)]);
var inst_16056__$1 = (state_16570[(2)]);
var inst_16057 = (inst_16056__$1 instanceof cljs.core.ExceptionInfo);
var inst_16058 = cljs.core.ex_data.call(null,inst_16056__$1);
var inst_16059 = new cljs.core.Keyword(null,"error","error",(-978969032)).cljs$core$IFn$_invoke$arity$1(inst_16058);
var inst_16060 = cljs.core._EQ_.call(null,inst_16059,new cljs.core.Keyword(null,"promise-error","promise-error",(-90673560)));
var inst_16061 = ((inst_16057) && (inst_16060));
var state_16570__$1 = (function (){var statearr_16855 = state_16570;
(statearr_16855[(54)] = inst_16056__$1);

return statearr_16855;
})();
if(cljs.core.truth_(inst_16061)){
var statearr_16856_18005 = state_16570__$1;
(statearr_16856_18005[(1)] = (30));

} else {
var statearr_16857_18006 = state_16570__$1;
(statearr_16857_18006[(1)] = (31));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (61))){
var inst_16184 = (state_16570[(50)]);
var state_16570__$1 = state_16570;
var statearr_16858_18007 = state_16570__$1;
(statearr_16858_18007[(2)] = inst_16184);

(statearr_16858_18007[(1)] = (62));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (93))){
var inst_16295 = (state_16570[(2)]);
var inst_16296 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_16297 = true;
var inst_16298 = [new cljs.core.Keyword(null,"error","error",(-978969032)),"can progress cycle",inst_16297,inst_16295];
var inst_16299 = cljs.core.PersistentHashMap.fromArrays(inst_16296,inst_16298);
var inst_16300 = cljs.test.do_report.call(null,inst_16299);
var state_16570__$1 = state_16570;
var statearr_16860_18008 = state_16570__$1;
(statearr_16860_18008[(2)] = inst_16300);

(statearr_16860_18008[(1)] = (92));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (125))){
var _ = (function (){var statearr_16861 = state_16570;
(statearr_16861[(4)] = cljs.core.cons.call(null,(128),(state_16570[(4)])));

return statearr_16861;
})();
var inst_16432 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002))];
var inst_16433 = [new cljs.core.Keyword(null,"fail","fail",(1706214930)),"can progress cycle"];
var inst_16434 = cljs.core.PersistentHashMap.fromArrays(inst_16432,inst_16433);
var inst_16435 = cljs.test.do_report.call(null,inst_16434);
var ___$1 = (function (){var statearr_16862 = state_16570;
(statearr_16862[(4)] = cljs.core.rest.call(null,(state_16570[(4)])));

return statearr_16862;
})();
var state_16570__$1 = state_16570;
var statearr_16863_18009 = state_16570__$1;
(statearr_16863_18009[(2)] = inst_16435);

(statearr_16863_18009[(1)] = (126));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (157))){
var _ = (function (){var statearr_16864 = state_16570;
(statearr_16864[(4)] = cljs.core.rest.call(null,(state_16570[(4)])));

return statearr_16864;
})();
var state_16570__$1 = state_16570;
var ex16859 = (state_16570__$1[(2)]);
var statearr_16865_18010 = state_16570__$1;
(statearr_16865_18010[(5)] = ex16859);


var statearr_16866_18011 = state_16570__$1;
(statearr_16866_18011[(1)] = (156));

(statearr_16866_18011[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (30))){
var inst_16056 = (state_16570[(54)]);
var inst_16063 = (function(){throw inst_16056})();
var state_16570__$1 = state_16570;
var statearr_16868_18012 = state_16570__$1;
(statearr_16868_18012[(2)] = inst_16063);

(statearr_16868_18012[(1)] = (32));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (62))){
var inst_16195 = (state_16570[(15)]);
var inst_16194 = (state_16570[(2)]);
var inst_16195__$1 = cljs.core.nth.call(null,inst_16194,(0),null);
var inst_16197 = (inst_16195__$1 == null);
var inst_16198 = cljs.core.not.call(null,inst_16197);
var state_16570__$1 = (function (){var statearr_16869 = state_16570;
(statearr_16869[(15)] = inst_16195__$1);

return statearr_16869;
})();
if(inst_16198){
var statearr_16870_18013 = state_16570__$1;
(statearr_16870_18013[(1)] = (63));

} else {
var statearr_16871_18014 = state_16570__$1;
(statearr_16871_18014[(1)] = (64));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (94))){
var _ = (function (){var statearr_16872 = state_16570;
(statearr_16872[(4)] = cljs.core.rest.call(null,(state_16570[(4)])));

return statearr_16872;
})();
var state_16570__$1 = state_16570;
var ex16867 = (state_16570__$1[(2)]);
var statearr_16873_18015 = state_16570__$1;
(statearr_16873_18015[(5)] = ex16867);


var statearr_16874_18016 = state_16570__$1;
(statearr_16874_18016[(1)] = (93));

(statearr_16874_18016[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (126))){
var inst_16438 = (state_16570[(2)]);
var state_16570__$1 = state_16570;
var statearr_16875_18017 = state_16570__$1;
(statearr_16875_18017[(2)] = inst_16438);

(statearr_16875_18017[(1)] = (123));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (158))){
var inst_16543 = (state_16570[(49)]);
var inst_16546 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_16547 = cljs.core.list(new cljs.core.Symbol(null,"=","=",(-1501502141),null),new cljs.core.Symbol(null,"cycle","cycle",(-1944070485),null),(2));
var inst_16548 = cljs.core.cons.call(null,cljs.core._EQ_,inst_16543);
var inst_16549 = [new cljs.core.Keyword(null,"pass","pass",(1574159993)),null,inst_16547,inst_16548];
var inst_16550 = cljs.core.PersistentHashMap.fromArrays(inst_16546,inst_16549);
var inst_16551 = cljs.test.do_report.call(null,inst_16550);
var state_16570__$1 = state_16570;
var statearr_16876_18018 = state_16570__$1;
(statearr_16876_18018[(2)] = inst_16551);

(statearr_16876_18018[(1)] = (160));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (31))){
var inst_16056 = (state_16570[(54)]);
var state_16570__$1 = state_16570;
var statearr_16877_18019 = state_16570__$1;
(statearr_16877_18019[(2)] = inst_16056);

(statearr_16877_18019[(1)] = (32));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (63))){
var inst_16195 = (state_16570[(15)]);
var inst_16200 = inst_16195.cljs$lang$protocol_mask$partition0$;
var inst_16201 = (inst_16200 & (64));
var inst_16202 = inst_16195.cljs$core$ISeq$;
var inst_16203 = (cljs.core.PROTOCOL_SENTINEL === inst_16202);
var inst_16204 = ((inst_16201) || (inst_16203));
var state_16570__$1 = state_16570;
if(cljs.core.truth_(inst_16204)){
var statearr_16878_18020 = state_16570__$1;
(statearr_16878_18020[(1)] = (66));

} else {
var statearr_16879_18021 = state_16570__$1;
(statearr_16879_18021[(1)] = (67));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (95))){
var inst_16307 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_16308 = true;
var inst_16309 = [new cljs.core.Keyword(null,"pass","pass",(1574159993)),"can progress cycle",inst_16308,true];
var inst_16310 = cljs.core.PersistentHashMap.fromArrays(inst_16307,inst_16309);
var inst_16311 = cljs.test.do_report.call(null,inst_16310);
var state_16570__$1 = state_16570;
var statearr_16880_18022 = state_16570__$1;
(statearr_16880_18022[(2)] = inst_16311);

(statearr_16880_18022[(1)] = (97));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (127))){
var inst_16421 = (state_16570[(2)]);
var inst_16422 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_16423 = null;
var inst_16424 = [new cljs.core.Keyword(null,"error","error",(-978969032)),"can progress cycle",inst_16423,inst_16421];
var inst_16425 = cljs.core.PersistentHashMap.fromArrays(inst_16422,inst_16424);
var inst_16426 = cljs.test.do_report.call(null,inst_16425);
var state_16570__$1 = state_16570;
var statearr_16881_18023 = state_16570__$1;
(statearr_16881_18023[(2)] = inst_16426);

(statearr_16881_18023[(1)] = (126));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_16571 === (159))){
var inst_16543 = (state_16570[(49)]);
var inst_16553 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_16554 = cljs.core.list(new cljs.core.Symbol(null,"=","=",(-1501502141),null),new cljs.core.Symbol(null,"cycle","cycle",(-1944070485),null),(2));
var inst_16555 = new cljs.core.Symbol(null,"not","not",(1044554643),null);
var inst_16556 = new cljs.core.Symbol(null,"=","=",(-1501502141),null);
var inst_16557 = cljs.core.cons.call(null,inst_16556,inst_16543);
var inst_16558 = (new cljs.core.List(null,inst_16557,null,(1),null));
var inst_16559 = (new cljs.core.List(null,inst_16555,inst_16558,(2),null));
var inst_16560 = [new cljs.core.Keyword(null,"fail","fail",(1706214930)),null,inst_16554,inst_16559];
var inst_16561 = cljs.core.PersistentHashMap.fromArrays(inst_16553,inst_16560);
var inst_16562 = cljs.test.do_report.call(null,inst_16561);
var state_16570__$1 = state_16570;
var statearr_16882_18024 = state_16570__$1;
(statearr_16882_18024[(2)] = inst_16562);

(statearr_16882_18024[(1)] = (160));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
return null;
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
});})(c__19__auto__,___192__auto__,self____$1))
;
return ((function (switch__14__auto__,c__19__auto__,___192__auto__,self____$1){
return (function() {
var e2e$proposals$state_machine__15__auto__ = null;
var e2e$proposals$state_machine__15__auto____0 = (function (){
var statearr_16883 = [null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];
(statearr_16883[(0)] = e2e$proposals$state_machine__15__auto__);

(statearr_16883[(1)] = (1));

return statearr_16883;
});
var e2e$proposals$state_machine__15__auto____1 = (function (state_16570){
while(true){
var ret_value__16__auto__ = (function (){try{while(true){
var result__17__auto__ = switch__14__auto__.call(null,state_16570);
if(cljs.core.keyword_identical_QMARK_.call(null,result__17__auto__,new cljs.core.Keyword(null,"recur","recur",(-437573268)))){
continue;
} else {
return result__17__auto__;
}
break;
}
}catch (e16884){var ex__18__auto__ = e16884;
var statearr_16885_18025 = state_16570;
(statearr_16885_18025[(2)] = ex__18__auto__);


if(cljs.core.seq.call(null,(state_16570[(4)]))){
var statearr_16886_18026 = state_16570;
(statearr_16886_18026[(1)] = cljs.core.first.call(null,(state_16570[(4)])));

} else {
throw ex__18__auto__;
}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
}})();
if(cljs.core.keyword_identical_QMARK_.call(null,ret_value__16__auto__,new cljs.core.Keyword(null,"recur","recur",(-437573268)))){
var G__18027 = state_16570;
state_16570 = G__18027;
continue;
} else {
return ret_value__16__auto__;
}
break;
}
});
e2e$proposals$state_machine__15__auto__ = function(state_16570){
switch(arguments.length){
case 0:
return e2e$proposals$state_machine__15__auto____0.call(this);
case 1:
return e2e$proposals$state_machine__15__auto____1.call(this,state_16570);
}
throw(new Error('Invalid arity: ' + arguments.length));
};
e2e$proposals$state_machine__15__auto__.cljs$core$IFn$_invoke$arity$0 = e2e$proposals$state_machine__15__auto____0;
e2e$proposals$state_machine__15__auto__.cljs$core$IFn$_invoke$arity$1 = e2e$proposals$state_machine__15__auto____1;
return e2e$proposals$state_machine__15__auto__;
})()
;})(switch__14__auto__,c__19__auto__,___192__auto__,self____$1))
})();
var state__21__auto__ = (function (){var statearr_16887 = f__20__auto__.call(null);
(statearr_16887[(6)] = c__19__auto__);

return statearr_16887;
})();
return cljs.core.async.impl.ioc_helpers.run_state_machine_wrapped.call(null,state__21__auto__);
});})(c__19__auto__,___192__auto__,self____$1))
);

return c__19__auto__;
});

e2e.proposals.t_e2e$proposals15936.prototype.apply = (function (self__,args15939){
var self__ = this;
var self____$1 = this;
return self____$1.call.apply(self____$1,[self____$1].concat(cljs.core.aclone.call(null,args15939)));
});

e2e.proposals.t_e2e$proposals15936.prototype.cljs$core$IFn$_invoke$arity$1 = (function (done){
var self__ = this;
var ___192__auto__ = this;
var c__19__auto__ = cljs.core.async.chan.call(null,(1));
cljs.core.async.impl.dispatch.run.call(null,((function (c__19__auto__,___192__auto__){
return (function (){
var f__20__auto__ = (function (){var switch__14__auto__ = ((function (c__19__auto__,___192__auto__){
return (function (state_17518){
var state_val_17519 = (state_17518[(1)]);
if((state_val_17519 === (32))){
var inst_17014 = (state_17518[(2)]);
var state_17518__$1 = (function (){var statearr_17521 = state_17518;
(statearr_17521[(7)] = inst_17014);

return statearr_17521;
})();
var statearr_17522_18028 = state_17518__$1;
(statearr_17522_18028[(2)] = null);

(statearr_17522_18028[(1)] = (33));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (64))){
var state_17518__$1 = state_17518;
var statearr_17523_18029 = state_17518__$1;
(statearr_17523_18029[(2)] = false);

(statearr_17523_18029[(1)] = (65));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (96))){
var inst_17261 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_17262 = true;
var inst_17263 = [new cljs.core.Keyword(null,"fail","fail",(1706214930)),"can progress cycle",inst_17262,true];
var inst_17264 = cljs.core.PersistentHashMap.fromArrays(inst_17261,inst_17263);
var inst_17265 = cljs.test.do_report.call(null,inst_17264);
var state_17518__$1 = state_17518;
var statearr_17524_18030 = state_17518__$1;
(statearr_17524_18030[(2)] = inst_17265);

(statearr_17524_18030[(1)] = (97));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (128))){
var _ = (function (){var statearr_17525 = state_17518;
(statearr_17525[(4)] = cljs.core.rest.call(null,(state_17518[(4)])));

return statearr_17525;
})();
var state_17518__$1 = state_17518;
var ex17520 = (state_17518__$1[(2)]);
var statearr_17526_18031 = state_17518__$1;
(statearr_17526_18031[(5)] = ex17520);


var statearr_17527_18032 = state_17518__$1;
(statearr_17527_18032[(1)] = (127));

(statearr_17527_18032[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (160))){
var inst_17492 = (state_17518[(8)]);
var inst_17512 = (state_17518[(2)]);
var _ = (function (){var statearr_17528 = state_17518;
(statearr_17528[(4)] = cljs.core.rest.call(null,(state_17518[(4)])));

return statearr_17528;
})();
var state_17518__$1 = (function (){var statearr_17529 = state_17518;
(statearr_17529[(9)] = inst_17512);

return statearr_17529;
})();
var statearr_17530_18033 = state_17518__$1;
(statearr_17530_18033[(2)] = inst_17492);

(statearr_17530_18033[(1)] = (155));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (1))){
var state_17518__$1 = state_17518;
var statearr_17531_18034 = state_17518__$1;
(statearr_17531_18034[(2)] = null);

(statearr_17531_18034[(1)] = (2));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (33))){
var _ = (function (){var statearr_17532 = state_17518;
(statearr_17532[(4)] = cljs.core.cons.call(null,(36),(state_17518[(4)])));

return statearr_17532;
})();
var state_17518__$1 = state_17518;
var statearr_17533_18035 = state_17518__$1;
(statearr_17533_18035[(1)] = (37));



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (65))){
var inst_17159 = (state_17518[(2)]);
var state_17518__$1 = state_17518;
if(cljs.core.truth_(inst_17159)){
var statearr_17536_18036 = state_17518__$1;
(statearr_17536_18036[(1)] = (69));

} else {
var statearr_17537_18037 = state_17518__$1;
(statearr_17537_18037[(1)] = (70));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (97))){
var inst_17267 = (state_17518[(2)]);
var _ = (function (){var statearr_17538 = state_17518;
(statearr_17538[(4)] = cljs.core.rest.call(null,(state_17518[(4)])));

return statearr_17538;
})();
var state_17518__$1 = (function (){var statearr_17539 = state_17518;
(statearr_17539[(10)] = inst_17267);

return statearr_17539;
})();
var statearr_17540_18038 = state_17518__$1;
(statearr_17540_18038[(2)] = true);

(statearr_17540_18038[(1)] = (92));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (129))){
var _ = (function (){var statearr_17541 = state_17518;
(statearr_17541[(4)] = cljs.core.rest.call(null,(state_17518[(4)])));

return statearr_17541;
})();
var state_17518__$1 = state_17518;
var ex17535 = (state_17518__$1[(2)]);
var statearr_17542_18039 = state_17518__$1;
(statearr_17542_18039[(5)] = ex17535);


if((ex17535 instanceof Error)){
var statearr_17543_18040 = state_17518__$1;
(statearr_17543_18040[(1)] = (124));

(statearr_17543_18040[(5)] = null);

} else {
throw ex17535;

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (2))){
var _ = (function (){var statearr_17544 = state_17518;
(statearr_17544[(4)] = cljs.core.cons.call(null,(9),(state_17518[(4)])));

return statearr_17544;
})();
var inst_16913 = [new cljs.core.Keyword(null,"start_time","start_time",(889556682)),new cljs.core.Keyword(null,"budget","budget",(-405386281))];
var inst_16914 = cljs.core.PersistentVector.EMPTY_NODE;
var inst_16915 = [new cljs.core.Keyword(null,"quantity","quantity",(-1929050694)),new cljs.core.Keyword(null,"contract","contract",(798152745))];
var inst_16916 = ["326000.0000 EFX",e2e.proposals.token_acc];
var inst_16917 = cljs.core.PersistentHashMap.fromArrays(inst_16915,inst_16916);
var inst_16918 = [inst_16917];
var inst_16919 = (new cljs.core.PersistentVector(null,(1),(5),inst_16914,inst_16918,null));
var inst_16920 = ["2021-01-01 12:00:00",inst_16919];
var inst_16921 = cljs.core.PersistentHashMap.fromArrays(inst_16913,inst_16920);
var inst_16922 = eos_cljs.core.transact.call(null,e2e.proposals.prop_acc,"addcycle",inst_16921);
var inst_16923 = cljs.core.async.interop.p__GT_c.call(null,inst_16922);
var state_17518__$1 = state_17518;
return cljs.core.async.impl.ioc_helpers.take_BANG_.call(null,state_17518__$1,(10),inst_16923);
} else {
if((state_val_17519 === (34))){
var inst_17042 = (state_17518[(2)]);
var _ = (function (){var statearr_17545 = state_17518;
(statearr_17545[(4)] = cljs.core.rest.call(null,(state_17518[(4)])));

return statearr_17545;
})();
var state_17518__$1 = state_17518;
var statearr_17546_18041 = state_17518__$1;
(statearr_17546_18041[(2)] = inst_17042);

(statearr_17546_18041[(1)] = (22));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (66))){
var state_17518__$1 = state_17518;
var statearr_17547_18042 = state_17518__$1;
(statearr_17547_18042[(2)] = true);

(statearr_17547_18042[(1)] = (68));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (98))){
var inst_17281 = (state_17518[(11)]);
var inst_17281__$1 = (state_17518[(2)]);
var inst_17282 = (inst_17281__$1 instanceof cljs.core.ExceptionInfo);
var inst_17283 = cljs.core.ex_data.call(null,inst_17281__$1);
var inst_17284 = new cljs.core.Keyword(null,"error","error",(-978969032)).cljs$core$IFn$_invoke$arity$1(inst_17283);
var inst_17285 = cljs.core._EQ_.call(null,inst_17284,new cljs.core.Keyword(null,"promise-error","promise-error",(-90673560)));
var inst_17286 = ((inst_17282) && (inst_17285));
var state_17518__$1 = (function (){var statearr_17548 = state_17518;
(statearr_17548[(11)] = inst_17281__$1);

return statearr_17548;
})();
if(cljs.core.truth_(inst_17286)){
var statearr_17549_18043 = state_17518__$1;
(statearr_17549_18043[(1)] = (99));

} else {
var statearr_17550_18044 = state_17518__$1;
(statearr_17550_18044[(1)] = (100));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (130))){
var inst_17396 = (state_17518[(12)]);
var inst_17396__$1 = (state_17518[(2)]);
var inst_17397 = (inst_17396__$1 instanceof cljs.core.ExceptionInfo);
var inst_17398 = cljs.core.ex_data.call(null,inst_17396__$1);
var inst_17399 = new cljs.core.Keyword(null,"error","error",(-978969032)).cljs$core$IFn$_invoke$arity$1(inst_17398);
var inst_17400 = cljs.core._EQ_.call(null,inst_17399,new cljs.core.Keyword(null,"promise-error","promise-error",(-90673560)));
var inst_17401 = ((inst_17397) && (inst_17400));
var state_17518__$1 = (function (){var statearr_17551 = state_17518;
(statearr_17551[(12)] = inst_17396__$1);

return statearr_17551;
})();
if(cljs.core.truth_(inst_17401)){
var statearr_17552_18045 = state_17518__$1;
(statearr_17552_18045[(1)] = (131));

} else {
var statearr_17553_18046 = state_17518__$1;
(statearr_17553_18046[(1)] = (132));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (3))){
var inst_16966 = (state_17518[(2)]);
var state_17518__$1 = (function (){var statearr_17554 = state_17518;
(statearr_17554[(13)] = inst_16966);

return statearr_17554;
})();
var statearr_17555_18047 = state_17518__$1;
(statearr_17555_18047[(2)] = null);

(statearr_17555_18047[(1)] = (21));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (35))){
var inst_17015 = (state_17518[(2)]);
var inst_17016 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_17017 = true;
var inst_17018 = [new cljs.core.Keyword(null,"error","error",(-978969032)),null,inst_17017,inst_17015];
var inst_17019 = cljs.core.PersistentHashMap.fromArrays(inst_17016,inst_17018);
var inst_17020 = cljs.test.do_report.call(null,inst_17019);
var state_17518__$1 = state_17518;
var statearr_17556_18048 = state_17518__$1;
(statearr_17556_18048[(2)] = inst_17020);

(statearr_17556_18048[(1)] = (34));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (67))){
var state_17518__$1 = state_17518;
var statearr_17557_18049 = state_17518__$1;
(statearr_17557_18049[(2)] = false);

(statearr_17557_18049[(1)] = (68));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (99))){
var inst_17281 = (state_17518[(11)]);
var inst_17288 = (function(){throw inst_17281})();
var state_17518__$1 = state_17518;
var statearr_17558_18050 = state_17518__$1;
(statearr_17558_18050[(2)] = inst_17288);

(statearr_17558_18050[(1)] = (101));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (131))){
var inst_17396 = (state_17518[(12)]);
var inst_17403 = (function(){throw inst_17396})();
var state_17518__$1 = state_17518;
var statearr_17560_18051 = state_17518__$1;
(statearr_17560_18051[(2)] = inst_17403);

(statearr_17560_18051[(1)] = (133));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (4))){
var inst_16888 = (state_17518[(2)]);
var inst_16889 = cljs.core.prn.call(null,"test failed with ",inst_16888);
var state_17518__$1 = (function (){var statearr_17561 = state_17518;
(statearr_17561[(14)] = inst_16889);

return statearr_17561;
})();
var statearr_17562_18052 = state_17518__$1;
(statearr_17562_18052[(2)] = null);

(statearr_17562_18052[(1)] = (5));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (36))){
var _ = (function (){var statearr_17563 = state_17518;
(statearr_17563[(4)] = cljs.core.rest.call(null,(state_17518[(4)])));

return statearr_17563;
})();
var state_17518__$1 = state_17518;
var ex17559 = (state_17518__$1[(2)]);
var statearr_17564_18053 = state_17518__$1;
(statearr_17564_18053[(5)] = ex17559);


var statearr_17565_18054 = state_17518__$1;
(statearr_17565_18054[(1)] = (35));

(statearr_17565_18054[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (68))){
var inst_17156 = (state_17518[(2)]);
var state_17518__$1 = state_17518;
var statearr_17566_18055 = state_17518__$1;
(statearr_17566_18055[(2)] = inst_17156);

(statearr_17566_18055[(1)] = (65));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (100))){
var inst_17281 = (state_17518[(11)]);
var state_17518__$1 = state_17518;
var statearr_17567_18056 = state_17518__$1;
(statearr_17567_18056[(2)] = inst_17281);

(statearr_17567_18056[(1)] = (101));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (132))){
var inst_17396 = (state_17518[(12)]);
var state_17518__$1 = state_17518;
var statearr_17568_18057 = state_17518__$1;
(statearr_17568_18057[(2)] = inst_17396);

(statearr_17568_18057[(1)] = (133));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (5))){
var _ = (function (){var statearr_17569 = state_17518;
(statearr_17569[(4)] = cljs.core.cons.call(null,(8),(state_17518[(4)])));

return statearr_17569;
})();
var inst_16901 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002))];
var inst_16902 = [new cljs.core.Keyword(null,"fail","fail",(1706214930)),null];
var inst_16903 = cljs.core.PersistentHashMap.fromArrays(inst_16901,inst_16902);
var inst_16904 = cljs.test.do_report.call(null,inst_16903);
var ___$1 = (function (){var statearr_17570 = state_17518;
(statearr_17570[(4)] = cljs.core.rest.call(null,(state_17518[(4)])));

return statearr_17570;
})();
var state_17518__$1 = state_17518;
var statearr_17571_18058 = state_17518__$1;
(statearr_17571_18058[(2)] = inst_16904);

(statearr_17571_18058[(1)] = (6));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (37))){
var inst_17027 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_17028 = true;
var inst_17029 = [new cljs.core.Keyword(null,"pass","pass",(1574159993)),null,inst_17028,true];
var inst_17030 = cljs.core.PersistentHashMap.fromArrays(inst_17027,inst_17029);
var inst_17031 = cljs.test.do_report.call(null,inst_17030);
var state_17518__$1 = state_17518;
var statearr_17572_18059 = state_17518__$1;
(statearr_17572_18059[(2)] = inst_17031);

(statearr_17572_18059[(1)] = (39));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (69))){
var inst_17143 = (state_17518[(15)]);
var inst_17161 = cljs.core.apply.call(null,cljs.core.hash_map,inst_17143);
var state_17518__$1 = state_17518;
var statearr_17573_18060 = state_17518__$1;
(statearr_17573_18060[(2)] = inst_17161);

(statearr_17573_18060[(1)] = (71));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (101))){
var inst_17292 = (state_17518[(16)]);
var inst_17291 = (state_17518[(2)]);
var inst_17292__$1 = cljs.core.nth.call(null,inst_17291,(0),null);
var inst_17294 = (inst_17292__$1 == null);
var inst_17295 = cljs.core.not.call(null,inst_17294);
var state_17518__$1 = (function (){var statearr_17574 = state_17518;
(statearr_17574[(16)] = inst_17292__$1);

return statearr_17574;
})();
if(inst_17295){
var statearr_17575_18061 = state_17518__$1;
(statearr_17575_18061[(1)] = (102));

} else {
var statearr_17576_18062 = state_17518__$1;
(statearr_17576_18062[(1)] = (103));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (133))){
var inst_17406 = (state_17518[(2)]);
var state_17518__$1 = (function (){var statearr_17577 = state_17518;
(statearr_17577[(17)] = inst_17406);

return statearr_17577;
})();
var statearr_17578_18063 = state_17518__$1;
(statearr_17578_18063[(2)] = null);

(statearr_17578_18063[(1)] = (134));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (6))){
var inst_16907 = (state_17518[(2)]);
var state_17518__$1 = state_17518;
var statearr_17579_18064 = state_17518__$1;
(statearr_17579_18064[(2)] = inst_16907);

(statearr_17579_18064[(1)] = (3));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (38))){
var inst_17033 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_17034 = true;
var inst_17035 = [new cljs.core.Keyword(null,"fail","fail",(1706214930)),null,inst_17034,true];
var inst_17036 = cljs.core.PersistentHashMap.fromArrays(inst_17033,inst_17035);
var inst_17037 = cljs.test.do_report.call(null,inst_17036);
var state_17518__$1 = state_17518;
var statearr_17580_18065 = state_17518__$1;
(statearr_17580_18065[(2)] = inst_17037);

(statearr_17580_18065[(1)] = (39));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (70))){
var inst_17143 = (state_17518[(15)]);
var state_17518__$1 = state_17518;
var statearr_17581_18066 = state_17518__$1;
(statearr_17581_18066[(2)] = inst_17143);

(statearr_17581_18066[(1)] = (71));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (102))){
var inst_17292 = (state_17518[(16)]);
var inst_17297 = inst_17292.cljs$lang$protocol_mask$partition0$;
var inst_17298 = (inst_17297 & (64));
var inst_17299 = inst_17292.cljs$core$ISeq$;
var inst_17300 = (cljs.core.PROTOCOL_SENTINEL === inst_17299);
var inst_17301 = ((inst_17298) || (inst_17300));
var state_17518__$1 = state_17518;
if(cljs.core.truth_(inst_17301)){
var statearr_17582_18067 = state_17518__$1;
(statearr_17582_18067[(1)] = (105));

} else {
var statearr_17583_18068 = state_17518__$1;
(statearr_17583_18068[(1)] = (106));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (134))){
var _ = (function (){var statearr_17584 = state_17518;
(statearr_17584[(4)] = cljs.core.cons.call(null,(137),(state_17518[(4)])));

return statearr_17584;
})();
var state_17518__$1 = state_17518;
var statearr_17585_18069 = state_17518__$1;
(statearr_17585_18069[(1)] = (138));



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (7))){
var inst_16890 = (state_17518[(2)]);
var inst_16891 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_16892 = null;
var inst_16893 = [new cljs.core.Keyword(null,"error","error",(-978969032)),null,inst_16892,inst_16890];
var inst_16894 = cljs.core.PersistentHashMap.fromArrays(inst_16891,inst_16893);
var inst_16895 = cljs.test.do_report.call(null,inst_16894);
var state_17518__$1 = state_17518;
var statearr_17587_18070 = state_17518__$1;
(statearr_17587_18070[(2)] = inst_16895);

(statearr_17587_18070[(1)] = (6));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (39))){
var inst_17039 = (state_17518[(2)]);
var _ = (function (){var statearr_17588 = state_17518;
(statearr_17588[(4)] = cljs.core.rest.call(null,(state_17518[(4)])));

return statearr_17588;
})();
var state_17518__$1 = (function (){var statearr_17589 = state_17518;
(statearr_17589[(18)] = inst_17039);

return statearr_17589;
})();
var statearr_17590_18071 = state_17518__$1;
(statearr_17590_18071[(2)] = true);

(statearr_17590_18071[(1)] = (34));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (71))){
var inst_17164 = (state_17518[(2)]);
var inst_17165 = cljs.core.get.call(null,inst_17164,"current_cycle");
var state_17518__$1 = (function (){var statearr_17591 = state_17518;
(statearr_17591[(19)] = inst_17165);

return statearr_17591;
})();
var statearr_17592_18072 = state_17518__$1;
(statearr_17592_18072[(2)] = null);

(statearr_17592_18072[(1)] = (72));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (103))){
var state_17518__$1 = state_17518;
var statearr_17594_18073 = state_17518__$1;
(statearr_17594_18073[(2)] = false);

(statearr_17594_18073[(1)] = (104));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (135))){
var inst_17434 = (state_17518[(2)]);
var _ = (function (){var statearr_17595 = state_17518;
(statearr_17595[(4)] = cljs.core.rest.call(null,(state_17518[(4)])));

return statearr_17595;
})();
var state_17518__$1 = state_17518;
var statearr_17596_18074 = state_17518__$1;
(statearr_17596_18074[(2)] = inst_17434);

(statearr_17596_18074[(1)] = (123));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (8))){
var _ = (function (){var statearr_17597 = state_17518;
(statearr_17597[(4)] = cljs.core.rest.call(null,(state_17518[(4)])));

return statearr_17597;
})();
var state_17518__$1 = state_17518;
var ex17593 = (state_17518__$1[(2)]);
var statearr_17598_18075 = state_17518__$1;
(statearr_17598_18075[(5)] = ex17593);


var statearr_17599_18076 = state_17518__$1;
(statearr_17599_18076[(1)] = (7));

(statearr_17599_18076[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (40))){
var _ = (function (){var statearr_17600 = state_17518;
(statearr_17600[(4)] = cljs.core.cons.call(null,(47),(state_17518[(4)])));

return statearr_17600;
})();
var inst_17071 = [new cljs.core.Keyword(null,"start_time","start_time",(889556682)),new cljs.core.Keyword(null,"budget","budget",(-405386281))];
var inst_17072 = cljs.core.PersistentVector.EMPTY_NODE;
var inst_17073 = [new cljs.core.Keyword(null,"quantity","quantity",(-1929050694)),new cljs.core.Keyword(null,"contract","contract",(798152745))];
var inst_17074 = ["326000.2000 EFX",e2e.proposals.token_acc];
var inst_17075 = cljs.core.PersistentHashMap.fromArrays(inst_17073,inst_17074);
var inst_17076 = [inst_17075];
var inst_17077 = (new cljs.core.PersistentVector(null,(1),(5),inst_17072,inst_17076,null));
var inst_17078 = ["2021-01-01 12:00:00",inst_17077];
var inst_17079 = cljs.core.PersistentHashMap.fromArrays(inst_17071,inst_17078);
var inst_17080 = eos_cljs.core.transact.call(null,e2e.proposals.prop_acc,"addcycle",inst_17079);
var inst_17081 = cljs.core.async.interop.p__GT_c.call(null,inst_17080);
var state_17518__$1 = state_17518;
return cljs.core.async.impl.ioc_helpers.take_BANG_.call(null,state_17518__$1,(48),inst_17081);
} else {
if((state_val_17519 === (72))){
var inst_17165 = (state_17518[(19)]);
var inst_17178 = (state_17518[(20)]);
var inst_17179 = (state_17518[(21)]);
var _ = (function (){var statearr_17601 = state_17518;
(statearr_17601[(4)] = cljs.core.cons.call(null,(75),(state_17518[(4)])));

return statearr_17601;
})();
var inst_17177 = (new cljs.core.List(null,(0),null,(1),null));
var inst_17178__$1 = (new cljs.core.List(null,inst_17165,inst_17177,(2),null));
var inst_17179__$1 = cljs.core.apply.call(null,cljs.core._EQ_,inst_17178__$1);
var state_17518__$1 = (function (){var statearr_17602 = state_17518;
(statearr_17602[(20)] = inst_17178__$1);

(statearr_17602[(21)] = inst_17179__$1);

return statearr_17602;
})();
if(cljs.core.truth_(inst_17179__$1)){
var statearr_17603_18077 = state_17518__$1;
(statearr_17603_18077[(1)] = (76));

} else {
var statearr_17604_18078 = state_17518__$1;
(statearr_17604_18078[(1)] = (77));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (104))){
var inst_17308 = (state_17518[(2)]);
var state_17518__$1 = state_17518;
if(cljs.core.truth_(inst_17308)){
var statearr_17606_18079 = state_17518__$1;
(statearr_17606_18079[(1)] = (108));

} else {
var statearr_17607_18080 = state_17518__$1;
(statearr_17607_18080[(1)] = (109));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (136))){
var inst_17407 = (state_17518[(2)]);
var inst_17408 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_17409 = true;
var inst_17410 = [new cljs.core.Keyword(null,"error","error",(-978969032)),"can progress cycle",inst_17409,inst_17407];
var inst_17411 = cljs.core.PersistentHashMap.fromArrays(inst_17408,inst_17410);
var inst_17412 = cljs.test.do_report.call(null,inst_17411);
var state_17518__$1 = state_17518;
var statearr_17608_18081 = state_17518__$1;
(statearr_17608_18081[(2)] = inst_17412);

(statearr_17608_18081[(1)] = (135));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (9))){
var _ = (function (){var statearr_17609 = state_17518;
(statearr_17609[(4)] = cljs.core.rest.call(null,(state_17518[(4)])));

return statearr_17609;
})();
var state_17518__$1 = state_17518;
var ex17605 = (state_17518__$1[(2)]);
var statearr_17610_18082 = state_17518__$1;
(statearr_17610_18082[(5)] = ex17605);


if((ex17605 instanceof Error)){
var statearr_17611_18083 = state_17518__$1;
(statearr_17611_18083[(1)] = (4));

(statearr_17611_18083[(5)] = null);

} else {
throw ex17605;

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (41))){
var inst_17124 = (state_17518[(2)]);
var inst_17129 = eos_cljs.core.get_table_rows.call(null,e2e.proposals.prop_acc,e2e.proposals.prop_acc,"config");
var inst_17130 = cljs.core.async.interop.p__GT_c.call(null,inst_17129);
var state_17518__$1 = (function (){var statearr_17612 = state_17518;
(statearr_17612[(22)] = inst_17124);

return statearr_17612;
})();
return cljs.core.async.impl.ioc_helpers.take_BANG_.call(null,state_17518__$1,(59),inst_17130);
} else {
if((state_val_17519 === (73))){
var inst_17202 = (state_17518[(2)]);
var state_17518__$1 = (function (){var statearr_17614 = state_17518;
(statearr_17614[(23)] = inst_17202);

return statearr_17614;
})();
var statearr_17615_18084 = state_17518__$1;
(statearr_17615_18084[(2)] = null);

(statearr_17615_18084[(1)] = (79));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (105))){
var state_17518__$1 = state_17518;
var statearr_17616_18085 = state_17518__$1;
(statearr_17616_18085[(2)] = true);

(statearr_17616_18085[(1)] = (107));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (137))){
var _ = (function (){var statearr_17617 = state_17518;
(statearr_17617[(4)] = cljs.core.rest.call(null,(state_17518[(4)])));

return statearr_17617;
})();
var state_17518__$1 = state_17518;
var ex17613 = (state_17518__$1[(2)]);
var statearr_17618_18086 = state_17518__$1;
(statearr_17618_18086[(5)] = ex17613);


var statearr_17619_18087 = state_17518__$1;
(statearr_17619_18087[(1)] = (136));

(statearr_17619_18087[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (10))){
var inst_16925 = (state_17518[(24)]);
var inst_16925__$1 = (state_17518[(2)]);
var inst_16926 = (inst_16925__$1 instanceof cljs.core.ExceptionInfo);
var inst_16927 = cljs.core.ex_data.call(null,inst_16925__$1);
var inst_16928 = new cljs.core.Keyword(null,"error","error",(-978969032)).cljs$core$IFn$_invoke$arity$1(inst_16927);
var inst_16929 = cljs.core._EQ_.call(null,inst_16928,new cljs.core.Keyword(null,"promise-error","promise-error",(-90673560)));
var inst_16930 = ((inst_16926) && (inst_16929));
var state_17518__$1 = (function (){var statearr_17620 = state_17518;
(statearr_17620[(24)] = inst_16925__$1);

return statearr_17620;
})();
if(cljs.core.truth_(inst_16930)){
var statearr_17621_18088 = state_17518__$1;
(statearr_17621_18088[(1)] = (11));

} else {
var statearr_17622_18089 = state_17518__$1;
(statearr_17622_18089[(1)] = (12));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (42))){
var inst_17046 = (state_17518[(2)]);
var inst_17047 = cljs.core.prn.call(null,"test failed with ",inst_17046);
var state_17518__$1 = (function (){var statearr_17623 = state_17518;
(statearr_17623[(25)] = inst_17047);

return statearr_17623;
})();
var statearr_17624_18090 = state_17518__$1;
(statearr_17624_18090[(2)] = null);

(statearr_17624_18090[(1)] = (43));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (74))){
var inst_17166 = (state_17518[(2)]);
var inst_17167 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_17168 = cljs.core.list(new cljs.core.Symbol(null,"=","=",(-1501502141),null),new cljs.core.Symbol(null,"cycle","cycle",(-1944070485),null),(0));
var inst_17169 = [new cljs.core.Keyword(null,"error","error",(-978969032)),null,inst_17168,inst_17166];
var inst_17170 = cljs.core.PersistentHashMap.fromArrays(inst_17167,inst_17169);
var inst_17171 = cljs.test.do_report.call(null,inst_17170);
var state_17518__$1 = state_17518;
var statearr_17625_18091 = state_17518__$1;
(statearr_17625_18091[(2)] = inst_17171);

(statearr_17625_18091[(1)] = (73));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (106))){
var state_17518__$1 = state_17518;
var statearr_17626_18092 = state_17518__$1;
(statearr_17626_18092[(2)] = false);

(statearr_17626_18092[(1)] = (107));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (138))){
var inst_17419 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_17420 = true;
var inst_17421 = [new cljs.core.Keyword(null,"pass","pass",(1574159993)),"can progress cycle",inst_17420,true];
var inst_17422 = cljs.core.PersistentHashMap.fromArrays(inst_17419,inst_17421);
var inst_17423 = cljs.test.do_report.call(null,inst_17422);
var state_17518__$1 = state_17518;
var statearr_17627_18093 = state_17518__$1;
(statearr_17627_18093[(2)] = inst_17423);

(statearr_17627_18093[(1)] = (140));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (11))){
var inst_16925 = (state_17518[(24)]);
var inst_16932 = (function(){throw inst_16925})();
var state_17518__$1 = state_17518;
var statearr_17629_18094 = state_17518__$1;
(statearr_17629_18094[(2)] = inst_16932);

(statearr_17629_18094[(1)] = (13));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (43))){
var _ = (function (){var statearr_17630 = state_17518;
(statearr_17630[(4)] = cljs.core.cons.call(null,(46),(state_17518[(4)])));

return statearr_17630;
})();
var inst_17059 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002))];
var inst_17060 = [new cljs.core.Keyword(null,"fail","fail",(1706214930)),null];
var inst_17061 = cljs.core.PersistentHashMap.fromArrays(inst_17059,inst_17060);
var inst_17062 = cljs.test.do_report.call(null,inst_17061);
var ___$1 = (function (){var statearr_17631 = state_17518;
(statearr_17631[(4)] = cljs.core.rest.call(null,(state_17518[(4)])));

return statearr_17631;
})();
var state_17518__$1 = state_17518;
var statearr_17632_18095 = state_17518__$1;
(statearr_17632_18095[(2)] = inst_17062);

(statearr_17632_18095[(1)] = (44));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (75))){
var _ = (function (){var statearr_17633 = state_17518;
(statearr_17633[(4)] = cljs.core.rest.call(null,(state_17518[(4)])));

return statearr_17633;
})();
var state_17518__$1 = state_17518;
var ex17628 = (state_17518__$1[(2)]);
var statearr_17634_18096 = state_17518__$1;
(statearr_17634_18096[(5)] = ex17628);


var statearr_17635_18097 = state_17518__$1;
(statearr_17635_18097[(1)] = (74));

(statearr_17635_18097[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (107))){
var inst_17305 = (state_17518[(2)]);
var state_17518__$1 = state_17518;
var statearr_17636_18098 = state_17518__$1;
(statearr_17636_18098[(2)] = inst_17305);

(statearr_17636_18098[(1)] = (104));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (139))){
var inst_17425 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_17426 = true;
var inst_17427 = [new cljs.core.Keyword(null,"fail","fail",(1706214930)),"can progress cycle",inst_17426,true];
var inst_17428 = cljs.core.PersistentHashMap.fromArrays(inst_17425,inst_17427);
var inst_17429 = cljs.test.do_report.call(null,inst_17428);
var state_17518__$1 = state_17518;
var statearr_17637_18099 = state_17518__$1;
(statearr_17637_18099[(2)] = inst_17429);

(statearr_17637_18099[(1)] = (140));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (12))){
var inst_16925 = (state_17518[(24)]);
var state_17518__$1 = state_17518;
var statearr_17638_18100 = state_17518__$1;
(statearr_17638_18100[(2)] = inst_16925);

(statearr_17638_18100[(1)] = (13));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (44))){
var inst_17065 = (state_17518[(2)]);
var state_17518__$1 = state_17518;
var statearr_17639_18101 = state_17518__$1;
(statearr_17639_18101[(2)] = inst_17065);

(statearr_17639_18101[(1)] = (41));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (76))){
var inst_17178 = (state_17518[(20)]);
var inst_17181 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_17182 = cljs.core.list(new cljs.core.Symbol(null,"=","=",(-1501502141),null),new cljs.core.Symbol(null,"cycle","cycle",(-1944070485),null),(0));
var inst_17183 = cljs.core.cons.call(null,cljs.core._EQ_,inst_17178);
var inst_17184 = [new cljs.core.Keyword(null,"pass","pass",(1574159993)),null,inst_17182,inst_17183];
var inst_17185 = cljs.core.PersistentHashMap.fromArrays(inst_17181,inst_17184);
var inst_17186 = cljs.test.do_report.call(null,inst_17185);
var state_17518__$1 = state_17518;
var statearr_17640_18102 = state_17518__$1;
(statearr_17640_18102[(2)] = inst_17186);

(statearr_17640_18102[(1)] = (78));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (108))){
var inst_17292 = (state_17518[(16)]);
var inst_17310 = cljs.core.apply.call(null,cljs.core.hash_map,inst_17292);
var state_17518__$1 = state_17518;
var statearr_17641_18103 = state_17518__$1;
(statearr_17641_18103[(2)] = inst_17310);

(statearr_17641_18103[(1)] = (110));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (140))){
var inst_17431 = (state_17518[(2)]);
var _ = (function (){var statearr_17642 = state_17518;
(statearr_17642[(4)] = cljs.core.rest.call(null,(state_17518[(4)])));

return statearr_17642;
})();
var state_17518__$1 = (function (){var statearr_17643 = state_17518;
(statearr_17643[(26)] = inst_17431);

return statearr_17643;
})();
var statearr_17644_18104 = state_17518__$1;
(statearr_17644_18104[(2)] = true);

(statearr_17644_18104[(1)] = (135));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (13))){
var inst_16935 = (state_17518[(2)]);
var state_17518__$1 = (function (){var statearr_17645 = state_17518;
(statearr_17645[(27)] = inst_16935);

return statearr_17645;
})();
var statearr_17646_18105 = state_17518__$1;
(statearr_17646_18105[(2)] = null);

(statearr_17646_18105[(1)] = (14));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (45))){
var inst_17048 = (state_17518[(2)]);
var inst_17049 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_17050 = null;
var inst_17051 = [new cljs.core.Keyword(null,"error","error",(-978969032)),null,inst_17050,inst_17048];
var inst_17052 = cljs.core.PersistentHashMap.fromArrays(inst_17049,inst_17051);
var inst_17053 = cljs.test.do_report.call(null,inst_17052);
var state_17518__$1 = state_17518;
var statearr_17647_18106 = state_17518__$1;
(statearr_17647_18106[(2)] = inst_17053);

(statearr_17647_18106[(1)] = (44));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (77))){
var inst_17178 = (state_17518[(20)]);
var inst_17188 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_17189 = cljs.core.list(new cljs.core.Symbol(null,"=","=",(-1501502141),null),new cljs.core.Symbol(null,"cycle","cycle",(-1944070485),null),(0));
var inst_17190 = new cljs.core.Symbol(null,"not","not",(1044554643),null);
var inst_17191 = new cljs.core.Symbol(null,"=","=",(-1501502141),null);
var inst_17192 = cljs.core.cons.call(null,inst_17191,inst_17178);
var inst_17193 = (new cljs.core.List(null,inst_17192,null,(1),null));
var inst_17194 = (new cljs.core.List(null,inst_17190,inst_17193,(2),null));
var inst_17195 = [new cljs.core.Keyword(null,"fail","fail",(1706214930)),null,inst_17189,inst_17194];
var inst_17196 = cljs.core.PersistentHashMap.fromArrays(inst_17188,inst_17195);
var inst_17197 = cljs.test.do_report.call(null,inst_17196);
var state_17518__$1 = state_17518;
var statearr_17648_18107 = state_17518__$1;
(statearr_17648_18107[(2)] = inst_17197);

(statearr_17648_18107[(1)] = (78));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (109))){
var inst_17292 = (state_17518[(16)]);
var state_17518__$1 = state_17518;
var statearr_17649_18108 = state_17518__$1;
(statearr_17649_18108[(2)] = inst_17292);

(statearr_17649_18108[(1)] = (110));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (141))){
var inst_17445 = (state_17518[(28)]);
var inst_17445__$1 = (state_17518[(2)]);
var inst_17446 = (inst_17445__$1 instanceof cljs.core.ExceptionInfo);
var inst_17447 = cljs.core.ex_data.call(null,inst_17445__$1);
var inst_17448 = new cljs.core.Keyword(null,"error","error",(-978969032)).cljs$core$IFn$_invoke$arity$1(inst_17447);
var inst_17449 = cljs.core._EQ_.call(null,inst_17448,new cljs.core.Keyword(null,"promise-error","promise-error",(-90673560)));
var inst_17450 = ((inst_17446) && (inst_17449));
var state_17518__$1 = (function (){var statearr_17651 = state_17518;
(statearr_17651[(28)] = inst_17445__$1);

return statearr_17651;
})();
if(cljs.core.truth_(inst_17450)){
var statearr_17652_18109 = state_17518__$1;
(statearr_17652_18109[(1)] = (142));

} else {
var statearr_17653_18110 = state_17518__$1;
(statearr_17653_18110[(1)] = (143));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (14))){
var _ = (function (){var statearr_17654 = state_17518;
(statearr_17654[(4)] = cljs.core.cons.call(null,(17),(state_17518[(4)])));

return statearr_17654;
})();
var state_17518__$1 = state_17518;
var statearr_17655_18111 = state_17518__$1;
(statearr_17655_18111[(1)] = (18));



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (46))){
var _ = (function (){var statearr_17657 = state_17518;
(statearr_17657[(4)] = cljs.core.rest.call(null,(state_17518[(4)])));

return statearr_17657;
})();
var state_17518__$1 = state_17518;
var ex17650 = (state_17518__$1[(2)]);
var statearr_17658_18112 = state_17518__$1;
(statearr_17658_18112[(5)] = ex17650);


var statearr_17659_18113 = state_17518__$1;
(statearr_17659_18113[(1)] = (45));

(statearr_17659_18113[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (78))){
var inst_17179 = (state_17518[(21)]);
var inst_17199 = (state_17518[(2)]);
var _ = (function (){var statearr_17660 = state_17518;
(statearr_17660[(4)] = cljs.core.rest.call(null,(state_17518[(4)])));

return statearr_17660;
})();
var state_17518__$1 = (function (){var statearr_17661 = state_17518;
(statearr_17661[(29)] = inst_17199);

return statearr_17661;
})();
var statearr_17662_18114 = state_17518__$1;
(statearr_17662_18114[(2)] = inst_17179);

(statearr_17662_18114[(1)] = (73));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (110))){
var inst_17313 = (state_17518[(2)]);
var inst_17314 = cljs.core.get.call(null,inst_17313,"current_cycle");
var state_17518__$1 = (function (){var statearr_17663 = state_17518;
(statearr_17663[(30)] = inst_17314);

return statearr_17663;
})();
var statearr_17664_18115 = state_17518__$1;
(statearr_17664_18115[(2)] = null);

(statearr_17664_18115[(1)] = (111));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (142))){
var inst_17445 = (state_17518[(28)]);
var inst_17452 = (function(){throw inst_17445})();
var state_17518__$1 = state_17518;
var statearr_17666_18116 = state_17518__$1;
(statearr_17666_18116[(2)] = inst_17452);

(statearr_17666_18116[(1)] = (144));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (15))){
var inst_16963 = (state_17518[(2)]);
var _ = (function (){var statearr_17667 = state_17518;
(statearr_17667[(4)] = cljs.core.rest.call(null,(state_17518[(4)])));

return statearr_17667;
})();
var state_17518__$1 = state_17518;
var statearr_17668_18117 = state_17518__$1;
(statearr_17668_18117[(2)] = inst_16963);

(statearr_17668_18117[(1)] = (3));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (47))){
var _ = (function (){var statearr_17669 = state_17518;
(statearr_17669[(4)] = cljs.core.rest.call(null,(state_17518[(4)])));

return statearr_17669;
})();
var state_17518__$1 = state_17518;
var ex17665 = (state_17518__$1[(2)]);
var statearr_17670_18118 = state_17518__$1;
(statearr_17670_18118[(5)] = ex17665);


if((ex17665 instanceof Error)){
var statearr_17671_18119 = state_17518__$1;
(statearr_17671_18119[(1)] = (42));

(statearr_17671_18119[(5)] = null);

} else {
throw ex17665;

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (79))){
var _ = (function (){var statearr_17672 = state_17518;
(statearr_17672[(4)] = cljs.core.cons.call(null,(86),(state_17518[(4)])));

return statearr_17672;
})();
var inst_17228 = cljs.core.PersistentHashMap.EMPTY;
var inst_17229 = eos_cljs.core.transact.call(null,e2e.proposals.prop_acc,"cycleupdate",inst_17228);
var inst_17230 = cljs.core.async.interop.p__GT_c.call(null,inst_17229);
var state_17518__$1 = state_17518;
return cljs.core.async.impl.ioc_helpers.take_BANG_.call(null,state_17518__$1,(87),inst_17230);
} else {
if((state_val_17519 === (111))){
var inst_17314 = (state_17518[(30)]);
var inst_17327 = (state_17518[(31)]);
var inst_17328 = (state_17518[(32)]);
var _ = (function (){var statearr_17673 = state_17518;
(statearr_17673[(4)] = cljs.core.cons.call(null,(114),(state_17518[(4)])));

return statearr_17673;
})();
var inst_17326 = (new cljs.core.List(null,(1),null,(1),null));
var inst_17327__$1 = (new cljs.core.List(null,inst_17314,inst_17326,(2),null));
var inst_17328__$1 = cljs.core.apply.call(null,cljs.core._EQ_,inst_17327__$1);
var state_17518__$1 = (function (){var statearr_17674 = state_17518;
(statearr_17674[(31)] = inst_17327__$1);

(statearr_17674[(32)] = inst_17328__$1);

return statearr_17674;
})();
if(cljs.core.truth_(inst_17328__$1)){
var statearr_17675_18120 = state_17518__$1;
(statearr_17675_18120[(1)] = (115));

} else {
var statearr_17676_18121 = state_17518__$1;
(statearr_17676_18121[(1)] = (116));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (143))){
var inst_17445 = (state_17518[(28)]);
var state_17518__$1 = state_17518;
var statearr_17677_18122 = state_17518__$1;
(statearr_17677_18122[(2)] = inst_17445);

(statearr_17677_18122[(1)] = (144));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (16))){
var inst_16936 = (state_17518[(2)]);
var inst_16937 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_16938 = true;
var inst_16939 = [new cljs.core.Keyword(null,"error","error",(-978969032)),null,inst_16938,inst_16936];
var inst_16940 = cljs.core.PersistentHashMap.fromArrays(inst_16937,inst_16939);
var inst_16941 = cljs.test.do_report.call(null,inst_16940);
var state_17518__$1 = state_17518;
var statearr_17678_18123 = state_17518__$1;
(statearr_17678_18123[(2)] = inst_16941);

(statearr_17678_18123[(1)] = (15));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (48))){
var inst_17083 = (state_17518[(33)]);
var inst_17083__$1 = (state_17518[(2)]);
var inst_17084 = (inst_17083__$1 instanceof cljs.core.ExceptionInfo);
var inst_17085 = cljs.core.ex_data.call(null,inst_17083__$1);
var inst_17086 = new cljs.core.Keyword(null,"error","error",(-978969032)).cljs$core$IFn$_invoke$arity$1(inst_17085);
var inst_17087 = cljs.core._EQ_.call(null,inst_17086,new cljs.core.Keyword(null,"promise-error","promise-error",(-90673560)));
var inst_17088 = ((inst_17084) && (inst_17087));
var state_17518__$1 = (function (){var statearr_17679 = state_17518;
(statearr_17679[(33)] = inst_17083__$1);

return statearr_17679;
})();
if(cljs.core.truth_(inst_17088)){
var statearr_17680_18124 = state_17518__$1;
(statearr_17680_18124[(1)] = (49));

} else {
var statearr_17681_18125 = state_17518__$1;
(statearr_17681_18125[(1)] = (50));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (80))){
var inst_17273 = (state_17518[(2)]);
var inst_17278 = eos_cljs.core.get_table_rows.call(null,e2e.proposals.prop_acc,e2e.proposals.prop_acc,"config");
var inst_17279 = cljs.core.async.interop.p__GT_c.call(null,inst_17278);
var state_17518__$1 = (function (){var statearr_17682 = state_17518;
(statearr_17682[(34)] = inst_17273);

return statearr_17682;
})();
return cljs.core.async.impl.ioc_helpers.take_BANG_.call(null,state_17518__$1,(98),inst_17279);
} else {
if((state_val_17519 === (112))){
var inst_17351 = (state_17518[(2)]);
var inst_17352 = Promise.resolve((1));
var inst_17353 = eos_cljs.core.wait_block.call(null,inst_17352);
var inst_17354 = cljs.core.async.interop.p__GT_c.call(null,inst_17353);
var state_17518__$1 = (function (){var statearr_17684 = state_17518;
(statearr_17684[(35)] = inst_17351);

return statearr_17684;
})();
return cljs.core.async.impl.ioc_helpers.take_BANG_.call(null,state_17518__$1,(118),inst_17354);
} else {
if((state_val_17519 === (144))){
var inst_17456 = (state_17518[(36)]);
var inst_17455 = (state_17518[(2)]);
var inst_17456__$1 = cljs.core.nth.call(null,inst_17455,(0),null);
var inst_17458 = (inst_17456__$1 == null);
var inst_17459 = cljs.core.not.call(null,inst_17458);
var state_17518__$1 = (function (){var statearr_17685 = state_17518;
(statearr_17685[(36)] = inst_17456__$1);

return statearr_17685;
})();
if(inst_17459){
var statearr_17686_18126 = state_17518__$1;
(statearr_17686_18126[(1)] = (145));

} else {
var statearr_17687_18127 = state_17518__$1;
(statearr_17687_18127[(1)] = (146));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (17))){
var _ = (function (){var statearr_17688 = state_17518;
(statearr_17688[(4)] = cljs.core.rest.call(null,(state_17518[(4)])));

return statearr_17688;
})();
var state_17518__$1 = state_17518;
var ex17683 = (state_17518__$1[(2)]);
var statearr_17689_18128 = state_17518__$1;
(statearr_17689_18128[(5)] = ex17683);


var statearr_17690_18129 = state_17518__$1;
(statearr_17690_18129[(1)] = (16));

(statearr_17690_18129[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (49))){
var inst_17083 = (state_17518[(33)]);
var inst_17090 = (function(){throw inst_17083})();
var state_17518__$1 = state_17518;
var statearr_17691_18130 = state_17518__$1;
(statearr_17691_18130[(2)] = inst_17090);

(statearr_17691_18130[(1)] = (51));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (81))){
var inst_17203 = (state_17518[(2)]);
var inst_17204 = cljs.core.prn.call(null,"test failed with ",inst_17203);
var state_17518__$1 = (function (){var statearr_17692 = state_17518;
(statearr_17692[(37)] = inst_17204);

return statearr_17692;
})();
var statearr_17693_18131 = state_17518__$1;
(statearr_17693_18131[(2)] = null);

(statearr_17693_18131[(1)] = (82));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (113))){
var inst_17315 = (state_17518[(2)]);
var inst_17316 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_17317 = cljs.core.list(new cljs.core.Symbol(null,"=","=",(-1501502141),null),new cljs.core.Symbol(null,"cycle","cycle",(-1944070485),null),(1));
var inst_17318 = [new cljs.core.Keyword(null,"error","error",(-978969032)),null,inst_17317,inst_17315];
var inst_17319 = cljs.core.PersistentHashMap.fromArrays(inst_17316,inst_17318);
var inst_17320 = cljs.test.do_report.call(null,inst_17319);
var state_17518__$1 = state_17518;
var statearr_17694_18132 = state_17518__$1;
(statearr_17694_18132[(2)] = inst_17320);

(statearr_17694_18132[(1)] = (112));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (145))){
var inst_17456 = (state_17518[(36)]);
var inst_17461 = inst_17456.cljs$lang$protocol_mask$partition0$;
var inst_17462 = (inst_17461 & (64));
var inst_17463 = inst_17456.cljs$core$ISeq$;
var inst_17464 = (cljs.core.PROTOCOL_SENTINEL === inst_17463);
var inst_17465 = ((inst_17462) || (inst_17464));
var state_17518__$1 = state_17518;
if(cljs.core.truth_(inst_17465)){
var statearr_17695_18133 = state_17518__$1;
(statearr_17695_18133[(1)] = (148));

} else {
var statearr_17696_18134 = state_17518__$1;
(statearr_17696_18134[(1)] = (149));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (18))){
var inst_16948 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_16949 = true;
var inst_16950 = [new cljs.core.Keyword(null,"pass","pass",(1574159993)),null,inst_16949,true];
var inst_16951 = cljs.core.PersistentHashMap.fromArrays(inst_16948,inst_16950);
var inst_16952 = cljs.test.do_report.call(null,inst_16951);
var state_17518__$1 = state_17518;
var statearr_17697_18135 = state_17518__$1;
(statearr_17697_18135[(2)] = inst_16952);

(statearr_17697_18135[(1)] = (20));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (50))){
var inst_17083 = (state_17518[(33)]);
var state_17518__$1 = state_17518;
var statearr_17699_18136 = state_17518__$1;
(statearr_17699_18136[(2)] = inst_17083);

(statearr_17699_18136[(1)] = (51));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (82))){
var _ = (function (){var statearr_17700 = state_17518;
(statearr_17700[(4)] = cljs.core.cons.call(null,(85),(state_17518[(4)])));

return statearr_17700;
})();
var inst_17216 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002))];
var inst_17217 = [new cljs.core.Keyword(null,"fail","fail",(1706214930)),"can progress cycle"];
var inst_17218 = cljs.core.PersistentHashMap.fromArrays(inst_17216,inst_17217);
var inst_17219 = cljs.test.do_report.call(null,inst_17218);
var ___$1 = (function (){var statearr_17701 = state_17518;
(statearr_17701[(4)] = cljs.core.rest.call(null,(state_17518[(4)])));

return statearr_17701;
})();
var state_17518__$1 = state_17518;
var statearr_17702_18137 = state_17518__$1;
(statearr_17702_18137[(2)] = inst_17219);

(statearr_17702_18137[(1)] = (83));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (114))){
var _ = (function (){var statearr_17703 = state_17518;
(statearr_17703[(4)] = cljs.core.rest.call(null,(state_17518[(4)])));

return statearr_17703;
})();
var state_17518__$1 = state_17518;
var ex17698 = (state_17518__$1[(2)]);
var statearr_17704_18138 = state_17518__$1;
(statearr_17704_18138[(5)] = ex17698);


var statearr_17705_18139 = state_17518__$1;
(statearr_17705_18139[(1)] = (113));

(statearr_17705_18139[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (146))){
var state_17518__$1 = state_17518;
var statearr_17706_18140 = state_17518__$1;
(statearr_17706_18140[(2)] = false);

(statearr_17706_18140[(1)] = (147));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (19))){
var inst_16954 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_16955 = true;
var inst_16956 = [new cljs.core.Keyword(null,"fail","fail",(1706214930)),null,inst_16955,true];
var inst_16957 = cljs.core.PersistentHashMap.fromArrays(inst_16954,inst_16956);
var inst_16958 = cljs.test.do_report.call(null,inst_16957);
var state_17518__$1 = state_17518;
var statearr_17707_18141 = state_17518__$1;
(statearr_17707_18141[(2)] = inst_16958);

(statearr_17707_18141[(1)] = (20));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (51))){
var inst_17093 = (state_17518[(2)]);
var state_17518__$1 = (function (){var statearr_17708 = state_17518;
(statearr_17708[(38)] = inst_17093);

return statearr_17708;
})();
var statearr_17709_18142 = state_17518__$1;
(statearr_17709_18142[(2)] = null);

(statearr_17709_18142[(1)] = (52));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (83))){
var inst_17222 = (state_17518[(2)]);
var state_17518__$1 = state_17518;
var statearr_17710_18143 = state_17518__$1;
(statearr_17710_18143[(2)] = inst_17222);

(statearr_17710_18143[(1)] = (80));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (115))){
var inst_17327 = (state_17518[(31)]);
var inst_17330 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_17331 = cljs.core.list(new cljs.core.Symbol(null,"=","=",(-1501502141),null),new cljs.core.Symbol(null,"cycle","cycle",(-1944070485),null),(1));
var inst_17332 = cljs.core.cons.call(null,cljs.core._EQ_,inst_17327);
var inst_17333 = [new cljs.core.Keyword(null,"pass","pass",(1574159993)),null,inst_17331,inst_17332];
var inst_17334 = cljs.core.PersistentHashMap.fromArrays(inst_17330,inst_17333);
var inst_17335 = cljs.test.do_report.call(null,inst_17334);
var state_17518__$1 = state_17518;
var statearr_17711_18144 = state_17518__$1;
(statearr_17711_18144[(2)] = inst_17335);

(statearr_17711_18144[(1)] = (117));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (147))){
var inst_17472 = (state_17518[(2)]);
var state_17518__$1 = state_17518;
if(cljs.core.truth_(inst_17472)){
var statearr_17712_18145 = state_17518__$1;
(statearr_17712_18145[(1)] = (151));

} else {
var statearr_17713_18146 = state_17518__$1;
(statearr_17713_18146[(1)] = (152));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (20))){
var inst_16960 = (state_17518[(2)]);
var _ = (function (){var statearr_17714 = state_17518;
(statearr_17714[(4)] = cljs.core.rest.call(null,(state_17518[(4)])));

return statearr_17714;
})();
var state_17518__$1 = (function (){var statearr_17715 = state_17518;
(statearr_17715[(39)] = inst_16960);

return statearr_17715;
})();
var statearr_17716_18147 = state_17518__$1;
(statearr_17716_18147[(2)] = true);

(statearr_17716_18147[(1)] = (15));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (52))){
var _ = (function (){var statearr_17717 = state_17518;
(statearr_17717[(4)] = cljs.core.cons.call(null,(55),(state_17518[(4)])));

return statearr_17717;
})();
var state_17518__$1 = state_17518;
var statearr_17718_18148 = state_17518__$1;
(statearr_17718_18148[(1)] = (56));



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (84))){
var inst_17205 = (state_17518[(2)]);
var inst_17206 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_17207 = null;
var inst_17208 = [new cljs.core.Keyword(null,"error","error",(-978969032)),"can progress cycle",inst_17207,inst_17205];
var inst_17209 = cljs.core.PersistentHashMap.fromArrays(inst_17206,inst_17208);
var inst_17210 = cljs.test.do_report.call(null,inst_17209);
var state_17518__$1 = state_17518;
var statearr_17720_18149 = state_17518__$1;
(statearr_17720_18149[(2)] = inst_17210);

(statearr_17720_18149[(1)] = (83));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (116))){
var inst_17327 = (state_17518[(31)]);
var inst_17337 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_17338 = cljs.core.list(new cljs.core.Symbol(null,"=","=",(-1501502141),null),new cljs.core.Symbol(null,"cycle","cycle",(-1944070485),null),(1));
var inst_17339 = new cljs.core.Symbol(null,"not","not",(1044554643),null);
var inst_17340 = new cljs.core.Symbol(null,"=","=",(-1501502141),null);
var inst_17341 = cljs.core.cons.call(null,inst_17340,inst_17327);
var inst_17342 = (new cljs.core.List(null,inst_17341,null,(1),null));
var inst_17343 = (new cljs.core.List(null,inst_17339,inst_17342,(2),null));
var inst_17344 = [new cljs.core.Keyword(null,"fail","fail",(1706214930)),null,inst_17338,inst_17343];
var inst_17345 = cljs.core.PersistentHashMap.fromArrays(inst_17337,inst_17344);
var inst_17346 = cljs.test.do_report.call(null,inst_17345);
var state_17518__$1 = state_17518;
var statearr_17721_18150 = state_17518__$1;
(statearr_17721_18150[(2)] = inst_17346);

(statearr_17721_18150[(1)] = (117));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (148))){
var state_17518__$1 = state_17518;
var statearr_17722_18151 = state_17518__$1;
(statearr_17722_18151[(2)] = true);

(statearr_17722_18151[(1)] = (150));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (21))){
var _ = (function (){var statearr_17724 = state_17518;
(statearr_17724[(4)] = cljs.core.cons.call(null,(28),(state_17518[(4)])));

return statearr_17724;
})();
var inst_16992 = [new cljs.core.Keyword(null,"start_time","start_time",(889556682)),new cljs.core.Keyword(null,"budget","budget",(-405386281))];
var inst_16993 = cljs.core.PersistentVector.EMPTY_NODE;
var inst_16994 = [new cljs.core.Keyword(null,"quantity","quantity",(-1929050694)),new cljs.core.Keyword(null,"contract","contract",(798152745))];
var inst_16995 = ["500.1000 EFX",e2e.proposals.token_acc];
var inst_16996 = cljs.core.PersistentHashMap.fromArrays(inst_16994,inst_16995);
var inst_16997 = [inst_16996];
var inst_16998 = (new cljs.core.PersistentVector(null,(1),(5),inst_16993,inst_16997,null));
var inst_16999 = ["2021-01-01 12:00:00",inst_16998];
var inst_17000 = cljs.core.PersistentHashMap.fromArrays(inst_16992,inst_16999);
var inst_17001 = eos_cljs.core.transact.call(null,e2e.proposals.prop_acc,"addcycle",inst_17000);
var inst_17002 = cljs.core.async.interop.p__GT_c.call(null,inst_17001);
var state_17518__$1 = state_17518;
return cljs.core.async.impl.ioc_helpers.take_BANG_.call(null,state_17518__$1,(29),inst_17002);
} else {
if((state_val_17519 === (53))){
var inst_17121 = (state_17518[(2)]);
var _ = (function (){var statearr_17725 = state_17518;
(statearr_17725[(4)] = cljs.core.rest.call(null,(state_17518[(4)])));

return statearr_17725;
})();
var state_17518__$1 = state_17518;
var statearr_17726_18152 = state_17518__$1;
(statearr_17726_18152[(2)] = inst_17121);

(statearr_17726_18152[(1)] = (41));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (85))){
var _ = (function (){var statearr_17727 = state_17518;
(statearr_17727[(4)] = cljs.core.rest.call(null,(state_17518[(4)])));

return statearr_17727;
})();
var state_17518__$1 = state_17518;
var ex17723 = (state_17518__$1[(2)]);
var statearr_17728_18153 = state_17518__$1;
(statearr_17728_18153[(5)] = ex17723);


var statearr_17729_18154 = state_17518__$1;
(statearr_17729_18154[(1)] = (84));

(statearr_17729_18154[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (117))){
var inst_17328 = (state_17518[(32)]);
var inst_17348 = (state_17518[(2)]);
var _ = (function (){var statearr_17730 = state_17518;
(statearr_17730[(4)] = cljs.core.rest.call(null,(state_17518[(4)])));

return statearr_17730;
})();
var state_17518__$1 = (function (){var statearr_17731 = state_17518;
(statearr_17731[(40)] = inst_17348);

return statearr_17731;
})();
var statearr_17732_18155 = state_17518__$1;
(statearr_17732_18155[(2)] = inst_17328);

(statearr_17732_18155[(1)] = (112));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (149))){
var state_17518__$1 = state_17518;
var statearr_17733_18156 = state_17518__$1;
(statearr_17733_18156[(2)] = false);

(statearr_17733_18156[(1)] = (150));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (22))){
var inst_17045 = (state_17518[(2)]);
var state_17518__$1 = (function (){var statearr_17735 = state_17518;
(statearr_17735[(41)] = inst_17045);

return statearr_17735;
})();
var statearr_17736_18157 = state_17518__$1;
(statearr_17736_18157[(2)] = null);

(statearr_17736_18157[(1)] = (40));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (54))){
var inst_17094 = (state_17518[(2)]);
var inst_17095 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_17096 = true;
var inst_17097 = [new cljs.core.Keyword(null,"error","error",(-978969032)),null,inst_17096,inst_17094];
var inst_17098 = cljs.core.PersistentHashMap.fromArrays(inst_17095,inst_17097);
var inst_17099 = cljs.test.do_report.call(null,inst_17098);
var state_17518__$1 = state_17518;
var statearr_17737_18158 = state_17518__$1;
(statearr_17737_18158[(2)] = inst_17099);

(statearr_17737_18158[(1)] = (53));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (86))){
var _ = (function (){var statearr_17738 = state_17518;
(statearr_17738[(4)] = cljs.core.rest.call(null,(state_17518[(4)])));

return statearr_17738;
})();
var state_17518__$1 = state_17518;
var ex17734 = (state_17518__$1[(2)]);
var statearr_17739_18159 = state_17518__$1;
(statearr_17739_18159[(5)] = ex17734);


if((ex17734 instanceof Error)){
var statearr_17740_18160 = state_17518__$1;
(statearr_17740_18160[(1)] = (81));

(statearr_17740_18160[(5)] = null);

} else {
throw ex17734;

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (118))){
var inst_17356 = (state_17518[(42)]);
var inst_17356__$1 = (state_17518[(2)]);
var inst_17357 = (inst_17356__$1 instanceof cljs.core.ExceptionInfo);
var inst_17358 = cljs.core.ex_data.call(null,inst_17356__$1);
var inst_17359 = new cljs.core.Keyword(null,"error","error",(-978969032)).cljs$core$IFn$_invoke$arity$1(inst_17358);
var inst_17360 = cljs.core._EQ_.call(null,inst_17359,new cljs.core.Keyword(null,"promise-error","promise-error",(-90673560)));
var inst_17361 = ((inst_17357) && (inst_17360));
var state_17518__$1 = (function (){var statearr_17741 = state_17518;
(statearr_17741[(42)] = inst_17356__$1);

return statearr_17741;
})();
if(cljs.core.truth_(inst_17361)){
var statearr_17742_18161 = state_17518__$1;
(statearr_17742_18161[(1)] = (119));

} else {
var statearr_17743_18162 = state_17518__$1;
(statearr_17743_18162[(1)] = (120));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (150))){
var inst_17469 = (state_17518[(2)]);
var state_17518__$1 = state_17518;
var statearr_17745_18163 = state_17518__$1;
(statearr_17745_18163[(2)] = inst_17469);

(statearr_17745_18163[(1)] = (147));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (23))){
var inst_16967 = (state_17518[(2)]);
var inst_16968 = cljs.core.prn.call(null,"test failed with ",inst_16967);
var state_17518__$1 = (function (){var statearr_17746 = state_17518;
(statearr_17746[(43)] = inst_16968);

return statearr_17746;
})();
var statearr_17747_18164 = state_17518__$1;
(statearr_17747_18164[(2)] = null);

(statearr_17747_18164[(1)] = (24));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (55))){
var _ = (function (){var statearr_17748 = state_17518;
(statearr_17748[(4)] = cljs.core.rest.call(null,(state_17518[(4)])));

return statearr_17748;
})();
var state_17518__$1 = state_17518;
var ex17744 = (state_17518__$1[(2)]);
var statearr_17749_18165 = state_17518__$1;
(statearr_17749_18165[(5)] = ex17744);


var statearr_17750_18166 = state_17518__$1;
(statearr_17750_18166[(1)] = (54));

(statearr_17750_18166[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (87))){
var inst_17232 = (state_17518[(44)]);
var inst_17232__$1 = (state_17518[(2)]);
var inst_17233 = (inst_17232__$1 instanceof cljs.core.ExceptionInfo);
var inst_17234 = cljs.core.ex_data.call(null,inst_17232__$1);
var inst_17235 = new cljs.core.Keyword(null,"error","error",(-978969032)).cljs$core$IFn$_invoke$arity$1(inst_17234);
var inst_17236 = cljs.core._EQ_.call(null,inst_17235,new cljs.core.Keyword(null,"promise-error","promise-error",(-90673560)));
var inst_17237 = ((inst_17233) && (inst_17236));
var state_17518__$1 = (function (){var statearr_17751 = state_17518;
(statearr_17751[(44)] = inst_17232__$1);

return statearr_17751;
})();
if(cljs.core.truth_(inst_17237)){
var statearr_17752_18167 = state_17518__$1;
(statearr_17752_18167[(1)] = (88));

} else {
var statearr_17753_18168 = state_17518__$1;
(statearr_17753_18168[(1)] = (89));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (119))){
var inst_17356 = (state_17518[(42)]);
var inst_17363 = (function(){throw inst_17356})();
var state_17518__$1 = state_17518;
var statearr_17754_18169 = state_17518__$1;
(statearr_17754_18169[(2)] = inst_17363);

(statearr_17754_18169[(1)] = (121));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (151))){
var inst_17456 = (state_17518[(36)]);
var inst_17474 = cljs.core.apply.call(null,cljs.core.hash_map,inst_17456);
var state_17518__$1 = state_17518;
var statearr_17755_18170 = state_17518__$1;
(statearr_17755_18170[(2)] = inst_17474);

(statearr_17755_18170[(1)] = (153));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (24))){
var _ = (function (){var statearr_17756 = state_17518;
(statearr_17756[(4)] = cljs.core.cons.call(null,(27),(state_17518[(4)])));

return statearr_17756;
})();
var inst_16980 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002))];
var inst_16981 = [new cljs.core.Keyword(null,"fail","fail",(1706214930)),null];
var inst_16982 = cljs.core.PersistentHashMap.fromArrays(inst_16980,inst_16981);
var inst_16983 = cljs.test.do_report.call(null,inst_16982);
var ___$1 = (function (){var statearr_17757 = state_17518;
(statearr_17757[(4)] = cljs.core.rest.call(null,(state_17518[(4)])));

return statearr_17757;
})();
var state_17518__$1 = state_17518;
var statearr_17758_18171 = state_17518__$1;
(statearr_17758_18171[(2)] = inst_16983);

(statearr_17758_18171[(1)] = (25));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (56))){
var inst_17106 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_17107 = true;
var inst_17108 = [new cljs.core.Keyword(null,"pass","pass",(1574159993)),null,inst_17107,true];
var inst_17109 = cljs.core.PersistentHashMap.fromArrays(inst_17106,inst_17108);
var inst_17110 = cljs.test.do_report.call(null,inst_17109);
var state_17518__$1 = state_17518;
var statearr_17759_18172 = state_17518__$1;
(statearr_17759_18172[(2)] = inst_17110);

(statearr_17759_18172[(1)] = (58));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (88))){
var inst_17232 = (state_17518[(44)]);
var inst_17239 = (function(){throw inst_17232})();
var state_17518__$1 = state_17518;
var statearr_17760_18173 = state_17518__$1;
(statearr_17760_18173[(2)] = inst_17239);

(statearr_17760_18173[(1)] = (90));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (120))){
var inst_17356 = (state_17518[(42)]);
var state_17518__$1 = state_17518;
var statearr_17761_18174 = state_17518__$1;
(statearr_17761_18174[(2)] = inst_17356);

(statearr_17761_18174[(1)] = (121));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (152))){
var inst_17456 = (state_17518[(36)]);
var state_17518__$1 = state_17518;
var statearr_17762_18175 = state_17518__$1;
(statearr_17762_18175[(2)] = inst_17456);

(statearr_17762_18175[(1)] = (153));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (25))){
var inst_16986 = (state_17518[(2)]);
var state_17518__$1 = state_17518;
var statearr_17763_18176 = state_17518__$1;
(statearr_17763_18176[(2)] = inst_16986);

(statearr_17763_18176[(1)] = (22));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (57))){
var inst_17112 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_17113 = true;
var inst_17114 = [new cljs.core.Keyword(null,"fail","fail",(1706214930)),null,inst_17113,true];
var inst_17115 = cljs.core.PersistentHashMap.fromArrays(inst_17112,inst_17114);
var inst_17116 = cljs.test.do_report.call(null,inst_17115);
var state_17518__$1 = state_17518;
var statearr_17764_18177 = state_17518__$1;
(statearr_17764_18177[(2)] = inst_17116);

(statearr_17764_18177[(1)] = (58));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (89))){
var inst_17232 = (state_17518[(44)]);
var state_17518__$1 = state_17518;
var statearr_17765_18178 = state_17518__$1;
(statearr_17765_18178[(2)] = inst_17232);

(statearr_17765_18178[(1)] = (90));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (121))){
var inst_17366 = (state_17518[(2)]);
var state_17518__$1 = (function (){var statearr_17766 = state_17518;
(statearr_17766[(45)] = inst_17366);

return statearr_17766;
})();
var statearr_17767_18179 = state_17518__$1;
(statearr_17767_18179[(2)] = null);

(statearr_17767_18179[(1)] = (122));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (153))){
var inst_17477 = (state_17518[(2)]);
var inst_17478 = cljs.core.get.call(null,inst_17477,"current_cycle");
var state_17518__$1 = (function (){var statearr_17768 = state_17518;
(statearr_17768[(46)] = inst_17478);

return statearr_17768;
})();
var statearr_17769_18180 = state_17518__$1;
(statearr_17769_18180[(2)] = null);

(statearr_17769_18180[(1)] = (154));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (26))){
var inst_16969 = (state_17518[(2)]);
var inst_16970 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_16971 = null;
var inst_16972 = [new cljs.core.Keyword(null,"error","error",(-978969032)),null,inst_16971,inst_16969];
var inst_16973 = cljs.core.PersistentHashMap.fromArrays(inst_16970,inst_16972);
var inst_16974 = cljs.test.do_report.call(null,inst_16973);
var state_17518__$1 = state_17518;
var statearr_17770_18181 = state_17518__$1;
(statearr_17770_18181[(2)] = inst_16974);

(statearr_17770_18181[(1)] = (25));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (58))){
var inst_17118 = (state_17518[(2)]);
var _ = (function (){var statearr_17771 = state_17518;
(statearr_17771[(4)] = cljs.core.rest.call(null,(state_17518[(4)])));

return statearr_17771;
})();
var state_17518__$1 = (function (){var statearr_17772 = state_17518;
(statearr_17772[(47)] = inst_17118);

return statearr_17772;
})();
var statearr_17773_18182 = state_17518__$1;
(statearr_17773_18182[(2)] = true);

(statearr_17773_18182[(1)] = (53));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (90))){
var inst_17242 = (state_17518[(2)]);
var state_17518__$1 = (function (){var statearr_17774 = state_17518;
(statearr_17774[(48)] = inst_17242);

return statearr_17774;
})();
var statearr_17775_18183 = state_17518__$1;
(statearr_17775_18183[(2)] = null);

(statearr_17775_18183[(1)] = (91));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (122))){
var _ = (function (){var statearr_17777 = state_17518;
(statearr_17777[(4)] = cljs.core.cons.call(null,(129),(state_17518[(4)])));

return statearr_17777;
})();
var inst_17392 = cljs.core.PersistentHashMap.EMPTY;
var inst_17393 = eos_cljs.core.transact.call(null,e2e.proposals.prop_acc,"cycleupdate",inst_17392);
var inst_17394 = cljs.core.async.interop.p__GT_c.call(null,inst_17393);
var state_17518__$1 = state_17518;
return cljs.core.async.impl.ioc_helpers.take_BANG_.call(null,state_17518__$1,(130),inst_17394);
} else {
if((state_val_17519 === (154))){
var inst_17478 = (state_17518[(46)]);
var inst_17491 = (state_17518[(49)]);
var inst_17492 = (state_17518[(8)]);
var _ = (function (){var statearr_17778 = state_17518;
(statearr_17778[(4)] = cljs.core.cons.call(null,(157),(state_17518[(4)])));

return statearr_17778;
})();
var inst_17490 = (new cljs.core.List(null,(2),null,(1),null));
var inst_17491__$1 = (new cljs.core.List(null,inst_17478,inst_17490,(2),null));
var inst_17492__$1 = cljs.core.apply.call(null,cljs.core._EQ_,inst_17491__$1);
var state_17518__$1 = (function (){var statearr_17779 = state_17518;
(statearr_17779[(49)] = inst_17491__$1);

(statearr_17779[(8)] = inst_17492__$1);

return statearr_17779;
})();
if(cljs.core.truth_(inst_17492__$1)){
var statearr_17780_18184 = state_17518__$1;
(statearr_17780_18184[(1)] = (158));

} else {
var statearr_17781_18185 = state_17518__$1;
(statearr_17781_18185[(1)] = (159));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (27))){
var _ = (function (){var statearr_17782 = state_17518;
(statearr_17782[(4)] = cljs.core.rest.call(null,(state_17518[(4)])));

return statearr_17782;
})();
var state_17518__$1 = state_17518;
var ex17776 = (state_17518__$1[(2)]);
var statearr_17783_18186 = state_17518__$1;
(statearr_17783_18186[(5)] = ex17776);


var statearr_17784_18187 = state_17518__$1;
(statearr_17784_18187[(1)] = (26));

(statearr_17784_18187[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (59))){
var inst_17132 = (state_17518[(50)]);
var inst_17132__$1 = (state_17518[(2)]);
var inst_17133 = (inst_17132__$1 instanceof cljs.core.ExceptionInfo);
var inst_17134 = cljs.core.ex_data.call(null,inst_17132__$1);
var inst_17135 = new cljs.core.Keyword(null,"error","error",(-978969032)).cljs$core$IFn$_invoke$arity$1(inst_17134);
var inst_17136 = cljs.core._EQ_.call(null,inst_17135,new cljs.core.Keyword(null,"promise-error","promise-error",(-90673560)));
var inst_17137 = ((inst_17133) && (inst_17136));
var state_17518__$1 = (function (){var statearr_17785 = state_17518;
(statearr_17785[(50)] = inst_17132__$1);

return statearr_17785;
})();
if(cljs.core.truth_(inst_17137)){
var statearr_17786_18188 = state_17518__$1;
(statearr_17786_18188[(1)] = (60));

} else {
var statearr_17787_18189 = state_17518__$1;
(statearr_17787_18189[(1)] = (61));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (91))){
var _ = (function (){var statearr_17788 = state_17518;
(statearr_17788[(4)] = cljs.core.cons.call(null,(94),(state_17518[(4)])));

return statearr_17788;
})();
var state_17518__$1 = state_17518;
var statearr_17789_18190 = state_17518__$1;
(statearr_17789_18190[(1)] = (95));



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (123))){
var inst_17437 = (state_17518[(2)]);
var inst_17442 = eos_cljs.core.get_table_rows.call(null,e2e.proposals.prop_acc,e2e.proposals.prop_acc,"config");
var inst_17443 = cljs.core.async.interop.p__GT_c.call(null,inst_17442);
var state_17518__$1 = (function (){var statearr_17792 = state_17518;
(statearr_17792[(51)] = inst_17437);

return statearr_17792;
})();
return cljs.core.async.impl.ioc_helpers.take_BANG_.call(null,state_17518__$1,(141),inst_17443);
} else {
if((state_val_17519 === (155))){
var inst_17515 = (state_17518[(2)]);
var inst_17516 = done.call(null);
var state_17518__$1 = (function (){var statearr_17793 = state_17518;
(statearr_17793[(52)] = inst_17515);

return statearr_17793;
})();
return cljs.core.async.impl.ioc_helpers.return_chan.call(null,state_17518__$1,inst_17516);
} else {
if((state_val_17519 === (28))){
var _ = (function (){var statearr_17794 = state_17518;
(statearr_17794[(4)] = cljs.core.rest.call(null,(state_17518[(4)])));

return statearr_17794;
})();
var state_17518__$1 = state_17518;
var ex17791 = (state_17518__$1[(2)]);
var statearr_17795_18191 = state_17518__$1;
(statearr_17795_18191[(5)] = ex17791);


if((ex17791 instanceof Error)){
var statearr_17796_18192 = state_17518__$1;
(statearr_17796_18192[(1)] = (23));

(statearr_17796_18192[(5)] = null);

} else {
throw ex17791;

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (60))){
var inst_17132 = (state_17518[(50)]);
var inst_17139 = (function(){throw inst_17132})();
var state_17518__$1 = state_17518;
var statearr_17797_18193 = state_17518__$1;
(statearr_17797_18193[(2)] = inst_17139);

(statearr_17797_18193[(1)] = (62));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (92))){
var inst_17270 = (state_17518[(2)]);
var _ = (function (){var statearr_17798 = state_17518;
(statearr_17798[(4)] = cljs.core.rest.call(null,(state_17518[(4)])));

return statearr_17798;
})();
var state_17518__$1 = state_17518;
var statearr_17799_18194 = state_17518__$1;
(statearr_17799_18194[(2)] = inst_17270);

(statearr_17799_18194[(1)] = (80));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (124))){
var inst_17367 = (state_17518[(2)]);
var inst_17368 = cljs.core.prn.call(null,"test failed with ",inst_17367);
var state_17518__$1 = (function (){var statearr_17800 = state_17518;
(statearr_17800[(53)] = inst_17368);

return statearr_17800;
})();
var statearr_17801_18195 = state_17518__$1;
(statearr_17801_18195[(2)] = null);

(statearr_17801_18195[(1)] = (125));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (156))){
var inst_17479 = (state_17518[(2)]);
var inst_17480 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_17481 = cljs.core.list(new cljs.core.Symbol(null,"=","=",(-1501502141),null),new cljs.core.Symbol(null,"cycle","cycle",(-1944070485),null),(2));
var inst_17482 = [new cljs.core.Keyword(null,"error","error",(-978969032)),null,inst_17481,inst_17479];
var inst_17483 = cljs.core.PersistentHashMap.fromArrays(inst_17480,inst_17482);
var inst_17484 = cljs.test.do_report.call(null,inst_17483);
var state_17518__$1 = state_17518;
var statearr_17802_18196 = state_17518__$1;
(statearr_17802_18196[(2)] = inst_17484);

(statearr_17802_18196[(1)] = (155));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (29))){
var inst_17004 = (state_17518[(54)]);
var inst_17004__$1 = (state_17518[(2)]);
var inst_17005 = (inst_17004__$1 instanceof cljs.core.ExceptionInfo);
var inst_17006 = cljs.core.ex_data.call(null,inst_17004__$1);
var inst_17007 = new cljs.core.Keyword(null,"error","error",(-978969032)).cljs$core$IFn$_invoke$arity$1(inst_17006);
var inst_17008 = cljs.core._EQ_.call(null,inst_17007,new cljs.core.Keyword(null,"promise-error","promise-error",(-90673560)));
var inst_17009 = ((inst_17005) && (inst_17008));
var state_17518__$1 = (function (){var statearr_17803 = state_17518;
(statearr_17803[(54)] = inst_17004__$1);

return statearr_17803;
})();
if(cljs.core.truth_(inst_17009)){
var statearr_17804_18197 = state_17518__$1;
(statearr_17804_18197[(1)] = (30));

} else {
var statearr_17805_18198 = state_17518__$1;
(statearr_17805_18198[(1)] = (31));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (61))){
var inst_17132 = (state_17518[(50)]);
var state_17518__$1 = state_17518;
var statearr_17806_18199 = state_17518__$1;
(statearr_17806_18199[(2)] = inst_17132);

(statearr_17806_18199[(1)] = (62));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (93))){
var inst_17243 = (state_17518[(2)]);
var inst_17244 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_17245 = true;
var inst_17246 = [new cljs.core.Keyword(null,"error","error",(-978969032)),"can progress cycle",inst_17245,inst_17243];
var inst_17247 = cljs.core.PersistentHashMap.fromArrays(inst_17244,inst_17246);
var inst_17248 = cljs.test.do_report.call(null,inst_17247);
var state_17518__$1 = state_17518;
var statearr_17808_18200 = state_17518__$1;
(statearr_17808_18200[(2)] = inst_17248);

(statearr_17808_18200[(1)] = (92));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (125))){
var _ = (function (){var statearr_17809 = state_17518;
(statearr_17809[(4)] = cljs.core.cons.call(null,(128),(state_17518[(4)])));

return statearr_17809;
})();
var inst_17380 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002))];
var inst_17381 = [new cljs.core.Keyword(null,"fail","fail",(1706214930)),"can progress cycle"];
var inst_17382 = cljs.core.PersistentHashMap.fromArrays(inst_17380,inst_17381);
var inst_17383 = cljs.test.do_report.call(null,inst_17382);
var ___$1 = (function (){var statearr_17810 = state_17518;
(statearr_17810[(4)] = cljs.core.rest.call(null,(state_17518[(4)])));

return statearr_17810;
})();
var state_17518__$1 = state_17518;
var statearr_17811_18201 = state_17518__$1;
(statearr_17811_18201[(2)] = inst_17383);

(statearr_17811_18201[(1)] = (126));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (157))){
var _ = (function (){var statearr_17812 = state_17518;
(statearr_17812[(4)] = cljs.core.rest.call(null,(state_17518[(4)])));

return statearr_17812;
})();
var state_17518__$1 = state_17518;
var ex17807 = (state_17518__$1[(2)]);
var statearr_17813_18202 = state_17518__$1;
(statearr_17813_18202[(5)] = ex17807);


var statearr_17814_18203 = state_17518__$1;
(statearr_17814_18203[(1)] = (156));

(statearr_17814_18203[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (30))){
var inst_17004 = (state_17518[(54)]);
var inst_17011 = (function(){throw inst_17004})();
var state_17518__$1 = state_17518;
var statearr_17816_18204 = state_17518__$1;
(statearr_17816_18204[(2)] = inst_17011);

(statearr_17816_18204[(1)] = (32));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (62))){
var inst_17143 = (state_17518[(15)]);
var inst_17142 = (state_17518[(2)]);
var inst_17143__$1 = cljs.core.nth.call(null,inst_17142,(0),null);
var inst_17145 = (inst_17143__$1 == null);
var inst_17146 = cljs.core.not.call(null,inst_17145);
var state_17518__$1 = (function (){var statearr_17817 = state_17518;
(statearr_17817[(15)] = inst_17143__$1);

return statearr_17817;
})();
if(inst_17146){
var statearr_17818_18205 = state_17518__$1;
(statearr_17818_18205[(1)] = (63));

} else {
var statearr_17819_18206 = state_17518__$1;
(statearr_17819_18206[(1)] = (64));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (94))){
var _ = (function (){var statearr_17820 = state_17518;
(statearr_17820[(4)] = cljs.core.rest.call(null,(state_17518[(4)])));

return statearr_17820;
})();
var state_17518__$1 = state_17518;
var ex17815 = (state_17518__$1[(2)]);
var statearr_17821_18207 = state_17518__$1;
(statearr_17821_18207[(5)] = ex17815);


var statearr_17822_18208 = state_17518__$1;
(statearr_17822_18208[(1)] = (93));

(statearr_17822_18208[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (126))){
var inst_17386 = (state_17518[(2)]);
var state_17518__$1 = state_17518;
var statearr_17823_18209 = state_17518__$1;
(statearr_17823_18209[(2)] = inst_17386);

(statearr_17823_18209[(1)] = (123));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (158))){
var inst_17491 = (state_17518[(49)]);
var inst_17494 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_17495 = cljs.core.list(new cljs.core.Symbol(null,"=","=",(-1501502141),null),new cljs.core.Symbol(null,"cycle","cycle",(-1944070485),null),(2));
var inst_17496 = cljs.core.cons.call(null,cljs.core._EQ_,inst_17491);
var inst_17497 = [new cljs.core.Keyword(null,"pass","pass",(1574159993)),null,inst_17495,inst_17496];
var inst_17498 = cljs.core.PersistentHashMap.fromArrays(inst_17494,inst_17497);
var inst_17499 = cljs.test.do_report.call(null,inst_17498);
var state_17518__$1 = state_17518;
var statearr_17824_18210 = state_17518__$1;
(statearr_17824_18210[(2)] = inst_17499);

(statearr_17824_18210[(1)] = (160));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (31))){
var inst_17004 = (state_17518[(54)]);
var state_17518__$1 = state_17518;
var statearr_17825_18211 = state_17518__$1;
(statearr_17825_18211[(2)] = inst_17004);

(statearr_17825_18211[(1)] = (32));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (63))){
var inst_17143 = (state_17518[(15)]);
var inst_17148 = inst_17143.cljs$lang$protocol_mask$partition0$;
var inst_17149 = (inst_17148 & (64));
var inst_17150 = inst_17143.cljs$core$ISeq$;
var inst_17151 = (cljs.core.PROTOCOL_SENTINEL === inst_17150);
var inst_17152 = ((inst_17149) || (inst_17151));
var state_17518__$1 = state_17518;
if(cljs.core.truth_(inst_17152)){
var statearr_17826_18212 = state_17518__$1;
(statearr_17826_18212[(1)] = (66));

} else {
var statearr_17827_18213 = state_17518__$1;
(statearr_17827_18213[(1)] = (67));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (95))){
var inst_17255 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_17256 = true;
var inst_17257 = [new cljs.core.Keyword(null,"pass","pass",(1574159993)),"can progress cycle",inst_17256,true];
var inst_17258 = cljs.core.PersistentHashMap.fromArrays(inst_17255,inst_17257);
var inst_17259 = cljs.test.do_report.call(null,inst_17258);
var state_17518__$1 = state_17518;
var statearr_17828_18214 = state_17518__$1;
(statearr_17828_18214[(2)] = inst_17259);

(statearr_17828_18214[(1)] = (97));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (127))){
var inst_17369 = (state_17518[(2)]);
var inst_17370 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_17371 = null;
var inst_17372 = [new cljs.core.Keyword(null,"error","error",(-978969032)),"can progress cycle",inst_17371,inst_17369];
var inst_17373 = cljs.core.PersistentHashMap.fromArrays(inst_17370,inst_17372);
var inst_17374 = cljs.test.do_report.call(null,inst_17373);
var state_17518__$1 = state_17518;
var statearr_17829_18215 = state_17518__$1;
(statearr_17829_18215[(2)] = inst_17374);

(statearr_17829_18215[(1)] = (126));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_17519 === (159))){
var inst_17491 = (state_17518[(49)]);
var inst_17501 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_17502 = cljs.core.list(new cljs.core.Symbol(null,"=","=",(-1501502141),null),new cljs.core.Symbol(null,"cycle","cycle",(-1944070485),null),(2));
var inst_17503 = new cljs.core.Symbol(null,"not","not",(1044554643),null);
var inst_17504 = new cljs.core.Symbol(null,"=","=",(-1501502141),null);
var inst_17505 = cljs.core.cons.call(null,inst_17504,inst_17491);
var inst_17506 = (new cljs.core.List(null,inst_17505,null,(1),null));
var inst_17507 = (new cljs.core.List(null,inst_17503,inst_17506,(2),null));
var inst_17508 = [new cljs.core.Keyword(null,"fail","fail",(1706214930)),null,inst_17502,inst_17507];
var inst_17509 = cljs.core.PersistentHashMap.fromArrays(inst_17501,inst_17508);
var inst_17510 = cljs.test.do_report.call(null,inst_17509);
var state_17518__$1 = state_17518;
var statearr_17830_18216 = state_17518__$1;
(statearr_17830_18216[(2)] = inst_17510);

(statearr_17830_18216[(1)] = (160));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
return null;
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
});})(c__19__auto__,___192__auto__))
;
return ((function (switch__14__auto__,c__19__auto__,___192__auto__){
return (function() {
var e2e$proposals$state_machine__15__auto__ = null;
var e2e$proposals$state_machine__15__auto____0 = (function (){
var statearr_17831 = [null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];
(statearr_17831[(0)] = e2e$proposals$state_machine__15__auto__);

(statearr_17831[(1)] = (1));

return statearr_17831;
});
var e2e$proposals$state_machine__15__auto____1 = (function (state_17518){
while(true){
var ret_value__16__auto__ = (function (){try{while(true){
var result__17__auto__ = switch__14__auto__.call(null,state_17518);
if(cljs.core.keyword_identical_QMARK_.call(null,result__17__auto__,new cljs.core.Keyword(null,"recur","recur",(-437573268)))){
continue;
} else {
return result__17__auto__;
}
break;
}
}catch (e17832){var ex__18__auto__ = e17832;
var statearr_17833_18217 = state_17518;
(statearr_17833_18217[(2)] = ex__18__auto__);


if(cljs.core.seq.call(null,(state_17518[(4)]))){
var statearr_17834_18218 = state_17518;
(statearr_17834_18218[(1)] = cljs.core.first.call(null,(state_17518[(4)])));

} else {
throw ex__18__auto__;
}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
}})();
if(cljs.core.keyword_identical_QMARK_.call(null,ret_value__16__auto__,new cljs.core.Keyword(null,"recur","recur",(-437573268)))){
var G__18219 = state_17518;
state_17518 = G__18219;
continue;
} else {
return ret_value__16__auto__;
}
break;
}
});
e2e$proposals$state_machine__15__auto__ = function(state_17518){
switch(arguments.length){
case 0:
return e2e$proposals$state_machine__15__auto____0.call(this);
case 1:
return e2e$proposals$state_machine__15__auto____1.call(this,state_17518);
}
throw(new Error('Invalid arity: ' + arguments.length));
};
e2e$proposals$state_machine__15__auto__.cljs$core$IFn$_invoke$arity$0 = e2e$proposals$state_machine__15__auto____0;
e2e$proposals$state_machine__15__auto__.cljs$core$IFn$_invoke$arity$1 = e2e$proposals$state_machine__15__auto____1;
return e2e$proposals$state_machine__15__auto__;
})()
;})(switch__14__auto__,c__19__auto__,___192__auto__))
})();
var state__21__auto__ = (function (){var statearr_17835 = f__20__auto__.call(null);
(statearr_17835[(6)] = c__19__auto__);

return statearr_17835;
})();
return cljs.core.async.impl.ioc_helpers.run_state_machine_wrapped.call(null,state__21__auto__);
});})(c__19__auto__,___192__auto__))
);

return c__19__auto__;
});

e2e.proposals.t_e2e$proposals15936.getBasis = (function (){
return new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,"meta15937","meta15937",(339747895),null)], null);
});

e2e.proposals.t_e2e$proposals15936.cljs$lang$type = true;

e2e.proposals.t_e2e$proposals15936.cljs$lang$ctorStr = "e2e.proposals/t_e2e$proposals15936";

e2e.proposals.t_e2e$proposals15936.cljs$lang$ctorPrWriter = (function (this__9776__auto__,writer__9777__auto__,opt__9778__auto__){
return cljs.core._write.call(null,writer__9777__auto__,"e2e.proposals/t_e2e$proposals15936");
});

/**
 * Positional factory function for e2e.proposals/t_e2e$proposals15936.
 */
e2e.proposals.__GT_t_e2e$proposals15936 = (function e2e$proposals$__GT_t_e2e$proposals15936(meta15937){
return (new e2e.proposals.t_e2e$proposals15936(meta15937));
});

}

return (new e2e.proposals.t_e2e$proposals15936(null));
});

e2e.proposals.cycle_add.cljs$lang$var = new cljs.core.Var(function(){return e2e.proposals.cycle_add;},new cljs.core.Symbol("e2e.proposals","cycle-add","e2e.proposals/cycle-add",(1399694237),null),cljs.core.PersistentHashMap.fromArrays([new cljs.core.Keyword(null,"ns","ns",(441598760)),new cljs.core.Keyword(null,"name","name",(1843675177)),new cljs.core.Keyword(null,"file","file",(-1269645878)),new cljs.core.Keyword(null,"end-column","end-column",(1425389514)),new cljs.core.Keyword(null,"column","column",(2078222095)),new cljs.core.Keyword(null,"line","line",(212345235)),new cljs.core.Keyword(null,"end-line","end-line",(1837326455)),new cljs.core.Keyword(null,"arglists","arglists",(1661989754)),new cljs.core.Keyword(null,"doc","doc",(1913296891)),new cljs.core.Keyword(null,"test","test",(577538877))],[new cljs.core.Symbol(null,"e2e.proposals","e2e.proposals",(1479174227),null),new cljs.core.Symbol(null,"cycle-add","cycle-add",(1071188336),null),"e2e/proposals.cljs",(19),(1),(156),(156),cljs.core.List.EMPTY,null,(cljs.core.truth_(e2e.proposals.cycle_add)?e2e.proposals.cycle_add.cljs$lang$test:null)]));
e2e.proposals.cycle_update = (function e2e$proposals$cycle_update(){
return cljs.test.test_var.call(null,e2e.proposals.cycle_update.cljs$lang$var);
});
e2e.proposals.cycle_update.cljs$lang$test = (function (){
if((typeof e2e !== 'undefined') && (typeof e2e.proposals !== 'undefined') && (typeof e2e.proposals.t_e2e$proposals18220 !== 'undefined')){
} else {

/**
* @constructor
 * @implements {cljs.core.IWithMeta}
 * @implements {cljs.core.IMeta}
 * @implements {cljs.test.IAsyncTest}
 * @implements {cljs.core.IFn}
*/
e2e.proposals.t_e2e$proposals18220 = (function (meta18221){
this.meta18221 = meta18221;
this.cljs$lang$protocol_mask$partition0$ = 393217;
this.cljs$lang$protocol_mask$partition1$ = 0;
});
e2e.proposals.t_e2e$proposals18220.prototype.cljs$core$IWithMeta$_with_meta$arity$2 = (function (_18222,meta18221__$1){
var self__ = this;
var _18222__$1 = this;
return (new e2e.proposals.t_e2e$proposals18220(meta18221__$1));
});

e2e.proposals.t_e2e$proposals18220.prototype.cljs$core$IMeta$_meta$arity$1 = (function (_18222){
var self__ = this;
var _18222__$1 = this;
return self__.meta18221;
});

e2e.proposals.t_e2e$proposals18220.prototype.cljs$test$IAsyncTest$ = cljs.core.PROTOCOL_SENTINEL;

e2e.proposals.t_e2e$proposals18220.prototype.call = (function (self__,done){
var self__ = this;
var self____$1 = this;
var ___192__auto__ = self____$1;
var c__19__auto__ = cljs.core.async.chan.call(null,(1));
cljs.core.async.impl.dispatch.run.call(null,((function (c__19__auto__,___192__auto__,self____$1){
return (function (){
var f__20__auto__ = (function (){var switch__14__auto__ = ((function (c__19__auto__,___192__auto__,self____$1){
return (function (state_18483){
var state_val_18484 = (state_18483[(1)]);
if((state_val_18484 === (32))){
var inst_18349 = (state_18483[(7)]);
var inst_18349__$1 = (state_18483[(2)]);
var inst_18350 = (inst_18349__$1 instanceof cljs.core.ExceptionInfo);
var inst_18351 = cljs.core.ex_data.call(null,inst_18349__$1);
var inst_18352 = new cljs.core.Keyword(null,"error","error",(-978969032)).cljs$core$IFn$_invoke$arity$1(inst_18351);
var inst_18353 = cljs.core._EQ_.call(null,inst_18352,new cljs.core.Keyword(null,"promise-error","promise-error",(-90673560)));
var inst_18354 = ((inst_18350) && (inst_18353));
var state_18483__$1 = (function (){var statearr_18486 = state_18483;
(statearr_18486[(7)] = inst_18349__$1);

return statearr_18486;
})();
if(cljs.core.truth_(inst_18354)){
var statearr_18487_19016 = state_18483__$1;
(statearr_18487_19016[(1)] = (33));

} else {
var statearr_18488_19017 = state_18483__$1;
(statearr_18488_19017[(1)] = (34));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_18484 === (64))){
var _ = (function (){var statearr_18489 = state_18483;
(statearr_18489[(4)] = cljs.core.rest.call(null,(state_18483[(4)])));

return statearr_18489;
})();
var state_18483__$1 = state_18483;
var ex18485 = (state_18483__$1[(2)]);
var statearr_18490_19018 = state_18483__$1;
(statearr_18490_19018[(5)] = ex18485);


var statearr_18491_19019 = state_18483__$1;
(statearr_18491_19019[(1)] = (63));

(statearr_18491_19019[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_18484 === (1))){
var state_18483__$1 = state_18483;
var statearr_18492_19020 = state_18483__$1;
(statearr_18492_19020[(2)] = null);

(statearr_18492_19020[(1)] = (2));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_18484 === (33))){
var inst_18349 = (state_18483[(7)]);
var inst_18356 = (function(){throw inst_18349})();
var state_18483__$1 = state_18483;
var statearr_18493_19021 = state_18483__$1;
(statearr_18493_19021[(2)] = inst_18356);

(statearr_18493_19021[(1)] = (35));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_18484 === (2))){
var _ = (function (){var statearr_18494 = state_18483;
(statearr_18494[(4)] = cljs.core.cons.call(null,(15),(state_18483[(4)])));

return statearr_18494;
})();
var inst_18268 = [new cljs.core.Keyword(null,"id","id",(-1388402092)),new cljs.core.Keyword(null,"start_time","start_time",(889556682)),new cljs.core.Keyword(null,"budget","budget",(-405386281))];
var inst_18269 = cljs.core.PersistentVector.EMPTY_NODE;
var inst_18270 = [new cljs.core.Keyword(null,"quantity","quantity",(-1929050694)),new cljs.core.Keyword(null,"contract","contract",(798152745))];
var inst_18271 = ["326000.0000 EFX",e2e.proposals.token_acc];
var inst_18272 = cljs.core.PersistentHashMap.fromArrays(inst_18270,inst_18271);
var inst_18273 = [inst_18272];
var inst_18274 = (new cljs.core.PersistentVector(null,(1),(5),inst_18269,inst_18273,null));
var inst_18275 = [(2),"2021-01-01 12:00:00",inst_18274];
var inst_18276 = cljs.core.PersistentHashMap.fromArrays(inst_18268,inst_18275);
var inst_18277 = eos_cljs.core.transact.call(null,e2e.proposals.prop_acc,"updatecycle",inst_18276);
var inst_18278 = cljs.core.async.interop.p__GT_c.call(null,inst_18277);
var state_18483__$1 = state_18483;
return cljs.core.async.impl.ioc_helpers.take_BANG_.call(null,state_18483__$1,(16),inst_18278);
} else {
if((state_val_18484 === (34))){
var inst_18349 = (state_18483[(7)]);
var state_18483__$1 = state_18483;
var statearr_18495_19022 = state_18483__$1;
(statearr_18495_19022[(2)] = inst_18349);

(statearr_18495_19022[(1)] = (35));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_18484 === (3))){
var inst_18311 = (state_18483[(2)]);
var state_18483__$1 = (function (){var statearr_18496 = state_18483;
(statearr_18496[(8)] = inst_18311);

return statearr_18496;
})();
var statearr_18497_19023 = state_18483__$1;
(statearr_18497_19023[(2)] = null);

(statearr_18497_19023[(1)] = (24));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_18484 === (35))){
var inst_18359 = (state_18483[(2)]);
var state_18483__$1 = (function (){var statearr_18498 = state_18483;
(statearr_18498[(9)] = inst_18359);

return statearr_18498;
})();
var statearr_18499_19024 = state_18483__$1;
(statearr_18499_19024[(2)] = null);

(statearr_18499_19024[(1)] = (36));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_18484 === (4))){
var inst_18226 = (state_18483[(10)]);
var inst_18227 = (state_18483[(11)]);
var inst_18224 = (state_18483[(2)]);
var inst_18225 = inst_18224.cause;
var inst_18226__$1 = inst_18225.message;
var inst_18227__$1 = clojure.string.ends_with_QMARK_.call(null,inst_18226__$1,"cycle is not in the future");
var inst_18228 = (!(inst_18227__$1));
var state_18483__$1 = (function (){var statearr_18500 = state_18483;
(statearr_18500[(10)] = inst_18226__$1);

(statearr_18500[(11)] = inst_18227__$1);

return statearr_18500;
})();
if(inst_18228){
var statearr_18501_19025 = state_18483__$1;
(statearr_18501_19025[(1)] = (5));

} else {
var statearr_18502_19026 = state_18483__$1;
(statearr_18502_19026[(1)] = (6));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_18484 === (36))){
var _ = (function (){var statearr_18503 = state_18483;
(statearr_18503[(4)] = cljs.core.cons.call(null,(39),(state_18483[(4)])));

return statearr_18503;
})();
var state_18483__$1 = state_18483;
var statearr_18504_19027 = state_18483__$1;
(statearr_18504_19027[(1)] = (40));



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_18484 === (5))){
var inst_18226 = (state_18483[(10)]);
var inst_18230 = ["expected =","cycle is not in the future"," actual = ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_18226)].join('');
var inst_18231 = cljs.core.prn.call(null,inst_18230);
var state_18483__$1 = state_18483;
var statearr_18506_19028 = state_18483__$1;
(statearr_18506_19028[(2)] = inst_18231);

(statearr_18506_19028[(1)] = (7));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_18484 === (37))){
var inst_18387 = (state_18483[(2)]);
var _ = (function (){var statearr_18507 = state_18483;
(statearr_18507[(4)] = cljs.core.rest.call(null,(state_18483[(4)])));

return statearr_18507;
})();
var state_18483__$1 = state_18483;
var statearr_18508_19029 = state_18483__$1;
(statearr_18508_19029[(2)] = inst_18387);

(statearr_18508_19029[(1)] = (25));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_18484 === (6))){
var state_18483__$1 = state_18483;
var statearr_18509_19030 = state_18483__$1;
(statearr_18509_19030[(2)] = null);

(statearr_18509_19030[(1)] = (7));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_18484 === (38))){
var inst_18360 = (state_18483[(2)]);
var inst_18361 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_18362 = true;
var inst_18363 = [new cljs.core.Keyword(null,"error","error",(-978969032)),null,inst_18362,inst_18360];
var inst_18364 = cljs.core.PersistentHashMap.fromArrays(inst_18361,inst_18363);
var inst_18365 = cljs.test.do_report.call(null,inst_18364);
var state_18483__$1 = state_18483;
var statearr_18511_19031 = state_18483__$1;
(statearr_18511_19031[(2)] = inst_18365);

(statearr_18511_19031[(1)] = (37));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_18484 === (7))){
var inst_18234 = (state_18483[(2)]);
var state_18483__$1 = (function (){var statearr_18512 = state_18483;
(statearr_18512[(12)] = inst_18234);

return statearr_18512;
})();
var statearr_18513_19032 = state_18483__$1;
(statearr_18513_19032[(2)] = null);

(statearr_18513_19032[(1)] = (8));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_18484 === (39))){
var _ = (function (){var statearr_18514 = state_18483;
(statearr_18514[(4)] = cljs.core.rest.call(null,(state_18483[(4)])));

return statearr_18514;
})();
var state_18483__$1 = state_18483;
var ex18510 = (state_18483__$1[(2)]);
var statearr_18515_19033 = state_18483__$1;
(statearr_18515_19033[(5)] = ex18510);


var statearr_18516_19034 = state_18483__$1;
(statearr_18516_19034[(1)] = (38));

(statearr_18516_19034[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_18484 === (8))){
var inst_18227 = (state_18483[(11)]);
var _ = (function (){var statearr_18517 = state_18483;
(statearr_18517[(4)] = cljs.core.cons.call(null,(11),(state_18483[(4)])));

return statearr_18517;
})();
var state_18483__$1 = state_18483;
if(cljs.core.truth_(inst_18227)){
var statearr_18518_19035 = state_18483__$1;
(statearr_18518_19035[(1)] = (12));

} else {
var statearr_18519_19036 = state_18483__$1;
(statearr_18519_19036[(1)] = (13));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_18484 === (40))){
var inst_18372 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_18373 = true;
var inst_18374 = [new cljs.core.Keyword(null,"pass","pass",(1574159993)),null,inst_18373,true];
var inst_18375 = cljs.core.PersistentHashMap.fromArrays(inst_18372,inst_18374);
var inst_18376 = cljs.test.do_report.call(null,inst_18375);
var state_18483__$1 = state_18483;
var statearr_18520_19037 = state_18483__$1;
(statearr_18520_19037[(2)] = inst_18376);

(statearr_18520_19037[(1)] = (42));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_18484 === (9))){
var inst_18262 = (state_18483[(2)]);
var state_18483__$1 = state_18483;
var statearr_18521_19038 = state_18483__$1;
(statearr_18521_19038[(2)] = inst_18262);

(statearr_18521_19038[(1)] = (3));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_18484 === (41))){
var inst_18378 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_18379 = true;
var inst_18380 = [new cljs.core.Keyword(null,"fail","fail",(1706214930)),null,inst_18379,true];
var inst_18381 = cljs.core.PersistentHashMap.fromArrays(inst_18378,inst_18380);
var inst_18382 = cljs.test.do_report.call(null,inst_18381);
var state_18483__$1 = state_18483;
var statearr_18522_19039 = state_18483__$1;
(statearr_18522_19039[(2)] = inst_18382);

(statearr_18522_19039[(1)] = (42));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_18484 === (10))){
var inst_18235 = (state_18483[(2)]);
var inst_18236 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_18237 = new cljs.core.Symbol("e2e.macros","pass?","e2e.macros/pass?",(894145299),null);
var inst_18238 = [new cljs.core.Keyword(null,"error","error",(-978969032)),"cycle must be in the future",inst_18237,inst_18235];
var inst_18239 = cljs.core.PersistentHashMap.fromArrays(inst_18236,inst_18238);
var inst_18240 = cljs.test.do_report.call(null,inst_18239);
var state_18483__$1 = state_18483;
var statearr_18524_19040 = state_18483__$1;
(statearr_18524_19040[(2)] = inst_18240);

(statearr_18524_19040[(1)] = (9));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_18484 === (42))){
var inst_18384 = (state_18483[(2)]);
var _ = (function (){var statearr_18525 = state_18483;
(statearr_18525[(4)] = cljs.core.rest.call(null,(state_18483[(4)])));

return statearr_18525;
})();
var state_18483__$1 = (function (){var statearr_18526 = state_18483;
(statearr_18526[(13)] = inst_18384);

return statearr_18526;
})();
var statearr_18527_19041 = state_18483__$1;
(statearr_18527_19041[(2)] = true);

(statearr_18527_19041[(1)] = (37));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_18484 === (11))){
var _ = (function (){var statearr_18528 = state_18483;
(statearr_18528[(4)] = cljs.core.rest.call(null,(state_18483[(4)])));

return statearr_18528;
})();
var state_18483__$1 = state_18483;
var ex18523 = (state_18483__$1[(2)]);
var statearr_18529_19042 = state_18483__$1;
(statearr_18529_19042[(5)] = ex18523);


var statearr_18530_19043 = state_18483__$1;
(statearr_18530_19043[(1)] = (10));

(statearr_18530_19043[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_18484 === (43))){
var _ = (function (){var statearr_18531 = state_18483;
(statearr_18531[(4)] = cljs.core.cons.call(null,(56),(state_18483[(4)])));

return statearr_18531;
})();
var inst_18437 = [new cljs.core.Keyword(null,"id","id",(-1388402092)),new cljs.core.Keyword(null,"start_time","start_time",(889556682)),new cljs.core.Keyword(null,"budget","budget",(-405386281))];
var inst_18438 = cljs.core.PersistentVector.EMPTY_NODE;
var inst_18439 = [new cljs.core.Keyword(null,"quantity","quantity",(-1929050694)),new cljs.core.Keyword(null,"contract","contract",(798152745))];
var inst_18440 = ["326000.0000 EFX",e2e.proposals.token_acc];
var inst_18441 = cljs.core.PersistentHashMap.fromArrays(inst_18439,inst_18440);
var inst_18442 = [inst_18441];
var inst_18443 = (new cljs.core.PersistentVector(null,(1),(5),inst_18438,inst_18442,null));
var inst_18444 = [(3),"2021-01-01 12:00:00",inst_18443];
var inst_18445 = cljs.core.PersistentHashMap.fromArrays(inst_18437,inst_18444);
var inst_18446 = e2e.proposals.eos_tx_owner.call(null,e2e.proposals.prop_acc,"updatecycle",inst_18445);
var inst_18447 = cljs.core.async.interop.p__GT_c.call(null,inst_18446);
var state_18483__$1 = state_18483;
return cljs.core.async.impl.ioc_helpers.take_BANG_.call(null,state_18483__$1,(57),inst_18447);
} else {
if((state_val_18484 === (12))){
var inst_18227 = (state_18483[(11)]);
var inst_18247 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_18248 = new cljs.core.Symbol("e2e.macros","pass?","e2e.macros/pass?",(894145299),null);
var inst_18249 = [new cljs.core.Keyword(null,"pass","pass",(1574159993)),"cycle must be in the future",inst_18248,inst_18227];
var inst_18250 = cljs.core.PersistentHashMap.fromArrays(inst_18247,inst_18249);
var inst_18251 = cljs.test.do_report.call(null,inst_18250);
var state_18483__$1 = state_18483;
var statearr_18532_19044 = state_18483__$1;
(statearr_18532_19044[(2)] = inst_18251);

(statearr_18532_19044[(1)] = (14));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_18484 === (44))){
var inst_18480 = (state_18483[(2)]);
var inst_18481 = done.call(null);
var state_18483__$1 = (function (){var statearr_18533 = state_18483;
(statearr_18533[(14)] = inst_18480);

return statearr_18533;
})();
return cljs.core.async.impl.ioc_helpers.return_chan.call(null,state_18483__$1,inst_18481);
} else {
if((state_val_18484 === (13))){
var inst_18227 = (state_18483[(11)]);
var inst_18253 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_18254 = new cljs.core.Symbol("e2e.macros","pass?","e2e.macros/pass?",(894145299),null);
var inst_18255 = [new cljs.core.Keyword(null,"fail","fail",(1706214930)),"cycle must be in the future",inst_18254,inst_18227];
var inst_18256 = cljs.core.PersistentHashMap.fromArrays(inst_18253,inst_18255);
var inst_18257 = cljs.test.do_report.call(null,inst_18256);
var state_18483__$1 = state_18483;
var statearr_18534_19045 = state_18483__$1;
(statearr_18534_19045[(2)] = inst_18257);

(statearr_18534_19045[(1)] = (14));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_18484 === (45))){
var inst_18393 = (state_18483[(15)]);
var inst_18395 = (state_18483[(16)]);
var inst_18391 = (state_18483[(2)]);
var inst_18392 = inst_18391.cause;
var inst_18393__$1 = inst_18392.message;
var inst_18394 = ["missing authority of ",e2e.proposals.prop_acc].join('');
var inst_18395__$1 = clojure.string.ends_with_QMARK_.call(null,inst_18393__$1,inst_18394);
var inst_18396 = (!(inst_18395__$1));
var state_18483__$1 = (function (){var statearr_18535 = state_18483;
(statearr_18535[(15)] = inst_18393__$1);

(statearr_18535[(16)] = inst_18395__$1);

return statearr_18535;
})();
if(inst_18396){
var statearr_18536_19046 = state_18483__$1;
(statearr_18536_19046[(1)] = (46));

} else {
var statearr_18537_19047 = state_18483__$1;
(statearr_18537_19047[(1)] = (47));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_18484 === (14))){
var inst_18227 = (state_18483[(11)]);
var inst_18259 = (state_18483[(2)]);
var _ = (function (){var statearr_18539 = state_18483;
(statearr_18539[(4)] = cljs.core.rest.call(null,(state_18483[(4)])));

return statearr_18539;
})();
var state_18483__$1 = (function (){var statearr_18540 = state_18483;
(statearr_18540[(17)] = inst_18259);

return statearr_18540;
})();
var statearr_18541_19048 = state_18483__$1;
(statearr_18541_19048[(2)] = inst_18227);

(statearr_18541_19048[(1)] = (9));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_18484 === (46))){
var inst_18393 = (state_18483[(15)]);
var inst_18398 = ["missing authority of ",e2e.proposals.prop_acc].join('');
var inst_18399 = ["expected =",inst_18398," actual = ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_18393)].join('');
var inst_18400 = cljs.core.prn.call(null,inst_18399);
var state_18483__$1 = state_18483;
var statearr_18542_19049 = state_18483__$1;
(statearr_18542_19049[(2)] = inst_18400);

(statearr_18542_19049[(1)] = (48));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_18484 === (15))){
var _ = (function (){var statearr_18543 = state_18483;
(statearr_18543[(4)] = cljs.core.rest.call(null,(state_18483[(4)])));

return statearr_18543;
})();
var state_18483__$1 = state_18483;
var ex18538 = (state_18483__$1[(2)]);
var statearr_18544_19050 = state_18483__$1;
(statearr_18544_19050[(5)] = ex18538);


if((ex18538 instanceof Error)){
var statearr_18545_19051 = state_18483__$1;
(statearr_18545_19051[(1)] = (4));

(statearr_18545_19051[(5)] = null);

} else {
throw ex18538;

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_18484 === (47))){
var state_18483__$1 = state_18483;
var statearr_18546_19052 = state_18483__$1;
(statearr_18546_19052[(2)] = null);

(statearr_18546_19052[(1)] = (48));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_18484 === (16))){
var inst_18280 = (state_18483[(18)]);
var inst_18280__$1 = (state_18483[(2)]);
var inst_18281 = (inst_18280__$1 instanceof cljs.core.ExceptionInfo);
var inst_18282 = cljs.core.ex_data.call(null,inst_18280__$1);
var inst_18283 = new cljs.core.Keyword(null,"error","error",(-978969032)).cljs$core$IFn$_invoke$arity$1(inst_18282);
var inst_18284 = cljs.core._EQ_.call(null,inst_18283,new cljs.core.Keyword(null,"promise-error","promise-error",(-90673560)));
var inst_18285 = ((inst_18281) && (inst_18284));
var state_18483__$1 = (function (){var statearr_18547 = state_18483;
(statearr_18547[(18)] = inst_18280__$1);

return statearr_18547;
})();
if(cljs.core.truth_(inst_18285)){
var statearr_18548_19053 = state_18483__$1;
(statearr_18548_19053[(1)] = (17));

} else {
var statearr_18549_19054 = state_18483__$1;
(statearr_18549_19054[(1)] = (18));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_18484 === (48))){
var inst_18403 = (state_18483[(2)]);
var state_18483__$1 = (function (){var statearr_18550 = state_18483;
(statearr_18550[(19)] = inst_18403);

return statearr_18550;
})();
var statearr_18551_19055 = state_18483__$1;
(statearr_18551_19055[(2)] = null);

(statearr_18551_19055[(1)] = (49));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_18484 === (17))){
var inst_18280 = (state_18483[(18)]);
var inst_18287 = (function(){throw inst_18280})();
var state_18483__$1 = state_18483;
var statearr_18552_19056 = state_18483__$1;
(statearr_18552_19056[(2)] = inst_18287);

(statearr_18552_19056[(1)] = (19));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_18484 === (49))){
var inst_18395 = (state_18483[(16)]);
var _ = (function (){var statearr_18553 = state_18483;
(statearr_18553[(4)] = cljs.core.cons.call(null,(52),(state_18483[(4)])));

return statearr_18553;
})();
var state_18483__$1 = state_18483;
if(cljs.core.truth_(inst_18395)){
var statearr_18554_19057 = state_18483__$1;
(statearr_18554_19057[(1)] = (53));

} else {
var statearr_18555_19058 = state_18483__$1;
(statearr_18555_19058[(1)] = (54));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_18484 === (18))){
var inst_18280 = (state_18483[(18)]);
var state_18483__$1 = state_18483;
var statearr_18556_19059 = state_18483__$1;
(statearr_18556_19059[(2)] = inst_18280);

(statearr_18556_19059[(1)] = (19));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_18484 === (50))){
var inst_18431 = (state_18483[(2)]);
var state_18483__$1 = state_18483;
var statearr_18557_19060 = state_18483__$1;
(statearr_18557_19060[(2)] = inst_18431);

(statearr_18557_19060[(1)] = (44));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_18484 === (19))){
var inst_18290 = (state_18483[(2)]);
var state_18483__$1 = (function (){var statearr_18558 = state_18483;
(statearr_18558[(20)] = inst_18290);

return statearr_18558;
})();
var statearr_18559_19061 = state_18483__$1;
(statearr_18559_19061[(2)] = null);

(statearr_18559_19061[(1)] = (20));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_18484 === (51))){
var inst_18404 = (state_18483[(2)]);
var inst_18405 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_18406 = new cljs.core.Symbol("e2e.macros","pass?","e2e.macros/pass?",(894145299),null);
var inst_18407 = [new cljs.core.Keyword(null,"error","error",(-978969032)),"must be contract owner",inst_18406,inst_18404];
var inst_18408 = cljs.core.PersistentHashMap.fromArrays(inst_18405,inst_18407);
var inst_18409 = cljs.test.do_report.call(null,inst_18408);
var state_18483__$1 = state_18483;
var statearr_18561_19062 = state_18483__$1;
(statearr_18561_19062[(2)] = inst_18409);

(statearr_18561_19062[(1)] = (50));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_18484 === (20))){
var _ = (function (){var statearr_18562 = state_18483;
(statearr_18562[(4)] = cljs.core.cons.call(null,(23),(state_18483[(4)])));

return statearr_18562;
})();
var inst_18302 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002))];
var inst_18303 = [new cljs.core.Keyword(null,"fail","fail",(1706214930)),"cycle must be in the future"];
var inst_18304 = cljs.core.PersistentHashMap.fromArrays(inst_18302,inst_18303);
var inst_18305 = cljs.test.do_report.call(null,inst_18304);
var ___$1 = (function (){var statearr_18563 = state_18483;
(statearr_18563[(4)] = cljs.core.rest.call(null,(state_18483[(4)])));

return statearr_18563;
})();
var state_18483__$1 = state_18483;
var statearr_18564_19063 = state_18483__$1;
(statearr_18564_19063[(2)] = inst_18305);

(statearr_18564_19063[(1)] = (21));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_18484 === (52))){
var _ = (function (){var statearr_18565 = state_18483;
(statearr_18565[(4)] = cljs.core.rest.call(null,(state_18483[(4)])));

return statearr_18565;
})();
var state_18483__$1 = state_18483;
var ex18560 = (state_18483__$1[(2)]);
var statearr_18566_19064 = state_18483__$1;
(statearr_18566_19064[(5)] = ex18560);


var statearr_18567_19065 = state_18483__$1;
(statearr_18567_19065[(1)] = (51));

(statearr_18567_19065[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_18484 === (21))){
var inst_18308 = (state_18483[(2)]);
var _ = (function (){var statearr_18568 = state_18483;
(statearr_18568[(4)] = cljs.core.rest.call(null,(state_18483[(4)])));

return statearr_18568;
})();
var state_18483__$1 = state_18483;
var statearr_18569_19066 = state_18483__$1;
(statearr_18569_19066[(2)] = inst_18308);

(statearr_18569_19066[(1)] = (3));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_18484 === (53))){
var inst_18395 = (state_18483[(16)]);
var inst_18416 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_18417 = new cljs.core.Symbol("e2e.macros","pass?","e2e.macros/pass?",(894145299),null);
var inst_18418 = [new cljs.core.Keyword(null,"pass","pass",(1574159993)),"must be contract owner",inst_18417,inst_18395];
var inst_18419 = cljs.core.PersistentHashMap.fromArrays(inst_18416,inst_18418);
var inst_18420 = cljs.test.do_report.call(null,inst_18419);
var state_18483__$1 = state_18483;
var statearr_18570_19067 = state_18483__$1;
(statearr_18570_19067[(2)] = inst_18420);

(statearr_18570_19067[(1)] = (55));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_18484 === (22))){
var inst_18291 = (state_18483[(2)]);
var inst_18292 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_18293 = null;
var inst_18294 = [new cljs.core.Keyword(null,"error","error",(-978969032)),"cycle must be in the future",inst_18293,inst_18291];
var inst_18295 = cljs.core.PersistentHashMap.fromArrays(inst_18292,inst_18294);
var inst_18296 = cljs.test.do_report.call(null,inst_18295);
var state_18483__$1 = state_18483;
var statearr_18572_19068 = state_18483__$1;
(statearr_18572_19068[(2)] = inst_18296);

(statearr_18572_19068[(1)] = (21));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_18484 === (54))){
var inst_18395 = (state_18483[(16)]);
var inst_18422 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_18423 = new cljs.core.Symbol("e2e.macros","pass?","e2e.macros/pass?",(894145299),null);
var inst_18424 = [new cljs.core.Keyword(null,"fail","fail",(1706214930)),"must be contract owner",inst_18423,inst_18395];
var inst_18425 = cljs.core.PersistentHashMap.fromArrays(inst_18422,inst_18424);
var inst_18426 = cljs.test.do_report.call(null,inst_18425);
var state_18483__$1 = state_18483;
var statearr_18573_19069 = state_18483__$1;
(statearr_18573_19069[(2)] = inst_18426);

(statearr_18573_19069[(1)] = (55));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_18484 === (23))){
var _ = (function (){var statearr_18574 = state_18483;
(statearr_18574[(4)] = cljs.core.rest.call(null,(state_18483[(4)])));

return statearr_18574;
})();
var state_18483__$1 = state_18483;
var ex18571 = (state_18483__$1[(2)]);
var statearr_18575_19070 = state_18483__$1;
(statearr_18575_19070[(5)] = ex18571);


var statearr_18576_19071 = state_18483__$1;
(statearr_18576_19071[(1)] = (22));

(statearr_18576_19071[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_18484 === (55))){
var inst_18395 = (state_18483[(16)]);
var inst_18428 = (state_18483[(2)]);
var _ = (function (){var statearr_18578 = state_18483;
(statearr_18578[(4)] = cljs.core.rest.call(null,(state_18483[(4)])));

return statearr_18578;
})();
var state_18483__$1 = (function (){var statearr_18579 = state_18483;
(statearr_18579[(21)] = inst_18428);

return statearr_18579;
})();
var statearr_18580_19072 = state_18483__$1;
(statearr_18580_19072[(2)] = inst_18395);

(statearr_18580_19072[(1)] = (50));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_18484 === (24))){
var _ = (function (){var statearr_18581 = state_18483;
(statearr_18581[(4)] = cljs.core.cons.call(null,(31),(state_18483[(4)])));

return statearr_18581;
})();
var inst_18337 = [new cljs.core.Keyword(null,"id","id",(-1388402092)),new cljs.core.Keyword(null,"start_time","start_time",(889556682)),new cljs.core.Keyword(null,"budget","budget",(-405386281))];
var inst_18338 = cljs.core.PersistentVector.EMPTY_NODE;
var inst_18339 = [new cljs.core.Keyword(null,"quantity","quantity",(-1929050694)),new cljs.core.Keyword(null,"contract","contract",(798152745))];
var inst_18340 = ["326000.0000 EFX",e2e.proposals.token_acc];
var inst_18341 = cljs.core.PersistentHashMap.fromArrays(inst_18339,inst_18340);
var inst_18342 = [inst_18341];
var inst_18343 = (new cljs.core.PersistentVector(null,(1),(5),inst_18338,inst_18342,null));
var inst_18344 = [(3),"2021-01-01 12:00:00",inst_18343];
var inst_18345 = cljs.core.PersistentHashMap.fromArrays(inst_18337,inst_18344);
var inst_18346 = eos_cljs.core.transact.call(null,e2e.proposals.prop_acc,"updatecycle",inst_18345);
var inst_18347 = cljs.core.async.interop.p__GT_c.call(null,inst_18346);
var state_18483__$1 = state_18483;
return cljs.core.async.impl.ioc_helpers.take_BANG_.call(null,state_18483__$1,(32),inst_18347);
} else {
if((state_val_18484 === (56))){
var _ = (function (){var statearr_18582 = state_18483;
(statearr_18582[(4)] = cljs.core.rest.call(null,(state_18483[(4)])));

return statearr_18582;
})();
var state_18483__$1 = state_18483;
var ex18577 = (state_18483__$1[(2)]);
var statearr_18583_19073 = state_18483__$1;
(statearr_18583_19073[(5)] = ex18577);


if((ex18577 instanceof Error)){
var statearr_18584_19074 = state_18483__$1;
(statearr_18584_19074[(1)] = (45));

(statearr_18584_19074[(5)] = null);

} else {
throw ex18577;

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_18484 === (25))){
var inst_18390 = (state_18483[(2)]);
var state_18483__$1 = (function (){var statearr_18585 = state_18483;
(statearr_18585[(22)] = inst_18390);

return statearr_18585;
})();
var statearr_18586_19075 = state_18483__$1;
(statearr_18586_19075[(2)] = null);

(statearr_18586_19075[(1)] = (43));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_18484 === (57))){
var inst_18449 = (state_18483[(23)]);
var inst_18449__$1 = (state_18483[(2)]);
var inst_18450 = (inst_18449__$1 instanceof cljs.core.ExceptionInfo);
var inst_18451 = cljs.core.ex_data.call(null,inst_18449__$1);
var inst_18452 = new cljs.core.Keyword(null,"error","error",(-978969032)).cljs$core$IFn$_invoke$arity$1(inst_18451);
var inst_18453 = cljs.core._EQ_.call(null,inst_18452,new cljs.core.Keyword(null,"promise-error","promise-error",(-90673560)));
var inst_18454 = ((inst_18450) && (inst_18453));
var state_18483__$1 = (function (){var statearr_18587 = state_18483;
(statearr_18587[(23)] = inst_18449__$1);

return statearr_18587;
})();
if(cljs.core.truth_(inst_18454)){
var statearr_18588_19076 = state_18483__$1;
(statearr_18588_19076[(1)] = (58));

} else {
var statearr_18589_19077 = state_18483__$1;
(statearr_18589_19077[(1)] = (59));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_18484 === (26))){
var inst_18312 = (state_18483[(2)]);
var inst_18313 = cljs.core.prn.call(null,"test failed with ",inst_18312);
var state_18483__$1 = (function (){var statearr_18590 = state_18483;
(statearr_18590[(24)] = inst_18313);

return statearr_18590;
})();
var statearr_18591_19078 = state_18483__$1;
(statearr_18591_19078[(2)] = null);

(statearr_18591_19078[(1)] = (27));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_18484 === (58))){
var inst_18449 = (state_18483[(23)]);
var inst_18456 = (function(){throw inst_18449})();
var state_18483__$1 = state_18483;
var statearr_18592_19079 = state_18483__$1;
(statearr_18592_19079[(2)] = inst_18456);

(statearr_18592_19079[(1)] = (60));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_18484 === (27))){
var _ = (function (){var statearr_18593 = state_18483;
(statearr_18593[(4)] = cljs.core.cons.call(null,(30),(state_18483[(4)])));

return statearr_18593;
})();
var inst_18325 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002))];
var inst_18326 = [new cljs.core.Keyword(null,"fail","fail",(1706214930)),null];
var inst_18327 = cljs.core.PersistentHashMap.fromArrays(inst_18325,inst_18326);
var inst_18328 = cljs.test.do_report.call(null,inst_18327);
var ___$1 = (function (){var statearr_18594 = state_18483;
(statearr_18594[(4)] = cljs.core.rest.call(null,(state_18483[(4)])));

return statearr_18594;
})();
var state_18483__$1 = state_18483;
var statearr_18595_19080 = state_18483__$1;
(statearr_18595_19080[(2)] = inst_18328);

(statearr_18595_19080[(1)] = (28));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_18484 === (59))){
var inst_18449 = (state_18483[(23)]);
var state_18483__$1 = state_18483;
var statearr_18596_19081 = state_18483__$1;
(statearr_18596_19081[(2)] = inst_18449);

(statearr_18596_19081[(1)] = (60));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_18484 === (28))){
var inst_18331 = (state_18483[(2)]);
var state_18483__$1 = state_18483;
var statearr_18597_19082 = state_18483__$1;
(statearr_18597_19082[(2)] = inst_18331);

(statearr_18597_19082[(1)] = (25));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_18484 === (60))){
var inst_18459 = (state_18483[(2)]);
var state_18483__$1 = (function (){var statearr_18598 = state_18483;
(statearr_18598[(25)] = inst_18459);

return statearr_18598;
})();
var statearr_18599_19083 = state_18483__$1;
(statearr_18599_19083[(2)] = null);

(statearr_18599_19083[(1)] = (61));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_18484 === (29))){
var inst_18314 = (state_18483[(2)]);
var inst_18315 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_18316 = null;
var inst_18317 = [new cljs.core.Keyword(null,"error","error",(-978969032)),null,inst_18316,inst_18314];
var inst_18318 = cljs.core.PersistentHashMap.fromArrays(inst_18315,inst_18317);
var inst_18319 = cljs.test.do_report.call(null,inst_18318);
var state_18483__$1 = state_18483;
var statearr_18601_19084 = state_18483__$1;
(statearr_18601_19084[(2)] = inst_18319);

(statearr_18601_19084[(1)] = (28));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_18484 === (61))){
var _ = (function (){var statearr_18602 = state_18483;
(statearr_18602[(4)] = cljs.core.cons.call(null,(64),(state_18483[(4)])));

return statearr_18602;
})();
var inst_18471 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002))];
var inst_18472 = [new cljs.core.Keyword(null,"fail","fail",(1706214930)),"must be contract owner"];
var inst_18473 = cljs.core.PersistentHashMap.fromArrays(inst_18471,inst_18472);
var inst_18474 = cljs.test.do_report.call(null,inst_18473);
var ___$1 = (function (){var statearr_18603 = state_18483;
(statearr_18603[(4)] = cljs.core.rest.call(null,(state_18483[(4)])));

return statearr_18603;
})();
var state_18483__$1 = state_18483;
var statearr_18604_19085 = state_18483__$1;
(statearr_18604_19085[(2)] = inst_18474);

(statearr_18604_19085[(1)] = (62));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_18484 === (30))){
var _ = (function (){var statearr_18606 = state_18483;
(statearr_18606[(4)] = cljs.core.rest.call(null,(state_18483[(4)])));

return statearr_18606;
})();
var state_18483__$1 = state_18483;
var ex18600 = (state_18483__$1[(2)]);
var statearr_18607_19086 = state_18483__$1;
(statearr_18607_19086[(5)] = ex18600);


var statearr_18608_19087 = state_18483__$1;
(statearr_18608_19087[(1)] = (29));

(statearr_18608_19087[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_18484 === (62))){
var inst_18477 = (state_18483[(2)]);
var _ = (function (){var statearr_18609 = state_18483;
(statearr_18609[(4)] = cljs.core.rest.call(null,(state_18483[(4)])));

return statearr_18609;
})();
var state_18483__$1 = state_18483;
var statearr_18610_19088 = state_18483__$1;
(statearr_18610_19088[(2)] = inst_18477);

(statearr_18610_19088[(1)] = (44));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_18484 === (31))){
var _ = (function (){var statearr_18611 = state_18483;
(statearr_18611[(4)] = cljs.core.rest.call(null,(state_18483[(4)])));

return statearr_18611;
})();
var state_18483__$1 = state_18483;
var ex18605 = (state_18483__$1[(2)]);
var statearr_18612_19089 = state_18483__$1;
(statearr_18612_19089[(5)] = ex18605);


if((ex18605 instanceof Error)){
var statearr_18613_19090 = state_18483__$1;
(statearr_18613_19090[(1)] = (26));

(statearr_18613_19090[(5)] = null);

} else {
throw ex18605;

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_18484 === (63))){
var inst_18460 = (state_18483[(2)]);
var inst_18461 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_18462 = null;
var inst_18463 = [new cljs.core.Keyword(null,"error","error",(-978969032)),"must be contract owner",inst_18462,inst_18460];
var inst_18464 = cljs.core.PersistentHashMap.fromArrays(inst_18461,inst_18463);
var inst_18465 = cljs.test.do_report.call(null,inst_18464);
var state_18483__$1 = state_18483;
var statearr_18614_19091 = state_18483__$1;
(statearr_18614_19091[(2)] = inst_18465);

(statearr_18614_19091[(1)] = (62));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
return null;
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
});})(c__19__auto__,___192__auto__,self____$1))
;
return ((function (switch__14__auto__,c__19__auto__,___192__auto__,self____$1){
return (function() {
var e2e$proposals$state_machine__15__auto__ = null;
var e2e$proposals$state_machine__15__auto____0 = (function (){
var statearr_18615 = [null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];
(statearr_18615[(0)] = e2e$proposals$state_machine__15__auto__);

(statearr_18615[(1)] = (1));

return statearr_18615;
});
var e2e$proposals$state_machine__15__auto____1 = (function (state_18483){
while(true){
var ret_value__16__auto__ = (function (){try{while(true){
var result__17__auto__ = switch__14__auto__.call(null,state_18483);
if(cljs.core.keyword_identical_QMARK_.call(null,result__17__auto__,new cljs.core.Keyword(null,"recur","recur",(-437573268)))){
continue;
} else {
return result__17__auto__;
}
break;
}
}catch (e18616){var ex__18__auto__ = e18616;
var statearr_18617_19092 = state_18483;
(statearr_18617_19092[(2)] = ex__18__auto__);


if(cljs.core.seq.call(null,(state_18483[(4)]))){
var statearr_18618_19093 = state_18483;
(statearr_18618_19093[(1)] = cljs.core.first.call(null,(state_18483[(4)])));

} else {
throw ex__18__auto__;
}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
}})();
if(cljs.core.keyword_identical_QMARK_.call(null,ret_value__16__auto__,new cljs.core.Keyword(null,"recur","recur",(-437573268)))){
var G__19094 = state_18483;
state_18483 = G__19094;
continue;
} else {
return ret_value__16__auto__;
}
break;
}
});
e2e$proposals$state_machine__15__auto__ = function(state_18483){
switch(arguments.length){
case 0:
return e2e$proposals$state_machine__15__auto____0.call(this);
case 1:
return e2e$proposals$state_machine__15__auto____1.call(this,state_18483);
}
throw(new Error('Invalid arity: ' + arguments.length));
};
e2e$proposals$state_machine__15__auto__.cljs$core$IFn$_invoke$arity$0 = e2e$proposals$state_machine__15__auto____0;
e2e$proposals$state_machine__15__auto__.cljs$core$IFn$_invoke$arity$1 = e2e$proposals$state_machine__15__auto____1;
return e2e$proposals$state_machine__15__auto__;
})()
;})(switch__14__auto__,c__19__auto__,___192__auto__,self____$1))
})();
var state__21__auto__ = (function (){var statearr_18619 = f__20__auto__.call(null);
(statearr_18619[(6)] = c__19__auto__);

return statearr_18619;
})();
return cljs.core.async.impl.ioc_helpers.run_state_machine_wrapped.call(null,state__21__auto__);
});})(c__19__auto__,___192__auto__,self____$1))
);

return c__19__auto__;
});

e2e.proposals.t_e2e$proposals18220.prototype.apply = (function (self__,args18223){
var self__ = this;
var self____$1 = this;
return self____$1.call.apply(self____$1,[self____$1].concat(cljs.core.aclone.call(null,args18223)));
});

e2e.proposals.t_e2e$proposals18220.prototype.cljs$core$IFn$_invoke$arity$1 = (function (done){
var self__ = this;
var ___192__auto__ = this;
var c__19__auto__ = cljs.core.async.chan.call(null,(1));
cljs.core.async.impl.dispatch.run.call(null,((function (c__19__auto__,___192__auto__){
return (function (){
var f__20__auto__ = (function (){var switch__14__auto__ = ((function (c__19__auto__,___192__auto__){
return (function (state_18879){
var state_val_18880 = (state_18879[(1)]);
if((state_val_18880 === (32))){
var inst_18745 = (state_18879[(7)]);
var inst_18745__$1 = (state_18879[(2)]);
var inst_18746 = (inst_18745__$1 instanceof cljs.core.ExceptionInfo);
var inst_18747 = cljs.core.ex_data.call(null,inst_18745__$1);
var inst_18748 = new cljs.core.Keyword(null,"error","error",(-978969032)).cljs$core$IFn$_invoke$arity$1(inst_18747);
var inst_18749 = cljs.core._EQ_.call(null,inst_18748,new cljs.core.Keyword(null,"promise-error","promise-error",(-90673560)));
var inst_18750 = ((inst_18746) && (inst_18749));
var state_18879__$1 = (function (){var statearr_18882 = state_18879;
(statearr_18882[(7)] = inst_18745__$1);

return statearr_18882;
})();
if(cljs.core.truth_(inst_18750)){
var statearr_18883_19095 = state_18879__$1;
(statearr_18883_19095[(1)] = (33));

} else {
var statearr_18884_19096 = state_18879__$1;
(statearr_18884_19096[(1)] = (34));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_18880 === (64))){
var _ = (function (){var statearr_18885 = state_18879;
(statearr_18885[(4)] = cljs.core.rest.call(null,(state_18879[(4)])));

return statearr_18885;
})();
var state_18879__$1 = state_18879;
var ex18881 = (state_18879__$1[(2)]);
var statearr_18886_19097 = state_18879__$1;
(statearr_18886_19097[(5)] = ex18881);


var statearr_18887_19098 = state_18879__$1;
(statearr_18887_19098[(1)] = (63));

(statearr_18887_19098[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_18880 === (1))){
var state_18879__$1 = state_18879;
var statearr_18888_19099 = state_18879__$1;
(statearr_18888_19099[(2)] = null);

(statearr_18888_19099[(1)] = (2));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_18880 === (33))){
var inst_18745 = (state_18879[(7)]);
var inst_18752 = (function(){throw inst_18745})();
var state_18879__$1 = state_18879;
var statearr_18889_19100 = state_18879__$1;
(statearr_18889_19100[(2)] = inst_18752);

(statearr_18889_19100[(1)] = (35));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_18880 === (2))){
var _ = (function (){var statearr_18890 = state_18879;
(statearr_18890[(4)] = cljs.core.cons.call(null,(15),(state_18879[(4)])));

return statearr_18890;
})();
var inst_18664 = [new cljs.core.Keyword(null,"id","id",(-1388402092)),new cljs.core.Keyword(null,"start_time","start_time",(889556682)),new cljs.core.Keyword(null,"budget","budget",(-405386281))];
var inst_18665 = cljs.core.PersistentVector.EMPTY_NODE;
var inst_18666 = [new cljs.core.Keyword(null,"quantity","quantity",(-1929050694)),new cljs.core.Keyword(null,"contract","contract",(798152745))];
var inst_18667 = ["326000.0000 EFX",e2e.proposals.token_acc];
var inst_18668 = cljs.core.PersistentHashMap.fromArrays(inst_18666,inst_18667);
var inst_18669 = [inst_18668];
var inst_18670 = (new cljs.core.PersistentVector(null,(1),(5),inst_18665,inst_18669,null));
var inst_18671 = [(2),"2021-01-01 12:00:00",inst_18670];
var inst_18672 = cljs.core.PersistentHashMap.fromArrays(inst_18664,inst_18671);
var inst_18673 = eos_cljs.core.transact.call(null,e2e.proposals.prop_acc,"updatecycle",inst_18672);
var inst_18674 = cljs.core.async.interop.p__GT_c.call(null,inst_18673);
var state_18879__$1 = state_18879;
return cljs.core.async.impl.ioc_helpers.take_BANG_.call(null,state_18879__$1,(16),inst_18674);
} else {
if((state_val_18880 === (34))){
var inst_18745 = (state_18879[(7)]);
var state_18879__$1 = state_18879;
var statearr_18891_19101 = state_18879__$1;
(statearr_18891_19101[(2)] = inst_18745);

(statearr_18891_19101[(1)] = (35));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_18880 === (3))){
var inst_18707 = (state_18879[(2)]);
var state_18879__$1 = (function (){var statearr_18892 = state_18879;
(statearr_18892[(8)] = inst_18707);

return statearr_18892;
})();
var statearr_18893_19102 = state_18879__$1;
(statearr_18893_19102[(2)] = null);

(statearr_18893_19102[(1)] = (24));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_18880 === (35))){
var inst_18755 = (state_18879[(2)]);
var state_18879__$1 = (function (){var statearr_18894 = state_18879;
(statearr_18894[(9)] = inst_18755);

return statearr_18894;
})();
var statearr_18895_19103 = state_18879__$1;
(statearr_18895_19103[(2)] = null);

(statearr_18895_19103[(1)] = (36));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_18880 === (4))){
var inst_18622 = (state_18879[(10)]);
var inst_18623 = (state_18879[(11)]);
var inst_18620 = (state_18879[(2)]);
var inst_18621 = inst_18620.cause;
var inst_18622__$1 = inst_18621.message;
var inst_18623__$1 = clojure.string.ends_with_QMARK_.call(null,inst_18622__$1,"cycle is not in the future");
var inst_18624 = (!(inst_18623__$1));
var state_18879__$1 = (function (){var statearr_18896 = state_18879;
(statearr_18896[(10)] = inst_18622__$1);

(statearr_18896[(11)] = inst_18623__$1);

return statearr_18896;
})();
if(inst_18624){
var statearr_18897_19104 = state_18879__$1;
(statearr_18897_19104[(1)] = (5));

} else {
var statearr_18898_19105 = state_18879__$1;
(statearr_18898_19105[(1)] = (6));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_18880 === (36))){
var _ = (function (){var statearr_18899 = state_18879;
(statearr_18899[(4)] = cljs.core.cons.call(null,(39),(state_18879[(4)])));

return statearr_18899;
})();
var state_18879__$1 = state_18879;
var statearr_18900_19106 = state_18879__$1;
(statearr_18900_19106[(1)] = (40));



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_18880 === (5))){
var inst_18622 = (state_18879[(10)]);
var inst_18626 = ["expected =","cycle is not in the future"," actual = ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_18622)].join('');
var inst_18627 = cljs.core.prn.call(null,inst_18626);
var state_18879__$1 = state_18879;
var statearr_18902_19107 = state_18879__$1;
(statearr_18902_19107[(2)] = inst_18627);

(statearr_18902_19107[(1)] = (7));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_18880 === (37))){
var inst_18783 = (state_18879[(2)]);
var _ = (function (){var statearr_18903 = state_18879;
(statearr_18903[(4)] = cljs.core.rest.call(null,(state_18879[(4)])));

return statearr_18903;
})();
var state_18879__$1 = state_18879;
var statearr_18904_19108 = state_18879__$1;
(statearr_18904_19108[(2)] = inst_18783);

(statearr_18904_19108[(1)] = (25));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_18880 === (6))){
var state_18879__$1 = state_18879;
var statearr_18905_19109 = state_18879__$1;
(statearr_18905_19109[(2)] = null);

(statearr_18905_19109[(1)] = (7));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_18880 === (38))){
var inst_18756 = (state_18879[(2)]);
var inst_18757 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_18758 = true;
var inst_18759 = [new cljs.core.Keyword(null,"error","error",(-978969032)),null,inst_18758,inst_18756];
var inst_18760 = cljs.core.PersistentHashMap.fromArrays(inst_18757,inst_18759);
var inst_18761 = cljs.test.do_report.call(null,inst_18760);
var state_18879__$1 = state_18879;
var statearr_18907_19110 = state_18879__$1;
(statearr_18907_19110[(2)] = inst_18761);

(statearr_18907_19110[(1)] = (37));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_18880 === (7))){
var inst_18630 = (state_18879[(2)]);
var state_18879__$1 = (function (){var statearr_18908 = state_18879;
(statearr_18908[(12)] = inst_18630);

return statearr_18908;
})();
var statearr_18909_19111 = state_18879__$1;
(statearr_18909_19111[(2)] = null);

(statearr_18909_19111[(1)] = (8));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_18880 === (39))){
var _ = (function (){var statearr_18910 = state_18879;
(statearr_18910[(4)] = cljs.core.rest.call(null,(state_18879[(4)])));

return statearr_18910;
})();
var state_18879__$1 = state_18879;
var ex18906 = (state_18879__$1[(2)]);
var statearr_18911_19112 = state_18879__$1;
(statearr_18911_19112[(5)] = ex18906);


var statearr_18912_19113 = state_18879__$1;
(statearr_18912_19113[(1)] = (38));

(statearr_18912_19113[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_18880 === (8))){
var inst_18623 = (state_18879[(11)]);
var _ = (function (){var statearr_18913 = state_18879;
(statearr_18913[(4)] = cljs.core.cons.call(null,(11),(state_18879[(4)])));

return statearr_18913;
})();
var state_18879__$1 = state_18879;
if(cljs.core.truth_(inst_18623)){
var statearr_18914_19114 = state_18879__$1;
(statearr_18914_19114[(1)] = (12));

} else {
var statearr_18915_19115 = state_18879__$1;
(statearr_18915_19115[(1)] = (13));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_18880 === (40))){
var inst_18768 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_18769 = true;
var inst_18770 = [new cljs.core.Keyword(null,"pass","pass",(1574159993)),null,inst_18769,true];
var inst_18771 = cljs.core.PersistentHashMap.fromArrays(inst_18768,inst_18770);
var inst_18772 = cljs.test.do_report.call(null,inst_18771);
var state_18879__$1 = state_18879;
var statearr_18916_19116 = state_18879__$1;
(statearr_18916_19116[(2)] = inst_18772);

(statearr_18916_19116[(1)] = (42));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_18880 === (9))){
var inst_18658 = (state_18879[(2)]);
var state_18879__$1 = state_18879;
var statearr_18917_19117 = state_18879__$1;
(statearr_18917_19117[(2)] = inst_18658);

(statearr_18917_19117[(1)] = (3));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_18880 === (41))){
var inst_18774 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_18775 = true;
var inst_18776 = [new cljs.core.Keyword(null,"fail","fail",(1706214930)),null,inst_18775,true];
var inst_18777 = cljs.core.PersistentHashMap.fromArrays(inst_18774,inst_18776);
var inst_18778 = cljs.test.do_report.call(null,inst_18777);
var state_18879__$1 = state_18879;
var statearr_18918_19118 = state_18879__$1;
(statearr_18918_19118[(2)] = inst_18778);

(statearr_18918_19118[(1)] = (42));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_18880 === (10))){
var inst_18631 = (state_18879[(2)]);
var inst_18632 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_18633 = new cljs.core.Symbol("e2e.macros","pass?","e2e.macros/pass?",(894145299),null);
var inst_18634 = [new cljs.core.Keyword(null,"error","error",(-978969032)),"cycle must be in the future",inst_18633,inst_18631];
var inst_18635 = cljs.core.PersistentHashMap.fromArrays(inst_18632,inst_18634);
var inst_18636 = cljs.test.do_report.call(null,inst_18635);
var state_18879__$1 = state_18879;
var statearr_18920_19119 = state_18879__$1;
(statearr_18920_19119[(2)] = inst_18636);

(statearr_18920_19119[(1)] = (9));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_18880 === (42))){
var inst_18780 = (state_18879[(2)]);
var _ = (function (){var statearr_18921 = state_18879;
(statearr_18921[(4)] = cljs.core.rest.call(null,(state_18879[(4)])));

return statearr_18921;
})();
var state_18879__$1 = (function (){var statearr_18922 = state_18879;
(statearr_18922[(13)] = inst_18780);

return statearr_18922;
})();
var statearr_18923_19120 = state_18879__$1;
(statearr_18923_19120[(2)] = true);

(statearr_18923_19120[(1)] = (37));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_18880 === (11))){
var _ = (function (){var statearr_18924 = state_18879;
(statearr_18924[(4)] = cljs.core.rest.call(null,(state_18879[(4)])));

return statearr_18924;
})();
var state_18879__$1 = state_18879;
var ex18919 = (state_18879__$1[(2)]);
var statearr_18925_19121 = state_18879__$1;
(statearr_18925_19121[(5)] = ex18919);


var statearr_18926_19122 = state_18879__$1;
(statearr_18926_19122[(1)] = (10));

(statearr_18926_19122[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_18880 === (43))){
var _ = (function (){var statearr_18927 = state_18879;
(statearr_18927[(4)] = cljs.core.cons.call(null,(56),(state_18879[(4)])));

return statearr_18927;
})();
var inst_18833 = [new cljs.core.Keyword(null,"id","id",(-1388402092)),new cljs.core.Keyword(null,"start_time","start_time",(889556682)),new cljs.core.Keyword(null,"budget","budget",(-405386281))];
var inst_18834 = cljs.core.PersistentVector.EMPTY_NODE;
var inst_18835 = [new cljs.core.Keyword(null,"quantity","quantity",(-1929050694)),new cljs.core.Keyword(null,"contract","contract",(798152745))];
var inst_18836 = ["326000.0000 EFX",e2e.proposals.token_acc];
var inst_18837 = cljs.core.PersistentHashMap.fromArrays(inst_18835,inst_18836);
var inst_18838 = [inst_18837];
var inst_18839 = (new cljs.core.PersistentVector(null,(1),(5),inst_18834,inst_18838,null));
var inst_18840 = [(3),"2021-01-01 12:00:00",inst_18839];
var inst_18841 = cljs.core.PersistentHashMap.fromArrays(inst_18833,inst_18840);
var inst_18842 = e2e.proposals.eos_tx_owner.call(null,e2e.proposals.prop_acc,"updatecycle",inst_18841);
var inst_18843 = cljs.core.async.interop.p__GT_c.call(null,inst_18842);
var state_18879__$1 = state_18879;
return cljs.core.async.impl.ioc_helpers.take_BANG_.call(null,state_18879__$1,(57),inst_18843);
} else {
if((state_val_18880 === (12))){
var inst_18623 = (state_18879[(11)]);
var inst_18643 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_18644 = new cljs.core.Symbol("e2e.macros","pass?","e2e.macros/pass?",(894145299),null);
var inst_18645 = [new cljs.core.Keyword(null,"pass","pass",(1574159993)),"cycle must be in the future",inst_18644,inst_18623];
var inst_18646 = cljs.core.PersistentHashMap.fromArrays(inst_18643,inst_18645);
var inst_18647 = cljs.test.do_report.call(null,inst_18646);
var state_18879__$1 = state_18879;
var statearr_18928_19123 = state_18879__$1;
(statearr_18928_19123[(2)] = inst_18647);

(statearr_18928_19123[(1)] = (14));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_18880 === (44))){
var inst_18876 = (state_18879[(2)]);
var inst_18877 = done.call(null);
var state_18879__$1 = (function (){var statearr_18929 = state_18879;
(statearr_18929[(14)] = inst_18876);

return statearr_18929;
})();
return cljs.core.async.impl.ioc_helpers.return_chan.call(null,state_18879__$1,inst_18877);
} else {
if((state_val_18880 === (13))){
var inst_18623 = (state_18879[(11)]);
var inst_18649 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_18650 = new cljs.core.Symbol("e2e.macros","pass?","e2e.macros/pass?",(894145299),null);
var inst_18651 = [new cljs.core.Keyword(null,"fail","fail",(1706214930)),"cycle must be in the future",inst_18650,inst_18623];
var inst_18652 = cljs.core.PersistentHashMap.fromArrays(inst_18649,inst_18651);
var inst_18653 = cljs.test.do_report.call(null,inst_18652);
var state_18879__$1 = state_18879;
var statearr_18930_19124 = state_18879__$1;
(statearr_18930_19124[(2)] = inst_18653);

(statearr_18930_19124[(1)] = (14));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_18880 === (45))){
var inst_18789 = (state_18879[(15)]);
var inst_18791 = (state_18879[(16)]);
var inst_18787 = (state_18879[(2)]);
var inst_18788 = inst_18787.cause;
var inst_18789__$1 = inst_18788.message;
var inst_18790 = ["missing authority of ",e2e.proposals.prop_acc].join('');
var inst_18791__$1 = clojure.string.ends_with_QMARK_.call(null,inst_18789__$1,inst_18790);
var inst_18792 = (!(inst_18791__$1));
var state_18879__$1 = (function (){var statearr_18931 = state_18879;
(statearr_18931[(15)] = inst_18789__$1);

(statearr_18931[(16)] = inst_18791__$1);

return statearr_18931;
})();
if(inst_18792){
var statearr_18932_19125 = state_18879__$1;
(statearr_18932_19125[(1)] = (46));

} else {
var statearr_18933_19126 = state_18879__$1;
(statearr_18933_19126[(1)] = (47));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_18880 === (14))){
var inst_18623 = (state_18879[(11)]);
var inst_18655 = (state_18879[(2)]);
var _ = (function (){var statearr_18935 = state_18879;
(statearr_18935[(4)] = cljs.core.rest.call(null,(state_18879[(4)])));

return statearr_18935;
})();
var state_18879__$1 = (function (){var statearr_18936 = state_18879;
(statearr_18936[(17)] = inst_18655);

return statearr_18936;
})();
var statearr_18937_19127 = state_18879__$1;
(statearr_18937_19127[(2)] = inst_18623);

(statearr_18937_19127[(1)] = (9));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_18880 === (46))){
var inst_18789 = (state_18879[(15)]);
var inst_18794 = ["missing authority of ",e2e.proposals.prop_acc].join('');
var inst_18795 = ["expected =",inst_18794," actual = ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_18789)].join('');
var inst_18796 = cljs.core.prn.call(null,inst_18795);
var state_18879__$1 = state_18879;
var statearr_18938_19128 = state_18879__$1;
(statearr_18938_19128[(2)] = inst_18796);

(statearr_18938_19128[(1)] = (48));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_18880 === (15))){
var _ = (function (){var statearr_18939 = state_18879;
(statearr_18939[(4)] = cljs.core.rest.call(null,(state_18879[(4)])));

return statearr_18939;
})();
var state_18879__$1 = state_18879;
var ex18934 = (state_18879__$1[(2)]);
var statearr_18940_19129 = state_18879__$1;
(statearr_18940_19129[(5)] = ex18934);


if((ex18934 instanceof Error)){
var statearr_18941_19130 = state_18879__$1;
(statearr_18941_19130[(1)] = (4));

(statearr_18941_19130[(5)] = null);

} else {
throw ex18934;

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_18880 === (47))){
var state_18879__$1 = state_18879;
var statearr_18942_19131 = state_18879__$1;
(statearr_18942_19131[(2)] = null);

(statearr_18942_19131[(1)] = (48));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_18880 === (16))){
var inst_18676 = (state_18879[(18)]);
var inst_18676__$1 = (state_18879[(2)]);
var inst_18677 = (inst_18676__$1 instanceof cljs.core.ExceptionInfo);
var inst_18678 = cljs.core.ex_data.call(null,inst_18676__$1);
var inst_18679 = new cljs.core.Keyword(null,"error","error",(-978969032)).cljs$core$IFn$_invoke$arity$1(inst_18678);
var inst_18680 = cljs.core._EQ_.call(null,inst_18679,new cljs.core.Keyword(null,"promise-error","promise-error",(-90673560)));
var inst_18681 = ((inst_18677) && (inst_18680));
var state_18879__$1 = (function (){var statearr_18943 = state_18879;
(statearr_18943[(18)] = inst_18676__$1);

return statearr_18943;
})();
if(cljs.core.truth_(inst_18681)){
var statearr_18944_19132 = state_18879__$1;
(statearr_18944_19132[(1)] = (17));

} else {
var statearr_18945_19133 = state_18879__$1;
(statearr_18945_19133[(1)] = (18));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_18880 === (48))){
var inst_18799 = (state_18879[(2)]);
var state_18879__$1 = (function (){var statearr_18946 = state_18879;
(statearr_18946[(19)] = inst_18799);

return statearr_18946;
})();
var statearr_18947_19134 = state_18879__$1;
(statearr_18947_19134[(2)] = null);

(statearr_18947_19134[(1)] = (49));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_18880 === (17))){
var inst_18676 = (state_18879[(18)]);
var inst_18683 = (function(){throw inst_18676})();
var state_18879__$1 = state_18879;
var statearr_18948_19135 = state_18879__$1;
(statearr_18948_19135[(2)] = inst_18683);

(statearr_18948_19135[(1)] = (19));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_18880 === (49))){
var inst_18791 = (state_18879[(16)]);
var _ = (function (){var statearr_18949 = state_18879;
(statearr_18949[(4)] = cljs.core.cons.call(null,(52),(state_18879[(4)])));

return statearr_18949;
})();
var state_18879__$1 = state_18879;
if(cljs.core.truth_(inst_18791)){
var statearr_18950_19136 = state_18879__$1;
(statearr_18950_19136[(1)] = (53));

} else {
var statearr_18951_19137 = state_18879__$1;
(statearr_18951_19137[(1)] = (54));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_18880 === (18))){
var inst_18676 = (state_18879[(18)]);
var state_18879__$1 = state_18879;
var statearr_18952_19138 = state_18879__$1;
(statearr_18952_19138[(2)] = inst_18676);

(statearr_18952_19138[(1)] = (19));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_18880 === (50))){
var inst_18827 = (state_18879[(2)]);
var state_18879__$1 = state_18879;
var statearr_18953_19139 = state_18879__$1;
(statearr_18953_19139[(2)] = inst_18827);

(statearr_18953_19139[(1)] = (44));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_18880 === (19))){
var inst_18686 = (state_18879[(2)]);
var state_18879__$1 = (function (){var statearr_18954 = state_18879;
(statearr_18954[(20)] = inst_18686);

return statearr_18954;
})();
var statearr_18955_19140 = state_18879__$1;
(statearr_18955_19140[(2)] = null);

(statearr_18955_19140[(1)] = (20));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_18880 === (51))){
var inst_18800 = (state_18879[(2)]);
var inst_18801 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_18802 = new cljs.core.Symbol("e2e.macros","pass?","e2e.macros/pass?",(894145299),null);
var inst_18803 = [new cljs.core.Keyword(null,"error","error",(-978969032)),"must be contract owner",inst_18802,inst_18800];
var inst_18804 = cljs.core.PersistentHashMap.fromArrays(inst_18801,inst_18803);
var inst_18805 = cljs.test.do_report.call(null,inst_18804);
var state_18879__$1 = state_18879;
var statearr_18957_19141 = state_18879__$1;
(statearr_18957_19141[(2)] = inst_18805);

(statearr_18957_19141[(1)] = (50));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_18880 === (20))){
var _ = (function (){var statearr_18958 = state_18879;
(statearr_18958[(4)] = cljs.core.cons.call(null,(23),(state_18879[(4)])));

return statearr_18958;
})();
var inst_18698 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002))];
var inst_18699 = [new cljs.core.Keyword(null,"fail","fail",(1706214930)),"cycle must be in the future"];
var inst_18700 = cljs.core.PersistentHashMap.fromArrays(inst_18698,inst_18699);
var inst_18701 = cljs.test.do_report.call(null,inst_18700);
var ___$1 = (function (){var statearr_18959 = state_18879;
(statearr_18959[(4)] = cljs.core.rest.call(null,(state_18879[(4)])));

return statearr_18959;
})();
var state_18879__$1 = state_18879;
var statearr_18960_19142 = state_18879__$1;
(statearr_18960_19142[(2)] = inst_18701);

(statearr_18960_19142[(1)] = (21));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_18880 === (52))){
var _ = (function (){var statearr_18961 = state_18879;
(statearr_18961[(4)] = cljs.core.rest.call(null,(state_18879[(4)])));

return statearr_18961;
})();
var state_18879__$1 = state_18879;
var ex18956 = (state_18879__$1[(2)]);
var statearr_18962_19143 = state_18879__$1;
(statearr_18962_19143[(5)] = ex18956);


var statearr_18963_19144 = state_18879__$1;
(statearr_18963_19144[(1)] = (51));

(statearr_18963_19144[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_18880 === (21))){
var inst_18704 = (state_18879[(2)]);
var _ = (function (){var statearr_18964 = state_18879;
(statearr_18964[(4)] = cljs.core.rest.call(null,(state_18879[(4)])));

return statearr_18964;
})();
var state_18879__$1 = state_18879;
var statearr_18965_19145 = state_18879__$1;
(statearr_18965_19145[(2)] = inst_18704);

(statearr_18965_19145[(1)] = (3));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_18880 === (53))){
var inst_18791 = (state_18879[(16)]);
var inst_18812 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_18813 = new cljs.core.Symbol("e2e.macros","pass?","e2e.macros/pass?",(894145299),null);
var inst_18814 = [new cljs.core.Keyword(null,"pass","pass",(1574159993)),"must be contract owner",inst_18813,inst_18791];
var inst_18815 = cljs.core.PersistentHashMap.fromArrays(inst_18812,inst_18814);
var inst_18816 = cljs.test.do_report.call(null,inst_18815);
var state_18879__$1 = state_18879;
var statearr_18966_19146 = state_18879__$1;
(statearr_18966_19146[(2)] = inst_18816);

(statearr_18966_19146[(1)] = (55));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_18880 === (22))){
var inst_18687 = (state_18879[(2)]);
var inst_18688 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_18689 = null;
var inst_18690 = [new cljs.core.Keyword(null,"error","error",(-978969032)),"cycle must be in the future",inst_18689,inst_18687];
var inst_18691 = cljs.core.PersistentHashMap.fromArrays(inst_18688,inst_18690);
var inst_18692 = cljs.test.do_report.call(null,inst_18691);
var state_18879__$1 = state_18879;
var statearr_18968_19147 = state_18879__$1;
(statearr_18968_19147[(2)] = inst_18692);

(statearr_18968_19147[(1)] = (21));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_18880 === (54))){
var inst_18791 = (state_18879[(16)]);
var inst_18818 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_18819 = new cljs.core.Symbol("e2e.macros","pass?","e2e.macros/pass?",(894145299),null);
var inst_18820 = [new cljs.core.Keyword(null,"fail","fail",(1706214930)),"must be contract owner",inst_18819,inst_18791];
var inst_18821 = cljs.core.PersistentHashMap.fromArrays(inst_18818,inst_18820);
var inst_18822 = cljs.test.do_report.call(null,inst_18821);
var state_18879__$1 = state_18879;
var statearr_18969_19148 = state_18879__$1;
(statearr_18969_19148[(2)] = inst_18822);

(statearr_18969_19148[(1)] = (55));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_18880 === (23))){
var _ = (function (){var statearr_18970 = state_18879;
(statearr_18970[(4)] = cljs.core.rest.call(null,(state_18879[(4)])));

return statearr_18970;
})();
var state_18879__$1 = state_18879;
var ex18967 = (state_18879__$1[(2)]);
var statearr_18971_19149 = state_18879__$1;
(statearr_18971_19149[(5)] = ex18967);


var statearr_18972_19150 = state_18879__$1;
(statearr_18972_19150[(1)] = (22));

(statearr_18972_19150[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_18880 === (55))){
var inst_18791 = (state_18879[(16)]);
var inst_18824 = (state_18879[(2)]);
var _ = (function (){var statearr_18974 = state_18879;
(statearr_18974[(4)] = cljs.core.rest.call(null,(state_18879[(4)])));

return statearr_18974;
})();
var state_18879__$1 = (function (){var statearr_18975 = state_18879;
(statearr_18975[(21)] = inst_18824);

return statearr_18975;
})();
var statearr_18976_19151 = state_18879__$1;
(statearr_18976_19151[(2)] = inst_18791);

(statearr_18976_19151[(1)] = (50));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_18880 === (24))){
var _ = (function (){var statearr_18977 = state_18879;
(statearr_18977[(4)] = cljs.core.cons.call(null,(31),(state_18879[(4)])));

return statearr_18977;
})();
var inst_18733 = [new cljs.core.Keyword(null,"id","id",(-1388402092)),new cljs.core.Keyword(null,"start_time","start_time",(889556682)),new cljs.core.Keyword(null,"budget","budget",(-405386281))];
var inst_18734 = cljs.core.PersistentVector.EMPTY_NODE;
var inst_18735 = [new cljs.core.Keyword(null,"quantity","quantity",(-1929050694)),new cljs.core.Keyword(null,"contract","contract",(798152745))];
var inst_18736 = ["326000.0000 EFX",e2e.proposals.token_acc];
var inst_18737 = cljs.core.PersistentHashMap.fromArrays(inst_18735,inst_18736);
var inst_18738 = [inst_18737];
var inst_18739 = (new cljs.core.PersistentVector(null,(1),(5),inst_18734,inst_18738,null));
var inst_18740 = [(3),"2021-01-01 12:00:00",inst_18739];
var inst_18741 = cljs.core.PersistentHashMap.fromArrays(inst_18733,inst_18740);
var inst_18742 = eos_cljs.core.transact.call(null,e2e.proposals.prop_acc,"updatecycle",inst_18741);
var inst_18743 = cljs.core.async.interop.p__GT_c.call(null,inst_18742);
var state_18879__$1 = state_18879;
return cljs.core.async.impl.ioc_helpers.take_BANG_.call(null,state_18879__$1,(32),inst_18743);
} else {
if((state_val_18880 === (56))){
var _ = (function (){var statearr_18978 = state_18879;
(statearr_18978[(4)] = cljs.core.rest.call(null,(state_18879[(4)])));

return statearr_18978;
})();
var state_18879__$1 = state_18879;
var ex18973 = (state_18879__$1[(2)]);
var statearr_18979_19152 = state_18879__$1;
(statearr_18979_19152[(5)] = ex18973);


if((ex18973 instanceof Error)){
var statearr_18980_19153 = state_18879__$1;
(statearr_18980_19153[(1)] = (45));

(statearr_18980_19153[(5)] = null);

} else {
throw ex18973;

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_18880 === (25))){
var inst_18786 = (state_18879[(2)]);
var state_18879__$1 = (function (){var statearr_18981 = state_18879;
(statearr_18981[(22)] = inst_18786);

return statearr_18981;
})();
var statearr_18982_19154 = state_18879__$1;
(statearr_18982_19154[(2)] = null);

(statearr_18982_19154[(1)] = (43));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_18880 === (57))){
var inst_18845 = (state_18879[(23)]);
var inst_18845__$1 = (state_18879[(2)]);
var inst_18846 = (inst_18845__$1 instanceof cljs.core.ExceptionInfo);
var inst_18847 = cljs.core.ex_data.call(null,inst_18845__$1);
var inst_18848 = new cljs.core.Keyword(null,"error","error",(-978969032)).cljs$core$IFn$_invoke$arity$1(inst_18847);
var inst_18849 = cljs.core._EQ_.call(null,inst_18848,new cljs.core.Keyword(null,"promise-error","promise-error",(-90673560)));
var inst_18850 = ((inst_18846) && (inst_18849));
var state_18879__$1 = (function (){var statearr_18983 = state_18879;
(statearr_18983[(23)] = inst_18845__$1);

return statearr_18983;
})();
if(cljs.core.truth_(inst_18850)){
var statearr_18984_19155 = state_18879__$1;
(statearr_18984_19155[(1)] = (58));

} else {
var statearr_18985_19156 = state_18879__$1;
(statearr_18985_19156[(1)] = (59));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_18880 === (26))){
var inst_18708 = (state_18879[(2)]);
var inst_18709 = cljs.core.prn.call(null,"test failed with ",inst_18708);
var state_18879__$1 = (function (){var statearr_18986 = state_18879;
(statearr_18986[(24)] = inst_18709);

return statearr_18986;
})();
var statearr_18987_19157 = state_18879__$1;
(statearr_18987_19157[(2)] = null);

(statearr_18987_19157[(1)] = (27));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_18880 === (58))){
var inst_18845 = (state_18879[(23)]);
var inst_18852 = (function(){throw inst_18845})();
var state_18879__$1 = state_18879;
var statearr_18988_19158 = state_18879__$1;
(statearr_18988_19158[(2)] = inst_18852);

(statearr_18988_19158[(1)] = (60));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_18880 === (27))){
var _ = (function (){var statearr_18989 = state_18879;
(statearr_18989[(4)] = cljs.core.cons.call(null,(30),(state_18879[(4)])));

return statearr_18989;
})();
var inst_18721 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002))];
var inst_18722 = [new cljs.core.Keyword(null,"fail","fail",(1706214930)),null];
var inst_18723 = cljs.core.PersistentHashMap.fromArrays(inst_18721,inst_18722);
var inst_18724 = cljs.test.do_report.call(null,inst_18723);
var ___$1 = (function (){var statearr_18990 = state_18879;
(statearr_18990[(4)] = cljs.core.rest.call(null,(state_18879[(4)])));

return statearr_18990;
})();
var state_18879__$1 = state_18879;
var statearr_18991_19159 = state_18879__$1;
(statearr_18991_19159[(2)] = inst_18724);

(statearr_18991_19159[(1)] = (28));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_18880 === (59))){
var inst_18845 = (state_18879[(23)]);
var state_18879__$1 = state_18879;
var statearr_18992_19160 = state_18879__$1;
(statearr_18992_19160[(2)] = inst_18845);

(statearr_18992_19160[(1)] = (60));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_18880 === (28))){
var inst_18727 = (state_18879[(2)]);
var state_18879__$1 = state_18879;
var statearr_18993_19161 = state_18879__$1;
(statearr_18993_19161[(2)] = inst_18727);

(statearr_18993_19161[(1)] = (25));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_18880 === (60))){
var inst_18855 = (state_18879[(2)]);
var state_18879__$1 = (function (){var statearr_18994 = state_18879;
(statearr_18994[(25)] = inst_18855);

return statearr_18994;
})();
var statearr_18995_19162 = state_18879__$1;
(statearr_18995_19162[(2)] = null);

(statearr_18995_19162[(1)] = (61));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_18880 === (29))){
var inst_18710 = (state_18879[(2)]);
var inst_18711 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_18712 = null;
var inst_18713 = [new cljs.core.Keyword(null,"error","error",(-978969032)),null,inst_18712,inst_18710];
var inst_18714 = cljs.core.PersistentHashMap.fromArrays(inst_18711,inst_18713);
var inst_18715 = cljs.test.do_report.call(null,inst_18714);
var state_18879__$1 = state_18879;
var statearr_18997_19163 = state_18879__$1;
(statearr_18997_19163[(2)] = inst_18715);

(statearr_18997_19163[(1)] = (28));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_18880 === (61))){
var _ = (function (){var statearr_18998 = state_18879;
(statearr_18998[(4)] = cljs.core.cons.call(null,(64),(state_18879[(4)])));

return statearr_18998;
})();
var inst_18867 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002))];
var inst_18868 = [new cljs.core.Keyword(null,"fail","fail",(1706214930)),"must be contract owner"];
var inst_18869 = cljs.core.PersistentHashMap.fromArrays(inst_18867,inst_18868);
var inst_18870 = cljs.test.do_report.call(null,inst_18869);
var ___$1 = (function (){var statearr_18999 = state_18879;
(statearr_18999[(4)] = cljs.core.rest.call(null,(state_18879[(4)])));

return statearr_18999;
})();
var state_18879__$1 = state_18879;
var statearr_19000_19164 = state_18879__$1;
(statearr_19000_19164[(2)] = inst_18870);

(statearr_19000_19164[(1)] = (62));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_18880 === (30))){
var _ = (function (){var statearr_19002 = state_18879;
(statearr_19002[(4)] = cljs.core.rest.call(null,(state_18879[(4)])));

return statearr_19002;
})();
var state_18879__$1 = state_18879;
var ex18996 = (state_18879__$1[(2)]);
var statearr_19003_19165 = state_18879__$1;
(statearr_19003_19165[(5)] = ex18996);


var statearr_19004_19166 = state_18879__$1;
(statearr_19004_19166[(1)] = (29));

(statearr_19004_19166[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_18880 === (62))){
var inst_18873 = (state_18879[(2)]);
var _ = (function (){var statearr_19005 = state_18879;
(statearr_19005[(4)] = cljs.core.rest.call(null,(state_18879[(4)])));

return statearr_19005;
})();
var state_18879__$1 = state_18879;
var statearr_19006_19167 = state_18879__$1;
(statearr_19006_19167[(2)] = inst_18873);

(statearr_19006_19167[(1)] = (44));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_18880 === (31))){
var _ = (function (){var statearr_19007 = state_18879;
(statearr_19007[(4)] = cljs.core.rest.call(null,(state_18879[(4)])));

return statearr_19007;
})();
var state_18879__$1 = state_18879;
var ex19001 = (state_18879__$1[(2)]);
var statearr_19008_19168 = state_18879__$1;
(statearr_19008_19168[(5)] = ex19001);


if((ex19001 instanceof Error)){
var statearr_19009_19169 = state_18879__$1;
(statearr_19009_19169[(1)] = (26));

(statearr_19009_19169[(5)] = null);

} else {
throw ex19001;

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_18880 === (63))){
var inst_18856 = (state_18879[(2)]);
var inst_18857 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_18858 = null;
var inst_18859 = [new cljs.core.Keyword(null,"error","error",(-978969032)),"must be contract owner",inst_18858,inst_18856];
var inst_18860 = cljs.core.PersistentHashMap.fromArrays(inst_18857,inst_18859);
var inst_18861 = cljs.test.do_report.call(null,inst_18860);
var state_18879__$1 = state_18879;
var statearr_19010_19170 = state_18879__$1;
(statearr_19010_19170[(2)] = inst_18861);

(statearr_19010_19170[(1)] = (62));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
return null;
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
});})(c__19__auto__,___192__auto__))
;
return ((function (switch__14__auto__,c__19__auto__,___192__auto__){
return (function() {
var e2e$proposals$state_machine__15__auto__ = null;
var e2e$proposals$state_machine__15__auto____0 = (function (){
var statearr_19011 = [null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];
(statearr_19011[(0)] = e2e$proposals$state_machine__15__auto__);

(statearr_19011[(1)] = (1));

return statearr_19011;
});
var e2e$proposals$state_machine__15__auto____1 = (function (state_18879){
while(true){
var ret_value__16__auto__ = (function (){try{while(true){
var result__17__auto__ = switch__14__auto__.call(null,state_18879);
if(cljs.core.keyword_identical_QMARK_.call(null,result__17__auto__,new cljs.core.Keyword(null,"recur","recur",(-437573268)))){
continue;
} else {
return result__17__auto__;
}
break;
}
}catch (e19012){var ex__18__auto__ = e19012;
var statearr_19013_19171 = state_18879;
(statearr_19013_19171[(2)] = ex__18__auto__);


if(cljs.core.seq.call(null,(state_18879[(4)]))){
var statearr_19014_19172 = state_18879;
(statearr_19014_19172[(1)] = cljs.core.first.call(null,(state_18879[(4)])));

} else {
throw ex__18__auto__;
}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
}})();
if(cljs.core.keyword_identical_QMARK_.call(null,ret_value__16__auto__,new cljs.core.Keyword(null,"recur","recur",(-437573268)))){
var G__19173 = state_18879;
state_18879 = G__19173;
continue;
} else {
return ret_value__16__auto__;
}
break;
}
});
e2e$proposals$state_machine__15__auto__ = function(state_18879){
switch(arguments.length){
case 0:
return e2e$proposals$state_machine__15__auto____0.call(this);
case 1:
return e2e$proposals$state_machine__15__auto____1.call(this,state_18879);
}
throw(new Error('Invalid arity: ' + arguments.length));
};
e2e$proposals$state_machine__15__auto__.cljs$core$IFn$_invoke$arity$0 = e2e$proposals$state_machine__15__auto____0;
e2e$proposals$state_machine__15__auto__.cljs$core$IFn$_invoke$arity$1 = e2e$proposals$state_machine__15__auto____1;
return e2e$proposals$state_machine__15__auto__;
})()
;})(switch__14__auto__,c__19__auto__,___192__auto__))
})();
var state__21__auto__ = (function (){var statearr_19015 = f__20__auto__.call(null);
(statearr_19015[(6)] = c__19__auto__);

return statearr_19015;
})();
return cljs.core.async.impl.ioc_helpers.run_state_machine_wrapped.call(null,state__21__auto__);
});})(c__19__auto__,___192__auto__))
);

return c__19__auto__;
});

e2e.proposals.t_e2e$proposals18220.getBasis = (function (){
return new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,"meta18221","meta18221",(-1465741779),null)], null);
});

e2e.proposals.t_e2e$proposals18220.cljs$lang$type = true;

e2e.proposals.t_e2e$proposals18220.cljs$lang$ctorStr = "e2e.proposals/t_e2e$proposals18220";

e2e.proposals.t_e2e$proposals18220.cljs$lang$ctorPrWriter = (function (this__9776__auto__,writer__9777__auto__,opt__9778__auto__){
return cljs.core._write.call(null,writer__9777__auto__,"e2e.proposals/t_e2e$proposals18220");
});

/**
 * Positional factory function for e2e.proposals/t_e2e$proposals18220.
 */
e2e.proposals.__GT_t_e2e$proposals18220 = (function e2e$proposals$__GT_t_e2e$proposals18220(meta18221){
return (new e2e.proposals.t_e2e$proposals18220(meta18221));
});

}

return (new e2e.proposals.t_e2e$proposals18220(null));
});

e2e.proposals.cycle_update.cljs$lang$var = new cljs.core.Var(function(){return e2e.proposals.cycle_update;},new cljs.core.Symbol("e2e.proposals","cycle-update","e2e.proposals/cycle-update",(1535968581),null),cljs.core.PersistentHashMap.fromArrays([new cljs.core.Keyword(null,"ns","ns",(441598760)),new cljs.core.Keyword(null,"name","name",(1843675177)),new cljs.core.Keyword(null,"file","file",(-1269645878)),new cljs.core.Keyword(null,"end-column","end-column",(1425389514)),new cljs.core.Keyword(null,"column","column",(2078222095)),new cljs.core.Keyword(null,"line","line",(212345235)),new cljs.core.Keyword(null,"end-line","end-line",(1837326455)),new cljs.core.Keyword(null,"arglists","arglists",(1661989754)),new cljs.core.Keyword(null,"doc","doc",(1913296891)),new cljs.core.Keyword(null,"test","test",(577538877))],[new cljs.core.Symbol(null,"e2e.proposals","e2e.proposals",(1479174227),null),new cljs.core.Symbol(null,"cycle-update","cycle-update",(-1460045646),null),"e2e/proposals.cljs",(22),(1),(187),(187),cljs.core.List.EMPTY,null,(cljs.core.truth_(e2e.proposals.cycle_update)?e2e.proposals.cycle_update.cljs$lang$test:null)]));
e2e.proposals.vote = (function e2e$proposals$vote(){
return cljs.test.test_var.call(null,e2e.proposals.vote.cljs$lang$var);
});
e2e.proposals.vote.cljs$lang$test = (function (){
if((typeof e2e !== 'undefined') && (typeof e2e.proposals !== 'undefined') && (typeof e2e.proposals.t_e2e$proposals19174 !== 'undefined')){
} else {

/**
* @constructor
 * @implements {cljs.core.IWithMeta}
 * @implements {cljs.core.IMeta}
 * @implements {cljs.test.IAsyncTest}
 * @implements {cljs.core.IFn}
*/
e2e.proposals.t_e2e$proposals19174 = (function (meta19175){
this.meta19175 = meta19175;
this.cljs$lang$protocol_mask$partition0$ = 393217;
this.cljs$lang$protocol_mask$partition1$ = 0;
});
e2e.proposals.t_e2e$proposals19174.prototype.cljs$core$IWithMeta$_with_meta$arity$2 = (function (_19176,meta19175__$1){
var self__ = this;
var _19176__$1 = this;
return (new e2e.proposals.t_e2e$proposals19174(meta19175__$1));
});

e2e.proposals.t_e2e$proposals19174.prototype.cljs$core$IMeta$_meta$arity$1 = (function (_19176){
var self__ = this;
var _19176__$1 = this;
return self__.meta19175;
});

e2e.proposals.t_e2e$proposals19174.prototype.cljs$test$IAsyncTest$ = cljs.core.PROTOCOL_SENTINEL;

e2e.proposals.t_e2e$proposals19174.prototype.call = (function (self__,done){
var self__ = this;
var self____$1 = this;
var ___192__auto__ = self____$1;
var c__19__auto__ = cljs.core.async.chan.call(null,(1));
cljs.core.async.impl.dispatch.run.call(null,((function (c__19__auto__,___192__auto__,self____$1){
return (function (){
var f__20__auto__ = (function (){var switch__14__auto__ = ((function (c__19__auto__,___192__auto__,self____$1){
return (function (state_19827){
var state_val_19828 = (state_19827[(1)]);
if((state_val_19828 === (32))){
var _ = (function (){var statearr_19829 = state_19827;
(statearr_19829[(4)] = cljs.core.cons.call(null,(39),(state_19827[(4)])));

return statearr_19829;
})();
var inst_19308 = [new cljs.core.Keyword(null,"voter","voter",(1012094707)),new cljs.core.Keyword(null,"prop_id","prop_id",(-694455661)),new cljs.core.Keyword(null,"vote_type","vote_type",(-293333277))];
var inst_19309 = [e2e.proposals.owner_acc,(0),(0)];
var inst_19310 = cljs.core.PersistentHashMap.fromArrays(inst_19308,inst_19309);
var inst_19311 = e2e.proposals.eos_tx_owner.call(null,e2e.proposals.prop_acc,"addvote",inst_19310);
var inst_19312 = cljs.core.async.interop.p__GT_c.call(null,inst_19311);
var state_19827__$1 = state_19827;
return cljs.core.async.impl.ioc_helpers.take_BANG_.call(null,state_19827__$1,(40),inst_19312);
} else {
if((state_val_19828 === (64))){
var inst_19425 = (state_19827[(2)]);
var _ = (function (){var statearr_19830 = state_19827;
(statearr_19830[(4)] = cljs.core.rest.call(null,(state_19827[(4)])));

return statearr_19830;
})();
var state_19827__$1 = state_19827;
var statearr_19831_21126 = state_19827__$1;
(statearr_19831_21126[(2)] = inst_19425);

(statearr_19831_21126[(1)] = (52));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (96))){
var inst_19539 = (state_19827[(2)]);
var inst_19540 = eos_cljs.core.get_table_rows.call(null,e2e.proposals.prop_acc,e2e.proposals.prop_acc,"proposal");
var inst_19541 = cljs.core.async.interop.p__GT_c.call(null,inst_19540);
var state_19827__$1 = (function (){var statearr_19832 = state_19827;
(statearr_19832[(7)] = inst_19539);

return statearr_19832;
})();
return cljs.core.async.impl.ioc_helpers.take_BANG_.call(null,state_19827__$1,(97),inst_19541);
} else {
if((state_val_19828 === (128))){
var inst_19702 = (state_19827[(8)]);
var state_19827__$1 = state_19827;
var statearr_19833_21127 = state_19827__$1;
(statearr_19833_21127[(2)] = inst_19702);

(statearr_19833_21127[(1)] = (129));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (1))){
var state_19827__$1 = state_19827;
var statearr_19834_21128 = state_19827__$1;
(statearr_19834_21128[(2)] = null);

(statearr_19834_21128[(1)] = (2));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (33))){
var inst_19355 = (state_19827[(2)]);
var state_19827__$1 = (function (){var statearr_19835 = state_19827;
(statearr_19835[(9)] = inst_19355);

return statearr_19835;
})();
var statearr_19836_21129 = state_19827__$1;
(statearr_19836_21129[(2)] = null);

(statearr_19836_21129[(1)] = (51));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (65))){
var inst_19398 = (state_19827[(2)]);
var inst_19399 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_19400 = true;
var inst_19401 = [new cljs.core.Keyword(null,"error","error",(-978969032)),"can update vote",inst_19400,inst_19398];
var inst_19402 = cljs.core.PersistentHashMap.fromArrays(inst_19399,inst_19401);
var inst_19403 = cljs.test.do_report.call(null,inst_19402);
var state_19827__$1 = state_19827;
var statearr_19837_21130 = state_19827__$1;
(statearr_19837_21130[(2)] = inst_19403);

(statearr_19837_21130[(1)] = (64));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (97))){
var inst_19543 = (state_19827[(10)]);
var inst_19543__$1 = (state_19827[(2)]);
var inst_19544 = (inst_19543__$1 instanceof cljs.core.ExceptionInfo);
var inst_19545 = cljs.core.ex_data.call(null,inst_19543__$1);
var inst_19546 = new cljs.core.Keyword(null,"error","error",(-978969032)).cljs$core$IFn$_invoke$arity$1(inst_19545);
var inst_19547 = cljs.core._EQ_.call(null,inst_19546,new cljs.core.Keyword(null,"promise-error","promise-error",(-90673560)));
var inst_19548 = ((inst_19544) && (inst_19547));
var state_19827__$1 = (function (){var statearr_19838 = state_19827;
(statearr_19838[(10)] = inst_19543__$1);

return statearr_19838;
})();
if(cljs.core.truth_(inst_19548)){
var statearr_19839_21131 = state_19827__$1;
(statearr_19839_21131[(1)] = (98));

} else {
var statearr_19840_21132 = state_19827__$1;
(statearr_19840_21132[(1)] = (99));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (129))){
var inst_19712 = (state_19827[(2)]);
var state_19827__$1 = (function (){var statearr_19841 = state_19827;
(statearr_19841[(11)] = inst_19712);

return statearr_19841;
})();
var statearr_19842_21133 = state_19827__$1;
(statearr_19842_21133[(2)] = null);

(statearr_19842_21133[(1)] = (130));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (2))){
var _ = (function (){var statearr_19844 = state_19827;
(statearr_19844[(4)] = cljs.core.cons.call(null,(5),(state_19827[(4)])));

return statearr_19844;
})();
var state_19827__$1 = state_19827;
var statearr_19845_21134 = state_19827__$1;
(statearr_19845_21134[(2)] = null);

(statearr_19845_21134[(1)] = (6));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (34))){
var inst_19283 = (state_19827[(2)]);
var inst_19284 = cljs.core.prn.call(null,"test failed with ",inst_19283);
var state_19827__$1 = (function (){var statearr_19846 = state_19827;
(statearr_19846[(12)] = inst_19284);

return statearr_19846;
})();
var statearr_19847_21135 = state_19827__$1;
(statearr_19847_21135[(2)] = null);

(statearr_19847_21135[(1)] = (35));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (66))){
var _ = (function (){var statearr_19848 = state_19827;
(statearr_19848[(4)] = cljs.core.rest.call(null,(state_19827[(4)])));

return statearr_19848;
})();
var state_19827__$1 = state_19827;
var ex19843 = (state_19827__$1[(2)]);
var statearr_19849_21136 = state_19827__$1;
(statearr_19849_21136[(5)] = ex19843);


var statearr_19850_21137 = state_19827__$1;
(statearr_19850_21137[(1)] = (65));

(statearr_19850_21137[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (98))){
var inst_19543 = (state_19827[(10)]);
var inst_19550 = (function(){throw inst_19543})();
var state_19827__$1 = state_19827;
var statearr_19851_21138 = state_19827__$1;
(statearr_19851_21138[(2)] = inst_19550);

(statearr_19851_21138[(1)] = (100));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (130))){
var _ = (function (){var statearr_19852 = state_19827;
(statearr_19852[(4)] = cljs.core.cons.call(null,(133),(state_19827[(4)])));

return statearr_19852;
})();
var inst_19720 = [new cljs.core.Keyword(null,"hash","hash",(-13781596))];
var inst_19721 = ["ab58606332f813bcf6ea26f732014f49a2197d2d281cc2939e59813721ee5246"];
var inst_19722 = cljs.core.PersistentHashMap.fromArrays(inst_19720,inst_19721);
var inst_19723 = eos_cljs.core.transact.call(null,e2e.proposals.dao_acc,"newmemterms",inst_19722);
var inst_19724 = cljs.core.async.interop.p__GT_c.call(null,inst_19723);
var state_19827__$1 = state_19827;
return cljs.core.async.impl.ioc_helpers.take_BANG_.call(null,state_19827__$1,(134),inst_19724);
} else {
if((state_val_19828 === (3))){
var inst_19824 = (state_19827[(2)]);
var inst_19825 = done.call(null);
var state_19827__$1 = (function (){var statearr_19853 = state_19827;
(statearr_19853[(13)] = inst_19824);

return statearr_19853;
})();
return cljs.core.async.impl.ioc_helpers.return_chan.call(null,state_19827__$1,inst_19825);
} else {
if((state_val_19828 === (35))){
var _ = (function (){var statearr_19854 = state_19827;
(statearr_19854[(4)] = cljs.core.cons.call(null,(38),(state_19827[(4)])));

return statearr_19854;
})();
var inst_19296 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002))];
var inst_19297 = [new cljs.core.Keyword(null,"fail","fail",(1706214930)),"can vote on own proposal"];
var inst_19298 = cljs.core.PersistentHashMap.fromArrays(inst_19296,inst_19297);
var inst_19299 = cljs.test.do_report.call(null,inst_19298);
var ___$1 = (function (){var statearr_19855 = state_19827;
(statearr_19855[(4)] = cljs.core.rest.call(null,(state_19827[(4)])));

return statearr_19855;
})();
var state_19827__$1 = state_19827;
var statearr_19856_21139 = state_19827__$1;
(statearr_19856_21139[(2)] = inst_19299);

(statearr_19856_21139[(1)] = (36));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (67))){
var inst_19410 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_19411 = true;
var inst_19412 = [new cljs.core.Keyword(null,"pass","pass",(1574159993)),"can update vote",inst_19411,true];
var inst_19413 = cljs.core.PersistentHashMap.fromArrays(inst_19410,inst_19412);
var inst_19414 = cljs.test.do_report.call(null,inst_19413);
var state_19827__$1 = state_19827;
var statearr_19857_21140 = state_19827__$1;
(statearr_19857_21140[(2)] = inst_19414);

(statearr_19857_21140[(1)] = (69));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (99))){
var inst_19543 = (state_19827[(10)]);
var state_19827__$1 = state_19827;
var statearr_19858_21141 = state_19827__$1;
(statearr_19858_21141[(2)] = inst_19543);

(statearr_19858_21141[(1)] = (100));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (131))){
var inst_19821 = (state_19827[(2)]);
var _ = (function (){var statearr_19859 = state_19827;
(statearr_19859[(4)] = cljs.core.rest.call(null,(state_19827[(4)])));

return statearr_19859;
})();
var state_19827__$1 = state_19827;
var statearr_19860_21142 = state_19827__$1;
(statearr_19860_21142[(2)] = inst_19821);

(statearr_19860_21142[(1)] = (3));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (4))){
var inst_19178 = (state_19827[(2)]);
var inst_19179 = cljs.core.prn.call(null,inst_19178);
var state_19827__$1 = state_19827;
var statearr_19861_21143 = state_19827__$1;
(statearr_19861_21143[(2)] = inst_19179);

(statearr_19861_21143[(1)] = (3));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (36))){
var inst_19302 = (state_19827[(2)]);
var state_19827__$1 = state_19827;
var statearr_19862_21144 = state_19827__$1;
(statearr_19862_21144[(2)] = inst_19302);

(statearr_19862_21144[(1)] = (33));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (68))){
var inst_19416 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_19417 = true;
var inst_19418 = [new cljs.core.Keyword(null,"fail","fail",(1706214930)),"can update vote",inst_19417,true];
var inst_19419 = cljs.core.PersistentHashMap.fromArrays(inst_19416,inst_19418);
var inst_19420 = cljs.test.do_report.call(null,inst_19419);
var state_19827__$1 = state_19827;
var statearr_19863_21145 = state_19827__$1;
(statearr_19863_21145[(2)] = inst_19420);

(statearr_19863_21145[(1)] = (69));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (100))){
var inst_19556 = (state_19827[(14)]);
var inst_19553 = (state_19827[(2)]);
var inst_19554 = (function (){var rows = inst_19553;
return ((function (rows,inst_19556,inst_19553,state_val_19828,c__19__auto__,___192__auto__,self____$1){
return (function (p1__53_SHARP_){
return cljs.core._EQ_.call(null,p1__53_SHARP_.call(null,"id"),(0));
});
;})(rows,inst_19556,inst_19553,state_val_19828,c__19__auto__,___192__auto__,self____$1))
})();
var inst_19555 = cljs.core.filter.call(null,inst_19554,inst_19553);
var inst_19556__$1 = cljs.core.first.call(null,inst_19555);
var inst_19557 = cljs.core.prn.call(null,inst_19556__$1);
var state_19827__$1 = (function (){var statearr_19865 = state_19827;
(statearr_19865[(14)] = inst_19556__$1);

(statearr_19865[(15)] = inst_19557);

return statearr_19865;
})();
var statearr_19866_21146 = state_19827__$1;
(statearr_19866_21146[(2)] = null);

(statearr_19866_21146[(1)] = (101));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (132))){
var inst_19713 = (state_19827[(2)]);
var inst_19714 = cljs.core.prn.call(null,inst_19713);
var state_19827__$1 = state_19827;
var statearr_19867_21147 = state_19827__$1;
(statearr_19867_21147[(2)] = inst_19714);

(statearr_19867_21147[(1)] = (131));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (5))){
var _ = (function (){var statearr_19868 = state_19827;
(statearr_19868[(4)] = cljs.core.rest.call(null,(state_19827[(4)])));

return statearr_19868;
})();
var state_19827__$1 = state_19827;
var ex19864 = (state_19827__$1[(2)]);
var statearr_19869_21148 = state_19827__$1;
(statearr_19869_21148[(5)] = ex19864);


if((ex19864 instanceof Error)){
var statearr_19870_21149 = state_19827__$1;
(statearr_19870_21149[(1)] = (4));

(statearr_19870_21149[(5)] = null);

} else {
throw ex19864;

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (37))){
var inst_19285 = (state_19827[(2)]);
var inst_19286 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_19287 = null;
var inst_19288 = [new cljs.core.Keyword(null,"error","error",(-978969032)),"can vote on own proposal",inst_19287,inst_19285];
var inst_19289 = cljs.core.PersistentHashMap.fromArrays(inst_19286,inst_19288);
var inst_19290 = cljs.test.do_report.call(null,inst_19289);
var state_19827__$1 = state_19827;
var statearr_19871_21150 = state_19827__$1;
(statearr_19871_21150[(2)] = inst_19290);

(statearr_19871_21150[(1)] = (36));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (69))){
var inst_19422 = (state_19827[(2)]);
var _ = (function (){var statearr_19873 = state_19827;
(statearr_19873[(4)] = cljs.core.rest.call(null,(state_19827[(4)])));

return statearr_19873;
})();
var state_19827__$1 = (function (){var statearr_19874 = state_19827;
(statearr_19874[(16)] = inst_19422);

return statearr_19874;
})();
var statearr_19875_21151 = state_19827__$1;
(statearr_19875_21151[(2)] = true);

(statearr_19875_21151[(1)] = (64));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (101))){
var inst_19556 = (state_19827[(14)]);
var inst_19574 = (state_19827[(17)]);
var inst_19575 = (state_19827[(18)]);
var _ = (function (){var statearr_19876 = state_19827;
(statearr_19876[(4)] = cljs.core.cons.call(null,(104),(state_19827[(4)])));

return statearr_19876;
})();
var inst_19569 = cljs.core.PersistentVector.EMPTY_NODE;
var inst_19570 = ["vote_counts",(0),"value"];
var inst_19571 = (new cljs.core.PersistentVector(null,(3),(5),inst_19569,inst_19570,null));
var inst_19572 = cljs.core.get_in.call(null,inst_19556,inst_19571);
var inst_19573 = (new cljs.core.List(null,(0),null,(1),null));
var inst_19574__$1 = (new cljs.core.List(null,inst_19572,inst_19573,(2),null));
var inst_19575__$1 = cljs.core.apply.call(null,cljs.core._EQ_,inst_19574__$1);
var state_19827__$1 = (function (){var statearr_19877 = state_19827;
(statearr_19877[(17)] = inst_19574__$1);

(statearr_19877[(18)] = inst_19575__$1);

return statearr_19877;
})();
if(cljs.core.truth_(inst_19575__$1)){
var statearr_19878_21152 = state_19827__$1;
(statearr_19878_21152[(1)] = (105));

} else {
var statearr_19879_21153 = state_19827__$1;
(statearr_19879_21153[(1)] = (106));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (133))){
var _ = (function (){var statearr_19881 = state_19827;
(statearr_19881[(4)] = cljs.core.rest.call(null,(state_19827[(4)])));

return statearr_19881;
})();
var state_19827__$1 = state_19827;
var ex19872 = (state_19827__$1[(2)]);
var statearr_19882_21154 = state_19827__$1;
(statearr_19882_21154[(5)] = ex19872);


if((ex19872 instanceof Error)){
var statearr_19883_21155 = state_19827__$1;
(statearr_19883_21155[(1)] = (132));

(statearr_19883_21155[(5)] = null);

} else {
throw ex19872;

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (6))){
var _ = (function (){var statearr_19884 = state_19827;
(statearr_19884[(4)] = cljs.core.cons.call(null,(19),(state_19827[(4)])));

return statearr_19884;
})();
var inst_19229 = [new cljs.core.Keyword(null,"voter","voter",(1012094707)),new cljs.core.Keyword(null,"prop_id","prop_id",(-694455661)),new cljs.core.Keyword(null,"vote_type","vote_type",(-293333277))];
var inst_19230 = [e2e.proposals.owner_acc,(0),(0)];
var inst_19231 = cljs.core.PersistentHashMap.fromArrays(inst_19229,inst_19230);
var inst_19232 = e2e.proposals.eos_tx_owner.call(null,e2e.proposals.prop_acc,"addvote",inst_19231);
var inst_19233 = cljs.core.async.interop.p__GT_c.call(null,inst_19232);
var state_19827__$1 = state_19827;
return cljs.core.async.impl.ioc_helpers.take_BANG_.call(null,state_19827__$1,(20),inst_19233);
} else {
if((state_val_19828 === (38))){
var _ = (function (){var statearr_19885 = state_19827;
(statearr_19885[(4)] = cljs.core.rest.call(null,(state_19827[(4)])));

return statearr_19885;
})();
var state_19827__$1 = state_19827;
var ex19880 = (state_19827__$1[(2)]);
var statearr_19886_21156 = state_19827__$1;
(statearr_19886_21156[(5)] = ex19880);


var statearr_19887_21157 = state_19827__$1;
(statearr_19887_21157[(1)] = (37));

(statearr_19887_21157[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (70))){
var _ = (function (){var statearr_19888 = state_19827;
(statearr_19888[(4)] = cljs.core.cons.call(null,(77),(state_19827[(4)])));

return statearr_19888;
})();
var inst_19454 = [new cljs.core.Keyword(null,"voter","voter",(1012094707)),new cljs.core.Keyword(null,"prop_id","prop_id",(-694455661)),new cljs.core.Keyword(null,"vote_type","vote_type",(-293333277))];
var inst_19455 = [e2e.proposals.owner_acc,(0),(2)];
var inst_19456 = cljs.core.PersistentHashMap.fromArrays(inst_19454,inst_19455);
var inst_19457 = e2e.proposals.eos_tx_owner.call(null,e2e.proposals.prop_acc,"addvote",inst_19456);
var inst_19458 = cljs.core.async.interop.p__GT_c.call(null,inst_19457);
var state_19827__$1 = state_19827;
return cljs.core.async.impl.ioc_helpers.take_BANG_.call(null,state_19827__$1,(78),inst_19458);
} else {
if((state_val_19828 === (102))){
var inst_19598 = (state_19827[(2)]);
var state_19827__$1 = (function (){var statearr_19889 = state_19827;
(statearr_19889[(19)] = inst_19598);

return statearr_19889;
})();
var statearr_19890_21158 = state_19827__$1;
(statearr_19890_21158[(2)] = null);

(statearr_19890_21158[(1)] = (108));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (134))){
var inst_19726 = (state_19827[(20)]);
var inst_19726__$1 = (state_19827[(2)]);
var inst_19727 = (inst_19726__$1 instanceof cljs.core.ExceptionInfo);
var inst_19728 = cljs.core.ex_data.call(null,inst_19726__$1);
var inst_19729 = new cljs.core.Keyword(null,"error","error",(-978969032)).cljs$core$IFn$_invoke$arity$1(inst_19728);
var inst_19730 = cljs.core._EQ_.call(null,inst_19729,new cljs.core.Keyword(null,"promise-error","promise-error",(-90673560)));
var inst_19731 = ((inst_19727) && (inst_19730));
var state_19827__$1 = (function (){var statearr_19892 = state_19827;
(statearr_19892[(20)] = inst_19726__$1);

return statearr_19892;
})();
if(cljs.core.truth_(inst_19731)){
var statearr_19893_21159 = state_19827__$1;
(statearr_19893_21159[(1)] = (135));

} else {
var statearr_19894_21160 = state_19827__$1;
(statearr_19894_21160[(1)] = (136));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (7))){
var inst_19266 = (state_19827[(2)]);
var inst_19267 = ((9000000) + (1));
var inst_19268 = cljs.core.assoc.call(null,e2e.proposals.prop_config,new cljs.core.Keyword(null,"cycle_duration_sec","cycle_duration_sec",(2139129571)),inst_19267,new cljs.core.Keyword(null,"cycle_voting_duration_sec","cycle_voting_duration_sec",(-1056353816)),(9000000));
var inst_19269 = eos_cljs.core.transact.call(null,e2e.proposals.prop_acc,"update",inst_19268);
var inst_19270 = cljs.core.async.interop.p__GT_c.call(null,inst_19269);
var state_19827__$1 = (function (){var statearr_19895 = state_19827;
(statearr_19895[(21)] = inst_19266);

return statearr_19895;
})();
return cljs.core.async.impl.ioc_helpers.take_BANG_.call(null,state_19827__$1,(28),inst_19270);
} else {
if((state_val_19828 === (39))){
var _ = (function (){var statearr_19896 = state_19827;
(statearr_19896[(4)] = cljs.core.rest.call(null,(state_19827[(4)])));

return statearr_19896;
})();
var state_19827__$1 = state_19827;
var ex19891 = (state_19827__$1[(2)]);
var statearr_19897_21161 = state_19827__$1;
(statearr_19897_21161[(5)] = ex19891);


if((ex19891 instanceof Error)){
var statearr_19898_21162 = state_19827__$1;
(statearr_19898_21162[(1)] = (34));

(statearr_19898_21162[(5)] = null);

} else {
throw ex19891;

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (71))){
var inst_19501 = (state_19827[(2)]);
var inst_19502 = Promise.resolve((42));
var inst_19503 = eos_cljs.core.wait_block.call(null,inst_19502,(2));
var inst_19504 = cljs.core.async.interop.p__GT_c.call(null,inst_19503);
var state_19827__$1 = (function (){var statearr_19899 = state_19827;
(statearr_19899[(22)] = inst_19501);

return statearr_19899;
})();
return cljs.core.async.impl.ioc_helpers.take_BANG_.call(null,state_19827__$1,(89),inst_19504);
} else {
if((state_val_19828 === (103))){
var inst_19558 = (state_19827[(2)]);
var inst_19559 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_19560 = cljs.core.list(new cljs.core.Symbol(null,"=","=",(-1501502141),null),cljs.core.list(new cljs.core.Symbol(null,"get-in","get-in",(-1965644065),null),new cljs.core.Symbol(null,"r","r",(1169147337),null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, ["vote_counts",(0),"value"], null)),(0));
var inst_19561 = [new cljs.core.Keyword(null,"error","error",(-978969032)),null,inst_19560,inst_19558];
var inst_19562 = cljs.core.PersistentHashMap.fromArrays(inst_19559,inst_19561);
var inst_19563 = cljs.test.do_report.call(null,inst_19562);
var state_19827__$1 = state_19827;
var statearr_19900_21163 = state_19827__$1;
(statearr_19900_21163[(2)] = inst_19563);

(statearr_19900_21163[(1)] = (102));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (135))){
var inst_19726 = (state_19827[(20)]);
var inst_19733 = (function(){throw inst_19726})();
var state_19827__$1 = state_19827;
var statearr_19901_21164 = state_19827__$1;
(statearr_19901_21164[(2)] = inst_19733);

(statearr_19901_21164[(1)] = (137));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (8))){
var inst_19187 = (state_19827[(23)]);
var inst_19188 = (state_19827[(24)]);
var inst_19185 = (state_19827[(2)]);
var inst_19186 = inst_19185.cause;
var inst_19187__$1 = inst_19186.message;
var inst_19188__$1 = clojure.string.ends_with_QMARK_.call(null,inst_19187__$1,"not in voting period");
var inst_19189 = (!(inst_19188__$1));
var state_19827__$1 = (function (){var statearr_19902 = state_19827;
(statearr_19902[(23)] = inst_19187__$1);

(statearr_19902[(24)] = inst_19188__$1);

return statearr_19902;
})();
if(inst_19189){
var statearr_19903_21165 = state_19827__$1;
(statearr_19903_21165[(1)] = (9));

} else {
var statearr_19904_21166 = state_19827__$1;
(statearr_19904_21166[(1)] = (10));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (40))){
var inst_19314 = (state_19827[(25)]);
var inst_19314__$1 = (state_19827[(2)]);
var inst_19315 = (inst_19314__$1 instanceof cljs.core.ExceptionInfo);
var inst_19316 = cljs.core.ex_data.call(null,inst_19314__$1);
var inst_19317 = new cljs.core.Keyword(null,"error","error",(-978969032)).cljs$core$IFn$_invoke$arity$1(inst_19316);
var inst_19318 = cljs.core._EQ_.call(null,inst_19317,new cljs.core.Keyword(null,"promise-error","promise-error",(-90673560)));
var inst_19319 = ((inst_19315) && (inst_19318));
var state_19827__$1 = (function (){var statearr_19906 = state_19827;
(statearr_19906[(25)] = inst_19314__$1);

return statearr_19906;
})();
if(cljs.core.truth_(inst_19319)){
var statearr_19907_21167 = state_19827__$1;
(statearr_19907_21167[(1)] = (41));

} else {
var statearr_19908_21168 = state_19827__$1;
(statearr_19908_21168[(1)] = (42));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (72))){
var inst_19429 = (state_19827[(2)]);
var inst_19430 = cljs.core.prn.call(null,"test failed with ",inst_19429);
var state_19827__$1 = (function (){var statearr_19909 = state_19827;
(statearr_19909[(26)] = inst_19430);

return statearr_19909;
})();
var statearr_19910_21169 = state_19827__$1;
(statearr_19910_21169[(2)] = null);

(statearr_19910_21169[(1)] = (73));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (104))){
var _ = (function (){var statearr_19911 = state_19827;
(statearr_19911[(4)] = cljs.core.rest.call(null,(state_19827[(4)])));

return statearr_19911;
})();
var state_19827__$1 = state_19827;
var ex19905 = (state_19827__$1[(2)]);
var statearr_19912_21170 = state_19827__$1;
(statearr_19912_21170[(5)] = ex19905);


var statearr_19913_21171 = state_19827__$1;
(statearr_19913_21171[(1)] = (103));

(statearr_19913_21171[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (136))){
var inst_19726 = (state_19827[(20)]);
var state_19827__$1 = state_19827;
var statearr_19914_21172 = state_19827__$1;
(statearr_19914_21172[(2)] = inst_19726);

(statearr_19914_21172[(1)] = (137));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (9))){
var inst_19187 = (state_19827[(23)]);
var inst_19191 = ["expected =","not in voting period"," actual = ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_19187)].join('');
var inst_19192 = cljs.core.prn.call(null,inst_19191);
var state_19827__$1 = state_19827;
var statearr_19915_21173 = state_19827__$1;
(statearr_19915_21173[(2)] = inst_19192);

(statearr_19915_21173[(1)] = (11));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (41))){
var inst_19314 = (state_19827[(25)]);
var inst_19321 = (function(){throw inst_19314})();
var state_19827__$1 = state_19827;
var statearr_19916_21174 = state_19827__$1;
(statearr_19916_21174[(2)] = inst_19321);

(statearr_19916_21174[(1)] = (43));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (73))){
var _ = (function (){var statearr_19917 = state_19827;
(statearr_19917[(4)] = cljs.core.cons.call(null,(76),(state_19827[(4)])));

return statearr_19917;
})();
var inst_19442 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002))];
var inst_19443 = [new cljs.core.Keyword(null,"fail","fail",(1706214930)),"can update vote twice"];
var inst_19444 = cljs.core.PersistentHashMap.fromArrays(inst_19442,inst_19443);
var inst_19445 = cljs.test.do_report.call(null,inst_19444);
var ___$1 = (function (){var statearr_19918 = state_19827;
(statearr_19918[(4)] = cljs.core.rest.call(null,(state_19827[(4)])));

return statearr_19918;
})();
var state_19827__$1 = state_19827;
var statearr_19919_21175 = state_19827__$1;
(statearr_19919_21175[(2)] = inst_19445);

(statearr_19919_21175[(1)] = (74));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (105))){
var inst_19574 = (state_19827[(17)]);
var inst_19577 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_19578 = cljs.core.list(new cljs.core.Symbol(null,"=","=",(-1501502141),null),cljs.core.list(new cljs.core.Symbol(null,"get-in","get-in",(-1965644065),null),new cljs.core.Symbol(null,"r","r",(1169147337),null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, ["vote_counts",(0),"value"], null)),(0));
var inst_19579 = cljs.core.cons.call(null,cljs.core._EQ_,inst_19574);
var inst_19580 = [new cljs.core.Keyword(null,"pass","pass",(1574159993)),null,inst_19578,inst_19579];
var inst_19581 = cljs.core.PersistentHashMap.fromArrays(inst_19577,inst_19580);
var inst_19582 = cljs.test.do_report.call(null,inst_19581);
var state_19827__$1 = state_19827;
var statearr_19920_21176 = state_19827__$1;
(statearr_19920_21176[(2)] = inst_19582);

(statearr_19920_21176[(1)] = (107));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (137))){
var inst_19736 = (state_19827[(2)]);
var state_19827__$1 = (function (){var statearr_19921 = state_19827;
(statearr_19921[(27)] = inst_19736);

return statearr_19921;
})();
var statearr_19922_21177 = state_19827__$1;
(statearr_19922_21177[(2)] = null);

(statearr_19922_21177[(1)] = (138));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (10))){
var state_19827__$1 = state_19827;
var statearr_19923_21178 = state_19827__$1;
(statearr_19923_21178[(2)] = null);

(statearr_19923_21178[(1)] = (11));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (42))){
var inst_19314 = (state_19827[(25)]);
var state_19827__$1 = state_19827;
var statearr_19924_21179 = state_19827__$1;
(statearr_19924_21179[(2)] = inst_19314);

(statearr_19924_21179[(1)] = (43));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (74))){
var inst_19448 = (state_19827[(2)]);
var state_19827__$1 = state_19827;
var statearr_19925_21180 = state_19827__$1;
(statearr_19925_21180[(2)] = inst_19448);

(statearr_19925_21180[(1)] = (71));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (106))){
var inst_19574 = (state_19827[(17)]);
var inst_19584 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_19585 = cljs.core.list(new cljs.core.Symbol(null,"=","=",(-1501502141),null),cljs.core.list(new cljs.core.Symbol(null,"get-in","get-in",(-1965644065),null),new cljs.core.Symbol(null,"r","r",(1169147337),null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, ["vote_counts",(0),"value"], null)),(0));
var inst_19586 = new cljs.core.Symbol(null,"not","not",(1044554643),null);
var inst_19587 = new cljs.core.Symbol(null,"=","=",(-1501502141),null);
var inst_19588 = cljs.core.cons.call(null,inst_19587,inst_19574);
var inst_19589 = (new cljs.core.List(null,inst_19588,null,(1),null));
var inst_19590 = (new cljs.core.List(null,inst_19586,inst_19589,(2),null));
var inst_19591 = [new cljs.core.Keyword(null,"fail","fail",(1706214930)),null,inst_19585,inst_19590];
var inst_19592 = cljs.core.PersistentHashMap.fromArrays(inst_19584,inst_19591);
var inst_19593 = cljs.test.do_report.call(null,inst_19592);
var state_19827__$1 = state_19827;
var statearr_19926_21181 = state_19827__$1;
(statearr_19926_21181[(2)] = inst_19593);

(statearr_19926_21181[(1)] = (107));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (138))){
var _ = (function (){var statearr_19927 = state_19827;
(statearr_19927[(4)] = cljs.core.cons.call(null,(151),(state_19827[(4)])));

return statearr_19927;
})();
var inst_19781 = [new cljs.core.Keyword(null,"voter","voter",(1012094707)),new cljs.core.Keyword(null,"prop_id","prop_id",(-694455661)),new cljs.core.Keyword(null,"vote_type","vote_type",(-293333277))];
var inst_19782 = [e2e.proposals.owner_acc,(1),(3)];
var inst_19783 = cljs.core.PersistentHashMap.fromArrays(inst_19781,inst_19782);
var inst_19784 = e2e.proposals.eos_tx_owner.call(null,e2e.proposals.prop_acc,"addvote",inst_19783);
var inst_19785 = cljs.core.async.interop.p__GT_c.call(null,inst_19784);
var state_19827__$1 = state_19827;
return cljs.core.async.impl.ioc_helpers.take_BANG_.call(null,state_19827__$1,(152),inst_19785);
} else {
if((state_val_19828 === (11))){
var inst_19195 = (state_19827[(2)]);
var state_19827__$1 = (function (){var statearr_19928 = state_19827;
(statearr_19928[(28)] = inst_19195);

return statearr_19928;
})();
var statearr_19929_21182 = state_19827__$1;
(statearr_19929_21182[(2)] = null);

(statearr_19929_21182[(1)] = (12));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (43))){
var inst_19324 = (state_19827[(2)]);
var state_19827__$1 = (function (){var statearr_19930 = state_19827;
(statearr_19930[(29)] = inst_19324);

return statearr_19930;
})();
var statearr_19931_21183 = state_19827__$1;
(statearr_19931_21183[(2)] = null);

(statearr_19931_21183[(1)] = (44));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (75))){
var inst_19431 = (state_19827[(2)]);
var inst_19432 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_19433 = null;
var inst_19434 = [new cljs.core.Keyword(null,"error","error",(-978969032)),"can update vote twice",inst_19433,inst_19431];
var inst_19435 = cljs.core.PersistentHashMap.fromArrays(inst_19432,inst_19434);
var inst_19436 = cljs.test.do_report.call(null,inst_19435);
var state_19827__$1 = state_19827;
var statearr_19932_21184 = state_19827__$1;
(statearr_19932_21184[(2)] = inst_19436);

(statearr_19932_21184[(1)] = (74));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (107))){
var inst_19575 = (state_19827[(18)]);
var inst_19595 = (state_19827[(2)]);
var _ = (function (){var statearr_19933 = state_19827;
(statearr_19933[(4)] = cljs.core.rest.call(null,(state_19827[(4)])));

return statearr_19933;
})();
var state_19827__$1 = (function (){var statearr_19934 = state_19827;
(statearr_19934[(30)] = inst_19595);

return statearr_19934;
})();
var statearr_19935_21185 = state_19827__$1;
(statearr_19935_21185[(2)] = inst_19575);

(statearr_19935_21185[(1)] = (102));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (139))){
var inst_19818 = (state_19827[(2)]);
var _ = (function (){var statearr_19936 = state_19827;
(statearr_19936[(4)] = cljs.core.rest.call(null,(state_19827[(4)])));

return statearr_19936;
})();
var state_19827__$1 = state_19827;
var statearr_19937_21186 = state_19827__$1;
(statearr_19937_21186[(2)] = inst_19818);

(statearr_19937_21186[(1)] = (131));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (12))){
var inst_19188 = (state_19827[(24)]);
var _ = (function (){var statearr_19939 = state_19827;
(statearr_19939[(4)] = cljs.core.cons.call(null,(15),(state_19827[(4)])));

return statearr_19939;
})();
var state_19827__$1 = state_19827;
if(cljs.core.truth_(inst_19188)){
var statearr_19940_21187 = state_19827__$1;
(statearr_19940_21187[(1)] = (16));

} else {
var statearr_19941_21188 = state_19827__$1;
(statearr_19941_21188[(1)] = (17));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (44))){
var _ = (function (){var statearr_19942 = state_19827;
(statearr_19942[(4)] = cljs.core.cons.call(null,(47),(state_19827[(4)])));

return statearr_19942;
})();
var state_19827__$1 = state_19827;
var statearr_19943_21189 = state_19827__$1;
(statearr_19943_21189[(1)] = (48));



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (76))){
var _ = (function (){var statearr_19945 = state_19827;
(statearr_19945[(4)] = cljs.core.rest.call(null,(state_19827[(4)])));

return statearr_19945;
})();
var state_19827__$1 = state_19827;
var ex19938 = (state_19827__$1[(2)]);
var statearr_19946_21190 = state_19827__$1;
(statearr_19946_21190[(5)] = ex19938);


var statearr_19947_21191 = state_19827__$1;
(statearr_19947_21191[(1)] = (75));

(statearr_19947_21191[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (108))){
var inst_19556 = (state_19827[(14)]);
var inst_19615 = (state_19827[(31)]);
var inst_19616 = (state_19827[(32)]);
var _ = (function (){var statearr_19948 = state_19827;
(statearr_19948[(4)] = cljs.core.cons.call(null,(111),(state_19827[(4)])));

return statearr_19948;
})();
var inst_19610 = cljs.core.PersistentVector.EMPTY_NODE;
var inst_19611 = ["vote_counts",(1),"value"];
var inst_19612 = (new cljs.core.PersistentVector(null,(3),(5),inst_19610,inst_19611,null));
var inst_19613 = cljs.core.get_in.call(null,inst_19556,inst_19612);
var inst_19614 = (new cljs.core.List(null,(2),null,(1),null));
var inst_19615__$1 = (new cljs.core.List(null,inst_19613,inst_19614,(2),null));
var inst_19616__$1 = cljs.core.apply.call(null,cljs.core._EQ_,inst_19615__$1);
var state_19827__$1 = (function (){var statearr_19949 = state_19827;
(statearr_19949[(31)] = inst_19615__$1);

(statearr_19949[(32)] = inst_19616__$1);

return statearr_19949;
})();
if(cljs.core.truth_(inst_19616__$1)){
var statearr_19950_21192 = state_19827__$1;
(statearr_19950_21192[(1)] = (112));

} else {
var statearr_19951_21193 = state_19827__$1;
(statearr_19951_21193[(1)] = (113));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (140))){
var inst_19739 = (state_19827[(33)]);
var inst_19740 = (state_19827[(34)]);
var inst_19737 = (state_19827[(2)]);
var inst_19738 = inst_19737.cause;
var inst_19739__$1 = inst_19738.message;
var inst_19740__$1 = clojure.string.ends_with_QMARK_.call(null,inst_19739__$1,"agreed terms are not the latest");
var inst_19741 = (!(inst_19740__$1));
var state_19827__$1 = (function (){var statearr_19952 = state_19827;
(statearr_19952[(33)] = inst_19739__$1);

(statearr_19952[(34)] = inst_19740__$1);

return statearr_19952;
})();
if(inst_19741){
var statearr_19953_21194 = state_19827__$1;
(statearr_19953_21194[(1)] = (141));

} else {
var statearr_19954_21195 = state_19827__$1;
(statearr_19954_21195[(1)] = (142));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (13))){
var inst_19223 = (state_19827[(2)]);
var state_19827__$1 = state_19827;
var statearr_19956_21196 = state_19827__$1;
(statearr_19956_21196[(2)] = inst_19223);

(statearr_19956_21196[(1)] = (7));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (45))){
var inst_19352 = (state_19827[(2)]);
var _ = (function (){var statearr_19957 = state_19827;
(statearr_19957[(4)] = cljs.core.rest.call(null,(state_19827[(4)])));

return statearr_19957;
})();
var state_19827__$1 = state_19827;
var statearr_19958_21197 = state_19827__$1;
(statearr_19958_21197[(2)] = inst_19352);

(statearr_19958_21197[(1)] = (33));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (77))){
var _ = (function (){var statearr_19959 = state_19827;
(statearr_19959[(4)] = cljs.core.rest.call(null,(state_19827[(4)])));

return statearr_19959;
})();
var state_19827__$1 = state_19827;
var ex19955 = (state_19827__$1[(2)]);
var statearr_19960_21198 = state_19827__$1;
(statearr_19960_21198[(5)] = ex19955);


if((ex19955 instanceof Error)){
var statearr_19961_21199 = state_19827__$1;
(statearr_19961_21199[(1)] = (72));

(statearr_19961_21199[(5)] = null);

} else {
throw ex19955;

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (109))){
var inst_19639 = (state_19827[(2)]);
var state_19827__$1 = (function (){var statearr_19962 = state_19827;
(statearr_19962[(35)] = inst_19639);

return statearr_19962;
})();
var statearr_19963_21200 = state_19827__$1;
(statearr_19963_21200[(2)] = null);

(statearr_19963_21200[(1)] = (115));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (141))){
var inst_19739 = (state_19827[(33)]);
var inst_19743 = ["expected =","agreed terms are not the latest"," actual = ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_19739)].join('');
var inst_19744 = cljs.core.prn.call(null,inst_19743);
var state_19827__$1 = state_19827;
var statearr_19964_21201 = state_19827__$1;
(statearr_19964_21201[(2)] = inst_19744);

(statearr_19964_21201[(1)] = (143));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (14))){
var inst_19196 = (state_19827[(2)]);
var inst_19197 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_19198 = new cljs.core.Symbol("e2e.macros","pass?","e2e.macros/pass?",(894145299),null);
var inst_19199 = [new cljs.core.Keyword(null,"error","error",(-978969032)),"can vote on own proposal",inst_19198,inst_19196];
var inst_19200 = cljs.core.PersistentHashMap.fromArrays(inst_19197,inst_19199);
var inst_19201 = cljs.test.do_report.call(null,inst_19200);
var state_19827__$1 = state_19827;
var statearr_19965_21202 = state_19827__$1;
(statearr_19965_21202[(2)] = inst_19201);

(statearr_19965_21202[(1)] = (13));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (46))){
var inst_19325 = (state_19827[(2)]);
var inst_19326 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_19327 = true;
var inst_19328 = [new cljs.core.Keyword(null,"error","error",(-978969032)),"can vote on own proposal",inst_19327,inst_19325];
var inst_19329 = cljs.core.PersistentHashMap.fromArrays(inst_19326,inst_19328);
var inst_19330 = cljs.test.do_report.call(null,inst_19329);
var state_19827__$1 = state_19827;
var statearr_19966_21203 = state_19827__$1;
(statearr_19966_21203[(2)] = inst_19330);

(statearr_19966_21203[(1)] = (45));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (78))){
var inst_19460 = (state_19827[(36)]);
var inst_19460__$1 = (state_19827[(2)]);
var inst_19461 = (inst_19460__$1 instanceof cljs.core.ExceptionInfo);
var inst_19462 = cljs.core.ex_data.call(null,inst_19460__$1);
var inst_19463 = new cljs.core.Keyword(null,"error","error",(-978969032)).cljs$core$IFn$_invoke$arity$1(inst_19462);
var inst_19464 = cljs.core._EQ_.call(null,inst_19463,new cljs.core.Keyword(null,"promise-error","promise-error",(-90673560)));
var inst_19465 = ((inst_19461) && (inst_19464));
var state_19827__$1 = (function (){var statearr_19967 = state_19827;
(statearr_19967[(36)] = inst_19460__$1);

return statearr_19967;
})();
if(cljs.core.truth_(inst_19465)){
var statearr_19968_21204 = state_19827__$1;
(statearr_19968_21204[(1)] = (79));

} else {
var statearr_19969_21205 = state_19827__$1;
(statearr_19969_21205[(1)] = (80));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (110))){
var inst_19599 = (state_19827[(2)]);
var inst_19600 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_19601 = cljs.core.list(new cljs.core.Symbol(null,"=","=",(-1501502141),null),cljs.core.list(new cljs.core.Symbol(null,"get-in","get-in",(-1965644065),null),new cljs.core.Symbol(null,"r","r",(1169147337),null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, ["vote_counts",(1),"value"], null)),(2));
var inst_19602 = [new cljs.core.Keyword(null,"error","error",(-978969032)),null,inst_19601,inst_19599];
var inst_19603 = cljs.core.PersistentHashMap.fromArrays(inst_19600,inst_19602);
var inst_19604 = cljs.test.do_report.call(null,inst_19603);
var state_19827__$1 = state_19827;
var statearr_19971_21206 = state_19827__$1;
(statearr_19971_21206[(2)] = inst_19604);

(statearr_19971_21206[(1)] = (109));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (142))){
var state_19827__$1 = state_19827;
var statearr_19973_21207 = state_19827__$1;
(statearr_19973_21207[(2)] = null);

(statearr_19973_21207[(1)] = (143));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (15))){
var _ = (function (){var statearr_19974 = state_19827;
(statearr_19974[(4)] = cljs.core.rest.call(null,(state_19827[(4)])));

return statearr_19974;
})();
var state_19827__$1 = state_19827;
var ex19970 = (state_19827__$1[(2)]);
var statearr_19975_21208 = state_19827__$1;
(statearr_19975_21208[(5)] = ex19970);


var statearr_19976_21209 = state_19827__$1;
(statearr_19976_21209[(1)] = (14));

(statearr_19976_21209[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (47))){
var _ = (function (){var statearr_19978 = state_19827;
(statearr_19978[(4)] = cljs.core.rest.call(null,(state_19827[(4)])));

return statearr_19978;
})();
var state_19827__$1 = state_19827;
var ex19972 = (state_19827__$1[(2)]);
var statearr_19979_21210 = state_19827__$1;
(statearr_19979_21210[(5)] = ex19972);


var statearr_19980_21211 = state_19827__$1;
(statearr_19980_21211[(1)] = (46));

(statearr_19980_21211[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (79))){
var inst_19460 = (state_19827[(36)]);
var inst_19467 = (function(){throw inst_19460})();
var state_19827__$1 = state_19827;
var statearr_19981_21212 = state_19827__$1;
(statearr_19981_21212[(2)] = inst_19467);

(statearr_19981_21212[(1)] = (81));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (111))){
var _ = (function (){var statearr_19982 = state_19827;
(statearr_19982[(4)] = cljs.core.rest.call(null,(state_19827[(4)])));

return statearr_19982;
})();
var state_19827__$1 = state_19827;
var ex19977 = (state_19827__$1[(2)]);
var statearr_19983_21213 = state_19827__$1;
(statearr_19983_21213[(5)] = ex19977);


var statearr_19984_21214 = state_19827__$1;
(statearr_19984_21214[(1)] = (110));

(statearr_19984_21214[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (143))){
var inst_19747 = (state_19827[(2)]);
var state_19827__$1 = (function (){var statearr_19985 = state_19827;
(statearr_19985[(37)] = inst_19747);

return statearr_19985;
})();
var statearr_19986_21215 = state_19827__$1;
(statearr_19986_21215[(2)] = null);

(statearr_19986_21215[(1)] = (144));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (16))){
var inst_19188 = (state_19827[(24)]);
var inst_19208 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_19209 = new cljs.core.Symbol("e2e.macros","pass?","e2e.macros/pass?",(894145299),null);
var inst_19210 = [new cljs.core.Keyword(null,"pass","pass",(1574159993)),"can vote on own proposal",inst_19209,inst_19188];
var inst_19211 = cljs.core.PersistentHashMap.fromArrays(inst_19208,inst_19210);
var inst_19212 = cljs.test.do_report.call(null,inst_19211);
var state_19827__$1 = state_19827;
var statearr_19987_21216 = state_19827__$1;
(statearr_19987_21216[(2)] = inst_19212);

(statearr_19987_21216[(1)] = (18));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (48))){
var inst_19337 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_19338 = true;
var inst_19339 = [new cljs.core.Keyword(null,"pass","pass",(1574159993)),"can vote on own proposal",inst_19338,true];
var inst_19340 = cljs.core.PersistentHashMap.fromArrays(inst_19337,inst_19339);
var inst_19341 = cljs.test.do_report.call(null,inst_19340);
var state_19827__$1 = state_19827;
var statearr_19988_21217 = state_19827__$1;
(statearr_19988_21217[(2)] = inst_19341);

(statearr_19988_21217[(1)] = (50));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (80))){
var inst_19460 = (state_19827[(36)]);
var state_19827__$1 = state_19827;
var statearr_19989_21218 = state_19827__$1;
(statearr_19989_21218[(2)] = inst_19460);

(statearr_19989_21218[(1)] = (81));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (112))){
var inst_19615 = (state_19827[(31)]);
var inst_19618 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_19619 = cljs.core.list(new cljs.core.Symbol(null,"=","=",(-1501502141),null),cljs.core.list(new cljs.core.Symbol(null,"get-in","get-in",(-1965644065),null),new cljs.core.Symbol(null,"r","r",(1169147337),null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, ["vote_counts",(1),"value"], null)),(2));
var inst_19620 = cljs.core.cons.call(null,cljs.core._EQ_,inst_19615);
var inst_19621 = [new cljs.core.Keyword(null,"pass","pass",(1574159993)),null,inst_19619,inst_19620];
var inst_19622 = cljs.core.PersistentHashMap.fromArrays(inst_19618,inst_19621);
var inst_19623 = cljs.test.do_report.call(null,inst_19622);
var state_19827__$1 = state_19827;
var statearr_19990_21219 = state_19827__$1;
(statearr_19990_21219[(2)] = inst_19623);

(statearr_19990_21219[(1)] = (114));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (144))){
var inst_19740 = (state_19827[(34)]);
var _ = (function (){var statearr_19991 = state_19827;
(statearr_19991[(4)] = cljs.core.cons.call(null,(147),(state_19827[(4)])));

return statearr_19991;
})();
var state_19827__$1 = state_19827;
if(cljs.core.truth_(inst_19740)){
var statearr_19992_21220 = state_19827__$1;
(statearr_19992_21220[(1)] = (148));

} else {
var statearr_19993_21221 = state_19827__$1;
(statearr_19993_21221[(1)] = (149));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (17))){
var inst_19188 = (state_19827[(24)]);
var inst_19214 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_19215 = new cljs.core.Symbol("e2e.macros","pass?","e2e.macros/pass?",(894145299),null);
var inst_19216 = [new cljs.core.Keyword(null,"fail","fail",(1706214930)),"can vote on own proposal",inst_19215,inst_19188];
var inst_19217 = cljs.core.PersistentHashMap.fromArrays(inst_19214,inst_19216);
var inst_19218 = cljs.test.do_report.call(null,inst_19217);
var state_19827__$1 = state_19827;
var statearr_19994_21222 = state_19827__$1;
(statearr_19994_21222[(2)] = inst_19218);

(statearr_19994_21222[(1)] = (18));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (49))){
var inst_19343 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_19344 = true;
var inst_19345 = [new cljs.core.Keyword(null,"fail","fail",(1706214930)),"can vote on own proposal",inst_19344,true];
var inst_19346 = cljs.core.PersistentHashMap.fromArrays(inst_19343,inst_19345);
var inst_19347 = cljs.test.do_report.call(null,inst_19346);
var state_19827__$1 = state_19827;
var statearr_19995_21223 = state_19827__$1;
(statearr_19995_21223[(2)] = inst_19347);

(statearr_19995_21223[(1)] = (50));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (81))){
var inst_19470 = (state_19827[(2)]);
var state_19827__$1 = (function (){var statearr_19996 = state_19827;
(statearr_19996[(38)] = inst_19470);

return statearr_19996;
})();
var statearr_19997_21224 = state_19827__$1;
(statearr_19997_21224[(2)] = null);

(statearr_19997_21224[(1)] = (82));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (113))){
var inst_19615 = (state_19827[(31)]);
var inst_19625 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_19626 = cljs.core.list(new cljs.core.Symbol(null,"=","=",(-1501502141),null),cljs.core.list(new cljs.core.Symbol(null,"get-in","get-in",(-1965644065),null),new cljs.core.Symbol(null,"r","r",(1169147337),null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, ["vote_counts",(1),"value"], null)),(2));
var inst_19627 = new cljs.core.Symbol(null,"not","not",(1044554643),null);
var inst_19628 = new cljs.core.Symbol(null,"=","=",(-1501502141),null);
var inst_19629 = cljs.core.cons.call(null,inst_19628,inst_19615);
var inst_19630 = (new cljs.core.List(null,inst_19629,null,(1),null));
var inst_19631 = (new cljs.core.List(null,inst_19627,inst_19630,(2),null));
var inst_19632 = [new cljs.core.Keyword(null,"fail","fail",(1706214930)),null,inst_19626,inst_19631];
var inst_19633 = cljs.core.PersistentHashMap.fromArrays(inst_19625,inst_19632);
var inst_19634 = cljs.test.do_report.call(null,inst_19633);
var state_19827__$1 = state_19827;
var statearr_19998_21225 = state_19827__$1;
(statearr_19998_21225[(2)] = inst_19634);

(statearr_19998_21225[(1)] = (114));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (145))){
var inst_19775 = (state_19827[(2)]);
var state_19827__$1 = state_19827;
var statearr_19999_21226 = state_19827__$1;
(statearr_19999_21226[(2)] = inst_19775);

(statearr_19999_21226[(1)] = (139));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (18))){
var inst_19188 = (state_19827[(24)]);
var inst_19220 = (state_19827[(2)]);
var _ = (function (){var statearr_20000 = state_19827;
(statearr_20000[(4)] = cljs.core.rest.call(null,(state_19827[(4)])));

return statearr_20000;
})();
var state_19827__$1 = (function (){var statearr_20001 = state_19827;
(statearr_20001[(39)] = inst_19220);

return statearr_20001;
})();
var statearr_20002_21227 = state_19827__$1;
(statearr_20002_21227[(2)] = inst_19188);

(statearr_20002_21227[(1)] = (13));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (50))){
var inst_19349 = (state_19827[(2)]);
var _ = (function (){var statearr_20003 = state_19827;
(statearr_20003[(4)] = cljs.core.rest.call(null,(state_19827[(4)])));

return statearr_20003;
})();
var state_19827__$1 = (function (){var statearr_20004 = state_19827;
(statearr_20004[(40)] = inst_19349);

return statearr_20004;
})();
var statearr_20005_21228 = state_19827__$1;
(statearr_20005_21228[(2)] = true);

(statearr_20005_21228[(1)] = (45));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (82))){
var _ = (function (){var statearr_20006 = state_19827;
(statearr_20006[(4)] = cljs.core.cons.call(null,(85),(state_19827[(4)])));

return statearr_20006;
})();
var state_19827__$1 = state_19827;
var statearr_20007_21229 = state_19827__$1;
(statearr_20007_21229[(1)] = (86));



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (114))){
var inst_19616 = (state_19827[(32)]);
var inst_19636 = (state_19827[(2)]);
var _ = (function (){var statearr_20010 = state_19827;
(statearr_20010[(4)] = cljs.core.rest.call(null,(state_19827[(4)])));

return statearr_20010;
})();
var state_19827__$1 = (function (){var statearr_20011 = state_19827;
(statearr_20011[(41)] = inst_19636);

return statearr_20011;
})();
var statearr_20012_21230 = state_19827__$1;
(statearr_20012_21230[(2)] = inst_19616);

(statearr_20012_21230[(1)] = (109));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (146))){
var inst_19748 = (state_19827[(2)]);
var inst_19749 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_19750 = new cljs.core.Symbol("e2e.macros","pass?","e2e.macros/pass?",(894145299),null);
var inst_19751 = [new cljs.core.Keyword(null,"error","error",(-978969032)),"needs latest terms accepted",inst_19750,inst_19748];
var inst_19752 = cljs.core.PersistentHashMap.fromArrays(inst_19749,inst_19751);
var inst_19753 = cljs.test.do_report.call(null,inst_19752);
var state_19827__$1 = state_19827;
var statearr_20013_21231 = state_19827__$1;
(statearr_20013_21231[(2)] = inst_19753);

(statearr_20013_21231[(1)] = (145));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (19))){
var _ = (function (){var statearr_20014 = state_19827;
(statearr_20014[(4)] = cljs.core.rest.call(null,(state_19827[(4)])));

return statearr_20014;
})();
var state_19827__$1 = state_19827;
var ex20009 = (state_19827__$1[(2)]);
var statearr_20015_21232 = state_19827__$1;
(statearr_20015_21232[(5)] = ex20009);


if((ex20009 instanceof Error)){
var statearr_20016_21233 = state_19827__$1;
(statearr_20016_21233[(1)] = (8));

(statearr_20016_21233[(5)] = null);

} else {
throw ex20009;

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (51))){
var _ = (function (){var statearr_20017 = state_19827;
(statearr_20017[(4)] = cljs.core.cons.call(null,(58),(state_19827[(4)])));

return statearr_20017;
})();
var inst_19381 = [new cljs.core.Keyword(null,"voter","voter",(1012094707)),new cljs.core.Keyword(null,"prop_id","prop_id",(-694455661)),new cljs.core.Keyword(null,"vote_type","vote_type",(-293333277))];
var inst_19382 = [e2e.proposals.owner_acc,(0),(1)];
var inst_19383 = cljs.core.PersistentHashMap.fromArrays(inst_19381,inst_19382);
var inst_19384 = e2e.proposals.eos_tx_owner.call(null,e2e.proposals.prop_acc,"addvote",inst_19383);
var inst_19385 = cljs.core.async.interop.p__GT_c.call(null,inst_19384);
var state_19827__$1 = state_19827;
return cljs.core.async.impl.ioc_helpers.take_BANG_.call(null,state_19827__$1,(59),inst_19385);
} else {
if((state_val_19828 === (83))){
var inst_19498 = (state_19827[(2)]);
var _ = (function (){var statearr_20019 = state_19827;
(statearr_20019[(4)] = cljs.core.rest.call(null,(state_19827[(4)])));

return statearr_20019;
})();
var state_19827__$1 = state_19827;
var statearr_20020_21234 = state_19827__$1;
(statearr_20020_21234[(2)] = inst_19498);

(statearr_20020_21234[(1)] = (71));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (115))){
var inst_19556 = (state_19827[(14)]);
var inst_19656 = (state_19827[(42)]);
var inst_19657 = (state_19827[(43)]);
var _ = (function (){var statearr_20021 = state_19827;
(statearr_20021[(4)] = cljs.core.cons.call(null,(118),(state_19827[(4)])));

return statearr_20021;
})();
var inst_19651 = cljs.core.PersistentVector.EMPTY_NODE;
var inst_19652 = ["vote_counts",(2),"value"];
var inst_19653 = (new cljs.core.PersistentVector(null,(3),(5),inst_19651,inst_19652,null));
var inst_19654 = cljs.core.get_in.call(null,inst_19556,inst_19653);
var inst_19655 = (new cljs.core.List(null,(5),null,(1),null));
var inst_19656__$1 = (new cljs.core.List(null,inst_19654,inst_19655,(2),null));
var inst_19657__$1 = cljs.core.apply.call(null,cljs.core._EQ_,inst_19656__$1);
var state_19827__$1 = (function (){var statearr_20022 = state_19827;
(statearr_20022[(42)] = inst_19656__$1);

(statearr_20022[(43)] = inst_19657__$1);

return statearr_20022;
})();
if(cljs.core.truth_(inst_19657__$1)){
var statearr_20023_21235 = state_19827__$1;
(statearr_20023_21235[(1)] = (119));

} else {
var statearr_20024_21236 = state_19827__$1;
(statearr_20024_21236[(1)] = (120));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (147))){
var _ = (function (){var statearr_20025 = state_19827;
(statearr_20025[(4)] = cljs.core.rest.call(null,(state_19827[(4)])));

return statearr_20025;
})();
var state_19827__$1 = state_19827;
var ex20018 = (state_19827__$1[(2)]);
var statearr_20026_21237 = state_19827__$1;
(statearr_20026_21237[(5)] = ex20018);


var statearr_20027_21238 = state_19827__$1;
(statearr_20027_21238[(1)] = (146));

(statearr_20027_21238[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (20))){
var inst_19235 = (state_19827[(44)]);
var inst_19235__$1 = (state_19827[(2)]);
var inst_19236 = (inst_19235__$1 instanceof cljs.core.ExceptionInfo);
var inst_19237 = cljs.core.ex_data.call(null,inst_19235__$1);
var inst_19238 = new cljs.core.Keyword(null,"error","error",(-978969032)).cljs$core$IFn$_invoke$arity$1(inst_19237);
var inst_19239 = cljs.core._EQ_.call(null,inst_19238,new cljs.core.Keyword(null,"promise-error","promise-error",(-90673560)));
var inst_19240 = ((inst_19236) && (inst_19239));
var state_19827__$1 = (function (){var statearr_20028 = state_19827;
(statearr_20028[(44)] = inst_19235__$1);

return statearr_20028;
})();
if(cljs.core.truth_(inst_19240)){
var statearr_20029_21239 = state_19827__$1;
(statearr_20029_21239[(1)] = (21));

} else {
var statearr_20030_21240 = state_19827__$1;
(statearr_20030_21240[(1)] = (22));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (52))){
var inst_19428 = (state_19827[(2)]);
var state_19827__$1 = (function (){var statearr_20031 = state_19827;
(statearr_20031[(45)] = inst_19428);

return statearr_20031;
})();
var statearr_20032_21241 = state_19827__$1;
(statearr_20032_21241[(2)] = null);

(statearr_20032_21241[(1)] = (70));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (84))){
var inst_19471 = (state_19827[(2)]);
var inst_19472 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_19473 = true;
var inst_19474 = [new cljs.core.Keyword(null,"error","error",(-978969032)),"can update vote twice",inst_19473,inst_19471];
var inst_19475 = cljs.core.PersistentHashMap.fromArrays(inst_19472,inst_19474);
var inst_19476 = cljs.test.do_report.call(null,inst_19475);
var state_19827__$1 = state_19827;
var statearr_20033_21242 = state_19827__$1;
(statearr_20033_21242[(2)] = inst_19476);

(statearr_20033_21242[(1)] = (83));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (116))){
var inst_19680 = (state_19827[(2)]);
var inst_19681 = Promise.resolve((42));
var inst_19682 = eos_cljs.core.wait_block.call(null,inst_19681,(2));
var inst_19683 = cljs.core.async.interop.p__GT_c.call(null,inst_19682);
var state_19827__$1 = (function (){var statearr_20034 = state_19827;
(statearr_20034[(46)] = inst_19680);

return statearr_20034;
})();
return cljs.core.async.impl.ioc_helpers.take_BANG_.call(null,state_19827__$1,(122),inst_19683);
} else {
if((state_val_19828 === (148))){
var inst_19740 = (state_19827[(34)]);
var inst_19760 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_19761 = new cljs.core.Symbol("e2e.macros","pass?","e2e.macros/pass?",(894145299),null);
var inst_19762 = [new cljs.core.Keyword(null,"pass","pass",(1574159993)),"needs latest terms accepted",inst_19761,inst_19740];
var inst_19763 = cljs.core.PersistentHashMap.fromArrays(inst_19760,inst_19762);
var inst_19764 = cljs.test.do_report.call(null,inst_19763);
var state_19827__$1 = state_19827;
var statearr_20035_21243 = state_19827__$1;
(statearr_20035_21243[(2)] = inst_19764);

(statearr_20035_21243[(1)] = (150));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (21))){
var inst_19235 = (state_19827[(44)]);
var inst_19242 = (function(){throw inst_19235})();
var state_19827__$1 = state_19827;
var statearr_20037_21244 = state_19827__$1;
(statearr_20037_21244[(2)] = inst_19242);

(statearr_20037_21244[(1)] = (23));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (53))){
var inst_19356 = (state_19827[(2)]);
var inst_19357 = cljs.core.prn.call(null,"test failed with ",inst_19356);
var state_19827__$1 = (function (){var statearr_20038 = state_19827;
(statearr_20038[(47)] = inst_19357);

return statearr_20038;
})();
var statearr_20039_21245 = state_19827__$1;
(statearr_20039_21245[(2)] = null);

(statearr_20039_21245[(1)] = (54));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (85))){
var _ = (function (){var statearr_20040 = state_19827;
(statearr_20040[(4)] = cljs.core.rest.call(null,(state_19827[(4)])));

return statearr_20040;
})();
var state_19827__$1 = state_19827;
var ex20036 = (state_19827__$1[(2)]);
var statearr_20041_21246 = state_19827__$1;
(statearr_20041_21246[(5)] = ex20036);


var statearr_20042_21247 = state_19827__$1;
(statearr_20042_21247[(1)] = (84));

(statearr_20042_21247[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (117))){
var inst_19640 = (state_19827[(2)]);
var inst_19641 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_19642 = cljs.core.list(new cljs.core.Symbol(null,"=","=",(-1501502141),null),cljs.core.list(new cljs.core.Symbol(null,"get-in","get-in",(-1965644065),null),new cljs.core.Symbol(null,"r","r",(1169147337),null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, ["vote_counts",(2),"value"], null)),(5));
var inst_19643 = [new cljs.core.Keyword(null,"error","error",(-978969032)),null,inst_19642,inst_19640];
var inst_19644 = cljs.core.PersistentHashMap.fromArrays(inst_19641,inst_19643);
var inst_19645 = cljs.test.do_report.call(null,inst_19644);
var state_19827__$1 = state_19827;
var statearr_20043_21248 = state_19827__$1;
(statearr_20043_21248[(2)] = inst_19645);

(statearr_20043_21248[(1)] = (116));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (149))){
var inst_19740 = (state_19827[(34)]);
var inst_19766 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_19767 = new cljs.core.Symbol("e2e.macros","pass?","e2e.macros/pass?",(894145299),null);
var inst_19768 = [new cljs.core.Keyword(null,"fail","fail",(1706214930)),"needs latest terms accepted",inst_19767,inst_19740];
var inst_19769 = cljs.core.PersistentHashMap.fromArrays(inst_19766,inst_19768);
var inst_19770 = cljs.test.do_report.call(null,inst_19769);
var state_19827__$1 = state_19827;
var statearr_20044_21249 = state_19827__$1;
(statearr_20044_21249[(2)] = inst_19770);

(statearr_20044_21249[(1)] = (150));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (22))){
var inst_19235 = (state_19827[(44)]);
var state_19827__$1 = state_19827;
var statearr_20045_21250 = state_19827__$1;
(statearr_20045_21250[(2)] = inst_19235);

(statearr_20045_21250[(1)] = (23));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (54))){
var _ = (function (){var statearr_20047 = state_19827;
(statearr_20047[(4)] = cljs.core.cons.call(null,(57),(state_19827[(4)])));

return statearr_20047;
})();
var inst_19369 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002))];
var inst_19370 = [new cljs.core.Keyword(null,"fail","fail",(1706214930)),"can update vote"];
var inst_19371 = cljs.core.PersistentHashMap.fromArrays(inst_19369,inst_19370);
var inst_19372 = cljs.test.do_report.call(null,inst_19371);
var ___$1 = (function (){var statearr_20048 = state_19827;
(statearr_20048[(4)] = cljs.core.rest.call(null,(state_19827[(4)])));

return statearr_20048;
})();
var state_19827__$1 = state_19827;
var statearr_20049_21251 = state_19827__$1;
(statearr_20049_21251[(2)] = inst_19372);

(statearr_20049_21251[(1)] = (55));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (86))){
var inst_19483 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_19484 = true;
var inst_19485 = [new cljs.core.Keyword(null,"pass","pass",(1574159993)),"can update vote twice",inst_19484,true];
var inst_19486 = cljs.core.PersistentHashMap.fromArrays(inst_19483,inst_19485);
var inst_19487 = cljs.test.do_report.call(null,inst_19486);
var state_19827__$1 = state_19827;
var statearr_20050_21252 = state_19827__$1;
(statearr_20050_21252[(2)] = inst_19487);

(statearr_20050_21252[(1)] = (88));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (118))){
var _ = (function (){var statearr_20051 = state_19827;
(statearr_20051[(4)] = cljs.core.rest.call(null,(state_19827[(4)])));

return statearr_20051;
})();
var state_19827__$1 = state_19827;
var ex20046 = (state_19827__$1[(2)]);
var statearr_20052_21253 = state_19827__$1;
(statearr_20052_21253[(5)] = ex20046);


var statearr_20053_21254 = state_19827__$1;
(statearr_20053_21254[(1)] = (117));

(statearr_20053_21254[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (150))){
var inst_19740 = (state_19827[(34)]);
var inst_19772 = (state_19827[(2)]);
var _ = (function (){var statearr_20054 = state_19827;
(statearr_20054[(4)] = cljs.core.rest.call(null,(state_19827[(4)])));

return statearr_20054;
})();
var state_19827__$1 = (function (){var statearr_20055 = state_19827;
(statearr_20055[(48)] = inst_19772);

return statearr_20055;
})();
var statearr_20056_21255 = state_19827__$1;
(statearr_20056_21255[(2)] = inst_19740);

(statearr_20056_21255[(1)] = (145));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (23))){
var inst_19245 = (state_19827[(2)]);
var state_19827__$1 = (function (){var statearr_20057 = state_19827;
(statearr_20057[(49)] = inst_19245);

return statearr_20057;
})();
var statearr_20058_21256 = state_19827__$1;
(statearr_20058_21256[(2)] = null);

(statearr_20058_21256[(1)] = (24));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (55))){
var inst_19375 = (state_19827[(2)]);
var state_19827__$1 = state_19827;
var statearr_20059_21257 = state_19827__$1;
(statearr_20059_21257[(2)] = inst_19375);

(statearr_20059_21257[(1)] = (52));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (87))){
var inst_19489 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_19490 = true;
var inst_19491 = [new cljs.core.Keyword(null,"fail","fail",(1706214930)),"can update vote twice",inst_19490,true];
var inst_19492 = cljs.core.PersistentHashMap.fromArrays(inst_19489,inst_19491);
var inst_19493 = cljs.test.do_report.call(null,inst_19492);
var state_19827__$1 = state_19827;
var statearr_20061_21258 = state_19827__$1;
(statearr_20061_21258[(2)] = inst_19493);

(statearr_20061_21258[(1)] = (88));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (119))){
var inst_19656 = (state_19827[(42)]);
var inst_19659 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_19660 = cljs.core.list(new cljs.core.Symbol(null,"=","=",(-1501502141),null),cljs.core.list(new cljs.core.Symbol(null,"get-in","get-in",(-1965644065),null),new cljs.core.Symbol(null,"r","r",(1169147337),null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, ["vote_counts",(2),"value"], null)),(5));
var inst_19661 = cljs.core.cons.call(null,cljs.core._EQ_,inst_19656);
var inst_19662 = [new cljs.core.Keyword(null,"pass","pass",(1574159993)),null,inst_19660,inst_19661];
var inst_19663 = cljs.core.PersistentHashMap.fromArrays(inst_19659,inst_19662);
var inst_19664 = cljs.test.do_report.call(null,inst_19663);
var state_19827__$1 = state_19827;
var statearr_20062_21259 = state_19827__$1;
(statearr_20062_21259[(2)] = inst_19664);

(statearr_20062_21259[(1)] = (121));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (151))){
var _ = (function (){var statearr_20063 = state_19827;
(statearr_20063[(4)] = cljs.core.rest.call(null,(state_19827[(4)])));

return statearr_20063;
})();
var state_19827__$1 = state_19827;
var ex20060 = (state_19827__$1[(2)]);
var statearr_20064_21260 = state_19827__$1;
(statearr_20064_21260[(5)] = ex20060);


if((ex20060 instanceof Error)){
var statearr_20065_21261 = state_19827__$1;
(statearr_20065_21261[(1)] = (140));

(statearr_20065_21261[(5)] = null);

} else {
throw ex20060;

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (24))){
var _ = (function (){var statearr_20066 = state_19827;
(statearr_20066[(4)] = cljs.core.cons.call(null,(27),(state_19827[(4)])));

return statearr_20066;
})();
var inst_19257 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002))];
var inst_19258 = [new cljs.core.Keyword(null,"fail","fail",(1706214930)),"can vote on own proposal"];
var inst_19259 = cljs.core.PersistentHashMap.fromArrays(inst_19257,inst_19258);
var inst_19260 = cljs.test.do_report.call(null,inst_19259);
var ___$1 = (function (){var statearr_20067 = state_19827;
(statearr_20067[(4)] = cljs.core.rest.call(null,(state_19827[(4)])));

return statearr_20067;
})();
var state_19827__$1 = state_19827;
var statearr_20068_21262 = state_19827__$1;
(statearr_20068_21262[(2)] = inst_19260);

(statearr_20068_21262[(1)] = (25));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (56))){
var inst_19358 = (state_19827[(2)]);
var inst_19359 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_19360 = null;
var inst_19361 = [new cljs.core.Keyword(null,"error","error",(-978969032)),"can update vote",inst_19360,inst_19358];
var inst_19362 = cljs.core.PersistentHashMap.fromArrays(inst_19359,inst_19361);
var inst_19363 = cljs.test.do_report.call(null,inst_19362);
var state_19827__$1 = state_19827;
var statearr_20069_21263 = state_19827__$1;
(statearr_20069_21263[(2)] = inst_19363);

(statearr_20069_21263[(1)] = (55));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (88))){
var inst_19495 = (state_19827[(2)]);
var _ = (function (){var statearr_20070 = state_19827;
(statearr_20070[(4)] = cljs.core.rest.call(null,(state_19827[(4)])));

return statearr_20070;
})();
var state_19827__$1 = (function (){var statearr_20071 = state_19827;
(statearr_20071[(50)] = inst_19495);

return statearr_20071;
})();
var statearr_20072_21264 = state_19827__$1;
(statearr_20072_21264[(2)] = true);

(statearr_20072_21264[(1)] = (83));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (120))){
var inst_19656 = (state_19827[(42)]);
var inst_19666 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_19667 = cljs.core.list(new cljs.core.Symbol(null,"=","=",(-1501502141),null),cljs.core.list(new cljs.core.Symbol(null,"get-in","get-in",(-1965644065),null),new cljs.core.Symbol(null,"r","r",(1169147337),null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, ["vote_counts",(2),"value"], null)),(5));
var inst_19668 = new cljs.core.Symbol(null,"not","not",(1044554643),null);
var inst_19669 = new cljs.core.Symbol(null,"=","=",(-1501502141),null);
var inst_19670 = cljs.core.cons.call(null,inst_19669,inst_19656);
var inst_19671 = (new cljs.core.List(null,inst_19670,null,(1),null));
var inst_19672 = (new cljs.core.List(null,inst_19668,inst_19671,(2),null));
var inst_19673 = [new cljs.core.Keyword(null,"fail","fail",(1706214930)),null,inst_19667,inst_19672];
var inst_19674 = cljs.core.PersistentHashMap.fromArrays(inst_19666,inst_19673);
var inst_19675 = cljs.test.do_report.call(null,inst_19674);
var state_19827__$1 = state_19827;
var statearr_20073_21265 = state_19827__$1;
(statearr_20073_21265[(2)] = inst_19675);

(statearr_20073_21265[(1)] = (121));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (152))){
var inst_19787 = (state_19827[(51)]);
var inst_19787__$1 = (state_19827[(2)]);
var inst_19788 = (inst_19787__$1 instanceof cljs.core.ExceptionInfo);
var inst_19789 = cljs.core.ex_data.call(null,inst_19787__$1);
var inst_19790 = new cljs.core.Keyword(null,"error","error",(-978969032)).cljs$core$IFn$_invoke$arity$1(inst_19789);
var inst_19791 = cljs.core._EQ_.call(null,inst_19790,new cljs.core.Keyword(null,"promise-error","promise-error",(-90673560)));
var inst_19792 = ((inst_19788) && (inst_19791));
var state_19827__$1 = (function (){var statearr_20075 = state_19827;
(statearr_20075[(51)] = inst_19787__$1);

return statearr_20075;
})();
if(cljs.core.truth_(inst_19792)){
var statearr_20076_21266 = state_19827__$1;
(statearr_20076_21266[(1)] = (153));

} else {
var statearr_20077_21267 = state_19827__$1;
(statearr_20077_21267[(1)] = (154));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (25))){
var inst_19263 = (state_19827[(2)]);
var _ = (function (){var statearr_20078 = state_19827;
(statearr_20078[(4)] = cljs.core.rest.call(null,(state_19827[(4)])));

return statearr_20078;
})();
var state_19827__$1 = state_19827;
var statearr_20079_21268 = state_19827__$1;
(statearr_20079_21268[(2)] = inst_19263);

(statearr_20079_21268[(1)] = (7));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (57))){
var _ = (function (){var statearr_20080 = state_19827;
(statearr_20080[(4)] = cljs.core.rest.call(null,(state_19827[(4)])));

return statearr_20080;
})();
var state_19827__$1 = state_19827;
var ex20074 = (state_19827__$1[(2)]);
var statearr_20081_21269 = state_19827__$1;
(statearr_20081_21269[(5)] = ex20074);


var statearr_20082_21270 = state_19827__$1;
(statearr_20082_21270[(1)] = (56));

(statearr_20082_21270[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (89))){
var inst_19506 = (state_19827[(52)]);
var inst_19506__$1 = (state_19827[(2)]);
var inst_19507 = (inst_19506__$1 instanceof cljs.core.ExceptionInfo);
var inst_19508 = cljs.core.ex_data.call(null,inst_19506__$1);
var inst_19509 = new cljs.core.Keyword(null,"error","error",(-978969032)).cljs$core$IFn$_invoke$arity$1(inst_19508);
var inst_19510 = cljs.core._EQ_.call(null,inst_19509,new cljs.core.Keyword(null,"promise-error","promise-error",(-90673560)));
var inst_19511 = ((inst_19507) && (inst_19510));
var state_19827__$1 = (function (){var statearr_20083 = state_19827;
(statearr_20083[(52)] = inst_19506__$1);

return statearr_20083;
})();
if(cljs.core.truth_(inst_19511)){
var statearr_20084_21271 = state_19827__$1;
(statearr_20084_21271[(1)] = (90));

} else {
var statearr_20085_21272 = state_19827__$1;
(statearr_20085_21272[(1)] = (91));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (121))){
var inst_19657 = (state_19827[(43)]);
var inst_19677 = (state_19827[(2)]);
var _ = (function (){var statearr_20086 = state_19827;
(statearr_20086[(4)] = cljs.core.rest.call(null,(state_19827[(4)])));

return statearr_20086;
})();
var state_19827__$1 = (function (){var statearr_20087 = state_19827;
(statearr_20087[(53)] = inst_19677);

return statearr_20087;
})();
var statearr_20088_21273 = state_19827__$1;
(statearr_20088_21273[(2)] = inst_19657);

(statearr_20088_21273[(1)] = (116));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (153))){
var inst_19787 = (state_19827[(51)]);
var inst_19794 = (function(){throw inst_19787})();
var state_19827__$1 = state_19827;
var statearr_20090_21274 = state_19827__$1;
(statearr_20090_21274[(2)] = inst_19794);

(statearr_20090_21274[(1)] = (155));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (26))){
var inst_19246 = (state_19827[(2)]);
var inst_19247 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_19248 = null;
var inst_19249 = [new cljs.core.Keyword(null,"error","error",(-978969032)),"can vote on own proposal",inst_19248,inst_19246];
var inst_19250 = cljs.core.PersistentHashMap.fromArrays(inst_19247,inst_19249);
var inst_19251 = cljs.test.do_report.call(null,inst_19250);
var state_19827__$1 = state_19827;
var statearr_20091_21275 = state_19827__$1;
(statearr_20091_21275[(2)] = inst_19251);

(statearr_20091_21275[(1)] = (25));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (58))){
var _ = (function (){var statearr_20092 = state_19827;
(statearr_20092[(4)] = cljs.core.rest.call(null,(state_19827[(4)])));

return statearr_20092;
})();
var state_19827__$1 = state_19827;
var ex20089 = (state_19827__$1[(2)]);
var statearr_20093_21276 = state_19827__$1;
(statearr_20093_21276[(5)] = ex20089);


if((ex20089 instanceof Error)){
var statearr_20094_21277 = state_19827__$1;
(statearr_20094_21277[(1)] = (53));

(statearr_20094_21277[(5)] = null);

} else {
throw ex20089;

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (90))){
var inst_19506 = (state_19827[(52)]);
var inst_19513 = (function(){throw inst_19506})();
var state_19827__$1 = state_19827;
var statearr_20095_21278 = state_19827__$1;
(statearr_20095_21278[(2)] = inst_19513);

(statearr_20095_21278[(1)] = (92));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (122))){
var inst_19685 = (state_19827[(54)]);
var inst_19685__$1 = (state_19827[(2)]);
var inst_19686 = (inst_19685__$1 instanceof cljs.core.ExceptionInfo);
var inst_19687 = cljs.core.ex_data.call(null,inst_19685__$1);
var inst_19688 = new cljs.core.Keyword(null,"error","error",(-978969032)).cljs$core$IFn$_invoke$arity$1(inst_19687);
var inst_19689 = cljs.core._EQ_.call(null,inst_19688,new cljs.core.Keyword(null,"promise-error","promise-error",(-90673560)));
var inst_19690 = ((inst_19686) && (inst_19689));
var state_19827__$1 = (function (){var statearr_20097 = state_19827;
(statearr_20097[(54)] = inst_19685__$1);

return statearr_20097;
})();
if(cljs.core.truth_(inst_19690)){
var statearr_20098_21279 = state_19827__$1;
(statearr_20098_21279[(1)] = (123));

} else {
var statearr_20099_21280 = state_19827__$1;
(statearr_20099_21280[(1)] = (124));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (154))){
var inst_19787 = (state_19827[(51)]);
var state_19827__$1 = state_19827;
var statearr_20100_21281 = state_19827__$1;
(statearr_20100_21281[(2)] = inst_19787);

(statearr_20100_21281[(1)] = (155));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (27))){
var _ = (function (){var statearr_20101 = state_19827;
(statearr_20101[(4)] = cljs.core.rest.call(null,(state_19827[(4)])));

return statearr_20101;
})();
var state_19827__$1 = state_19827;
var ex20096 = (state_19827__$1[(2)]);
var statearr_20102_21282 = state_19827__$1;
(statearr_20102_21282[(5)] = ex20096);


var statearr_20103_21283 = state_19827__$1;
(statearr_20103_21283[(1)] = (26));

(statearr_20103_21283[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (59))){
var inst_19387 = (state_19827[(55)]);
var inst_19387__$1 = (state_19827[(2)]);
var inst_19388 = (inst_19387__$1 instanceof cljs.core.ExceptionInfo);
var inst_19389 = cljs.core.ex_data.call(null,inst_19387__$1);
var inst_19390 = new cljs.core.Keyword(null,"error","error",(-978969032)).cljs$core$IFn$_invoke$arity$1(inst_19389);
var inst_19391 = cljs.core._EQ_.call(null,inst_19390,new cljs.core.Keyword(null,"promise-error","promise-error",(-90673560)));
var inst_19392 = ((inst_19388) && (inst_19391));
var state_19827__$1 = (function (){var statearr_20104 = state_19827;
(statearr_20104[(55)] = inst_19387__$1);

return statearr_20104;
})();
if(cljs.core.truth_(inst_19392)){
var statearr_20105_21284 = state_19827__$1;
(statearr_20105_21284[(1)] = (60));

} else {
var statearr_20106_21285 = state_19827__$1;
(statearr_20106_21285[(1)] = (61));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (91))){
var inst_19506 = (state_19827[(52)]);
var state_19827__$1 = state_19827;
var statearr_20107_21286 = state_19827__$1;
(statearr_20107_21286[(2)] = inst_19506);

(statearr_20107_21286[(1)] = (92));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (123))){
var inst_19685 = (state_19827[(54)]);
var inst_19692 = (function(){throw inst_19685})();
var state_19827__$1 = state_19827;
var statearr_20108_21287 = state_19827__$1;
(statearr_20108_21287[(2)] = inst_19692);

(statearr_20108_21287[(1)] = (125));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (155))){
var inst_19797 = (state_19827[(2)]);
var state_19827__$1 = (function (){var statearr_20109 = state_19827;
(statearr_20109[(56)] = inst_19797);

return statearr_20109;
})();
var statearr_20110_21288 = state_19827__$1;
(statearr_20110_21288[(2)] = null);

(statearr_20110_21288[(1)] = (156));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (28))){
var inst_19272 = (state_19827[(57)]);
var inst_19272__$1 = (state_19827[(2)]);
var inst_19273 = (inst_19272__$1 instanceof cljs.core.ExceptionInfo);
var inst_19274 = cljs.core.ex_data.call(null,inst_19272__$1);
var inst_19275 = new cljs.core.Keyword(null,"error","error",(-978969032)).cljs$core$IFn$_invoke$arity$1(inst_19274);
var inst_19276 = cljs.core._EQ_.call(null,inst_19275,new cljs.core.Keyword(null,"promise-error","promise-error",(-90673560)));
var inst_19277 = ((inst_19273) && (inst_19276));
var state_19827__$1 = (function (){var statearr_20111 = state_19827;
(statearr_20111[(57)] = inst_19272__$1);

return statearr_20111;
})();
if(cljs.core.truth_(inst_19277)){
var statearr_20112_21289 = state_19827__$1;
(statearr_20112_21289[(1)] = (29));

} else {
var statearr_20113_21290 = state_19827__$1;
(statearr_20113_21290[(1)] = (30));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (60))){
var inst_19387 = (state_19827[(55)]);
var inst_19394 = (function(){throw inst_19387})();
var state_19827__$1 = state_19827;
var statearr_20114_21291 = state_19827__$1;
(statearr_20114_21291[(2)] = inst_19394);

(statearr_20114_21291[(1)] = (62));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (92))){
var inst_19516 = (state_19827[(2)]);
var inst_19517 = [new cljs.core.Keyword(null,"voter","voter",(1012094707)),new cljs.core.Keyword(null,"prop_id","prop_id",(-694455661)),new cljs.core.Keyword(null,"vote_type","vote_type",(-293333277))];
var inst_19518 = [e2e.proposals.token_acc,(0),(1)];
var inst_19519 = cljs.core.PersistentHashMap.fromArrays(inst_19517,inst_19518);
var inst_19520 = cljs.core.PersistentVector.EMPTY_NODE;
var inst_19521 = [new cljs.core.Keyword(null,"actor","actor",(-1830560481)),new cljs.core.Keyword(null,"permission","permission",(-511292572))];
var inst_19522 = [e2e.proposals.token_acc,"active"];
var inst_19523 = cljs.core.PersistentHashMap.fromArrays(inst_19521,inst_19522);
var inst_19524 = [inst_19523];
var inst_19525 = (new cljs.core.PersistentVector(null,(1),(5),inst_19520,inst_19524,null));
var inst_19526 = eos_cljs.core.transact.call(null,e2e.proposals.prop_acc,"addvote",inst_19519,inst_19525);
var inst_19527 = cljs.core.async.interop.p__GT_c.call(null,inst_19526);
var state_19827__$1 = (function (){var statearr_20115 = state_19827;
(statearr_20115[(58)] = inst_19516);

return statearr_20115;
})();
return cljs.core.async.impl.ioc_helpers.take_BANG_.call(null,state_19827__$1,(93),inst_19527);
} else {
if((state_val_19828 === (124))){
var inst_19685 = (state_19827[(54)]);
var state_19827__$1 = state_19827;
var statearr_20116_21292 = state_19827__$1;
(statearr_20116_21292[(2)] = inst_19685);

(statearr_20116_21292[(1)] = (125));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (156))){
var _ = (function (){var statearr_20117 = state_19827;
(statearr_20117[(4)] = cljs.core.cons.call(null,(159),(state_19827[(4)])));

return statearr_20117;
})();
var inst_19809 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002))];
var inst_19810 = [new cljs.core.Keyword(null,"fail","fail",(1706214930)),"needs latest terms accepted"];
var inst_19811 = cljs.core.PersistentHashMap.fromArrays(inst_19809,inst_19810);
var inst_19812 = cljs.test.do_report.call(null,inst_19811);
var ___$1 = (function (){var statearr_20118 = state_19827;
(statearr_20118[(4)] = cljs.core.rest.call(null,(state_19827[(4)])));

return statearr_20118;
})();
var state_19827__$1 = state_19827;
var statearr_20119_21293 = state_19827__$1;
(statearr_20119_21293[(2)] = inst_19812);

(statearr_20119_21293[(1)] = (157));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (29))){
var inst_19272 = (state_19827[(57)]);
var inst_19279 = (function(){throw inst_19272})();
var state_19827__$1 = state_19827;
var statearr_20120_21294 = state_19827__$1;
(statearr_20120_21294[(2)] = inst_19279);

(statearr_20120_21294[(1)] = (31));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (61))){
var inst_19387 = (state_19827[(55)]);
var state_19827__$1 = state_19827;
var statearr_20121_21295 = state_19827__$1;
(statearr_20121_21295[(2)] = inst_19387);

(statearr_20121_21295[(1)] = (62));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (93))){
var inst_19529 = (state_19827[(59)]);
var inst_19529__$1 = (state_19827[(2)]);
var inst_19530 = (inst_19529__$1 instanceof cljs.core.ExceptionInfo);
var inst_19531 = cljs.core.ex_data.call(null,inst_19529__$1);
var inst_19532 = new cljs.core.Keyword(null,"error","error",(-978969032)).cljs$core$IFn$_invoke$arity$1(inst_19531);
var inst_19533 = cljs.core._EQ_.call(null,inst_19532,new cljs.core.Keyword(null,"promise-error","promise-error",(-90673560)));
var inst_19534 = ((inst_19530) && (inst_19533));
var state_19827__$1 = (function (){var statearr_20122 = state_19827;
(statearr_20122[(59)] = inst_19529__$1);

return statearr_20122;
})();
if(cljs.core.truth_(inst_19534)){
var statearr_20123_21296 = state_19827__$1;
(statearr_20123_21296[(1)] = (94));

} else {
var statearr_20124_21297 = state_19827__$1;
(statearr_20124_21297[(1)] = (95));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (125))){
var inst_19695 = (state_19827[(2)]);
var inst_19696 = [new cljs.core.Keyword(null,"voter","voter",(1012094707)),new cljs.core.Keyword(null,"prop_id","prop_id",(-694455661)),new cljs.core.Keyword(null,"vote_type","vote_type",(-293333277))];
var inst_19697 = [e2e.proposals.owner_acc,(1),(1)];
var inst_19698 = cljs.core.PersistentHashMap.fromArrays(inst_19696,inst_19697);
var inst_19699 = e2e.proposals.eos_tx_owner.call(null,e2e.proposals.prop_acc,"addvote",inst_19698);
var inst_19700 = cljs.core.async.interop.p__GT_c.call(null,inst_19699);
var state_19827__$1 = (function (){var statearr_20125 = state_19827;
(statearr_20125[(60)] = inst_19695);

return statearr_20125;
})();
return cljs.core.async.impl.ioc_helpers.take_BANG_.call(null,state_19827__$1,(126),inst_19700);
} else {
if((state_val_19828 === (157))){
var inst_19815 = (state_19827[(2)]);
var _ = (function (){var statearr_20126 = state_19827;
(statearr_20126[(4)] = cljs.core.rest.call(null,(state_19827[(4)])));

return statearr_20126;
})();
var state_19827__$1 = state_19827;
var statearr_20127_21298 = state_19827__$1;
(statearr_20127_21298[(2)] = inst_19815);

(statearr_20127_21298[(1)] = (139));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (30))){
var inst_19272 = (state_19827[(57)]);
var state_19827__$1 = state_19827;
var statearr_20128_21299 = state_19827__$1;
(statearr_20128_21299[(2)] = inst_19272);

(statearr_20128_21299[(1)] = (31));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (62))){
var inst_19397 = (state_19827[(2)]);
var state_19827__$1 = (function (){var statearr_20129 = state_19827;
(statearr_20129[(61)] = inst_19397);

return statearr_20129;
})();
var statearr_20130_21300 = state_19827__$1;
(statearr_20130_21300[(2)] = null);

(statearr_20130_21300[(1)] = (63));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (94))){
var inst_19529 = (state_19827[(59)]);
var inst_19536 = (function(){throw inst_19529})();
var state_19827__$1 = state_19827;
var statearr_20131_21301 = state_19827__$1;
(statearr_20131_21301[(2)] = inst_19536);

(statearr_20131_21301[(1)] = (96));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (126))){
var inst_19702 = (state_19827[(8)]);
var inst_19702__$1 = (state_19827[(2)]);
var inst_19703 = (inst_19702__$1 instanceof cljs.core.ExceptionInfo);
var inst_19704 = cljs.core.ex_data.call(null,inst_19702__$1);
var inst_19705 = new cljs.core.Keyword(null,"error","error",(-978969032)).cljs$core$IFn$_invoke$arity$1(inst_19704);
var inst_19706 = cljs.core._EQ_.call(null,inst_19705,new cljs.core.Keyword(null,"promise-error","promise-error",(-90673560)));
var inst_19707 = ((inst_19703) && (inst_19706));
var state_19827__$1 = (function (){var statearr_20132 = state_19827;
(statearr_20132[(8)] = inst_19702__$1);

return statearr_20132;
})();
if(cljs.core.truth_(inst_19707)){
var statearr_20133_21302 = state_19827__$1;
(statearr_20133_21302[(1)] = (127));

} else {
var statearr_20134_21303 = state_19827__$1;
(statearr_20134_21303[(1)] = (128));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (158))){
var inst_19798 = (state_19827[(2)]);
var inst_19799 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_19800 = null;
var inst_19801 = [new cljs.core.Keyword(null,"error","error",(-978969032)),"needs latest terms accepted",inst_19800,inst_19798];
var inst_19802 = cljs.core.PersistentHashMap.fromArrays(inst_19799,inst_19801);
var inst_19803 = cljs.test.do_report.call(null,inst_19802);
var state_19827__$1 = state_19827;
var statearr_20135_21304 = state_19827__$1;
(statearr_20135_21304[(2)] = inst_19803);

(statearr_20135_21304[(1)] = (157));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (31))){
var inst_19282 = (state_19827[(2)]);
var state_19827__$1 = (function (){var statearr_20136 = state_19827;
(statearr_20136[(62)] = inst_19282);

return statearr_20136;
})();
var statearr_20137_21305 = state_19827__$1;
(statearr_20137_21305[(2)] = null);

(statearr_20137_21305[(1)] = (32));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (63))){
var _ = (function (){var statearr_20138 = state_19827;
(statearr_20138[(4)] = cljs.core.cons.call(null,(66),(state_19827[(4)])));

return statearr_20138;
})();
var state_19827__$1 = state_19827;
var statearr_20139_21306 = state_19827__$1;
(statearr_20139_21306[(1)] = (67));



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (95))){
var inst_19529 = (state_19827[(59)]);
var state_19827__$1 = state_19827;
var statearr_20142_21307 = state_19827__$1;
(statearr_20142_21307[(2)] = inst_19529);

(statearr_20142_21307[(1)] = (96));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (127))){
var inst_19702 = (state_19827[(8)]);
var inst_19709 = (function(){throw inst_19702})();
var state_19827__$1 = state_19827;
var statearr_20143_21308 = state_19827__$1;
(statearr_20143_21308[(2)] = inst_19709);

(statearr_20143_21308[(1)] = (129));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_19828 === (159))){
var _ = (function (){var statearr_20144 = state_19827;
(statearr_20144[(4)] = cljs.core.rest.call(null,(state_19827[(4)])));

return statearr_20144;
})();
var state_19827__$1 = state_19827;
var ex20141 = (state_19827__$1[(2)]);
var statearr_20145_21309 = state_19827__$1;
(statearr_20145_21309[(5)] = ex20141);


var statearr_20146_21310 = state_19827__$1;
(statearr_20146_21310[(1)] = (158));

(statearr_20146_21310[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
return null;
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
});})(c__19__auto__,___192__auto__,self____$1))
;
return ((function (switch__14__auto__,c__19__auto__,___192__auto__,self____$1){
return (function() {
var e2e$proposals$state_machine__15__auto__ = null;
var e2e$proposals$state_machine__15__auto____0 = (function (){
var statearr_20147 = [null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];
(statearr_20147[(0)] = e2e$proposals$state_machine__15__auto__);

(statearr_20147[(1)] = (1));

return statearr_20147;
});
var e2e$proposals$state_machine__15__auto____1 = (function (state_19827){
while(true){
var ret_value__16__auto__ = (function (){try{while(true){
var result__17__auto__ = switch__14__auto__.call(null,state_19827);
if(cljs.core.keyword_identical_QMARK_.call(null,result__17__auto__,new cljs.core.Keyword(null,"recur","recur",(-437573268)))){
continue;
} else {
return result__17__auto__;
}
break;
}
}catch (e20148){var ex__18__auto__ = e20148;
var statearr_20149_21311 = state_19827;
(statearr_20149_21311[(2)] = ex__18__auto__);


if(cljs.core.seq.call(null,(state_19827[(4)]))){
var statearr_20150_21312 = state_19827;
(statearr_20150_21312[(1)] = cljs.core.first.call(null,(state_19827[(4)])));

} else {
throw ex__18__auto__;
}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
}})();
if(cljs.core.keyword_identical_QMARK_.call(null,ret_value__16__auto__,new cljs.core.Keyword(null,"recur","recur",(-437573268)))){
var G__21313 = state_19827;
state_19827 = G__21313;
continue;
} else {
return ret_value__16__auto__;
}
break;
}
});
e2e$proposals$state_machine__15__auto__ = function(state_19827){
switch(arguments.length){
case 0:
return e2e$proposals$state_machine__15__auto____0.call(this);
case 1:
return e2e$proposals$state_machine__15__auto____1.call(this,state_19827);
}
throw(new Error('Invalid arity: ' + arguments.length));
};
e2e$proposals$state_machine__15__auto__.cljs$core$IFn$_invoke$arity$0 = e2e$proposals$state_machine__15__auto____0;
e2e$proposals$state_machine__15__auto__.cljs$core$IFn$_invoke$arity$1 = e2e$proposals$state_machine__15__auto____1;
return e2e$proposals$state_machine__15__auto__;
})()
;})(switch__14__auto__,c__19__auto__,___192__auto__,self____$1))
})();
var state__21__auto__ = (function (){var statearr_20151 = f__20__auto__.call(null);
(statearr_20151[(6)] = c__19__auto__);

return statearr_20151;
})();
return cljs.core.async.impl.ioc_helpers.run_state_machine_wrapped.call(null,state__21__auto__);
});})(c__19__auto__,___192__auto__,self____$1))
);

return c__19__auto__;
});

e2e.proposals.t_e2e$proposals19174.prototype.apply = (function (self__,args19177){
var self__ = this;
var self____$1 = this;
return self____$1.call.apply(self____$1,[self____$1].concat(cljs.core.aclone.call(null,args19177)));
});

e2e.proposals.t_e2e$proposals19174.prototype.cljs$core$IFn$_invoke$arity$1 = (function (done){
var self__ = this;
var ___192__auto__ = this;
var c__19__auto__ = cljs.core.async.chan.call(null,(1));
cljs.core.async.impl.dispatch.run.call(null,((function (c__19__auto__,___192__auto__){
return (function (){
var f__20__auto__ = (function (){var switch__14__auto__ = ((function (c__19__auto__,___192__auto__){
return (function (state_20801){
var state_val_20802 = (state_20801[(1)]);
if((state_val_20802 === (32))){
var _ = (function (){var statearr_20803 = state_20801;
(statearr_20803[(4)] = cljs.core.cons.call(null,(39),(state_20801[(4)])));

return statearr_20803;
})();
var inst_20282 = [new cljs.core.Keyword(null,"voter","voter",(1012094707)),new cljs.core.Keyword(null,"prop_id","prop_id",(-694455661)),new cljs.core.Keyword(null,"vote_type","vote_type",(-293333277))];
var inst_20283 = [e2e.proposals.owner_acc,(0),(0)];
var inst_20284 = cljs.core.PersistentHashMap.fromArrays(inst_20282,inst_20283);
var inst_20285 = e2e.proposals.eos_tx_owner.call(null,e2e.proposals.prop_acc,"addvote",inst_20284);
var inst_20286 = cljs.core.async.interop.p__GT_c.call(null,inst_20285);
var state_20801__$1 = state_20801;
return cljs.core.async.impl.ioc_helpers.take_BANG_.call(null,state_20801__$1,(40),inst_20286);
} else {
if((state_val_20802 === (64))){
var inst_20399 = (state_20801[(2)]);
var _ = (function (){var statearr_20804 = state_20801;
(statearr_20804[(4)] = cljs.core.rest.call(null,(state_20801[(4)])));

return statearr_20804;
})();
var state_20801__$1 = state_20801;
var statearr_20805_21314 = state_20801__$1;
(statearr_20805_21314[(2)] = inst_20399);

(statearr_20805_21314[(1)] = (52));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (96))){
var inst_20513 = (state_20801[(2)]);
var inst_20514 = eos_cljs.core.get_table_rows.call(null,e2e.proposals.prop_acc,e2e.proposals.prop_acc,"proposal");
var inst_20515 = cljs.core.async.interop.p__GT_c.call(null,inst_20514);
var state_20801__$1 = (function (){var statearr_20806 = state_20801;
(statearr_20806[(7)] = inst_20513);

return statearr_20806;
})();
return cljs.core.async.impl.ioc_helpers.take_BANG_.call(null,state_20801__$1,(97),inst_20515);
} else {
if((state_val_20802 === (128))){
var inst_20676 = (state_20801[(8)]);
var state_20801__$1 = state_20801;
var statearr_20807_21315 = state_20801__$1;
(statearr_20807_21315[(2)] = inst_20676);

(statearr_20807_21315[(1)] = (129));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (1))){
var state_20801__$1 = state_20801;
var statearr_20808_21316 = state_20801__$1;
(statearr_20808_21316[(2)] = null);

(statearr_20808_21316[(1)] = (2));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (33))){
var inst_20329 = (state_20801[(2)]);
var state_20801__$1 = (function (){var statearr_20809 = state_20801;
(statearr_20809[(9)] = inst_20329);

return statearr_20809;
})();
var statearr_20810_21317 = state_20801__$1;
(statearr_20810_21317[(2)] = null);

(statearr_20810_21317[(1)] = (51));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (65))){
var inst_20372 = (state_20801[(2)]);
var inst_20373 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_20374 = true;
var inst_20375 = [new cljs.core.Keyword(null,"error","error",(-978969032)),"can update vote",inst_20374,inst_20372];
var inst_20376 = cljs.core.PersistentHashMap.fromArrays(inst_20373,inst_20375);
var inst_20377 = cljs.test.do_report.call(null,inst_20376);
var state_20801__$1 = state_20801;
var statearr_20811_21318 = state_20801__$1;
(statearr_20811_21318[(2)] = inst_20377);

(statearr_20811_21318[(1)] = (64));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (97))){
var inst_20517 = (state_20801[(10)]);
var inst_20517__$1 = (state_20801[(2)]);
var inst_20518 = (inst_20517__$1 instanceof cljs.core.ExceptionInfo);
var inst_20519 = cljs.core.ex_data.call(null,inst_20517__$1);
var inst_20520 = new cljs.core.Keyword(null,"error","error",(-978969032)).cljs$core$IFn$_invoke$arity$1(inst_20519);
var inst_20521 = cljs.core._EQ_.call(null,inst_20520,new cljs.core.Keyword(null,"promise-error","promise-error",(-90673560)));
var inst_20522 = ((inst_20518) && (inst_20521));
var state_20801__$1 = (function (){var statearr_20812 = state_20801;
(statearr_20812[(10)] = inst_20517__$1);

return statearr_20812;
})();
if(cljs.core.truth_(inst_20522)){
var statearr_20813_21319 = state_20801__$1;
(statearr_20813_21319[(1)] = (98));

} else {
var statearr_20814_21320 = state_20801__$1;
(statearr_20814_21320[(1)] = (99));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (129))){
var inst_20686 = (state_20801[(2)]);
var state_20801__$1 = (function (){var statearr_20815 = state_20801;
(statearr_20815[(11)] = inst_20686);

return statearr_20815;
})();
var statearr_20816_21321 = state_20801__$1;
(statearr_20816_21321[(2)] = null);

(statearr_20816_21321[(1)] = (130));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (2))){
var _ = (function (){var statearr_20818 = state_20801;
(statearr_20818[(4)] = cljs.core.cons.call(null,(5),(state_20801[(4)])));

return statearr_20818;
})();
var state_20801__$1 = state_20801;
var statearr_20819_21322 = state_20801__$1;
(statearr_20819_21322[(2)] = null);

(statearr_20819_21322[(1)] = (6));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (34))){
var inst_20257 = (state_20801[(2)]);
var inst_20258 = cljs.core.prn.call(null,"test failed with ",inst_20257);
var state_20801__$1 = (function (){var statearr_20820 = state_20801;
(statearr_20820[(12)] = inst_20258);

return statearr_20820;
})();
var statearr_20821_21323 = state_20801__$1;
(statearr_20821_21323[(2)] = null);

(statearr_20821_21323[(1)] = (35));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (66))){
var _ = (function (){var statearr_20822 = state_20801;
(statearr_20822[(4)] = cljs.core.rest.call(null,(state_20801[(4)])));

return statearr_20822;
})();
var state_20801__$1 = state_20801;
var ex20817 = (state_20801__$1[(2)]);
var statearr_20823_21324 = state_20801__$1;
(statearr_20823_21324[(5)] = ex20817);


var statearr_20824_21325 = state_20801__$1;
(statearr_20824_21325[(1)] = (65));

(statearr_20824_21325[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (98))){
var inst_20517 = (state_20801[(10)]);
var inst_20524 = (function(){throw inst_20517})();
var state_20801__$1 = state_20801;
var statearr_20825_21326 = state_20801__$1;
(statearr_20825_21326[(2)] = inst_20524);

(statearr_20825_21326[(1)] = (100));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (130))){
var _ = (function (){var statearr_20826 = state_20801;
(statearr_20826[(4)] = cljs.core.cons.call(null,(133),(state_20801[(4)])));

return statearr_20826;
})();
var inst_20694 = [new cljs.core.Keyword(null,"hash","hash",(-13781596))];
var inst_20695 = ["ab58606332f813bcf6ea26f732014f49a2197d2d281cc2939e59813721ee5246"];
var inst_20696 = cljs.core.PersistentHashMap.fromArrays(inst_20694,inst_20695);
var inst_20697 = eos_cljs.core.transact.call(null,e2e.proposals.dao_acc,"newmemterms",inst_20696);
var inst_20698 = cljs.core.async.interop.p__GT_c.call(null,inst_20697);
var state_20801__$1 = state_20801;
return cljs.core.async.impl.ioc_helpers.take_BANG_.call(null,state_20801__$1,(134),inst_20698);
} else {
if((state_val_20802 === (3))){
var inst_20798 = (state_20801[(2)]);
var inst_20799 = done.call(null);
var state_20801__$1 = (function (){var statearr_20827 = state_20801;
(statearr_20827[(13)] = inst_20798);

return statearr_20827;
})();
return cljs.core.async.impl.ioc_helpers.return_chan.call(null,state_20801__$1,inst_20799);
} else {
if((state_val_20802 === (35))){
var _ = (function (){var statearr_20828 = state_20801;
(statearr_20828[(4)] = cljs.core.cons.call(null,(38),(state_20801[(4)])));

return statearr_20828;
})();
var inst_20270 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002))];
var inst_20271 = [new cljs.core.Keyword(null,"fail","fail",(1706214930)),"can vote on own proposal"];
var inst_20272 = cljs.core.PersistentHashMap.fromArrays(inst_20270,inst_20271);
var inst_20273 = cljs.test.do_report.call(null,inst_20272);
var ___$1 = (function (){var statearr_20829 = state_20801;
(statearr_20829[(4)] = cljs.core.rest.call(null,(state_20801[(4)])));

return statearr_20829;
})();
var state_20801__$1 = state_20801;
var statearr_20830_21327 = state_20801__$1;
(statearr_20830_21327[(2)] = inst_20273);

(statearr_20830_21327[(1)] = (36));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (67))){
var inst_20384 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_20385 = true;
var inst_20386 = [new cljs.core.Keyword(null,"pass","pass",(1574159993)),"can update vote",inst_20385,true];
var inst_20387 = cljs.core.PersistentHashMap.fromArrays(inst_20384,inst_20386);
var inst_20388 = cljs.test.do_report.call(null,inst_20387);
var state_20801__$1 = state_20801;
var statearr_20831_21328 = state_20801__$1;
(statearr_20831_21328[(2)] = inst_20388);

(statearr_20831_21328[(1)] = (69));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (99))){
var inst_20517 = (state_20801[(10)]);
var state_20801__$1 = state_20801;
var statearr_20832_21329 = state_20801__$1;
(statearr_20832_21329[(2)] = inst_20517);

(statearr_20832_21329[(1)] = (100));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (131))){
var inst_20795 = (state_20801[(2)]);
var _ = (function (){var statearr_20833 = state_20801;
(statearr_20833[(4)] = cljs.core.rest.call(null,(state_20801[(4)])));

return statearr_20833;
})();
var state_20801__$1 = state_20801;
var statearr_20834_21330 = state_20801__$1;
(statearr_20834_21330[(2)] = inst_20795);

(statearr_20834_21330[(1)] = (3));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (4))){
var inst_20152 = (state_20801[(2)]);
var inst_20153 = cljs.core.prn.call(null,inst_20152);
var state_20801__$1 = state_20801;
var statearr_20835_21331 = state_20801__$1;
(statearr_20835_21331[(2)] = inst_20153);

(statearr_20835_21331[(1)] = (3));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (36))){
var inst_20276 = (state_20801[(2)]);
var state_20801__$1 = state_20801;
var statearr_20836_21332 = state_20801__$1;
(statearr_20836_21332[(2)] = inst_20276);

(statearr_20836_21332[(1)] = (33));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (68))){
var inst_20390 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_20391 = true;
var inst_20392 = [new cljs.core.Keyword(null,"fail","fail",(1706214930)),"can update vote",inst_20391,true];
var inst_20393 = cljs.core.PersistentHashMap.fromArrays(inst_20390,inst_20392);
var inst_20394 = cljs.test.do_report.call(null,inst_20393);
var state_20801__$1 = state_20801;
var statearr_20837_21333 = state_20801__$1;
(statearr_20837_21333[(2)] = inst_20394);

(statearr_20837_21333[(1)] = (69));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (100))){
var inst_20530 = (state_20801[(14)]);
var inst_20527 = (state_20801[(2)]);
var inst_20528 = (function (){var rows = inst_20527;
return ((function (rows,inst_20530,inst_20527,state_val_20802,c__19__auto__,___192__auto__){
return (function (p1__53_SHARP_){
return cljs.core._EQ_.call(null,p1__53_SHARP_.call(null,"id"),(0));
});
;})(rows,inst_20530,inst_20527,state_val_20802,c__19__auto__,___192__auto__))
})();
var inst_20529 = cljs.core.filter.call(null,inst_20528,inst_20527);
var inst_20530__$1 = cljs.core.first.call(null,inst_20529);
var inst_20531 = cljs.core.prn.call(null,inst_20530__$1);
var state_20801__$1 = (function (){var statearr_20839 = state_20801;
(statearr_20839[(14)] = inst_20530__$1);

(statearr_20839[(15)] = inst_20531);

return statearr_20839;
})();
var statearr_20840_21334 = state_20801__$1;
(statearr_20840_21334[(2)] = null);

(statearr_20840_21334[(1)] = (101));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (132))){
var inst_20687 = (state_20801[(2)]);
var inst_20688 = cljs.core.prn.call(null,inst_20687);
var state_20801__$1 = state_20801;
var statearr_20841_21335 = state_20801__$1;
(statearr_20841_21335[(2)] = inst_20688);

(statearr_20841_21335[(1)] = (131));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (5))){
var _ = (function (){var statearr_20842 = state_20801;
(statearr_20842[(4)] = cljs.core.rest.call(null,(state_20801[(4)])));

return statearr_20842;
})();
var state_20801__$1 = state_20801;
var ex20838 = (state_20801__$1[(2)]);
var statearr_20843_21336 = state_20801__$1;
(statearr_20843_21336[(5)] = ex20838);


if((ex20838 instanceof Error)){
var statearr_20844_21337 = state_20801__$1;
(statearr_20844_21337[(1)] = (4));

(statearr_20844_21337[(5)] = null);

} else {
throw ex20838;

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (37))){
var inst_20259 = (state_20801[(2)]);
var inst_20260 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_20261 = null;
var inst_20262 = [new cljs.core.Keyword(null,"error","error",(-978969032)),"can vote on own proposal",inst_20261,inst_20259];
var inst_20263 = cljs.core.PersistentHashMap.fromArrays(inst_20260,inst_20262);
var inst_20264 = cljs.test.do_report.call(null,inst_20263);
var state_20801__$1 = state_20801;
var statearr_20845_21338 = state_20801__$1;
(statearr_20845_21338[(2)] = inst_20264);

(statearr_20845_21338[(1)] = (36));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (69))){
var inst_20396 = (state_20801[(2)]);
var _ = (function (){var statearr_20847 = state_20801;
(statearr_20847[(4)] = cljs.core.rest.call(null,(state_20801[(4)])));

return statearr_20847;
})();
var state_20801__$1 = (function (){var statearr_20848 = state_20801;
(statearr_20848[(16)] = inst_20396);

return statearr_20848;
})();
var statearr_20849_21339 = state_20801__$1;
(statearr_20849_21339[(2)] = true);

(statearr_20849_21339[(1)] = (64));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (101))){
var inst_20530 = (state_20801[(14)]);
var inst_20548 = (state_20801[(17)]);
var inst_20549 = (state_20801[(18)]);
var _ = (function (){var statearr_20850 = state_20801;
(statearr_20850[(4)] = cljs.core.cons.call(null,(104),(state_20801[(4)])));

return statearr_20850;
})();
var inst_20543 = cljs.core.PersistentVector.EMPTY_NODE;
var inst_20544 = ["vote_counts",(0),"value"];
var inst_20545 = (new cljs.core.PersistentVector(null,(3),(5),inst_20543,inst_20544,null));
var inst_20546 = cljs.core.get_in.call(null,inst_20530,inst_20545);
var inst_20547 = (new cljs.core.List(null,(0),null,(1),null));
var inst_20548__$1 = (new cljs.core.List(null,inst_20546,inst_20547,(2),null));
var inst_20549__$1 = cljs.core.apply.call(null,cljs.core._EQ_,inst_20548__$1);
var state_20801__$1 = (function (){var statearr_20851 = state_20801;
(statearr_20851[(17)] = inst_20548__$1);

(statearr_20851[(18)] = inst_20549__$1);

return statearr_20851;
})();
if(cljs.core.truth_(inst_20549__$1)){
var statearr_20852_21340 = state_20801__$1;
(statearr_20852_21340[(1)] = (105));

} else {
var statearr_20853_21341 = state_20801__$1;
(statearr_20853_21341[(1)] = (106));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (133))){
var _ = (function (){var statearr_20855 = state_20801;
(statearr_20855[(4)] = cljs.core.rest.call(null,(state_20801[(4)])));

return statearr_20855;
})();
var state_20801__$1 = state_20801;
var ex20846 = (state_20801__$1[(2)]);
var statearr_20856_21342 = state_20801__$1;
(statearr_20856_21342[(5)] = ex20846);


if((ex20846 instanceof Error)){
var statearr_20857_21343 = state_20801__$1;
(statearr_20857_21343[(1)] = (132));

(statearr_20857_21343[(5)] = null);

} else {
throw ex20846;

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (6))){
var _ = (function (){var statearr_20858 = state_20801;
(statearr_20858[(4)] = cljs.core.cons.call(null,(19),(state_20801[(4)])));

return statearr_20858;
})();
var inst_20203 = [new cljs.core.Keyword(null,"voter","voter",(1012094707)),new cljs.core.Keyword(null,"prop_id","prop_id",(-694455661)),new cljs.core.Keyword(null,"vote_type","vote_type",(-293333277))];
var inst_20204 = [e2e.proposals.owner_acc,(0),(0)];
var inst_20205 = cljs.core.PersistentHashMap.fromArrays(inst_20203,inst_20204);
var inst_20206 = e2e.proposals.eos_tx_owner.call(null,e2e.proposals.prop_acc,"addvote",inst_20205);
var inst_20207 = cljs.core.async.interop.p__GT_c.call(null,inst_20206);
var state_20801__$1 = state_20801;
return cljs.core.async.impl.ioc_helpers.take_BANG_.call(null,state_20801__$1,(20),inst_20207);
} else {
if((state_val_20802 === (38))){
var _ = (function (){var statearr_20859 = state_20801;
(statearr_20859[(4)] = cljs.core.rest.call(null,(state_20801[(4)])));

return statearr_20859;
})();
var state_20801__$1 = state_20801;
var ex20854 = (state_20801__$1[(2)]);
var statearr_20860_21344 = state_20801__$1;
(statearr_20860_21344[(5)] = ex20854);


var statearr_20861_21345 = state_20801__$1;
(statearr_20861_21345[(1)] = (37));

(statearr_20861_21345[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (70))){
var _ = (function (){var statearr_20862 = state_20801;
(statearr_20862[(4)] = cljs.core.cons.call(null,(77),(state_20801[(4)])));

return statearr_20862;
})();
var inst_20428 = [new cljs.core.Keyword(null,"voter","voter",(1012094707)),new cljs.core.Keyword(null,"prop_id","prop_id",(-694455661)),new cljs.core.Keyword(null,"vote_type","vote_type",(-293333277))];
var inst_20429 = [e2e.proposals.owner_acc,(0),(2)];
var inst_20430 = cljs.core.PersistentHashMap.fromArrays(inst_20428,inst_20429);
var inst_20431 = e2e.proposals.eos_tx_owner.call(null,e2e.proposals.prop_acc,"addvote",inst_20430);
var inst_20432 = cljs.core.async.interop.p__GT_c.call(null,inst_20431);
var state_20801__$1 = state_20801;
return cljs.core.async.impl.ioc_helpers.take_BANG_.call(null,state_20801__$1,(78),inst_20432);
} else {
if((state_val_20802 === (102))){
var inst_20572 = (state_20801[(2)]);
var state_20801__$1 = (function (){var statearr_20863 = state_20801;
(statearr_20863[(19)] = inst_20572);

return statearr_20863;
})();
var statearr_20864_21346 = state_20801__$1;
(statearr_20864_21346[(2)] = null);

(statearr_20864_21346[(1)] = (108));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (134))){
var inst_20700 = (state_20801[(20)]);
var inst_20700__$1 = (state_20801[(2)]);
var inst_20701 = (inst_20700__$1 instanceof cljs.core.ExceptionInfo);
var inst_20702 = cljs.core.ex_data.call(null,inst_20700__$1);
var inst_20703 = new cljs.core.Keyword(null,"error","error",(-978969032)).cljs$core$IFn$_invoke$arity$1(inst_20702);
var inst_20704 = cljs.core._EQ_.call(null,inst_20703,new cljs.core.Keyword(null,"promise-error","promise-error",(-90673560)));
var inst_20705 = ((inst_20701) && (inst_20704));
var state_20801__$1 = (function (){var statearr_20866 = state_20801;
(statearr_20866[(20)] = inst_20700__$1);

return statearr_20866;
})();
if(cljs.core.truth_(inst_20705)){
var statearr_20867_21347 = state_20801__$1;
(statearr_20867_21347[(1)] = (135));

} else {
var statearr_20868_21348 = state_20801__$1;
(statearr_20868_21348[(1)] = (136));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (7))){
var inst_20240 = (state_20801[(2)]);
var inst_20241 = ((9000000) + (1));
var inst_20242 = cljs.core.assoc.call(null,e2e.proposals.prop_config,new cljs.core.Keyword(null,"cycle_duration_sec","cycle_duration_sec",(2139129571)),inst_20241,new cljs.core.Keyword(null,"cycle_voting_duration_sec","cycle_voting_duration_sec",(-1056353816)),(9000000));
var inst_20243 = eos_cljs.core.transact.call(null,e2e.proposals.prop_acc,"update",inst_20242);
var inst_20244 = cljs.core.async.interop.p__GT_c.call(null,inst_20243);
var state_20801__$1 = (function (){var statearr_20869 = state_20801;
(statearr_20869[(21)] = inst_20240);

return statearr_20869;
})();
return cljs.core.async.impl.ioc_helpers.take_BANG_.call(null,state_20801__$1,(28),inst_20244);
} else {
if((state_val_20802 === (39))){
var _ = (function (){var statearr_20870 = state_20801;
(statearr_20870[(4)] = cljs.core.rest.call(null,(state_20801[(4)])));

return statearr_20870;
})();
var state_20801__$1 = state_20801;
var ex20865 = (state_20801__$1[(2)]);
var statearr_20871_21349 = state_20801__$1;
(statearr_20871_21349[(5)] = ex20865);


if((ex20865 instanceof Error)){
var statearr_20872_21350 = state_20801__$1;
(statearr_20872_21350[(1)] = (34));

(statearr_20872_21350[(5)] = null);

} else {
throw ex20865;

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (71))){
var inst_20475 = (state_20801[(2)]);
var inst_20476 = Promise.resolve((42));
var inst_20477 = eos_cljs.core.wait_block.call(null,inst_20476,(2));
var inst_20478 = cljs.core.async.interop.p__GT_c.call(null,inst_20477);
var state_20801__$1 = (function (){var statearr_20873 = state_20801;
(statearr_20873[(22)] = inst_20475);

return statearr_20873;
})();
return cljs.core.async.impl.ioc_helpers.take_BANG_.call(null,state_20801__$1,(89),inst_20478);
} else {
if((state_val_20802 === (103))){
var inst_20532 = (state_20801[(2)]);
var inst_20533 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_20534 = cljs.core.list(new cljs.core.Symbol(null,"=","=",(-1501502141),null),cljs.core.list(new cljs.core.Symbol(null,"get-in","get-in",(-1965644065),null),new cljs.core.Symbol(null,"r","r",(1169147337),null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, ["vote_counts",(0),"value"], null)),(0));
var inst_20535 = [new cljs.core.Keyword(null,"error","error",(-978969032)),null,inst_20534,inst_20532];
var inst_20536 = cljs.core.PersistentHashMap.fromArrays(inst_20533,inst_20535);
var inst_20537 = cljs.test.do_report.call(null,inst_20536);
var state_20801__$1 = state_20801;
var statearr_20874_21351 = state_20801__$1;
(statearr_20874_21351[(2)] = inst_20537);

(statearr_20874_21351[(1)] = (102));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (135))){
var inst_20700 = (state_20801[(20)]);
var inst_20707 = (function(){throw inst_20700})();
var state_20801__$1 = state_20801;
var statearr_20875_21352 = state_20801__$1;
(statearr_20875_21352[(2)] = inst_20707);

(statearr_20875_21352[(1)] = (137));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (8))){
var inst_20161 = (state_20801[(23)]);
var inst_20162 = (state_20801[(24)]);
var inst_20159 = (state_20801[(2)]);
var inst_20160 = inst_20159.cause;
var inst_20161__$1 = inst_20160.message;
var inst_20162__$1 = clojure.string.ends_with_QMARK_.call(null,inst_20161__$1,"not in voting period");
var inst_20163 = (!(inst_20162__$1));
var state_20801__$1 = (function (){var statearr_20876 = state_20801;
(statearr_20876[(23)] = inst_20161__$1);

(statearr_20876[(24)] = inst_20162__$1);

return statearr_20876;
})();
if(inst_20163){
var statearr_20877_21353 = state_20801__$1;
(statearr_20877_21353[(1)] = (9));

} else {
var statearr_20878_21354 = state_20801__$1;
(statearr_20878_21354[(1)] = (10));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (40))){
var inst_20288 = (state_20801[(25)]);
var inst_20288__$1 = (state_20801[(2)]);
var inst_20289 = (inst_20288__$1 instanceof cljs.core.ExceptionInfo);
var inst_20290 = cljs.core.ex_data.call(null,inst_20288__$1);
var inst_20291 = new cljs.core.Keyword(null,"error","error",(-978969032)).cljs$core$IFn$_invoke$arity$1(inst_20290);
var inst_20292 = cljs.core._EQ_.call(null,inst_20291,new cljs.core.Keyword(null,"promise-error","promise-error",(-90673560)));
var inst_20293 = ((inst_20289) && (inst_20292));
var state_20801__$1 = (function (){var statearr_20880 = state_20801;
(statearr_20880[(25)] = inst_20288__$1);

return statearr_20880;
})();
if(cljs.core.truth_(inst_20293)){
var statearr_20881_21355 = state_20801__$1;
(statearr_20881_21355[(1)] = (41));

} else {
var statearr_20882_21356 = state_20801__$1;
(statearr_20882_21356[(1)] = (42));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (72))){
var inst_20403 = (state_20801[(2)]);
var inst_20404 = cljs.core.prn.call(null,"test failed with ",inst_20403);
var state_20801__$1 = (function (){var statearr_20883 = state_20801;
(statearr_20883[(26)] = inst_20404);

return statearr_20883;
})();
var statearr_20884_21357 = state_20801__$1;
(statearr_20884_21357[(2)] = null);

(statearr_20884_21357[(1)] = (73));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (104))){
var _ = (function (){var statearr_20885 = state_20801;
(statearr_20885[(4)] = cljs.core.rest.call(null,(state_20801[(4)])));

return statearr_20885;
})();
var state_20801__$1 = state_20801;
var ex20879 = (state_20801__$1[(2)]);
var statearr_20886_21358 = state_20801__$1;
(statearr_20886_21358[(5)] = ex20879);


var statearr_20887_21359 = state_20801__$1;
(statearr_20887_21359[(1)] = (103));

(statearr_20887_21359[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (136))){
var inst_20700 = (state_20801[(20)]);
var state_20801__$1 = state_20801;
var statearr_20888_21360 = state_20801__$1;
(statearr_20888_21360[(2)] = inst_20700);

(statearr_20888_21360[(1)] = (137));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (9))){
var inst_20161 = (state_20801[(23)]);
var inst_20165 = ["expected =","not in voting period"," actual = ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_20161)].join('');
var inst_20166 = cljs.core.prn.call(null,inst_20165);
var state_20801__$1 = state_20801;
var statearr_20889_21361 = state_20801__$1;
(statearr_20889_21361[(2)] = inst_20166);

(statearr_20889_21361[(1)] = (11));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (41))){
var inst_20288 = (state_20801[(25)]);
var inst_20295 = (function(){throw inst_20288})();
var state_20801__$1 = state_20801;
var statearr_20890_21362 = state_20801__$1;
(statearr_20890_21362[(2)] = inst_20295);

(statearr_20890_21362[(1)] = (43));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (73))){
var _ = (function (){var statearr_20891 = state_20801;
(statearr_20891[(4)] = cljs.core.cons.call(null,(76),(state_20801[(4)])));

return statearr_20891;
})();
var inst_20416 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002))];
var inst_20417 = [new cljs.core.Keyword(null,"fail","fail",(1706214930)),"can update vote twice"];
var inst_20418 = cljs.core.PersistentHashMap.fromArrays(inst_20416,inst_20417);
var inst_20419 = cljs.test.do_report.call(null,inst_20418);
var ___$1 = (function (){var statearr_20892 = state_20801;
(statearr_20892[(4)] = cljs.core.rest.call(null,(state_20801[(4)])));

return statearr_20892;
})();
var state_20801__$1 = state_20801;
var statearr_20893_21363 = state_20801__$1;
(statearr_20893_21363[(2)] = inst_20419);

(statearr_20893_21363[(1)] = (74));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (105))){
var inst_20548 = (state_20801[(17)]);
var inst_20551 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_20552 = cljs.core.list(new cljs.core.Symbol(null,"=","=",(-1501502141),null),cljs.core.list(new cljs.core.Symbol(null,"get-in","get-in",(-1965644065),null),new cljs.core.Symbol(null,"r","r",(1169147337),null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, ["vote_counts",(0),"value"], null)),(0));
var inst_20553 = cljs.core.cons.call(null,cljs.core._EQ_,inst_20548);
var inst_20554 = [new cljs.core.Keyword(null,"pass","pass",(1574159993)),null,inst_20552,inst_20553];
var inst_20555 = cljs.core.PersistentHashMap.fromArrays(inst_20551,inst_20554);
var inst_20556 = cljs.test.do_report.call(null,inst_20555);
var state_20801__$1 = state_20801;
var statearr_20894_21364 = state_20801__$1;
(statearr_20894_21364[(2)] = inst_20556);

(statearr_20894_21364[(1)] = (107));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (137))){
var inst_20710 = (state_20801[(2)]);
var state_20801__$1 = (function (){var statearr_20895 = state_20801;
(statearr_20895[(27)] = inst_20710);

return statearr_20895;
})();
var statearr_20896_21365 = state_20801__$1;
(statearr_20896_21365[(2)] = null);

(statearr_20896_21365[(1)] = (138));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (10))){
var state_20801__$1 = state_20801;
var statearr_20897_21366 = state_20801__$1;
(statearr_20897_21366[(2)] = null);

(statearr_20897_21366[(1)] = (11));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (42))){
var inst_20288 = (state_20801[(25)]);
var state_20801__$1 = state_20801;
var statearr_20898_21367 = state_20801__$1;
(statearr_20898_21367[(2)] = inst_20288);

(statearr_20898_21367[(1)] = (43));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (74))){
var inst_20422 = (state_20801[(2)]);
var state_20801__$1 = state_20801;
var statearr_20899_21368 = state_20801__$1;
(statearr_20899_21368[(2)] = inst_20422);

(statearr_20899_21368[(1)] = (71));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (106))){
var inst_20548 = (state_20801[(17)]);
var inst_20558 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_20559 = cljs.core.list(new cljs.core.Symbol(null,"=","=",(-1501502141),null),cljs.core.list(new cljs.core.Symbol(null,"get-in","get-in",(-1965644065),null),new cljs.core.Symbol(null,"r","r",(1169147337),null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, ["vote_counts",(0),"value"], null)),(0));
var inst_20560 = new cljs.core.Symbol(null,"not","not",(1044554643),null);
var inst_20561 = new cljs.core.Symbol(null,"=","=",(-1501502141),null);
var inst_20562 = cljs.core.cons.call(null,inst_20561,inst_20548);
var inst_20563 = (new cljs.core.List(null,inst_20562,null,(1),null));
var inst_20564 = (new cljs.core.List(null,inst_20560,inst_20563,(2),null));
var inst_20565 = [new cljs.core.Keyword(null,"fail","fail",(1706214930)),null,inst_20559,inst_20564];
var inst_20566 = cljs.core.PersistentHashMap.fromArrays(inst_20558,inst_20565);
var inst_20567 = cljs.test.do_report.call(null,inst_20566);
var state_20801__$1 = state_20801;
var statearr_20900_21369 = state_20801__$1;
(statearr_20900_21369[(2)] = inst_20567);

(statearr_20900_21369[(1)] = (107));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (138))){
var _ = (function (){var statearr_20901 = state_20801;
(statearr_20901[(4)] = cljs.core.cons.call(null,(151),(state_20801[(4)])));

return statearr_20901;
})();
var inst_20755 = [new cljs.core.Keyword(null,"voter","voter",(1012094707)),new cljs.core.Keyword(null,"prop_id","prop_id",(-694455661)),new cljs.core.Keyword(null,"vote_type","vote_type",(-293333277))];
var inst_20756 = [e2e.proposals.owner_acc,(1),(3)];
var inst_20757 = cljs.core.PersistentHashMap.fromArrays(inst_20755,inst_20756);
var inst_20758 = e2e.proposals.eos_tx_owner.call(null,e2e.proposals.prop_acc,"addvote",inst_20757);
var inst_20759 = cljs.core.async.interop.p__GT_c.call(null,inst_20758);
var state_20801__$1 = state_20801;
return cljs.core.async.impl.ioc_helpers.take_BANG_.call(null,state_20801__$1,(152),inst_20759);
} else {
if((state_val_20802 === (11))){
var inst_20169 = (state_20801[(2)]);
var state_20801__$1 = (function (){var statearr_20902 = state_20801;
(statearr_20902[(28)] = inst_20169);

return statearr_20902;
})();
var statearr_20903_21370 = state_20801__$1;
(statearr_20903_21370[(2)] = null);

(statearr_20903_21370[(1)] = (12));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (43))){
var inst_20298 = (state_20801[(2)]);
var state_20801__$1 = (function (){var statearr_20904 = state_20801;
(statearr_20904[(29)] = inst_20298);

return statearr_20904;
})();
var statearr_20905_21371 = state_20801__$1;
(statearr_20905_21371[(2)] = null);

(statearr_20905_21371[(1)] = (44));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (75))){
var inst_20405 = (state_20801[(2)]);
var inst_20406 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_20407 = null;
var inst_20408 = [new cljs.core.Keyword(null,"error","error",(-978969032)),"can update vote twice",inst_20407,inst_20405];
var inst_20409 = cljs.core.PersistentHashMap.fromArrays(inst_20406,inst_20408);
var inst_20410 = cljs.test.do_report.call(null,inst_20409);
var state_20801__$1 = state_20801;
var statearr_20906_21372 = state_20801__$1;
(statearr_20906_21372[(2)] = inst_20410);

(statearr_20906_21372[(1)] = (74));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (107))){
var inst_20549 = (state_20801[(18)]);
var inst_20569 = (state_20801[(2)]);
var _ = (function (){var statearr_20907 = state_20801;
(statearr_20907[(4)] = cljs.core.rest.call(null,(state_20801[(4)])));

return statearr_20907;
})();
var state_20801__$1 = (function (){var statearr_20908 = state_20801;
(statearr_20908[(30)] = inst_20569);

return statearr_20908;
})();
var statearr_20909_21373 = state_20801__$1;
(statearr_20909_21373[(2)] = inst_20549);

(statearr_20909_21373[(1)] = (102));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (139))){
var inst_20792 = (state_20801[(2)]);
var _ = (function (){var statearr_20910 = state_20801;
(statearr_20910[(4)] = cljs.core.rest.call(null,(state_20801[(4)])));

return statearr_20910;
})();
var state_20801__$1 = state_20801;
var statearr_20911_21374 = state_20801__$1;
(statearr_20911_21374[(2)] = inst_20792);

(statearr_20911_21374[(1)] = (131));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (12))){
var inst_20162 = (state_20801[(24)]);
var _ = (function (){var statearr_20913 = state_20801;
(statearr_20913[(4)] = cljs.core.cons.call(null,(15),(state_20801[(4)])));

return statearr_20913;
})();
var state_20801__$1 = state_20801;
if(cljs.core.truth_(inst_20162)){
var statearr_20914_21375 = state_20801__$1;
(statearr_20914_21375[(1)] = (16));

} else {
var statearr_20915_21376 = state_20801__$1;
(statearr_20915_21376[(1)] = (17));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (44))){
var _ = (function (){var statearr_20916 = state_20801;
(statearr_20916[(4)] = cljs.core.cons.call(null,(47),(state_20801[(4)])));

return statearr_20916;
})();
var state_20801__$1 = state_20801;
var statearr_20917_21377 = state_20801__$1;
(statearr_20917_21377[(1)] = (48));



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (76))){
var _ = (function (){var statearr_20919 = state_20801;
(statearr_20919[(4)] = cljs.core.rest.call(null,(state_20801[(4)])));

return statearr_20919;
})();
var state_20801__$1 = state_20801;
var ex20912 = (state_20801__$1[(2)]);
var statearr_20920_21378 = state_20801__$1;
(statearr_20920_21378[(5)] = ex20912);


var statearr_20921_21379 = state_20801__$1;
(statearr_20921_21379[(1)] = (75));

(statearr_20921_21379[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (108))){
var inst_20530 = (state_20801[(14)]);
var inst_20589 = (state_20801[(31)]);
var inst_20590 = (state_20801[(32)]);
var _ = (function (){var statearr_20922 = state_20801;
(statearr_20922[(4)] = cljs.core.cons.call(null,(111),(state_20801[(4)])));

return statearr_20922;
})();
var inst_20584 = cljs.core.PersistentVector.EMPTY_NODE;
var inst_20585 = ["vote_counts",(1),"value"];
var inst_20586 = (new cljs.core.PersistentVector(null,(3),(5),inst_20584,inst_20585,null));
var inst_20587 = cljs.core.get_in.call(null,inst_20530,inst_20586);
var inst_20588 = (new cljs.core.List(null,(2),null,(1),null));
var inst_20589__$1 = (new cljs.core.List(null,inst_20587,inst_20588,(2),null));
var inst_20590__$1 = cljs.core.apply.call(null,cljs.core._EQ_,inst_20589__$1);
var state_20801__$1 = (function (){var statearr_20923 = state_20801;
(statearr_20923[(31)] = inst_20589__$1);

(statearr_20923[(32)] = inst_20590__$1);

return statearr_20923;
})();
if(cljs.core.truth_(inst_20590__$1)){
var statearr_20924_21380 = state_20801__$1;
(statearr_20924_21380[(1)] = (112));

} else {
var statearr_20925_21381 = state_20801__$1;
(statearr_20925_21381[(1)] = (113));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (140))){
var inst_20713 = (state_20801[(33)]);
var inst_20714 = (state_20801[(34)]);
var inst_20711 = (state_20801[(2)]);
var inst_20712 = inst_20711.cause;
var inst_20713__$1 = inst_20712.message;
var inst_20714__$1 = clojure.string.ends_with_QMARK_.call(null,inst_20713__$1,"agreed terms are not the latest");
var inst_20715 = (!(inst_20714__$1));
var state_20801__$1 = (function (){var statearr_20926 = state_20801;
(statearr_20926[(33)] = inst_20713__$1);

(statearr_20926[(34)] = inst_20714__$1);

return statearr_20926;
})();
if(inst_20715){
var statearr_20927_21382 = state_20801__$1;
(statearr_20927_21382[(1)] = (141));

} else {
var statearr_20928_21383 = state_20801__$1;
(statearr_20928_21383[(1)] = (142));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (13))){
var inst_20197 = (state_20801[(2)]);
var state_20801__$1 = state_20801;
var statearr_20930_21384 = state_20801__$1;
(statearr_20930_21384[(2)] = inst_20197);

(statearr_20930_21384[(1)] = (7));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (45))){
var inst_20326 = (state_20801[(2)]);
var _ = (function (){var statearr_20931 = state_20801;
(statearr_20931[(4)] = cljs.core.rest.call(null,(state_20801[(4)])));

return statearr_20931;
})();
var state_20801__$1 = state_20801;
var statearr_20932_21385 = state_20801__$1;
(statearr_20932_21385[(2)] = inst_20326);

(statearr_20932_21385[(1)] = (33));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (77))){
var _ = (function (){var statearr_20933 = state_20801;
(statearr_20933[(4)] = cljs.core.rest.call(null,(state_20801[(4)])));

return statearr_20933;
})();
var state_20801__$1 = state_20801;
var ex20929 = (state_20801__$1[(2)]);
var statearr_20934_21386 = state_20801__$1;
(statearr_20934_21386[(5)] = ex20929);


if((ex20929 instanceof Error)){
var statearr_20935_21387 = state_20801__$1;
(statearr_20935_21387[(1)] = (72));

(statearr_20935_21387[(5)] = null);

} else {
throw ex20929;

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (109))){
var inst_20613 = (state_20801[(2)]);
var state_20801__$1 = (function (){var statearr_20936 = state_20801;
(statearr_20936[(35)] = inst_20613);

return statearr_20936;
})();
var statearr_20937_21388 = state_20801__$1;
(statearr_20937_21388[(2)] = null);

(statearr_20937_21388[(1)] = (115));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (141))){
var inst_20713 = (state_20801[(33)]);
var inst_20717 = ["expected =","agreed terms are not the latest"," actual = ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_20713)].join('');
var inst_20718 = cljs.core.prn.call(null,inst_20717);
var state_20801__$1 = state_20801;
var statearr_20938_21389 = state_20801__$1;
(statearr_20938_21389[(2)] = inst_20718);

(statearr_20938_21389[(1)] = (143));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (14))){
var inst_20170 = (state_20801[(2)]);
var inst_20171 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_20172 = new cljs.core.Symbol("e2e.macros","pass?","e2e.macros/pass?",(894145299),null);
var inst_20173 = [new cljs.core.Keyword(null,"error","error",(-978969032)),"can vote on own proposal",inst_20172,inst_20170];
var inst_20174 = cljs.core.PersistentHashMap.fromArrays(inst_20171,inst_20173);
var inst_20175 = cljs.test.do_report.call(null,inst_20174);
var state_20801__$1 = state_20801;
var statearr_20939_21390 = state_20801__$1;
(statearr_20939_21390[(2)] = inst_20175);

(statearr_20939_21390[(1)] = (13));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (46))){
var inst_20299 = (state_20801[(2)]);
var inst_20300 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_20301 = true;
var inst_20302 = [new cljs.core.Keyword(null,"error","error",(-978969032)),"can vote on own proposal",inst_20301,inst_20299];
var inst_20303 = cljs.core.PersistentHashMap.fromArrays(inst_20300,inst_20302);
var inst_20304 = cljs.test.do_report.call(null,inst_20303);
var state_20801__$1 = state_20801;
var statearr_20940_21391 = state_20801__$1;
(statearr_20940_21391[(2)] = inst_20304);

(statearr_20940_21391[(1)] = (45));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (78))){
var inst_20434 = (state_20801[(36)]);
var inst_20434__$1 = (state_20801[(2)]);
var inst_20435 = (inst_20434__$1 instanceof cljs.core.ExceptionInfo);
var inst_20436 = cljs.core.ex_data.call(null,inst_20434__$1);
var inst_20437 = new cljs.core.Keyword(null,"error","error",(-978969032)).cljs$core$IFn$_invoke$arity$1(inst_20436);
var inst_20438 = cljs.core._EQ_.call(null,inst_20437,new cljs.core.Keyword(null,"promise-error","promise-error",(-90673560)));
var inst_20439 = ((inst_20435) && (inst_20438));
var state_20801__$1 = (function (){var statearr_20941 = state_20801;
(statearr_20941[(36)] = inst_20434__$1);

return statearr_20941;
})();
if(cljs.core.truth_(inst_20439)){
var statearr_20942_21392 = state_20801__$1;
(statearr_20942_21392[(1)] = (79));

} else {
var statearr_20943_21393 = state_20801__$1;
(statearr_20943_21393[(1)] = (80));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (110))){
var inst_20573 = (state_20801[(2)]);
var inst_20574 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_20575 = cljs.core.list(new cljs.core.Symbol(null,"=","=",(-1501502141),null),cljs.core.list(new cljs.core.Symbol(null,"get-in","get-in",(-1965644065),null),new cljs.core.Symbol(null,"r","r",(1169147337),null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, ["vote_counts",(1),"value"], null)),(2));
var inst_20576 = [new cljs.core.Keyword(null,"error","error",(-978969032)),null,inst_20575,inst_20573];
var inst_20577 = cljs.core.PersistentHashMap.fromArrays(inst_20574,inst_20576);
var inst_20578 = cljs.test.do_report.call(null,inst_20577);
var state_20801__$1 = state_20801;
var statearr_20945_21394 = state_20801__$1;
(statearr_20945_21394[(2)] = inst_20578);

(statearr_20945_21394[(1)] = (109));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (142))){
var state_20801__$1 = state_20801;
var statearr_20947_21395 = state_20801__$1;
(statearr_20947_21395[(2)] = null);

(statearr_20947_21395[(1)] = (143));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (15))){
var _ = (function (){var statearr_20948 = state_20801;
(statearr_20948[(4)] = cljs.core.rest.call(null,(state_20801[(4)])));

return statearr_20948;
})();
var state_20801__$1 = state_20801;
var ex20944 = (state_20801__$1[(2)]);
var statearr_20949_21396 = state_20801__$1;
(statearr_20949_21396[(5)] = ex20944);


var statearr_20950_21397 = state_20801__$1;
(statearr_20950_21397[(1)] = (14));

(statearr_20950_21397[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (47))){
var _ = (function (){var statearr_20952 = state_20801;
(statearr_20952[(4)] = cljs.core.rest.call(null,(state_20801[(4)])));

return statearr_20952;
})();
var state_20801__$1 = state_20801;
var ex20946 = (state_20801__$1[(2)]);
var statearr_20953_21398 = state_20801__$1;
(statearr_20953_21398[(5)] = ex20946);


var statearr_20954_21399 = state_20801__$1;
(statearr_20954_21399[(1)] = (46));

(statearr_20954_21399[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (79))){
var inst_20434 = (state_20801[(36)]);
var inst_20441 = (function(){throw inst_20434})();
var state_20801__$1 = state_20801;
var statearr_20955_21400 = state_20801__$1;
(statearr_20955_21400[(2)] = inst_20441);

(statearr_20955_21400[(1)] = (81));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (111))){
var _ = (function (){var statearr_20956 = state_20801;
(statearr_20956[(4)] = cljs.core.rest.call(null,(state_20801[(4)])));

return statearr_20956;
})();
var state_20801__$1 = state_20801;
var ex20951 = (state_20801__$1[(2)]);
var statearr_20957_21401 = state_20801__$1;
(statearr_20957_21401[(5)] = ex20951);


var statearr_20958_21402 = state_20801__$1;
(statearr_20958_21402[(1)] = (110));

(statearr_20958_21402[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (143))){
var inst_20721 = (state_20801[(2)]);
var state_20801__$1 = (function (){var statearr_20959 = state_20801;
(statearr_20959[(37)] = inst_20721);

return statearr_20959;
})();
var statearr_20960_21403 = state_20801__$1;
(statearr_20960_21403[(2)] = null);

(statearr_20960_21403[(1)] = (144));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (16))){
var inst_20162 = (state_20801[(24)]);
var inst_20182 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_20183 = new cljs.core.Symbol("e2e.macros","pass?","e2e.macros/pass?",(894145299),null);
var inst_20184 = [new cljs.core.Keyword(null,"pass","pass",(1574159993)),"can vote on own proposal",inst_20183,inst_20162];
var inst_20185 = cljs.core.PersistentHashMap.fromArrays(inst_20182,inst_20184);
var inst_20186 = cljs.test.do_report.call(null,inst_20185);
var state_20801__$1 = state_20801;
var statearr_20961_21404 = state_20801__$1;
(statearr_20961_21404[(2)] = inst_20186);

(statearr_20961_21404[(1)] = (18));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (48))){
var inst_20311 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_20312 = true;
var inst_20313 = [new cljs.core.Keyword(null,"pass","pass",(1574159993)),"can vote on own proposal",inst_20312,true];
var inst_20314 = cljs.core.PersistentHashMap.fromArrays(inst_20311,inst_20313);
var inst_20315 = cljs.test.do_report.call(null,inst_20314);
var state_20801__$1 = state_20801;
var statearr_20962_21405 = state_20801__$1;
(statearr_20962_21405[(2)] = inst_20315);

(statearr_20962_21405[(1)] = (50));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (80))){
var inst_20434 = (state_20801[(36)]);
var state_20801__$1 = state_20801;
var statearr_20963_21406 = state_20801__$1;
(statearr_20963_21406[(2)] = inst_20434);

(statearr_20963_21406[(1)] = (81));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (112))){
var inst_20589 = (state_20801[(31)]);
var inst_20592 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_20593 = cljs.core.list(new cljs.core.Symbol(null,"=","=",(-1501502141),null),cljs.core.list(new cljs.core.Symbol(null,"get-in","get-in",(-1965644065),null),new cljs.core.Symbol(null,"r","r",(1169147337),null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, ["vote_counts",(1),"value"], null)),(2));
var inst_20594 = cljs.core.cons.call(null,cljs.core._EQ_,inst_20589);
var inst_20595 = [new cljs.core.Keyword(null,"pass","pass",(1574159993)),null,inst_20593,inst_20594];
var inst_20596 = cljs.core.PersistentHashMap.fromArrays(inst_20592,inst_20595);
var inst_20597 = cljs.test.do_report.call(null,inst_20596);
var state_20801__$1 = state_20801;
var statearr_20964_21407 = state_20801__$1;
(statearr_20964_21407[(2)] = inst_20597);

(statearr_20964_21407[(1)] = (114));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (144))){
var inst_20714 = (state_20801[(34)]);
var _ = (function (){var statearr_20965 = state_20801;
(statearr_20965[(4)] = cljs.core.cons.call(null,(147),(state_20801[(4)])));

return statearr_20965;
})();
var state_20801__$1 = state_20801;
if(cljs.core.truth_(inst_20714)){
var statearr_20966_21408 = state_20801__$1;
(statearr_20966_21408[(1)] = (148));

} else {
var statearr_20967_21409 = state_20801__$1;
(statearr_20967_21409[(1)] = (149));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (17))){
var inst_20162 = (state_20801[(24)]);
var inst_20188 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_20189 = new cljs.core.Symbol("e2e.macros","pass?","e2e.macros/pass?",(894145299),null);
var inst_20190 = [new cljs.core.Keyword(null,"fail","fail",(1706214930)),"can vote on own proposal",inst_20189,inst_20162];
var inst_20191 = cljs.core.PersistentHashMap.fromArrays(inst_20188,inst_20190);
var inst_20192 = cljs.test.do_report.call(null,inst_20191);
var state_20801__$1 = state_20801;
var statearr_20968_21410 = state_20801__$1;
(statearr_20968_21410[(2)] = inst_20192);

(statearr_20968_21410[(1)] = (18));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (49))){
var inst_20317 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_20318 = true;
var inst_20319 = [new cljs.core.Keyword(null,"fail","fail",(1706214930)),"can vote on own proposal",inst_20318,true];
var inst_20320 = cljs.core.PersistentHashMap.fromArrays(inst_20317,inst_20319);
var inst_20321 = cljs.test.do_report.call(null,inst_20320);
var state_20801__$1 = state_20801;
var statearr_20969_21411 = state_20801__$1;
(statearr_20969_21411[(2)] = inst_20321);

(statearr_20969_21411[(1)] = (50));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (81))){
var inst_20444 = (state_20801[(2)]);
var state_20801__$1 = (function (){var statearr_20970 = state_20801;
(statearr_20970[(38)] = inst_20444);

return statearr_20970;
})();
var statearr_20971_21412 = state_20801__$1;
(statearr_20971_21412[(2)] = null);

(statearr_20971_21412[(1)] = (82));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (113))){
var inst_20589 = (state_20801[(31)]);
var inst_20599 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_20600 = cljs.core.list(new cljs.core.Symbol(null,"=","=",(-1501502141),null),cljs.core.list(new cljs.core.Symbol(null,"get-in","get-in",(-1965644065),null),new cljs.core.Symbol(null,"r","r",(1169147337),null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, ["vote_counts",(1),"value"], null)),(2));
var inst_20601 = new cljs.core.Symbol(null,"not","not",(1044554643),null);
var inst_20602 = new cljs.core.Symbol(null,"=","=",(-1501502141),null);
var inst_20603 = cljs.core.cons.call(null,inst_20602,inst_20589);
var inst_20604 = (new cljs.core.List(null,inst_20603,null,(1),null));
var inst_20605 = (new cljs.core.List(null,inst_20601,inst_20604,(2),null));
var inst_20606 = [new cljs.core.Keyword(null,"fail","fail",(1706214930)),null,inst_20600,inst_20605];
var inst_20607 = cljs.core.PersistentHashMap.fromArrays(inst_20599,inst_20606);
var inst_20608 = cljs.test.do_report.call(null,inst_20607);
var state_20801__$1 = state_20801;
var statearr_20972_21413 = state_20801__$1;
(statearr_20972_21413[(2)] = inst_20608);

(statearr_20972_21413[(1)] = (114));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (145))){
var inst_20749 = (state_20801[(2)]);
var state_20801__$1 = state_20801;
var statearr_20973_21414 = state_20801__$1;
(statearr_20973_21414[(2)] = inst_20749);

(statearr_20973_21414[(1)] = (139));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (18))){
var inst_20162 = (state_20801[(24)]);
var inst_20194 = (state_20801[(2)]);
var _ = (function (){var statearr_20974 = state_20801;
(statearr_20974[(4)] = cljs.core.rest.call(null,(state_20801[(4)])));

return statearr_20974;
})();
var state_20801__$1 = (function (){var statearr_20975 = state_20801;
(statearr_20975[(39)] = inst_20194);

return statearr_20975;
})();
var statearr_20976_21415 = state_20801__$1;
(statearr_20976_21415[(2)] = inst_20162);

(statearr_20976_21415[(1)] = (13));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (50))){
var inst_20323 = (state_20801[(2)]);
var _ = (function (){var statearr_20977 = state_20801;
(statearr_20977[(4)] = cljs.core.rest.call(null,(state_20801[(4)])));

return statearr_20977;
})();
var state_20801__$1 = (function (){var statearr_20978 = state_20801;
(statearr_20978[(40)] = inst_20323);

return statearr_20978;
})();
var statearr_20979_21416 = state_20801__$1;
(statearr_20979_21416[(2)] = true);

(statearr_20979_21416[(1)] = (45));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (82))){
var _ = (function (){var statearr_20980 = state_20801;
(statearr_20980[(4)] = cljs.core.cons.call(null,(85),(state_20801[(4)])));

return statearr_20980;
})();
var state_20801__$1 = state_20801;
var statearr_20981_21417 = state_20801__$1;
(statearr_20981_21417[(1)] = (86));



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (114))){
var inst_20590 = (state_20801[(32)]);
var inst_20610 = (state_20801[(2)]);
var _ = (function (){var statearr_20984 = state_20801;
(statearr_20984[(4)] = cljs.core.rest.call(null,(state_20801[(4)])));

return statearr_20984;
})();
var state_20801__$1 = (function (){var statearr_20985 = state_20801;
(statearr_20985[(41)] = inst_20610);

return statearr_20985;
})();
var statearr_20986_21418 = state_20801__$1;
(statearr_20986_21418[(2)] = inst_20590);

(statearr_20986_21418[(1)] = (109));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (146))){
var inst_20722 = (state_20801[(2)]);
var inst_20723 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_20724 = new cljs.core.Symbol("e2e.macros","pass?","e2e.macros/pass?",(894145299),null);
var inst_20725 = [new cljs.core.Keyword(null,"error","error",(-978969032)),"needs latest terms accepted",inst_20724,inst_20722];
var inst_20726 = cljs.core.PersistentHashMap.fromArrays(inst_20723,inst_20725);
var inst_20727 = cljs.test.do_report.call(null,inst_20726);
var state_20801__$1 = state_20801;
var statearr_20987_21419 = state_20801__$1;
(statearr_20987_21419[(2)] = inst_20727);

(statearr_20987_21419[(1)] = (145));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (19))){
var _ = (function (){var statearr_20988 = state_20801;
(statearr_20988[(4)] = cljs.core.rest.call(null,(state_20801[(4)])));

return statearr_20988;
})();
var state_20801__$1 = state_20801;
var ex20983 = (state_20801__$1[(2)]);
var statearr_20989_21420 = state_20801__$1;
(statearr_20989_21420[(5)] = ex20983);


if((ex20983 instanceof Error)){
var statearr_20990_21421 = state_20801__$1;
(statearr_20990_21421[(1)] = (8));

(statearr_20990_21421[(5)] = null);

} else {
throw ex20983;

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (51))){
var _ = (function (){var statearr_20991 = state_20801;
(statearr_20991[(4)] = cljs.core.cons.call(null,(58),(state_20801[(4)])));

return statearr_20991;
})();
var inst_20355 = [new cljs.core.Keyword(null,"voter","voter",(1012094707)),new cljs.core.Keyword(null,"prop_id","prop_id",(-694455661)),new cljs.core.Keyword(null,"vote_type","vote_type",(-293333277))];
var inst_20356 = [e2e.proposals.owner_acc,(0),(1)];
var inst_20357 = cljs.core.PersistentHashMap.fromArrays(inst_20355,inst_20356);
var inst_20358 = e2e.proposals.eos_tx_owner.call(null,e2e.proposals.prop_acc,"addvote",inst_20357);
var inst_20359 = cljs.core.async.interop.p__GT_c.call(null,inst_20358);
var state_20801__$1 = state_20801;
return cljs.core.async.impl.ioc_helpers.take_BANG_.call(null,state_20801__$1,(59),inst_20359);
} else {
if((state_val_20802 === (83))){
var inst_20472 = (state_20801[(2)]);
var _ = (function (){var statearr_20993 = state_20801;
(statearr_20993[(4)] = cljs.core.rest.call(null,(state_20801[(4)])));

return statearr_20993;
})();
var state_20801__$1 = state_20801;
var statearr_20994_21422 = state_20801__$1;
(statearr_20994_21422[(2)] = inst_20472);

(statearr_20994_21422[(1)] = (71));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (115))){
var inst_20530 = (state_20801[(14)]);
var inst_20630 = (state_20801[(42)]);
var inst_20631 = (state_20801[(43)]);
var _ = (function (){var statearr_20995 = state_20801;
(statearr_20995[(4)] = cljs.core.cons.call(null,(118),(state_20801[(4)])));

return statearr_20995;
})();
var inst_20625 = cljs.core.PersistentVector.EMPTY_NODE;
var inst_20626 = ["vote_counts",(2),"value"];
var inst_20627 = (new cljs.core.PersistentVector(null,(3),(5),inst_20625,inst_20626,null));
var inst_20628 = cljs.core.get_in.call(null,inst_20530,inst_20627);
var inst_20629 = (new cljs.core.List(null,(5),null,(1),null));
var inst_20630__$1 = (new cljs.core.List(null,inst_20628,inst_20629,(2),null));
var inst_20631__$1 = cljs.core.apply.call(null,cljs.core._EQ_,inst_20630__$1);
var state_20801__$1 = (function (){var statearr_20996 = state_20801;
(statearr_20996[(42)] = inst_20630__$1);

(statearr_20996[(43)] = inst_20631__$1);

return statearr_20996;
})();
if(cljs.core.truth_(inst_20631__$1)){
var statearr_20997_21423 = state_20801__$1;
(statearr_20997_21423[(1)] = (119));

} else {
var statearr_20998_21424 = state_20801__$1;
(statearr_20998_21424[(1)] = (120));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (147))){
var _ = (function (){var statearr_20999 = state_20801;
(statearr_20999[(4)] = cljs.core.rest.call(null,(state_20801[(4)])));

return statearr_20999;
})();
var state_20801__$1 = state_20801;
var ex20992 = (state_20801__$1[(2)]);
var statearr_21000_21425 = state_20801__$1;
(statearr_21000_21425[(5)] = ex20992);


var statearr_21001_21426 = state_20801__$1;
(statearr_21001_21426[(1)] = (146));

(statearr_21001_21426[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (20))){
var inst_20209 = (state_20801[(44)]);
var inst_20209__$1 = (state_20801[(2)]);
var inst_20210 = (inst_20209__$1 instanceof cljs.core.ExceptionInfo);
var inst_20211 = cljs.core.ex_data.call(null,inst_20209__$1);
var inst_20212 = new cljs.core.Keyword(null,"error","error",(-978969032)).cljs$core$IFn$_invoke$arity$1(inst_20211);
var inst_20213 = cljs.core._EQ_.call(null,inst_20212,new cljs.core.Keyword(null,"promise-error","promise-error",(-90673560)));
var inst_20214 = ((inst_20210) && (inst_20213));
var state_20801__$1 = (function (){var statearr_21002 = state_20801;
(statearr_21002[(44)] = inst_20209__$1);

return statearr_21002;
})();
if(cljs.core.truth_(inst_20214)){
var statearr_21003_21427 = state_20801__$1;
(statearr_21003_21427[(1)] = (21));

} else {
var statearr_21004_21428 = state_20801__$1;
(statearr_21004_21428[(1)] = (22));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (52))){
var inst_20402 = (state_20801[(2)]);
var state_20801__$1 = (function (){var statearr_21005 = state_20801;
(statearr_21005[(45)] = inst_20402);

return statearr_21005;
})();
var statearr_21006_21429 = state_20801__$1;
(statearr_21006_21429[(2)] = null);

(statearr_21006_21429[(1)] = (70));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (84))){
var inst_20445 = (state_20801[(2)]);
var inst_20446 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_20447 = true;
var inst_20448 = [new cljs.core.Keyword(null,"error","error",(-978969032)),"can update vote twice",inst_20447,inst_20445];
var inst_20449 = cljs.core.PersistentHashMap.fromArrays(inst_20446,inst_20448);
var inst_20450 = cljs.test.do_report.call(null,inst_20449);
var state_20801__$1 = state_20801;
var statearr_21007_21430 = state_20801__$1;
(statearr_21007_21430[(2)] = inst_20450);

(statearr_21007_21430[(1)] = (83));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (116))){
var inst_20654 = (state_20801[(2)]);
var inst_20655 = Promise.resolve((42));
var inst_20656 = eos_cljs.core.wait_block.call(null,inst_20655,(2));
var inst_20657 = cljs.core.async.interop.p__GT_c.call(null,inst_20656);
var state_20801__$1 = (function (){var statearr_21008 = state_20801;
(statearr_21008[(46)] = inst_20654);

return statearr_21008;
})();
return cljs.core.async.impl.ioc_helpers.take_BANG_.call(null,state_20801__$1,(122),inst_20657);
} else {
if((state_val_20802 === (148))){
var inst_20714 = (state_20801[(34)]);
var inst_20734 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_20735 = new cljs.core.Symbol("e2e.macros","pass?","e2e.macros/pass?",(894145299),null);
var inst_20736 = [new cljs.core.Keyword(null,"pass","pass",(1574159993)),"needs latest terms accepted",inst_20735,inst_20714];
var inst_20737 = cljs.core.PersistentHashMap.fromArrays(inst_20734,inst_20736);
var inst_20738 = cljs.test.do_report.call(null,inst_20737);
var state_20801__$1 = state_20801;
var statearr_21009_21431 = state_20801__$1;
(statearr_21009_21431[(2)] = inst_20738);

(statearr_21009_21431[(1)] = (150));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (21))){
var inst_20209 = (state_20801[(44)]);
var inst_20216 = (function(){throw inst_20209})();
var state_20801__$1 = state_20801;
var statearr_21011_21432 = state_20801__$1;
(statearr_21011_21432[(2)] = inst_20216);

(statearr_21011_21432[(1)] = (23));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (53))){
var inst_20330 = (state_20801[(2)]);
var inst_20331 = cljs.core.prn.call(null,"test failed with ",inst_20330);
var state_20801__$1 = (function (){var statearr_21012 = state_20801;
(statearr_21012[(47)] = inst_20331);

return statearr_21012;
})();
var statearr_21013_21433 = state_20801__$1;
(statearr_21013_21433[(2)] = null);

(statearr_21013_21433[(1)] = (54));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (85))){
var _ = (function (){var statearr_21014 = state_20801;
(statearr_21014[(4)] = cljs.core.rest.call(null,(state_20801[(4)])));

return statearr_21014;
})();
var state_20801__$1 = state_20801;
var ex21010 = (state_20801__$1[(2)]);
var statearr_21015_21434 = state_20801__$1;
(statearr_21015_21434[(5)] = ex21010);


var statearr_21016_21435 = state_20801__$1;
(statearr_21016_21435[(1)] = (84));

(statearr_21016_21435[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (117))){
var inst_20614 = (state_20801[(2)]);
var inst_20615 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_20616 = cljs.core.list(new cljs.core.Symbol(null,"=","=",(-1501502141),null),cljs.core.list(new cljs.core.Symbol(null,"get-in","get-in",(-1965644065),null),new cljs.core.Symbol(null,"r","r",(1169147337),null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, ["vote_counts",(2),"value"], null)),(5));
var inst_20617 = [new cljs.core.Keyword(null,"error","error",(-978969032)),null,inst_20616,inst_20614];
var inst_20618 = cljs.core.PersistentHashMap.fromArrays(inst_20615,inst_20617);
var inst_20619 = cljs.test.do_report.call(null,inst_20618);
var state_20801__$1 = state_20801;
var statearr_21017_21436 = state_20801__$1;
(statearr_21017_21436[(2)] = inst_20619);

(statearr_21017_21436[(1)] = (116));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (149))){
var inst_20714 = (state_20801[(34)]);
var inst_20740 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_20741 = new cljs.core.Symbol("e2e.macros","pass?","e2e.macros/pass?",(894145299),null);
var inst_20742 = [new cljs.core.Keyword(null,"fail","fail",(1706214930)),"needs latest terms accepted",inst_20741,inst_20714];
var inst_20743 = cljs.core.PersistentHashMap.fromArrays(inst_20740,inst_20742);
var inst_20744 = cljs.test.do_report.call(null,inst_20743);
var state_20801__$1 = state_20801;
var statearr_21018_21437 = state_20801__$1;
(statearr_21018_21437[(2)] = inst_20744);

(statearr_21018_21437[(1)] = (150));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (22))){
var inst_20209 = (state_20801[(44)]);
var state_20801__$1 = state_20801;
var statearr_21019_21438 = state_20801__$1;
(statearr_21019_21438[(2)] = inst_20209);

(statearr_21019_21438[(1)] = (23));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (54))){
var _ = (function (){var statearr_21021 = state_20801;
(statearr_21021[(4)] = cljs.core.cons.call(null,(57),(state_20801[(4)])));

return statearr_21021;
})();
var inst_20343 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002))];
var inst_20344 = [new cljs.core.Keyword(null,"fail","fail",(1706214930)),"can update vote"];
var inst_20345 = cljs.core.PersistentHashMap.fromArrays(inst_20343,inst_20344);
var inst_20346 = cljs.test.do_report.call(null,inst_20345);
var ___$1 = (function (){var statearr_21022 = state_20801;
(statearr_21022[(4)] = cljs.core.rest.call(null,(state_20801[(4)])));

return statearr_21022;
})();
var state_20801__$1 = state_20801;
var statearr_21023_21439 = state_20801__$1;
(statearr_21023_21439[(2)] = inst_20346);

(statearr_21023_21439[(1)] = (55));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (86))){
var inst_20457 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_20458 = true;
var inst_20459 = [new cljs.core.Keyword(null,"pass","pass",(1574159993)),"can update vote twice",inst_20458,true];
var inst_20460 = cljs.core.PersistentHashMap.fromArrays(inst_20457,inst_20459);
var inst_20461 = cljs.test.do_report.call(null,inst_20460);
var state_20801__$1 = state_20801;
var statearr_21024_21440 = state_20801__$1;
(statearr_21024_21440[(2)] = inst_20461);

(statearr_21024_21440[(1)] = (88));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (118))){
var _ = (function (){var statearr_21025 = state_20801;
(statearr_21025[(4)] = cljs.core.rest.call(null,(state_20801[(4)])));

return statearr_21025;
})();
var state_20801__$1 = state_20801;
var ex21020 = (state_20801__$1[(2)]);
var statearr_21026_21441 = state_20801__$1;
(statearr_21026_21441[(5)] = ex21020);


var statearr_21027_21442 = state_20801__$1;
(statearr_21027_21442[(1)] = (117));

(statearr_21027_21442[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (150))){
var inst_20714 = (state_20801[(34)]);
var inst_20746 = (state_20801[(2)]);
var _ = (function (){var statearr_21028 = state_20801;
(statearr_21028[(4)] = cljs.core.rest.call(null,(state_20801[(4)])));

return statearr_21028;
})();
var state_20801__$1 = (function (){var statearr_21029 = state_20801;
(statearr_21029[(48)] = inst_20746);

return statearr_21029;
})();
var statearr_21030_21443 = state_20801__$1;
(statearr_21030_21443[(2)] = inst_20714);

(statearr_21030_21443[(1)] = (145));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (23))){
var inst_20219 = (state_20801[(2)]);
var state_20801__$1 = (function (){var statearr_21031 = state_20801;
(statearr_21031[(49)] = inst_20219);

return statearr_21031;
})();
var statearr_21032_21444 = state_20801__$1;
(statearr_21032_21444[(2)] = null);

(statearr_21032_21444[(1)] = (24));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (55))){
var inst_20349 = (state_20801[(2)]);
var state_20801__$1 = state_20801;
var statearr_21033_21445 = state_20801__$1;
(statearr_21033_21445[(2)] = inst_20349);

(statearr_21033_21445[(1)] = (52));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (87))){
var inst_20463 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_20464 = true;
var inst_20465 = [new cljs.core.Keyword(null,"fail","fail",(1706214930)),"can update vote twice",inst_20464,true];
var inst_20466 = cljs.core.PersistentHashMap.fromArrays(inst_20463,inst_20465);
var inst_20467 = cljs.test.do_report.call(null,inst_20466);
var state_20801__$1 = state_20801;
var statearr_21035_21446 = state_20801__$1;
(statearr_21035_21446[(2)] = inst_20467);

(statearr_21035_21446[(1)] = (88));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (119))){
var inst_20630 = (state_20801[(42)]);
var inst_20633 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_20634 = cljs.core.list(new cljs.core.Symbol(null,"=","=",(-1501502141),null),cljs.core.list(new cljs.core.Symbol(null,"get-in","get-in",(-1965644065),null),new cljs.core.Symbol(null,"r","r",(1169147337),null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, ["vote_counts",(2),"value"], null)),(5));
var inst_20635 = cljs.core.cons.call(null,cljs.core._EQ_,inst_20630);
var inst_20636 = [new cljs.core.Keyword(null,"pass","pass",(1574159993)),null,inst_20634,inst_20635];
var inst_20637 = cljs.core.PersistentHashMap.fromArrays(inst_20633,inst_20636);
var inst_20638 = cljs.test.do_report.call(null,inst_20637);
var state_20801__$1 = state_20801;
var statearr_21036_21447 = state_20801__$1;
(statearr_21036_21447[(2)] = inst_20638);

(statearr_21036_21447[(1)] = (121));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (151))){
var _ = (function (){var statearr_21037 = state_20801;
(statearr_21037[(4)] = cljs.core.rest.call(null,(state_20801[(4)])));

return statearr_21037;
})();
var state_20801__$1 = state_20801;
var ex21034 = (state_20801__$1[(2)]);
var statearr_21038_21448 = state_20801__$1;
(statearr_21038_21448[(5)] = ex21034);


if((ex21034 instanceof Error)){
var statearr_21039_21449 = state_20801__$1;
(statearr_21039_21449[(1)] = (140));

(statearr_21039_21449[(5)] = null);

} else {
throw ex21034;

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (24))){
var _ = (function (){var statearr_21040 = state_20801;
(statearr_21040[(4)] = cljs.core.cons.call(null,(27),(state_20801[(4)])));

return statearr_21040;
})();
var inst_20231 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002))];
var inst_20232 = [new cljs.core.Keyword(null,"fail","fail",(1706214930)),"can vote on own proposal"];
var inst_20233 = cljs.core.PersistentHashMap.fromArrays(inst_20231,inst_20232);
var inst_20234 = cljs.test.do_report.call(null,inst_20233);
var ___$1 = (function (){var statearr_21041 = state_20801;
(statearr_21041[(4)] = cljs.core.rest.call(null,(state_20801[(4)])));

return statearr_21041;
})();
var state_20801__$1 = state_20801;
var statearr_21042_21450 = state_20801__$1;
(statearr_21042_21450[(2)] = inst_20234);

(statearr_21042_21450[(1)] = (25));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (56))){
var inst_20332 = (state_20801[(2)]);
var inst_20333 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_20334 = null;
var inst_20335 = [new cljs.core.Keyword(null,"error","error",(-978969032)),"can update vote",inst_20334,inst_20332];
var inst_20336 = cljs.core.PersistentHashMap.fromArrays(inst_20333,inst_20335);
var inst_20337 = cljs.test.do_report.call(null,inst_20336);
var state_20801__$1 = state_20801;
var statearr_21043_21451 = state_20801__$1;
(statearr_21043_21451[(2)] = inst_20337);

(statearr_21043_21451[(1)] = (55));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (88))){
var inst_20469 = (state_20801[(2)]);
var _ = (function (){var statearr_21044 = state_20801;
(statearr_21044[(4)] = cljs.core.rest.call(null,(state_20801[(4)])));

return statearr_21044;
})();
var state_20801__$1 = (function (){var statearr_21045 = state_20801;
(statearr_21045[(50)] = inst_20469);

return statearr_21045;
})();
var statearr_21046_21452 = state_20801__$1;
(statearr_21046_21452[(2)] = true);

(statearr_21046_21452[(1)] = (83));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (120))){
var inst_20630 = (state_20801[(42)]);
var inst_20640 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_20641 = cljs.core.list(new cljs.core.Symbol(null,"=","=",(-1501502141),null),cljs.core.list(new cljs.core.Symbol(null,"get-in","get-in",(-1965644065),null),new cljs.core.Symbol(null,"r","r",(1169147337),null),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, ["vote_counts",(2),"value"], null)),(5));
var inst_20642 = new cljs.core.Symbol(null,"not","not",(1044554643),null);
var inst_20643 = new cljs.core.Symbol(null,"=","=",(-1501502141),null);
var inst_20644 = cljs.core.cons.call(null,inst_20643,inst_20630);
var inst_20645 = (new cljs.core.List(null,inst_20644,null,(1),null));
var inst_20646 = (new cljs.core.List(null,inst_20642,inst_20645,(2),null));
var inst_20647 = [new cljs.core.Keyword(null,"fail","fail",(1706214930)),null,inst_20641,inst_20646];
var inst_20648 = cljs.core.PersistentHashMap.fromArrays(inst_20640,inst_20647);
var inst_20649 = cljs.test.do_report.call(null,inst_20648);
var state_20801__$1 = state_20801;
var statearr_21047_21453 = state_20801__$1;
(statearr_21047_21453[(2)] = inst_20649);

(statearr_21047_21453[(1)] = (121));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (152))){
var inst_20761 = (state_20801[(51)]);
var inst_20761__$1 = (state_20801[(2)]);
var inst_20762 = (inst_20761__$1 instanceof cljs.core.ExceptionInfo);
var inst_20763 = cljs.core.ex_data.call(null,inst_20761__$1);
var inst_20764 = new cljs.core.Keyword(null,"error","error",(-978969032)).cljs$core$IFn$_invoke$arity$1(inst_20763);
var inst_20765 = cljs.core._EQ_.call(null,inst_20764,new cljs.core.Keyword(null,"promise-error","promise-error",(-90673560)));
var inst_20766 = ((inst_20762) && (inst_20765));
var state_20801__$1 = (function (){var statearr_21049 = state_20801;
(statearr_21049[(51)] = inst_20761__$1);

return statearr_21049;
})();
if(cljs.core.truth_(inst_20766)){
var statearr_21050_21454 = state_20801__$1;
(statearr_21050_21454[(1)] = (153));

} else {
var statearr_21051_21455 = state_20801__$1;
(statearr_21051_21455[(1)] = (154));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (25))){
var inst_20237 = (state_20801[(2)]);
var _ = (function (){var statearr_21052 = state_20801;
(statearr_21052[(4)] = cljs.core.rest.call(null,(state_20801[(4)])));

return statearr_21052;
})();
var state_20801__$1 = state_20801;
var statearr_21053_21456 = state_20801__$1;
(statearr_21053_21456[(2)] = inst_20237);

(statearr_21053_21456[(1)] = (7));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (57))){
var _ = (function (){var statearr_21054 = state_20801;
(statearr_21054[(4)] = cljs.core.rest.call(null,(state_20801[(4)])));

return statearr_21054;
})();
var state_20801__$1 = state_20801;
var ex21048 = (state_20801__$1[(2)]);
var statearr_21055_21457 = state_20801__$1;
(statearr_21055_21457[(5)] = ex21048);


var statearr_21056_21458 = state_20801__$1;
(statearr_21056_21458[(1)] = (56));

(statearr_21056_21458[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (89))){
var inst_20480 = (state_20801[(52)]);
var inst_20480__$1 = (state_20801[(2)]);
var inst_20481 = (inst_20480__$1 instanceof cljs.core.ExceptionInfo);
var inst_20482 = cljs.core.ex_data.call(null,inst_20480__$1);
var inst_20483 = new cljs.core.Keyword(null,"error","error",(-978969032)).cljs$core$IFn$_invoke$arity$1(inst_20482);
var inst_20484 = cljs.core._EQ_.call(null,inst_20483,new cljs.core.Keyword(null,"promise-error","promise-error",(-90673560)));
var inst_20485 = ((inst_20481) && (inst_20484));
var state_20801__$1 = (function (){var statearr_21057 = state_20801;
(statearr_21057[(52)] = inst_20480__$1);

return statearr_21057;
})();
if(cljs.core.truth_(inst_20485)){
var statearr_21058_21459 = state_20801__$1;
(statearr_21058_21459[(1)] = (90));

} else {
var statearr_21059_21460 = state_20801__$1;
(statearr_21059_21460[(1)] = (91));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (121))){
var inst_20631 = (state_20801[(43)]);
var inst_20651 = (state_20801[(2)]);
var _ = (function (){var statearr_21060 = state_20801;
(statearr_21060[(4)] = cljs.core.rest.call(null,(state_20801[(4)])));

return statearr_21060;
})();
var state_20801__$1 = (function (){var statearr_21061 = state_20801;
(statearr_21061[(53)] = inst_20651);

return statearr_21061;
})();
var statearr_21062_21461 = state_20801__$1;
(statearr_21062_21461[(2)] = inst_20631);

(statearr_21062_21461[(1)] = (116));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (153))){
var inst_20761 = (state_20801[(51)]);
var inst_20768 = (function(){throw inst_20761})();
var state_20801__$1 = state_20801;
var statearr_21064_21462 = state_20801__$1;
(statearr_21064_21462[(2)] = inst_20768);

(statearr_21064_21462[(1)] = (155));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (26))){
var inst_20220 = (state_20801[(2)]);
var inst_20221 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_20222 = null;
var inst_20223 = [new cljs.core.Keyword(null,"error","error",(-978969032)),"can vote on own proposal",inst_20222,inst_20220];
var inst_20224 = cljs.core.PersistentHashMap.fromArrays(inst_20221,inst_20223);
var inst_20225 = cljs.test.do_report.call(null,inst_20224);
var state_20801__$1 = state_20801;
var statearr_21065_21463 = state_20801__$1;
(statearr_21065_21463[(2)] = inst_20225);

(statearr_21065_21463[(1)] = (25));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (58))){
var _ = (function (){var statearr_21066 = state_20801;
(statearr_21066[(4)] = cljs.core.rest.call(null,(state_20801[(4)])));

return statearr_21066;
})();
var state_20801__$1 = state_20801;
var ex21063 = (state_20801__$1[(2)]);
var statearr_21067_21464 = state_20801__$1;
(statearr_21067_21464[(5)] = ex21063);


if((ex21063 instanceof Error)){
var statearr_21068_21465 = state_20801__$1;
(statearr_21068_21465[(1)] = (53));

(statearr_21068_21465[(5)] = null);

} else {
throw ex21063;

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (90))){
var inst_20480 = (state_20801[(52)]);
var inst_20487 = (function(){throw inst_20480})();
var state_20801__$1 = state_20801;
var statearr_21069_21466 = state_20801__$1;
(statearr_21069_21466[(2)] = inst_20487);

(statearr_21069_21466[(1)] = (92));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (122))){
var inst_20659 = (state_20801[(54)]);
var inst_20659__$1 = (state_20801[(2)]);
var inst_20660 = (inst_20659__$1 instanceof cljs.core.ExceptionInfo);
var inst_20661 = cljs.core.ex_data.call(null,inst_20659__$1);
var inst_20662 = new cljs.core.Keyword(null,"error","error",(-978969032)).cljs$core$IFn$_invoke$arity$1(inst_20661);
var inst_20663 = cljs.core._EQ_.call(null,inst_20662,new cljs.core.Keyword(null,"promise-error","promise-error",(-90673560)));
var inst_20664 = ((inst_20660) && (inst_20663));
var state_20801__$1 = (function (){var statearr_21071 = state_20801;
(statearr_21071[(54)] = inst_20659__$1);

return statearr_21071;
})();
if(cljs.core.truth_(inst_20664)){
var statearr_21072_21467 = state_20801__$1;
(statearr_21072_21467[(1)] = (123));

} else {
var statearr_21073_21468 = state_20801__$1;
(statearr_21073_21468[(1)] = (124));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (154))){
var inst_20761 = (state_20801[(51)]);
var state_20801__$1 = state_20801;
var statearr_21074_21469 = state_20801__$1;
(statearr_21074_21469[(2)] = inst_20761);

(statearr_21074_21469[(1)] = (155));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (27))){
var _ = (function (){var statearr_21075 = state_20801;
(statearr_21075[(4)] = cljs.core.rest.call(null,(state_20801[(4)])));

return statearr_21075;
})();
var state_20801__$1 = state_20801;
var ex21070 = (state_20801__$1[(2)]);
var statearr_21076_21470 = state_20801__$1;
(statearr_21076_21470[(5)] = ex21070);


var statearr_21077_21471 = state_20801__$1;
(statearr_21077_21471[(1)] = (26));

(statearr_21077_21471[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (59))){
var inst_20361 = (state_20801[(55)]);
var inst_20361__$1 = (state_20801[(2)]);
var inst_20362 = (inst_20361__$1 instanceof cljs.core.ExceptionInfo);
var inst_20363 = cljs.core.ex_data.call(null,inst_20361__$1);
var inst_20364 = new cljs.core.Keyword(null,"error","error",(-978969032)).cljs$core$IFn$_invoke$arity$1(inst_20363);
var inst_20365 = cljs.core._EQ_.call(null,inst_20364,new cljs.core.Keyword(null,"promise-error","promise-error",(-90673560)));
var inst_20366 = ((inst_20362) && (inst_20365));
var state_20801__$1 = (function (){var statearr_21078 = state_20801;
(statearr_21078[(55)] = inst_20361__$1);

return statearr_21078;
})();
if(cljs.core.truth_(inst_20366)){
var statearr_21079_21472 = state_20801__$1;
(statearr_21079_21472[(1)] = (60));

} else {
var statearr_21080_21473 = state_20801__$1;
(statearr_21080_21473[(1)] = (61));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (91))){
var inst_20480 = (state_20801[(52)]);
var state_20801__$1 = state_20801;
var statearr_21081_21474 = state_20801__$1;
(statearr_21081_21474[(2)] = inst_20480);

(statearr_21081_21474[(1)] = (92));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (123))){
var inst_20659 = (state_20801[(54)]);
var inst_20666 = (function(){throw inst_20659})();
var state_20801__$1 = state_20801;
var statearr_21082_21475 = state_20801__$1;
(statearr_21082_21475[(2)] = inst_20666);

(statearr_21082_21475[(1)] = (125));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (155))){
var inst_20771 = (state_20801[(2)]);
var state_20801__$1 = (function (){var statearr_21083 = state_20801;
(statearr_21083[(56)] = inst_20771);

return statearr_21083;
})();
var statearr_21084_21476 = state_20801__$1;
(statearr_21084_21476[(2)] = null);

(statearr_21084_21476[(1)] = (156));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (28))){
var inst_20246 = (state_20801[(57)]);
var inst_20246__$1 = (state_20801[(2)]);
var inst_20247 = (inst_20246__$1 instanceof cljs.core.ExceptionInfo);
var inst_20248 = cljs.core.ex_data.call(null,inst_20246__$1);
var inst_20249 = new cljs.core.Keyword(null,"error","error",(-978969032)).cljs$core$IFn$_invoke$arity$1(inst_20248);
var inst_20250 = cljs.core._EQ_.call(null,inst_20249,new cljs.core.Keyword(null,"promise-error","promise-error",(-90673560)));
var inst_20251 = ((inst_20247) && (inst_20250));
var state_20801__$1 = (function (){var statearr_21085 = state_20801;
(statearr_21085[(57)] = inst_20246__$1);

return statearr_21085;
})();
if(cljs.core.truth_(inst_20251)){
var statearr_21086_21477 = state_20801__$1;
(statearr_21086_21477[(1)] = (29));

} else {
var statearr_21087_21478 = state_20801__$1;
(statearr_21087_21478[(1)] = (30));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (60))){
var inst_20361 = (state_20801[(55)]);
var inst_20368 = (function(){throw inst_20361})();
var state_20801__$1 = state_20801;
var statearr_21088_21479 = state_20801__$1;
(statearr_21088_21479[(2)] = inst_20368);

(statearr_21088_21479[(1)] = (62));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (92))){
var inst_20490 = (state_20801[(2)]);
var inst_20491 = [new cljs.core.Keyword(null,"voter","voter",(1012094707)),new cljs.core.Keyword(null,"prop_id","prop_id",(-694455661)),new cljs.core.Keyword(null,"vote_type","vote_type",(-293333277))];
var inst_20492 = [e2e.proposals.token_acc,(0),(1)];
var inst_20493 = cljs.core.PersistentHashMap.fromArrays(inst_20491,inst_20492);
var inst_20494 = cljs.core.PersistentVector.EMPTY_NODE;
var inst_20495 = [new cljs.core.Keyword(null,"actor","actor",(-1830560481)),new cljs.core.Keyword(null,"permission","permission",(-511292572))];
var inst_20496 = [e2e.proposals.token_acc,"active"];
var inst_20497 = cljs.core.PersistentHashMap.fromArrays(inst_20495,inst_20496);
var inst_20498 = [inst_20497];
var inst_20499 = (new cljs.core.PersistentVector(null,(1),(5),inst_20494,inst_20498,null));
var inst_20500 = eos_cljs.core.transact.call(null,e2e.proposals.prop_acc,"addvote",inst_20493,inst_20499);
var inst_20501 = cljs.core.async.interop.p__GT_c.call(null,inst_20500);
var state_20801__$1 = (function (){var statearr_21089 = state_20801;
(statearr_21089[(58)] = inst_20490);

return statearr_21089;
})();
return cljs.core.async.impl.ioc_helpers.take_BANG_.call(null,state_20801__$1,(93),inst_20501);
} else {
if((state_val_20802 === (124))){
var inst_20659 = (state_20801[(54)]);
var state_20801__$1 = state_20801;
var statearr_21090_21480 = state_20801__$1;
(statearr_21090_21480[(2)] = inst_20659);

(statearr_21090_21480[(1)] = (125));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (156))){
var _ = (function (){var statearr_21091 = state_20801;
(statearr_21091[(4)] = cljs.core.cons.call(null,(159),(state_20801[(4)])));

return statearr_21091;
})();
var inst_20783 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002))];
var inst_20784 = [new cljs.core.Keyword(null,"fail","fail",(1706214930)),"needs latest terms accepted"];
var inst_20785 = cljs.core.PersistentHashMap.fromArrays(inst_20783,inst_20784);
var inst_20786 = cljs.test.do_report.call(null,inst_20785);
var ___$1 = (function (){var statearr_21092 = state_20801;
(statearr_21092[(4)] = cljs.core.rest.call(null,(state_20801[(4)])));

return statearr_21092;
})();
var state_20801__$1 = state_20801;
var statearr_21093_21481 = state_20801__$1;
(statearr_21093_21481[(2)] = inst_20786);

(statearr_21093_21481[(1)] = (157));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (29))){
var inst_20246 = (state_20801[(57)]);
var inst_20253 = (function(){throw inst_20246})();
var state_20801__$1 = state_20801;
var statearr_21094_21482 = state_20801__$1;
(statearr_21094_21482[(2)] = inst_20253);

(statearr_21094_21482[(1)] = (31));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (61))){
var inst_20361 = (state_20801[(55)]);
var state_20801__$1 = state_20801;
var statearr_21095_21483 = state_20801__$1;
(statearr_21095_21483[(2)] = inst_20361);

(statearr_21095_21483[(1)] = (62));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (93))){
var inst_20503 = (state_20801[(59)]);
var inst_20503__$1 = (state_20801[(2)]);
var inst_20504 = (inst_20503__$1 instanceof cljs.core.ExceptionInfo);
var inst_20505 = cljs.core.ex_data.call(null,inst_20503__$1);
var inst_20506 = new cljs.core.Keyword(null,"error","error",(-978969032)).cljs$core$IFn$_invoke$arity$1(inst_20505);
var inst_20507 = cljs.core._EQ_.call(null,inst_20506,new cljs.core.Keyword(null,"promise-error","promise-error",(-90673560)));
var inst_20508 = ((inst_20504) && (inst_20507));
var state_20801__$1 = (function (){var statearr_21096 = state_20801;
(statearr_21096[(59)] = inst_20503__$1);

return statearr_21096;
})();
if(cljs.core.truth_(inst_20508)){
var statearr_21097_21484 = state_20801__$1;
(statearr_21097_21484[(1)] = (94));

} else {
var statearr_21098_21485 = state_20801__$1;
(statearr_21098_21485[(1)] = (95));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (125))){
var inst_20669 = (state_20801[(2)]);
var inst_20670 = [new cljs.core.Keyword(null,"voter","voter",(1012094707)),new cljs.core.Keyword(null,"prop_id","prop_id",(-694455661)),new cljs.core.Keyword(null,"vote_type","vote_type",(-293333277))];
var inst_20671 = [e2e.proposals.owner_acc,(1),(1)];
var inst_20672 = cljs.core.PersistentHashMap.fromArrays(inst_20670,inst_20671);
var inst_20673 = e2e.proposals.eos_tx_owner.call(null,e2e.proposals.prop_acc,"addvote",inst_20672);
var inst_20674 = cljs.core.async.interop.p__GT_c.call(null,inst_20673);
var state_20801__$1 = (function (){var statearr_21099 = state_20801;
(statearr_21099[(60)] = inst_20669);

return statearr_21099;
})();
return cljs.core.async.impl.ioc_helpers.take_BANG_.call(null,state_20801__$1,(126),inst_20674);
} else {
if((state_val_20802 === (157))){
var inst_20789 = (state_20801[(2)]);
var _ = (function (){var statearr_21100 = state_20801;
(statearr_21100[(4)] = cljs.core.rest.call(null,(state_20801[(4)])));

return statearr_21100;
})();
var state_20801__$1 = state_20801;
var statearr_21101_21486 = state_20801__$1;
(statearr_21101_21486[(2)] = inst_20789);

(statearr_21101_21486[(1)] = (139));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (30))){
var inst_20246 = (state_20801[(57)]);
var state_20801__$1 = state_20801;
var statearr_21102_21487 = state_20801__$1;
(statearr_21102_21487[(2)] = inst_20246);

(statearr_21102_21487[(1)] = (31));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (62))){
var inst_20371 = (state_20801[(2)]);
var state_20801__$1 = (function (){var statearr_21103 = state_20801;
(statearr_21103[(61)] = inst_20371);

return statearr_21103;
})();
var statearr_21104_21488 = state_20801__$1;
(statearr_21104_21488[(2)] = null);

(statearr_21104_21488[(1)] = (63));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (94))){
var inst_20503 = (state_20801[(59)]);
var inst_20510 = (function(){throw inst_20503})();
var state_20801__$1 = state_20801;
var statearr_21105_21489 = state_20801__$1;
(statearr_21105_21489[(2)] = inst_20510);

(statearr_21105_21489[(1)] = (96));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (126))){
var inst_20676 = (state_20801[(8)]);
var inst_20676__$1 = (state_20801[(2)]);
var inst_20677 = (inst_20676__$1 instanceof cljs.core.ExceptionInfo);
var inst_20678 = cljs.core.ex_data.call(null,inst_20676__$1);
var inst_20679 = new cljs.core.Keyword(null,"error","error",(-978969032)).cljs$core$IFn$_invoke$arity$1(inst_20678);
var inst_20680 = cljs.core._EQ_.call(null,inst_20679,new cljs.core.Keyword(null,"promise-error","promise-error",(-90673560)));
var inst_20681 = ((inst_20677) && (inst_20680));
var state_20801__$1 = (function (){var statearr_21106 = state_20801;
(statearr_21106[(8)] = inst_20676__$1);

return statearr_21106;
})();
if(cljs.core.truth_(inst_20681)){
var statearr_21107_21490 = state_20801__$1;
(statearr_21107_21490[(1)] = (127));

} else {
var statearr_21108_21491 = state_20801__$1;
(statearr_21108_21491[(1)] = (128));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (158))){
var inst_20772 = (state_20801[(2)]);
var inst_20773 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_20774 = null;
var inst_20775 = [new cljs.core.Keyword(null,"error","error",(-978969032)),"needs latest terms accepted",inst_20774,inst_20772];
var inst_20776 = cljs.core.PersistentHashMap.fromArrays(inst_20773,inst_20775);
var inst_20777 = cljs.test.do_report.call(null,inst_20776);
var state_20801__$1 = state_20801;
var statearr_21109_21492 = state_20801__$1;
(statearr_21109_21492[(2)] = inst_20777);

(statearr_21109_21492[(1)] = (157));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (31))){
var inst_20256 = (state_20801[(2)]);
var state_20801__$1 = (function (){var statearr_21110 = state_20801;
(statearr_21110[(62)] = inst_20256);

return statearr_21110;
})();
var statearr_21111_21493 = state_20801__$1;
(statearr_21111_21493[(2)] = null);

(statearr_21111_21493[(1)] = (32));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (63))){
var _ = (function (){var statearr_21112 = state_20801;
(statearr_21112[(4)] = cljs.core.cons.call(null,(66),(state_20801[(4)])));

return statearr_21112;
})();
var state_20801__$1 = state_20801;
var statearr_21113_21494 = state_20801__$1;
(statearr_21113_21494[(1)] = (67));



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (95))){
var inst_20503 = (state_20801[(59)]);
var state_20801__$1 = state_20801;
var statearr_21116_21495 = state_20801__$1;
(statearr_21116_21495[(2)] = inst_20503);

(statearr_21116_21495[(1)] = (96));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (127))){
var inst_20676 = (state_20801[(8)]);
var inst_20683 = (function(){throw inst_20676})();
var state_20801__$1 = state_20801;
var statearr_21117_21496 = state_20801__$1;
(statearr_21117_21496[(2)] = inst_20683);

(statearr_21117_21496[(1)] = (129));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_20802 === (159))){
var _ = (function (){var statearr_21118 = state_20801;
(statearr_21118[(4)] = cljs.core.rest.call(null,(state_20801[(4)])));

return statearr_21118;
})();
var state_20801__$1 = state_20801;
var ex21115 = (state_20801__$1[(2)]);
var statearr_21119_21497 = state_20801__$1;
(statearr_21119_21497[(5)] = ex21115);


var statearr_21120_21498 = state_20801__$1;
(statearr_21120_21498[(1)] = (158));

(statearr_21120_21498[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
return null;
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
});})(c__19__auto__,___192__auto__))
;
return ((function (switch__14__auto__,c__19__auto__,___192__auto__){
return (function() {
var e2e$proposals$state_machine__15__auto__ = null;
var e2e$proposals$state_machine__15__auto____0 = (function (){
var statearr_21121 = [null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];
(statearr_21121[(0)] = e2e$proposals$state_machine__15__auto__);

(statearr_21121[(1)] = (1));

return statearr_21121;
});
var e2e$proposals$state_machine__15__auto____1 = (function (state_20801){
while(true){
var ret_value__16__auto__ = (function (){try{while(true){
var result__17__auto__ = switch__14__auto__.call(null,state_20801);
if(cljs.core.keyword_identical_QMARK_.call(null,result__17__auto__,new cljs.core.Keyword(null,"recur","recur",(-437573268)))){
continue;
} else {
return result__17__auto__;
}
break;
}
}catch (e21122){var ex__18__auto__ = e21122;
var statearr_21123_21499 = state_20801;
(statearr_21123_21499[(2)] = ex__18__auto__);


if(cljs.core.seq.call(null,(state_20801[(4)]))){
var statearr_21124_21500 = state_20801;
(statearr_21124_21500[(1)] = cljs.core.first.call(null,(state_20801[(4)])));

} else {
throw ex__18__auto__;
}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
}})();
if(cljs.core.keyword_identical_QMARK_.call(null,ret_value__16__auto__,new cljs.core.Keyword(null,"recur","recur",(-437573268)))){
var G__21501 = state_20801;
state_20801 = G__21501;
continue;
} else {
return ret_value__16__auto__;
}
break;
}
});
e2e$proposals$state_machine__15__auto__ = function(state_20801){
switch(arguments.length){
case 0:
return e2e$proposals$state_machine__15__auto____0.call(this);
case 1:
return e2e$proposals$state_machine__15__auto____1.call(this,state_20801);
}
throw(new Error('Invalid arity: ' + arguments.length));
};
e2e$proposals$state_machine__15__auto__.cljs$core$IFn$_invoke$arity$0 = e2e$proposals$state_machine__15__auto____0;
e2e$proposals$state_machine__15__auto__.cljs$core$IFn$_invoke$arity$1 = e2e$proposals$state_machine__15__auto____1;
return e2e$proposals$state_machine__15__auto__;
})()
;})(switch__14__auto__,c__19__auto__,___192__auto__))
})();
var state__21__auto__ = (function (){var statearr_21125 = f__20__auto__.call(null);
(statearr_21125[(6)] = c__19__auto__);

return statearr_21125;
})();
return cljs.core.async.impl.ioc_helpers.run_state_machine_wrapped.call(null,state__21__auto__);
});})(c__19__auto__,___192__auto__))
);

return c__19__auto__;
});

e2e.proposals.t_e2e$proposals19174.getBasis = (function (){
return new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,"meta19175","meta19175",(135110120),null)], null);
});

e2e.proposals.t_e2e$proposals19174.cljs$lang$type = true;

e2e.proposals.t_e2e$proposals19174.cljs$lang$ctorStr = "e2e.proposals/t_e2e$proposals19174";

e2e.proposals.t_e2e$proposals19174.cljs$lang$ctorPrWriter = (function (this__9776__auto__,writer__9777__auto__,opt__9778__auto__){
return cljs.core._write.call(null,writer__9777__auto__,"e2e.proposals/t_e2e$proposals19174");
});

/**
 * Positional factory function for e2e.proposals/t_e2e$proposals19174.
 */
e2e.proposals.__GT_t_e2e$proposals19174 = (function e2e$proposals$__GT_t_e2e$proposals19174(meta19175){
return (new e2e.proposals.t_e2e$proposals19174(meta19175));
});

}

return (new e2e.proposals.t_e2e$proposals19174(null));
});

e2e.proposals.vote.cljs$lang$var = new cljs.core.Var(function(){return e2e.proposals.vote;},new cljs.core.Symbol("e2e.proposals","vote","e2e.proposals/vote",(-517647785),null),cljs.core.PersistentHashMap.fromArrays([new cljs.core.Keyword(null,"ns","ns",(441598760)),new cljs.core.Keyword(null,"name","name",(1843675177)),new cljs.core.Keyword(null,"file","file",(-1269645878)),new cljs.core.Keyword(null,"end-column","end-column",(1425389514)),new cljs.core.Keyword(null,"column","column",(2078222095)),new cljs.core.Keyword(null,"line","line",(212345235)),new cljs.core.Keyword(null,"end-line","end-line",(1837326455)),new cljs.core.Keyword(null,"arglists","arglists",(1661989754)),new cljs.core.Keyword(null,"doc","doc",(1913296891)),new cljs.core.Keyword(null,"test","test",(577538877))],[new cljs.core.Symbol(null,"e2e.proposals","e2e.proposals",(1479174227),null),new cljs.core.Symbol(null,"vote","vote",(-839798934),null),"e2e/proposals.cljs",(14),(1),(213),(213),cljs.core.List.EMPTY,null,(cljs.core.truth_(e2e.proposals.vote)?e2e.proposals.vote.cljs$lang$test:null)]));
e2e.proposals.process_cycle = (function e2e$proposals$process_cycle(){
return cljs.test.test_var.call(null,e2e.proposals.process_cycle.cljs$lang$var);
});
e2e.proposals.process_cycle.cljs$lang$test = (function (){
if((typeof e2e !== 'undefined') && (typeof e2e.proposals !== 'undefined') && (typeof e2e.proposals.t_e2e$proposals21502 !== 'undefined')){
} else {

/**
* @constructor
 * @implements {cljs.core.IWithMeta}
 * @implements {cljs.core.IMeta}
 * @implements {cljs.test.IAsyncTest}
 * @implements {cljs.core.IFn}
*/
e2e.proposals.t_e2e$proposals21502 = (function (meta21503){
this.meta21503 = meta21503;
this.cljs$lang$protocol_mask$partition0$ = 393217;
this.cljs$lang$protocol_mask$partition1$ = 0;
});
e2e.proposals.t_e2e$proposals21502.prototype.cljs$core$IWithMeta$_with_meta$arity$2 = (function (_21504,meta21503__$1){
var self__ = this;
var _21504__$1 = this;
return (new e2e.proposals.t_e2e$proposals21502(meta21503__$1));
});

e2e.proposals.t_e2e$proposals21502.prototype.cljs$core$IMeta$_meta$arity$1 = (function (_21504){
var self__ = this;
var _21504__$1 = this;
return self__.meta21503;
});

e2e.proposals.t_e2e$proposals21502.prototype.cljs$test$IAsyncTest$ = cljs.core.PROTOCOL_SENTINEL;

e2e.proposals.t_e2e$proposals21502.prototype.call = (function (self__,done){
var self__ = this;
var self____$1 = this;
var ___192__auto__ = self____$1;
var c__19__auto___22122 = cljs.core.async.chan.call(null,(1));
cljs.core.async.impl.dispatch.run.call(null,((function (c__19__auto___22122,___192__auto__,self____$1){
return (function (){
var f__20__auto__ = (function (){var switch__14__auto__ = ((function (c__19__auto___22122,___192__auto__,self____$1){
return (function (state_21702){
var state_val_21703 = (state_21702[(1)]);
if((state_val_21703 === (32))){
var inst_21614 = (state_21702[(7)]);
var inst_21614__$1 = (state_21702[(2)]);
var inst_21615 = (inst_21614__$1 instanceof cljs.core.ExceptionInfo);
var inst_21616 = cljs.core.ex_data.call(null,inst_21614__$1);
var inst_21617 = new cljs.core.Keyword(null,"error","error",(-978969032)).cljs$core$IFn$_invoke$arity$1(inst_21616);
var inst_21618 = cljs.core._EQ_.call(null,inst_21617,new cljs.core.Keyword(null,"promise-error","promise-error",(-90673560)));
var inst_21619 = ((inst_21615) && (inst_21618));
var state_21702__$1 = (function (){var statearr_21704 = state_21702;
(statearr_21704[(7)] = inst_21614__$1);

return statearr_21704;
})();
if(cljs.core.truth_(inst_21619)){
var statearr_21705_22123 = state_21702__$1;
(statearr_21705_22123[(1)] = (33));

} else {
var statearr_21706_22124 = state_21702__$1;
(statearr_21706_22124[(1)] = (34));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_21703 === (1))){
var state_21702__$1 = state_21702;
var statearr_21707_22125 = state_21702__$1;
(statearr_21707_22125[(2)] = null);

(statearr_21707_22125[(1)] = (2));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_21703 === (33))){
var inst_21614 = (state_21702[(7)]);
var inst_21621 = (function(){throw inst_21614})();
var state_21702__$1 = state_21702;
var statearr_21708_22126 = state_21702__$1;
(statearr_21708_22126[(2)] = inst_21621);

(statearr_21708_22126[(1)] = (35));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_21703 === (2))){
var _ = (function (){var statearr_21709 = state_21702;
(statearr_21709[(4)] = cljs.core.cons.call(null,(5),(state_21702[(4)])));

return statearr_21709;
})();
var state_21702__$1 = state_21702;
var statearr_21710_22127 = state_21702__$1;
(statearr_21710_22127[(2)] = null);

(statearr_21710_22127[(1)] = (6));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_21703 === (34))){
var inst_21614 = (state_21702[(7)]);
var state_21702__$1 = state_21702;
var statearr_21711_22128 = state_21702__$1;
(statearr_21711_22128[(2)] = inst_21614);

(statearr_21711_22128[(1)] = (35));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_21703 === (3))){
var inst_21700 = (state_21702[(2)]);
var state_21702__$1 = state_21702;
return cljs.core.async.impl.ioc_helpers.return_chan.call(null,state_21702__$1,inst_21700);
} else {
if((state_val_21703 === (35))){
var inst_21624 = (state_21702[(2)]);
var state_21702__$1 = (function (){var statearr_21712 = state_21702;
(statearr_21712[(8)] = inst_21624);

return statearr_21712;
})();
var statearr_21713_22129 = state_21702__$1;
(statearr_21713_22129[(2)] = null);

(statearr_21713_22129[(1)] = (36));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_21703 === (4))){
var inst_21506 = (state_21702[(2)]);
var inst_21507 = cljs.core.prn.call(null,inst_21506);
var state_21702__$1 = state_21702;
var statearr_21715_22130 = state_21702__$1;
(statearr_21715_22130[(2)] = inst_21507);

(statearr_21715_22130[(1)] = (3));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_21703 === (36))){
var _ = (function (){var statearr_21716 = state_21702;
(statearr_21716[(4)] = cljs.core.cons.call(null,(43),(state_21702[(4)])));

return statearr_21716;
})();
var inst_21650 = [new cljs.core.Keyword(null,"account","account",(718006320)),new cljs.core.Keyword(null,"id","id",(-1388402092))];
var inst_21651 = [e2e.proposals.owner_acc,(2)];
var inst_21652 = cljs.core.PersistentHashMap.fromArrays(inst_21650,inst_21651);
var inst_21653 = e2e.proposals.eos_tx_owner.call(null,e2e.proposals.prop_acc,"processcycle",inst_21652);
var inst_21654 = cljs.core.async.interop.p__GT_c.call(null,inst_21653);
var state_21702__$1 = state_21702;
return cljs.core.async.impl.ioc_helpers.take_BANG_.call(null,state_21702__$1,(44),inst_21654);
} else {
if((state_val_21703 === (5))){
var _ = (function (){var statearr_21717 = state_21702;
(statearr_21717[(4)] = cljs.core.rest.call(null,(state_21702[(4)])));

return statearr_21717;
})();
var state_21702__$1 = state_21702;
var ex21714 = (state_21702__$1[(2)]);
var statearr_21718_22131 = state_21702__$1;
(statearr_21718_22131[(5)] = ex21714);


if((ex21714 instanceof Error)){
var statearr_21719_22132 = state_21702__$1;
(statearr_21719_22132[(1)] = (4));

(statearr_21719_22132[(5)] = null);

} else {
throw ex21714;

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_21703 === (37))){
var inst_21697 = (state_21702[(2)]);
var _ = (function (){var statearr_21720 = state_21702;
(statearr_21720[(4)] = cljs.core.rest.call(null,(state_21702[(4)])));

return statearr_21720;
})();
var state_21702__$1 = state_21702;
var statearr_21721_22133 = state_21702__$1;
(statearr_21721_22133[(2)] = inst_21697);

(statearr_21721_22133[(1)] = (3));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_21703 === (6))){
var _ = (function (){var statearr_21722 = state_21702;
(statearr_21722[(4)] = cljs.core.cons.call(null,(19),(state_21702[(4)])));

return statearr_21722;
})();
var inst_21557 = [new cljs.core.Keyword(null,"account","account",(718006320)),new cljs.core.Keyword(null,"id","id",(-1388402092))];
var inst_21558 = [e2e.proposals.owner_acc,(2)];
var inst_21559 = cljs.core.PersistentHashMap.fromArrays(inst_21557,inst_21558);
var inst_21560 = e2e.proposals.eos_tx_owner.call(null,e2e.proposals.prop_acc,"processcycle",inst_21559);
var inst_21561 = cljs.core.async.interop.p__GT_c.call(null,inst_21560);
var state_21702__$1 = state_21702;
return cljs.core.async.impl.ioc_helpers.take_BANG_.call(null,state_21702__$1,(20),inst_21561);
} else {
if((state_val_21703 === (38))){
var inst_21625 = (state_21702[(2)]);
var inst_21626 = cljs.core.prn.call(null,"test failed with ",inst_21625);
var state_21702__$1 = (function (){var statearr_21723 = state_21702;
(statearr_21723[(9)] = inst_21626);

return statearr_21723;
})();
var statearr_21724_22134 = state_21702__$1;
(statearr_21724_22134[(2)] = null);

(statearr_21724_22134[(1)] = (39));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_21703 === (7))){
var inst_21594 = (state_21702[(2)]);
var inst_21595 = cljs.core.assoc.call(null,e2e.proposals.prop_config,new cljs.core.Keyword(null,"cycle_duration_sec","cycle_duration_sec",(2139129571)),(1));
var inst_21596 = eos_cljs.core.transact.call(null,e2e.proposals.prop_acc,"update",inst_21595);
var inst_21597 = cljs.core.async.interop.p__GT_c.call(null,inst_21596);
var state_21702__$1 = (function (){var statearr_21725 = state_21702;
(statearr_21725[(10)] = inst_21594);

return statearr_21725;
})();
return cljs.core.async.impl.ioc_helpers.take_BANG_.call(null,state_21702__$1,(28),inst_21597);
} else {
if((state_val_21703 === (39))){
var _ = (function (){var statearr_21726 = state_21702;
(statearr_21726[(4)] = cljs.core.cons.call(null,(42),(state_21702[(4)])));

return statearr_21726;
})();
var inst_21638 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002))];
var inst_21639 = [new cljs.core.Keyword(null,"fail","fail",(1706214930)),"can finalize cycle"];
var inst_21640 = cljs.core.PersistentHashMap.fromArrays(inst_21638,inst_21639);
var inst_21641 = cljs.test.do_report.call(null,inst_21640);
var ___$1 = (function (){var statearr_21727 = state_21702;
(statearr_21727[(4)] = cljs.core.rest.call(null,(state_21702[(4)])));

return statearr_21727;
})();
var state_21702__$1 = state_21702;
var statearr_21728_22135 = state_21702__$1;
(statearr_21728_22135[(2)] = inst_21641);

(statearr_21728_22135[(1)] = (40));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_21703 === (8))){
var inst_21515 = (state_21702[(11)]);
var inst_21516 = (state_21702[(12)]);
var inst_21513 = (state_21702[(2)]);
var inst_21514 = inst_21513.cause;
var inst_21515__$1 = inst_21514.message;
var inst_21516__$1 = clojure.string.ends_with_QMARK_.call(null,inst_21515__$1,"cycle is not in the past");
var inst_21517 = (!(inst_21516__$1));
var state_21702__$1 = (function (){var statearr_21729 = state_21702;
(statearr_21729[(11)] = inst_21515__$1);

(statearr_21729[(12)] = inst_21516__$1);

return statearr_21729;
})();
if(inst_21517){
var statearr_21730_22136 = state_21702__$1;
(statearr_21730_22136[(1)] = (9));

} else {
var statearr_21731_22137 = state_21702__$1;
(statearr_21731_22137[(1)] = (10));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_21703 === (40))){
var inst_21644 = (state_21702[(2)]);
var state_21702__$1 = state_21702;
var statearr_21732_22138 = state_21702__$1;
(statearr_21732_22138[(2)] = inst_21644);

(statearr_21732_22138[(1)] = (37));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_21703 === (9))){
var inst_21515 = (state_21702[(11)]);
var inst_21519 = ["expected =","cycle is not in the past"," actual = ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_21515)].join('');
var inst_21520 = cljs.core.prn.call(null,inst_21519);
var state_21702__$1 = state_21702;
var statearr_21733_22139 = state_21702__$1;
(statearr_21733_22139[(2)] = inst_21520);

(statearr_21733_22139[(1)] = (11));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_21703 === (41))){
var inst_21627 = (state_21702[(2)]);
var inst_21628 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_21629 = null;
var inst_21630 = [new cljs.core.Keyword(null,"error","error",(-978969032)),"can finalize cycle",inst_21629,inst_21627];
var inst_21631 = cljs.core.PersistentHashMap.fromArrays(inst_21628,inst_21630);
var inst_21632 = cljs.test.do_report.call(null,inst_21631);
var state_21702__$1 = state_21702;
var statearr_21735_22140 = state_21702__$1;
(statearr_21735_22140[(2)] = inst_21632);

(statearr_21735_22140[(1)] = (40));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_21703 === (10))){
var state_21702__$1 = state_21702;
var statearr_21736_22141 = state_21702__$1;
(statearr_21736_22141[(2)] = null);

(statearr_21736_22141[(1)] = (11));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_21703 === (42))){
var _ = (function (){var statearr_21738 = state_21702;
(statearr_21738[(4)] = cljs.core.rest.call(null,(state_21702[(4)])));

return statearr_21738;
})();
var state_21702__$1 = state_21702;
var ex21734 = (state_21702__$1[(2)]);
var statearr_21739_22142 = state_21702__$1;
(statearr_21739_22142[(5)] = ex21734);


var statearr_21740_22143 = state_21702__$1;
(statearr_21740_22143[(1)] = (41));

(statearr_21740_22143[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_21703 === (11))){
var inst_21523 = (state_21702[(2)]);
var state_21702__$1 = (function (){var statearr_21741 = state_21702;
(statearr_21741[(13)] = inst_21523);

return statearr_21741;
})();
var statearr_21742_22144 = state_21702__$1;
(statearr_21742_22144[(2)] = null);

(statearr_21742_22144[(1)] = (12));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_21703 === (43))){
var _ = (function (){var statearr_21743 = state_21702;
(statearr_21743[(4)] = cljs.core.rest.call(null,(state_21702[(4)])));

return statearr_21743;
})();
var state_21702__$1 = state_21702;
var ex21737 = (state_21702__$1[(2)]);
var statearr_21744_22145 = state_21702__$1;
(statearr_21744_22145[(5)] = ex21737);


if((ex21737 instanceof Error)){
var statearr_21745_22146 = state_21702__$1;
(statearr_21745_22146[(1)] = (38));

(statearr_21745_22146[(5)] = null);

} else {
throw ex21737;

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_21703 === (12))){
var inst_21516 = (state_21702[(12)]);
var _ = (function (){var statearr_21746 = state_21702;
(statearr_21746[(4)] = cljs.core.cons.call(null,(15),(state_21702[(4)])));

return statearr_21746;
})();
var state_21702__$1 = state_21702;
if(cljs.core.truth_(inst_21516)){
var statearr_21747_22147 = state_21702__$1;
(statearr_21747_22147[(1)] = (16));

} else {
var statearr_21748_22148 = state_21702__$1;
(statearr_21748_22148[(1)] = (17));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_21703 === (44))){
var inst_21656 = (state_21702[(14)]);
var inst_21656__$1 = (state_21702[(2)]);
var inst_21657 = (inst_21656__$1 instanceof cljs.core.ExceptionInfo);
var inst_21658 = cljs.core.ex_data.call(null,inst_21656__$1);
var inst_21659 = new cljs.core.Keyword(null,"error","error",(-978969032)).cljs$core$IFn$_invoke$arity$1(inst_21658);
var inst_21660 = cljs.core._EQ_.call(null,inst_21659,new cljs.core.Keyword(null,"promise-error","promise-error",(-90673560)));
var inst_21661 = ((inst_21657) && (inst_21660));
var state_21702__$1 = (function (){var statearr_21749 = state_21702;
(statearr_21749[(14)] = inst_21656__$1);

return statearr_21749;
})();
if(cljs.core.truth_(inst_21661)){
var statearr_21750_22149 = state_21702__$1;
(statearr_21750_22149[(1)] = (45));

} else {
var statearr_21751_22150 = state_21702__$1;
(statearr_21751_22150[(1)] = (46));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_21703 === (13))){
var inst_21551 = (state_21702[(2)]);
var state_21702__$1 = state_21702;
var statearr_21752_22151 = state_21702__$1;
(statearr_21752_22151[(2)] = inst_21551);

(statearr_21752_22151[(1)] = (7));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_21703 === (45))){
var inst_21656 = (state_21702[(14)]);
var inst_21663 = (function(){throw inst_21656})();
var state_21702__$1 = state_21702;
var statearr_21753_22152 = state_21702__$1;
(statearr_21753_22152[(2)] = inst_21663);

(statearr_21753_22152[(1)] = (47));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_21703 === (14))){
var inst_21524 = (state_21702[(2)]);
var inst_21525 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_21526 = new cljs.core.Symbol("e2e.macros","pass?","e2e.macros/pass?",(894145299),null);
var inst_21527 = [new cljs.core.Keyword(null,"error","error",(-978969032)),"cycle needs to be in the past",inst_21526,inst_21524];
var inst_21528 = cljs.core.PersistentHashMap.fromArrays(inst_21525,inst_21527);
var inst_21529 = cljs.test.do_report.call(null,inst_21528);
var state_21702__$1 = state_21702;
var statearr_21755_22153 = state_21702__$1;
(statearr_21755_22153[(2)] = inst_21529);

(statearr_21755_22153[(1)] = (13));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_21703 === (46))){
var inst_21656 = (state_21702[(14)]);
var state_21702__$1 = state_21702;
var statearr_21756_22154 = state_21702__$1;
(statearr_21756_22154[(2)] = inst_21656);

(statearr_21756_22154[(1)] = (47));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_21703 === (15))){
var _ = (function (){var statearr_21757 = state_21702;
(statearr_21757[(4)] = cljs.core.rest.call(null,(state_21702[(4)])));

return statearr_21757;
})();
var state_21702__$1 = state_21702;
var ex21754 = (state_21702__$1[(2)]);
var statearr_21758_22155 = state_21702__$1;
(statearr_21758_22155[(5)] = ex21754);


var statearr_21759_22156 = state_21702__$1;
(statearr_21759_22156[(1)] = (14));

(statearr_21759_22156[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_21703 === (47))){
var inst_21666 = (state_21702[(2)]);
var state_21702__$1 = (function (){var statearr_21760 = state_21702;
(statearr_21760[(15)] = inst_21666);

return statearr_21760;
})();
var statearr_21761_22157 = state_21702__$1;
(statearr_21761_22157[(2)] = null);

(statearr_21761_22157[(1)] = (48));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_21703 === (16))){
var inst_21516 = (state_21702[(12)]);
var inst_21536 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_21537 = new cljs.core.Symbol("e2e.macros","pass?","e2e.macros/pass?",(894145299),null);
var inst_21538 = [new cljs.core.Keyword(null,"pass","pass",(1574159993)),"cycle needs to be in the past",inst_21537,inst_21516];
var inst_21539 = cljs.core.PersistentHashMap.fromArrays(inst_21536,inst_21538);
var inst_21540 = cljs.test.do_report.call(null,inst_21539);
var state_21702__$1 = state_21702;
var statearr_21762_22158 = state_21702__$1;
(statearr_21762_22158[(2)] = inst_21540);

(statearr_21762_22158[(1)] = (18));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_21703 === (48))){
var _ = (function (){var statearr_21763 = state_21702;
(statearr_21763[(4)] = cljs.core.cons.call(null,(51),(state_21702[(4)])));

return statearr_21763;
})();
var state_21702__$1 = state_21702;
var statearr_21764_22159 = state_21702__$1;
(statearr_21764_22159[(1)] = (52));



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_21703 === (17))){
var inst_21516 = (state_21702[(12)]);
var inst_21542 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_21543 = new cljs.core.Symbol("e2e.macros","pass?","e2e.macros/pass?",(894145299),null);
var inst_21544 = [new cljs.core.Keyword(null,"fail","fail",(1706214930)),"cycle needs to be in the past",inst_21543,inst_21516];
var inst_21545 = cljs.core.PersistentHashMap.fromArrays(inst_21542,inst_21544);
var inst_21546 = cljs.test.do_report.call(null,inst_21545);
var state_21702__$1 = state_21702;
var statearr_21766_22160 = state_21702__$1;
(statearr_21766_22160[(2)] = inst_21546);

(statearr_21766_22160[(1)] = (18));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_21703 === (49))){
var inst_21694 = (state_21702[(2)]);
var _ = (function (){var statearr_21767 = state_21702;
(statearr_21767[(4)] = cljs.core.rest.call(null,(state_21702[(4)])));

return statearr_21767;
})();
var state_21702__$1 = state_21702;
var statearr_21768_22161 = state_21702__$1;
(statearr_21768_22161[(2)] = inst_21694);

(statearr_21768_22161[(1)] = (37));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_21703 === (18))){
var inst_21516 = (state_21702[(12)]);
var inst_21548 = (state_21702[(2)]);
var _ = (function (){var statearr_21770 = state_21702;
(statearr_21770[(4)] = cljs.core.rest.call(null,(state_21702[(4)])));

return statearr_21770;
})();
var state_21702__$1 = (function (){var statearr_21771 = state_21702;
(statearr_21771[(16)] = inst_21548);

return statearr_21771;
})();
var statearr_21772_22162 = state_21702__$1;
(statearr_21772_22162[(2)] = inst_21516);

(statearr_21772_22162[(1)] = (13));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_21703 === (50))){
var inst_21667 = (state_21702[(2)]);
var inst_21668 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_21669 = true;
var inst_21670 = [new cljs.core.Keyword(null,"error","error",(-978969032)),"can finalize cycle",inst_21669,inst_21667];
var inst_21671 = cljs.core.PersistentHashMap.fromArrays(inst_21668,inst_21670);
var inst_21672 = cljs.test.do_report.call(null,inst_21671);
var state_21702__$1 = state_21702;
var statearr_21774_22163 = state_21702__$1;
(statearr_21774_22163[(2)] = inst_21672);

(statearr_21774_22163[(1)] = (49));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_21703 === (19))){
var _ = (function (){var statearr_21775 = state_21702;
(statearr_21775[(4)] = cljs.core.rest.call(null,(state_21702[(4)])));

return statearr_21775;
})();
var state_21702__$1 = state_21702;
var ex21769 = (state_21702__$1[(2)]);
var statearr_21776_22164 = state_21702__$1;
(statearr_21776_22164[(5)] = ex21769);


if((ex21769 instanceof Error)){
var statearr_21777_22165 = state_21702__$1;
(statearr_21777_22165[(1)] = (8));

(statearr_21777_22165[(5)] = null);

} else {
throw ex21769;

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_21703 === (51))){
var _ = (function (){var statearr_21778 = state_21702;
(statearr_21778[(4)] = cljs.core.rest.call(null,(state_21702[(4)])));

return statearr_21778;
})();
var state_21702__$1 = state_21702;
var ex21773 = (state_21702__$1[(2)]);
var statearr_21779_22166 = state_21702__$1;
(statearr_21779_22166[(5)] = ex21773);


var statearr_21780_22167 = state_21702__$1;
(statearr_21780_22167[(1)] = (50));

(statearr_21780_22167[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_21703 === (20))){
var inst_21563 = (state_21702[(17)]);
var inst_21563__$1 = (state_21702[(2)]);
var inst_21564 = (inst_21563__$1 instanceof cljs.core.ExceptionInfo);
var inst_21565 = cljs.core.ex_data.call(null,inst_21563__$1);
var inst_21566 = new cljs.core.Keyword(null,"error","error",(-978969032)).cljs$core$IFn$_invoke$arity$1(inst_21565);
var inst_21567 = cljs.core._EQ_.call(null,inst_21566,new cljs.core.Keyword(null,"promise-error","promise-error",(-90673560)));
var inst_21568 = ((inst_21564) && (inst_21567));
var state_21702__$1 = (function (){var statearr_21781 = state_21702;
(statearr_21781[(17)] = inst_21563__$1);

return statearr_21781;
})();
if(cljs.core.truth_(inst_21568)){
var statearr_21782_22168 = state_21702__$1;
(statearr_21782_22168[(1)] = (21));

} else {
var statearr_21783_22169 = state_21702__$1;
(statearr_21783_22169[(1)] = (22));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_21703 === (52))){
var inst_21679 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_21680 = true;
var inst_21681 = [new cljs.core.Keyword(null,"pass","pass",(1574159993)),"can finalize cycle",inst_21680,true];
var inst_21682 = cljs.core.PersistentHashMap.fromArrays(inst_21679,inst_21681);
var inst_21683 = cljs.test.do_report.call(null,inst_21682);
var state_21702__$1 = state_21702;
var statearr_21784_22170 = state_21702__$1;
(statearr_21784_22170[(2)] = inst_21683);

(statearr_21784_22170[(1)] = (54));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_21703 === (21))){
var inst_21563 = (state_21702[(17)]);
var inst_21570 = (function(){throw inst_21563})();
var state_21702__$1 = state_21702;
var statearr_21785_22171 = state_21702__$1;
(statearr_21785_22171[(2)] = inst_21570);

(statearr_21785_22171[(1)] = (23));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_21703 === (53))){
var inst_21685 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_21686 = true;
var inst_21687 = [new cljs.core.Keyword(null,"fail","fail",(1706214930)),"can finalize cycle",inst_21686,true];
var inst_21688 = cljs.core.PersistentHashMap.fromArrays(inst_21685,inst_21687);
var inst_21689 = cljs.test.do_report.call(null,inst_21688);
var state_21702__$1 = state_21702;
var statearr_21786_22172 = state_21702__$1;
(statearr_21786_22172[(2)] = inst_21689);

(statearr_21786_22172[(1)] = (54));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_21703 === (22))){
var inst_21563 = (state_21702[(17)]);
var state_21702__$1 = state_21702;
var statearr_21787_22173 = state_21702__$1;
(statearr_21787_22173[(2)] = inst_21563);

(statearr_21787_22173[(1)] = (23));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_21703 === (54))){
var inst_21691 = (state_21702[(2)]);
var _ = (function (){var statearr_21788 = state_21702;
(statearr_21788[(4)] = cljs.core.rest.call(null,(state_21702[(4)])));

return statearr_21788;
})();
var state_21702__$1 = (function (){var statearr_21789 = state_21702;
(statearr_21789[(18)] = inst_21691);

return statearr_21789;
})();
var statearr_21790_22174 = state_21702__$1;
(statearr_21790_22174[(2)] = true);

(statearr_21790_22174[(1)] = (49));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_21703 === (23))){
var inst_21573 = (state_21702[(2)]);
var state_21702__$1 = (function (){var statearr_21791 = state_21702;
(statearr_21791[(19)] = inst_21573);

return statearr_21791;
})();
var statearr_21792_22175 = state_21702__$1;
(statearr_21792_22175[(2)] = null);

(statearr_21792_22175[(1)] = (24));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_21703 === (24))){
var _ = (function (){var statearr_21793 = state_21702;
(statearr_21793[(4)] = cljs.core.cons.call(null,(27),(state_21702[(4)])));

return statearr_21793;
})();
var inst_21585 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002))];
var inst_21586 = [new cljs.core.Keyword(null,"fail","fail",(1706214930)),"cycle needs to be in the past"];
var inst_21587 = cljs.core.PersistentHashMap.fromArrays(inst_21585,inst_21586);
var inst_21588 = cljs.test.do_report.call(null,inst_21587);
var ___$1 = (function (){var statearr_21794 = state_21702;
(statearr_21794[(4)] = cljs.core.rest.call(null,(state_21702[(4)])));

return statearr_21794;
})();
var state_21702__$1 = state_21702;
var statearr_21795_22176 = state_21702__$1;
(statearr_21795_22176[(2)] = inst_21588);

(statearr_21795_22176[(1)] = (25));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_21703 === (25))){
var inst_21591 = (state_21702[(2)]);
var _ = (function (){var statearr_21797 = state_21702;
(statearr_21797[(4)] = cljs.core.rest.call(null,(state_21702[(4)])));

return statearr_21797;
})();
var state_21702__$1 = state_21702;
var statearr_21798_22177 = state_21702__$1;
(statearr_21798_22177[(2)] = inst_21591);

(statearr_21798_22177[(1)] = (7));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_21703 === (26))){
var inst_21574 = (state_21702[(2)]);
var inst_21575 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_21576 = null;
var inst_21577 = [new cljs.core.Keyword(null,"error","error",(-978969032)),"cycle needs to be in the past",inst_21576,inst_21574];
var inst_21578 = cljs.core.PersistentHashMap.fromArrays(inst_21575,inst_21577);
var inst_21579 = cljs.test.do_report.call(null,inst_21578);
var state_21702__$1 = state_21702;
var statearr_21799_22178 = state_21702__$1;
(statearr_21799_22178[(2)] = inst_21579);

(statearr_21799_22178[(1)] = (25));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_21703 === (27))){
var _ = (function (){var statearr_21800 = state_21702;
(statearr_21800[(4)] = cljs.core.rest.call(null,(state_21702[(4)])));

return statearr_21800;
})();
var state_21702__$1 = state_21702;
var ex21796 = (state_21702__$1[(2)]);
var statearr_21801_22179 = state_21702__$1;
(statearr_21801_22179[(5)] = ex21796);


var statearr_21802_22180 = state_21702__$1;
(statearr_21802_22180[(1)] = (26));

(statearr_21802_22180[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_21703 === (28))){
var inst_21599 = (state_21702[(20)]);
var inst_21599__$1 = (state_21702[(2)]);
var inst_21600 = (inst_21599__$1 instanceof cljs.core.ExceptionInfo);
var inst_21601 = cljs.core.ex_data.call(null,inst_21599__$1);
var inst_21602 = new cljs.core.Keyword(null,"error","error",(-978969032)).cljs$core$IFn$_invoke$arity$1(inst_21601);
var inst_21603 = cljs.core._EQ_.call(null,inst_21602,new cljs.core.Keyword(null,"promise-error","promise-error",(-90673560)));
var inst_21604 = ((inst_21600) && (inst_21603));
var state_21702__$1 = (function (){var statearr_21803 = state_21702;
(statearr_21803[(20)] = inst_21599__$1);

return statearr_21803;
})();
if(cljs.core.truth_(inst_21604)){
var statearr_21804_22181 = state_21702__$1;
(statearr_21804_22181[(1)] = (29));

} else {
var statearr_21805_22182 = state_21702__$1;
(statearr_21805_22182[(1)] = (30));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_21703 === (29))){
var inst_21599 = (state_21702[(20)]);
var inst_21606 = (function(){throw inst_21599})();
var state_21702__$1 = state_21702;
var statearr_21806_22183 = state_21702__$1;
(statearr_21806_22183[(2)] = inst_21606);

(statearr_21806_22183[(1)] = (31));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_21703 === (30))){
var inst_21599 = (state_21702[(20)]);
var state_21702__$1 = state_21702;
var statearr_21807_22184 = state_21702__$1;
(statearr_21807_22184[(2)] = inst_21599);

(statearr_21807_22184[(1)] = (31));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_21703 === (31))){
var inst_21609 = (state_21702[(2)]);
var inst_21610 = cljs.core.PersistentHashMap.EMPTY;
var inst_21611 = eos_cljs.core.transact.call(null,e2e.proposals.prop_acc,"cycleupdate",inst_21610);
var inst_21612 = cljs.core.async.interop.p__GT_c.call(null,inst_21611);
var state_21702__$1 = (function (){var statearr_21808 = state_21702;
(statearr_21808[(21)] = inst_21609);

return statearr_21808;
})();
return cljs.core.async.impl.ioc_helpers.take_BANG_.call(null,state_21702__$1,(32),inst_21612);
} else {
return null;
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
});})(c__19__auto___22122,___192__auto__,self____$1))
;
return ((function (switch__14__auto__,c__19__auto___22122,___192__auto__,self____$1){
return (function() {
var e2e$proposals$state_machine__15__auto__ = null;
var e2e$proposals$state_machine__15__auto____0 = (function (){
var statearr_21809 = [null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];
(statearr_21809[(0)] = e2e$proposals$state_machine__15__auto__);

(statearr_21809[(1)] = (1));

return statearr_21809;
});
var e2e$proposals$state_machine__15__auto____1 = (function (state_21702){
while(true){
var ret_value__16__auto__ = (function (){try{while(true){
var result__17__auto__ = switch__14__auto__.call(null,state_21702);
if(cljs.core.keyword_identical_QMARK_.call(null,result__17__auto__,new cljs.core.Keyword(null,"recur","recur",(-437573268)))){
continue;
} else {
return result__17__auto__;
}
break;
}
}catch (e21810){var ex__18__auto__ = e21810;
var statearr_21811_22185 = state_21702;
(statearr_21811_22185[(2)] = ex__18__auto__);


if(cljs.core.seq.call(null,(state_21702[(4)]))){
var statearr_21812_22186 = state_21702;
(statearr_21812_22186[(1)] = cljs.core.first.call(null,(state_21702[(4)])));

} else {
throw ex__18__auto__;
}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
}})();
if(cljs.core.keyword_identical_QMARK_.call(null,ret_value__16__auto__,new cljs.core.Keyword(null,"recur","recur",(-437573268)))){
var G__22187 = state_21702;
state_21702 = G__22187;
continue;
} else {
return ret_value__16__auto__;
}
break;
}
});
e2e$proposals$state_machine__15__auto__ = function(state_21702){
switch(arguments.length){
case 0:
return e2e$proposals$state_machine__15__auto____0.call(this);
case 1:
return e2e$proposals$state_machine__15__auto____1.call(this,state_21702);
}
throw(new Error('Invalid arity: ' + arguments.length));
};
e2e$proposals$state_machine__15__auto__.cljs$core$IFn$_invoke$arity$0 = e2e$proposals$state_machine__15__auto____0;
e2e$proposals$state_machine__15__auto__.cljs$core$IFn$_invoke$arity$1 = e2e$proposals$state_machine__15__auto____1;
return e2e$proposals$state_machine__15__auto__;
})()
;})(switch__14__auto__,c__19__auto___22122,___192__auto__,self____$1))
})();
var state__21__auto__ = (function (){var statearr_21813 = f__20__auto__.call(null);
(statearr_21813[(6)] = c__19__auto___22122);

return statearr_21813;
})();
return cljs.core.async.impl.ioc_helpers.run_state_machine_wrapped.call(null,state__21__auto__);
});})(c__19__auto___22122,___192__auto__,self____$1))
);


return done.call(null);
});

e2e.proposals.t_e2e$proposals21502.prototype.apply = (function (self__,args21505){
var self__ = this;
var self____$1 = this;
return self____$1.call.apply(self____$1,[self____$1].concat(cljs.core.aclone.call(null,args21505)));
});

e2e.proposals.t_e2e$proposals21502.prototype.cljs$core$IFn$_invoke$arity$1 = (function (done){
var self__ = this;
var ___192__auto__ = this;
var c__19__auto___22188 = cljs.core.async.chan.call(null,(1));
cljs.core.async.impl.dispatch.run.call(null,((function (c__19__auto___22188,___192__auto__){
return (function (){
var f__20__auto__ = (function (){var switch__14__auto__ = ((function (c__19__auto___22188,___192__auto__){
return (function (state_22010){
var state_val_22011 = (state_22010[(1)]);
if((state_val_22011 === (32))){
var inst_21922 = (state_22010[(7)]);
var inst_21922__$1 = (state_22010[(2)]);
var inst_21923 = (inst_21922__$1 instanceof cljs.core.ExceptionInfo);
var inst_21924 = cljs.core.ex_data.call(null,inst_21922__$1);
var inst_21925 = new cljs.core.Keyword(null,"error","error",(-978969032)).cljs$core$IFn$_invoke$arity$1(inst_21924);
var inst_21926 = cljs.core._EQ_.call(null,inst_21925,new cljs.core.Keyword(null,"promise-error","promise-error",(-90673560)));
var inst_21927 = ((inst_21923) && (inst_21926));
var state_22010__$1 = (function (){var statearr_22012 = state_22010;
(statearr_22012[(7)] = inst_21922__$1);

return statearr_22012;
})();
if(cljs.core.truth_(inst_21927)){
var statearr_22013_22189 = state_22010__$1;
(statearr_22013_22189[(1)] = (33));

} else {
var statearr_22014_22190 = state_22010__$1;
(statearr_22014_22190[(1)] = (34));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_22011 === (1))){
var state_22010__$1 = state_22010;
var statearr_22015_22191 = state_22010__$1;
(statearr_22015_22191[(2)] = null);

(statearr_22015_22191[(1)] = (2));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_22011 === (33))){
var inst_21922 = (state_22010[(7)]);
var inst_21929 = (function(){throw inst_21922})();
var state_22010__$1 = state_22010;
var statearr_22016_22192 = state_22010__$1;
(statearr_22016_22192[(2)] = inst_21929);

(statearr_22016_22192[(1)] = (35));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_22011 === (2))){
var _ = (function (){var statearr_22017 = state_22010;
(statearr_22017[(4)] = cljs.core.cons.call(null,(5),(state_22010[(4)])));

return statearr_22017;
})();
var state_22010__$1 = state_22010;
var statearr_22018_22193 = state_22010__$1;
(statearr_22018_22193[(2)] = null);

(statearr_22018_22193[(1)] = (6));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_22011 === (34))){
var inst_21922 = (state_22010[(7)]);
var state_22010__$1 = state_22010;
var statearr_22019_22194 = state_22010__$1;
(statearr_22019_22194[(2)] = inst_21922);

(statearr_22019_22194[(1)] = (35));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_22011 === (3))){
var inst_22008 = (state_22010[(2)]);
var state_22010__$1 = state_22010;
return cljs.core.async.impl.ioc_helpers.return_chan.call(null,state_22010__$1,inst_22008);
} else {
if((state_val_22011 === (35))){
var inst_21932 = (state_22010[(2)]);
var state_22010__$1 = (function (){var statearr_22020 = state_22010;
(statearr_22020[(8)] = inst_21932);

return statearr_22020;
})();
var statearr_22021_22195 = state_22010__$1;
(statearr_22021_22195[(2)] = null);

(statearr_22021_22195[(1)] = (36));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_22011 === (4))){
var inst_21814 = (state_22010[(2)]);
var inst_21815 = cljs.core.prn.call(null,inst_21814);
var state_22010__$1 = state_22010;
var statearr_22023_22196 = state_22010__$1;
(statearr_22023_22196[(2)] = inst_21815);

(statearr_22023_22196[(1)] = (3));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_22011 === (36))){
var _ = (function (){var statearr_22024 = state_22010;
(statearr_22024[(4)] = cljs.core.cons.call(null,(43),(state_22010[(4)])));

return statearr_22024;
})();
var inst_21958 = [new cljs.core.Keyword(null,"account","account",(718006320)),new cljs.core.Keyword(null,"id","id",(-1388402092))];
var inst_21959 = [e2e.proposals.owner_acc,(2)];
var inst_21960 = cljs.core.PersistentHashMap.fromArrays(inst_21958,inst_21959);
var inst_21961 = e2e.proposals.eos_tx_owner.call(null,e2e.proposals.prop_acc,"processcycle",inst_21960);
var inst_21962 = cljs.core.async.interop.p__GT_c.call(null,inst_21961);
var state_22010__$1 = state_22010;
return cljs.core.async.impl.ioc_helpers.take_BANG_.call(null,state_22010__$1,(44),inst_21962);
} else {
if((state_val_22011 === (5))){
var _ = (function (){var statearr_22025 = state_22010;
(statearr_22025[(4)] = cljs.core.rest.call(null,(state_22010[(4)])));

return statearr_22025;
})();
var state_22010__$1 = state_22010;
var ex22022 = (state_22010__$1[(2)]);
var statearr_22026_22197 = state_22010__$1;
(statearr_22026_22197[(5)] = ex22022);


if((ex22022 instanceof Error)){
var statearr_22027_22198 = state_22010__$1;
(statearr_22027_22198[(1)] = (4));

(statearr_22027_22198[(5)] = null);

} else {
throw ex22022;

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_22011 === (37))){
var inst_22005 = (state_22010[(2)]);
var _ = (function (){var statearr_22028 = state_22010;
(statearr_22028[(4)] = cljs.core.rest.call(null,(state_22010[(4)])));

return statearr_22028;
})();
var state_22010__$1 = state_22010;
var statearr_22029_22199 = state_22010__$1;
(statearr_22029_22199[(2)] = inst_22005);

(statearr_22029_22199[(1)] = (3));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_22011 === (6))){
var _ = (function (){var statearr_22030 = state_22010;
(statearr_22030[(4)] = cljs.core.cons.call(null,(19),(state_22010[(4)])));

return statearr_22030;
})();
var inst_21865 = [new cljs.core.Keyword(null,"account","account",(718006320)),new cljs.core.Keyword(null,"id","id",(-1388402092))];
var inst_21866 = [e2e.proposals.owner_acc,(2)];
var inst_21867 = cljs.core.PersistentHashMap.fromArrays(inst_21865,inst_21866);
var inst_21868 = e2e.proposals.eos_tx_owner.call(null,e2e.proposals.prop_acc,"processcycle",inst_21867);
var inst_21869 = cljs.core.async.interop.p__GT_c.call(null,inst_21868);
var state_22010__$1 = state_22010;
return cljs.core.async.impl.ioc_helpers.take_BANG_.call(null,state_22010__$1,(20),inst_21869);
} else {
if((state_val_22011 === (38))){
var inst_21933 = (state_22010[(2)]);
var inst_21934 = cljs.core.prn.call(null,"test failed with ",inst_21933);
var state_22010__$1 = (function (){var statearr_22031 = state_22010;
(statearr_22031[(9)] = inst_21934);

return statearr_22031;
})();
var statearr_22032_22200 = state_22010__$1;
(statearr_22032_22200[(2)] = null);

(statearr_22032_22200[(1)] = (39));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_22011 === (7))){
var inst_21902 = (state_22010[(2)]);
var inst_21903 = cljs.core.assoc.call(null,e2e.proposals.prop_config,new cljs.core.Keyword(null,"cycle_duration_sec","cycle_duration_sec",(2139129571)),(1));
var inst_21904 = eos_cljs.core.transact.call(null,e2e.proposals.prop_acc,"update",inst_21903);
var inst_21905 = cljs.core.async.interop.p__GT_c.call(null,inst_21904);
var state_22010__$1 = (function (){var statearr_22033 = state_22010;
(statearr_22033[(10)] = inst_21902);

return statearr_22033;
})();
return cljs.core.async.impl.ioc_helpers.take_BANG_.call(null,state_22010__$1,(28),inst_21905);
} else {
if((state_val_22011 === (39))){
var _ = (function (){var statearr_22034 = state_22010;
(statearr_22034[(4)] = cljs.core.cons.call(null,(42),(state_22010[(4)])));

return statearr_22034;
})();
var inst_21946 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002))];
var inst_21947 = [new cljs.core.Keyword(null,"fail","fail",(1706214930)),"can finalize cycle"];
var inst_21948 = cljs.core.PersistentHashMap.fromArrays(inst_21946,inst_21947);
var inst_21949 = cljs.test.do_report.call(null,inst_21948);
var ___$1 = (function (){var statearr_22035 = state_22010;
(statearr_22035[(4)] = cljs.core.rest.call(null,(state_22010[(4)])));

return statearr_22035;
})();
var state_22010__$1 = state_22010;
var statearr_22036_22201 = state_22010__$1;
(statearr_22036_22201[(2)] = inst_21949);

(statearr_22036_22201[(1)] = (40));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_22011 === (8))){
var inst_21823 = (state_22010[(11)]);
var inst_21824 = (state_22010[(12)]);
var inst_21821 = (state_22010[(2)]);
var inst_21822 = inst_21821.cause;
var inst_21823__$1 = inst_21822.message;
var inst_21824__$1 = clojure.string.ends_with_QMARK_.call(null,inst_21823__$1,"cycle is not in the past");
var inst_21825 = (!(inst_21824__$1));
var state_22010__$1 = (function (){var statearr_22037 = state_22010;
(statearr_22037[(11)] = inst_21823__$1);

(statearr_22037[(12)] = inst_21824__$1);

return statearr_22037;
})();
if(inst_21825){
var statearr_22038_22202 = state_22010__$1;
(statearr_22038_22202[(1)] = (9));

} else {
var statearr_22039_22203 = state_22010__$1;
(statearr_22039_22203[(1)] = (10));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_22011 === (40))){
var inst_21952 = (state_22010[(2)]);
var state_22010__$1 = state_22010;
var statearr_22040_22204 = state_22010__$1;
(statearr_22040_22204[(2)] = inst_21952);

(statearr_22040_22204[(1)] = (37));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_22011 === (9))){
var inst_21823 = (state_22010[(11)]);
var inst_21827 = ["expected =","cycle is not in the past"," actual = ",cljs.core.str.cljs$core$IFn$_invoke$arity$1(inst_21823)].join('');
var inst_21828 = cljs.core.prn.call(null,inst_21827);
var state_22010__$1 = state_22010;
var statearr_22041_22205 = state_22010__$1;
(statearr_22041_22205[(2)] = inst_21828);

(statearr_22041_22205[(1)] = (11));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_22011 === (41))){
var inst_21935 = (state_22010[(2)]);
var inst_21936 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_21937 = null;
var inst_21938 = [new cljs.core.Keyword(null,"error","error",(-978969032)),"can finalize cycle",inst_21937,inst_21935];
var inst_21939 = cljs.core.PersistentHashMap.fromArrays(inst_21936,inst_21938);
var inst_21940 = cljs.test.do_report.call(null,inst_21939);
var state_22010__$1 = state_22010;
var statearr_22043_22206 = state_22010__$1;
(statearr_22043_22206[(2)] = inst_21940);

(statearr_22043_22206[(1)] = (40));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_22011 === (10))){
var state_22010__$1 = state_22010;
var statearr_22044_22207 = state_22010__$1;
(statearr_22044_22207[(2)] = null);

(statearr_22044_22207[(1)] = (11));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_22011 === (42))){
var _ = (function (){var statearr_22046 = state_22010;
(statearr_22046[(4)] = cljs.core.rest.call(null,(state_22010[(4)])));

return statearr_22046;
})();
var state_22010__$1 = state_22010;
var ex22042 = (state_22010__$1[(2)]);
var statearr_22047_22208 = state_22010__$1;
(statearr_22047_22208[(5)] = ex22042);


var statearr_22048_22209 = state_22010__$1;
(statearr_22048_22209[(1)] = (41));

(statearr_22048_22209[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_22011 === (11))){
var inst_21831 = (state_22010[(2)]);
var state_22010__$1 = (function (){var statearr_22049 = state_22010;
(statearr_22049[(13)] = inst_21831);

return statearr_22049;
})();
var statearr_22050_22210 = state_22010__$1;
(statearr_22050_22210[(2)] = null);

(statearr_22050_22210[(1)] = (12));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_22011 === (43))){
var _ = (function (){var statearr_22051 = state_22010;
(statearr_22051[(4)] = cljs.core.rest.call(null,(state_22010[(4)])));

return statearr_22051;
})();
var state_22010__$1 = state_22010;
var ex22045 = (state_22010__$1[(2)]);
var statearr_22052_22211 = state_22010__$1;
(statearr_22052_22211[(5)] = ex22045);


if((ex22045 instanceof Error)){
var statearr_22053_22212 = state_22010__$1;
(statearr_22053_22212[(1)] = (38));

(statearr_22053_22212[(5)] = null);

} else {
throw ex22045;

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_22011 === (12))){
var inst_21824 = (state_22010[(12)]);
var _ = (function (){var statearr_22054 = state_22010;
(statearr_22054[(4)] = cljs.core.cons.call(null,(15),(state_22010[(4)])));

return statearr_22054;
})();
var state_22010__$1 = state_22010;
if(cljs.core.truth_(inst_21824)){
var statearr_22055_22213 = state_22010__$1;
(statearr_22055_22213[(1)] = (16));

} else {
var statearr_22056_22214 = state_22010__$1;
(statearr_22056_22214[(1)] = (17));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_22011 === (44))){
var inst_21964 = (state_22010[(14)]);
var inst_21964__$1 = (state_22010[(2)]);
var inst_21965 = (inst_21964__$1 instanceof cljs.core.ExceptionInfo);
var inst_21966 = cljs.core.ex_data.call(null,inst_21964__$1);
var inst_21967 = new cljs.core.Keyword(null,"error","error",(-978969032)).cljs$core$IFn$_invoke$arity$1(inst_21966);
var inst_21968 = cljs.core._EQ_.call(null,inst_21967,new cljs.core.Keyword(null,"promise-error","promise-error",(-90673560)));
var inst_21969 = ((inst_21965) && (inst_21968));
var state_22010__$1 = (function (){var statearr_22057 = state_22010;
(statearr_22057[(14)] = inst_21964__$1);

return statearr_22057;
})();
if(cljs.core.truth_(inst_21969)){
var statearr_22058_22215 = state_22010__$1;
(statearr_22058_22215[(1)] = (45));

} else {
var statearr_22059_22216 = state_22010__$1;
(statearr_22059_22216[(1)] = (46));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_22011 === (13))){
var inst_21859 = (state_22010[(2)]);
var state_22010__$1 = state_22010;
var statearr_22060_22217 = state_22010__$1;
(statearr_22060_22217[(2)] = inst_21859);

(statearr_22060_22217[(1)] = (7));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_22011 === (45))){
var inst_21964 = (state_22010[(14)]);
var inst_21971 = (function(){throw inst_21964})();
var state_22010__$1 = state_22010;
var statearr_22061_22218 = state_22010__$1;
(statearr_22061_22218[(2)] = inst_21971);

(statearr_22061_22218[(1)] = (47));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_22011 === (14))){
var inst_21832 = (state_22010[(2)]);
var inst_21833 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_21834 = new cljs.core.Symbol("e2e.macros","pass?","e2e.macros/pass?",(894145299),null);
var inst_21835 = [new cljs.core.Keyword(null,"error","error",(-978969032)),"cycle needs to be in the past",inst_21834,inst_21832];
var inst_21836 = cljs.core.PersistentHashMap.fromArrays(inst_21833,inst_21835);
var inst_21837 = cljs.test.do_report.call(null,inst_21836);
var state_22010__$1 = state_22010;
var statearr_22063_22219 = state_22010__$1;
(statearr_22063_22219[(2)] = inst_21837);

(statearr_22063_22219[(1)] = (13));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_22011 === (46))){
var inst_21964 = (state_22010[(14)]);
var state_22010__$1 = state_22010;
var statearr_22064_22220 = state_22010__$1;
(statearr_22064_22220[(2)] = inst_21964);

(statearr_22064_22220[(1)] = (47));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_22011 === (15))){
var _ = (function (){var statearr_22065 = state_22010;
(statearr_22065[(4)] = cljs.core.rest.call(null,(state_22010[(4)])));

return statearr_22065;
})();
var state_22010__$1 = state_22010;
var ex22062 = (state_22010__$1[(2)]);
var statearr_22066_22221 = state_22010__$1;
(statearr_22066_22221[(5)] = ex22062);


var statearr_22067_22222 = state_22010__$1;
(statearr_22067_22222[(1)] = (14));

(statearr_22067_22222[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_22011 === (47))){
var inst_21974 = (state_22010[(2)]);
var state_22010__$1 = (function (){var statearr_22068 = state_22010;
(statearr_22068[(15)] = inst_21974);

return statearr_22068;
})();
var statearr_22069_22223 = state_22010__$1;
(statearr_22069_22223[(2)] = null);

(statearr_22069_22223[(1)] = (48));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_22011 === (16))){
var inst_21824 = (state_22010[(12)]);
var inst_21844 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_21845 = new cljs.core.Symbol("e2e.macros","pass?","e2e.macros/pass?",(894145299),null);
var inst_21846 = [new cljs.core.Keyword(null,"pass","pass",(1574159993)),"cycle needs to be in the past",inst_21845,inst_21824];
var inst_21847 = cljs.core.PersistentHashMap.fromArrays(inst_21844,inst_21846);
var inst_21848 = cljs.test.do_report.call(null,inst_21847);
var state_22010__$1 = state_22010;
var statearr_22070_22224 = state_22010__$1;
(statearr_22070_22224[(2)] = inst_21848);

(statearr_22070_22224[(1)] = (18));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_22011 === (48))){
var _ = (function (){var statearr_22071 = state_22010;
(statearr_22071[(4)] = cljs.core.cons.call(null,(51),(state_22010[(4)])));

return statearr_22071;
})();
var state_22010__$1 = state_22010;
var statearr_22072_22225 = state_22010__$1;
(statearr_22072_22225[(1)] = (52));



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_22011 === (17))){
var inst_21824 = (state_22010[(12)]);
var inst_21850 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_21851 = new cljs.core.Symbol("e2e.macros","pass?","e2e.macros/pass?",(894145299),null);
var inst_21852 = [new cljs.core.Keyword(null,"fail","fail",(1706214930)),"cycle needs to be in the past",inst_21851,inst_21824];
var inst_21853 = cljs.core.PersistentHashMap.fromArrays(inst_21850,inst_21852);
var inst_21854 = cljs.test.do_report.call(null,inst_21853);
var state_22010__$1 = state_22010;
var statearr_22074_22226 = state_22010__$1;
(statearr_22074_22226[(2)] = inst_21854);

(statearr_22074_22226[(1)] = (18));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_22011 === (49))){
var inst_22002 = (state_22010[(2)]);
var _ = (function (){var statearr_22075 = state_22010;
(statearr_22075[(4)] = cljs.core.rest.call(null,(state_22010[(4)])));

return statearr_22075;
})();
var state_22010__$1 = state_22010;
var statearr_22076_22227 = state_22010__$1;
(statearr_22076_22227[(2)] = inst_22002);

(statearr_22076_22227[(1)] = (37));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_22011 === (18))){
var inst_21824 = (state_22010[(12)]);
var inst_21856 = (state_22010[(2)]);
var _ = (function (){var statearr_22078 = state_22010;
(statearr_22078[(4)] = cljs.core.rest.call(null,(state_22010[(4)])));

return statearr_22078;
})();
var state_22010__$1 = (function (){var statearr_22079 = state_22010;
(statearr_22079[(16)] = inst_21856);

return statearr_22079;
})();
var statearr_22080_22228 = state_22010__$1;
(statearr_22080_22228[(2)] = inst_21824);

(statearr_22080_22228[(1)] = (13));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_22011 === (50))){
var inst_21975 = (state_22010[(2)]);
var inst_21976 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_21977 = true;
var inst_21978 = [new cljs.core.Keyword(null,"error","error",(-978969032)),"can finalize cycle",inst_21977,inst_21975];
var inst_21979 = cljs.core.PersistentHashMap.fromArrays(inst_21976,inst_21978);
var inst_21980 = cljs.test.do_report.call(null,inst_21979);
var state_22010__$1 = state_22010;
var statearr_22082_22229 = state_22010__$1;
(statearr_22082_22229[(2)] = inst_21980);

(statearr_22082_22229[(1)] = (49));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_22011 === (19))){
var _ = (function (){var statearr_22083 = state_22010;
(statearr_22083[(4)] = cljs.core.rest.call(null,(state_22010[(4)])));

return statearr_22083;
})();
var state_22010__$1 = state_22010;
var ex22077 = (state_22010__$1[(2)]);
var statearr_22084_22230 = state_22010__$1;
(statearr_22084_22230[(5)] = ex22077);


if((ex22077 instanceof Error)){
var statearr_22085_22231 = state_22010__$1;
(statearr_22085_22231[(1)] = (8));

(statearr_22085_22231[(5)] = null);

} else {
throw ex22077;

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_22011 === (51))){
var _ = (function (){var statearr_22086 = state_22010;
(statearr_22086[(4)] = cljs.core.rest.call(null,(state_22010[(4)])));

return statearr_22086;
})();
var state_22010__$1 = state_22010;
var ex22081 = (state_22010__$1[(2)]);
var statearr_22087_22232 = state_22010__$1;
(statearr_22087_22232[(5)] = ex22081);


var statearr_22088_22233 = state_22010__$1;
(statearr_22088_22233[(1)] = (50));

(statearr_22088_22233[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_22011 === (20))){
var inst_21871 = (state_22010[(17)]);
var inst_21871__$1 = (state_22010[(2)]);
var inst_21872 = (inst_21871__$1 instanceof cljs.core.ExceptionInfo);
var inst_21873 = cljs.core.ex_data.call(null,inst_21871__$1);
var inst_21874 = new cljs.core.Keyword(null,"error","error",(-978969032)).cljs$core$IFn$_invoke$arity$1(inst_21873);
var inst_21875 = cljs.core._EQ_.call(null,inst_21874,new cljs.core.Keyword(null,"promise-error","promise-error",(-90673560)));
var inst_21876 = ((inst_21872) && (inst_21875));
var state_22010__$1 = (function (){var statearr_22089 = state_22010;
(statearr_22089[(17)] = inst_21871__$1);

return statearr_22089;
})();
if(cljs.core.truth_(inst_21876)){
var statearr_22090_22234 = state_22010__$1;
(statearr_22090_22234[(1)] = (21));

} else {
var statearr_22091_22235 = state_22010__$1;
(statearr_22091_22235[(1)] = (22));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_22011 === (52))){
var inst_21987 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_21988 = true;
var inst_21989 = [new cljs.core.Keyword(null,"pass","pass",(1574159993)),"can finalize cycle",inst_21988,true];
var inst_21990 = cljs.core.PersistentHashMap.fromArrays(inst_21987,inst_21989);
var inst_21991 = cljs.test.do_report.call(null,inst_21990);
var state_22010__$1 = state_22010;
var statearr_22092_22236 = state_22010__$1;
(statearr_22092_22236[(2)] = inst_21991);

(statearr_22092_22236[(1)] = (54));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_22011 === (21))){
var inst_21871 = (state_22010[(17)]);
var inst_21878 = (function(){throw inst_21871})();
var state_22010__$1 = state_22010;
var statearr_22093_22237 = state_22010__$1;
(statearr_22093_22237[(2)] = inst_21878);

(statearr_22093_22237[(1)] = (23));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_22011 === (53))){
var inst_21993 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_21994 = true;
var inst_21995 = [new cljs.core.Keyword(null,"fail","fail",(1706214930)),"can finalize cycle",inst_21994,true];
var inst_21996 = cljs.core.PersistentHashMap.fromArrays(inst_21993,inst_21995);
var inst_21997 = cljs.test.do_report.call(null,inst_21996);
var state_22010__$1 = state_22010;
var statearr_22094_22238 = state_22010__$1;
(statearr_22094_22238[(2)] = inst_21997);

(statearr_22094_22238[(1)] = (54));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_22011 === (22))){
var inst_21871 = (state_22010[(17)]);
var state_22010__$1 = state_22010;
var statearr_22095_22239 = state_22010__$1;
(statearr_22095_22239[(2)] = inst_21871);

(statearr_22095_22239[(1)] = (23));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_22011 === (54))){
var inst_21999 = (state_22010[(2)]);
var _ = (function (){var statearr_22096 = state_22010;
(statearr_22096[(4)] = cljs.core.rest.call(null,(state_22010[(4)])));

return statearr_22096;
})();
var state_22010__$1 = (function (){var statearr_22097 = state_22010;
(statearr_22097[(18)] = inst_21999);

return statearr_22097;
})();
var statearr_22098_22240 = state_22010__$1;
(statearr_22098_22240[(2)] = true);

(statearr_22098_22240[(1)] = (49));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_22011 === (23))){
var inst_21881 = (state_22010[(2)]);
var state_22010__$1 = (function (){var statearr_22099 = state_22010;
(statearr_22099[(19)] = inst_21881);

return statearr_22099;
})();
var statearr_22100_22241 = state_22010__$1;
(statearr_22100_22241[(2)] = null);

(statearr_22100_22241[(1)] = (24));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_22011 === (24))){
var _ = (function (){var statearr_22101 = state_22010;
(statearr_22101[(4)] = cljs.core.cons.call(null,(27),(state_22010[(4)])));

return statearr_22101;
})();
var inst_21893 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002))];
var inst_21894 = [new cljs.core.Keyword(null,"fail","fail",(1706214930)),"cycle needs to be in the past"];
var inst_21895 = cljs.core.PersistentHashMap.fromArrays(inst_21893,inst_21894);
var inst_21896 = cljs.test.do_report.call(null,inst_21895);
var ___$1 = (function (){var statearr_22102 = state_22010;
(statearr_22102[(4)] = cljs.core.rest.call(null,(state_22010[(4)])));

return statearr_22102;
})();
var state_22010__$1 = state_22010;
var statearr_22103_22242 = state_22010__$1;
(statearr_22103_22242[(2)] = inst_21896);

(statearr_22103_22242[(1)] = (25));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_22011 === (25))){
var inst_21899 = (state_22010[(2)]);
var _ = (function (){var statearr_22105 = state_22010;
(statearr_22105[(4)] = cljs.core.rest.call(null,(state_22010[(4)])));

return statearr_22105;
})();
var state_22010__$1 = state_22010;
var statearr_22106_22243 = state_22010__$1;
(statearr_22106_22243[(2)] = inst_21899);

(statearr_22106_22243[(1)] = (7));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_22011 === (26))){
var inst_21882 = (state_22010[(2)]);
var inst_21883 = [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"message","message",(-406056002)),new cljs.core.Keyword(null,"expected","expected",(1583670997)),new cljs.core.Keyword(null,"actual","actual",(107306363))];
var inst_21884 = null;
var inst_21885 = [new cljs.core.Keyword(null,"error","error",(-978969032)),"cycle needs to be in the past",inst_21884,inst_21882];
var inst_21886 = cljs.core.PersistentHashMap.fromArrays(inst_21883,inst_21885);
var inst_21887 = cljs.test.do_report.call(null,inst_21886);
var state_22010__$1 = state_22010;
var statearr_22107_22244 = state_22010__$1;
(statearr_22107_22244[(2)] = inst_21887);

(statearr_22107_22244[(1)] = (25));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_22011 === (27))){
var _ = (function (){var statearr_22108 = state_22010;
(statearr_22108[(4)] = cljs.core.rest.call(null,(state_22010[(4)])));

return statearr_22108;
})();
var state_22010__$1 = state_22010;
var ex22104 = (state_22010__$1[(2)]);
var statearr_22109_22245 = state_22010__$1;
(statearr_22109_22245[(5)] = ex22104);


var statearr_22110_22246 = state_22010__$1;
(statearr_22110_22246[(1)] = (26));

(statearr_22110_22246[(5)] = null);



return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_22011 === (28))){
var inst_21907 = (state_22010[(20)]);
var inst_21907__$1 = (state_22010[(2)]);
var inst_21908 = (inst_21907__$1 instanceof cljs.core.ExceptionInfo);
var inst_21909 = cljs.core.ex_data.call(null,inst_21907__$1);
var inst_21910 = new cljs.core.Keyword(null,"error","error",(-978969032)).cljs$core$IFn$_invoke$arity$1(inst_21909);
var inst_21911 = cljs.core._EQ_.call(null,inst_21910,new cljs.core.Keyword(null,"promise-error","promise-error",(-90673560)));
var inst_21912 = ((inst_21908) && (inst_21911));
var state_22010__$1 = (function (){var statearr_22111 = state_22010;
(statearr_22111[(20)] = inst_21907__$1);

return statearr_22111;
})();
if(cljs.core.truth_(inst_21912)){
var statearr_22112_22247 = state_22010__$1;
(statearr_22112_22247[(1)] = (29));

} else {
var statearr_22113_22248 = state_22010__$1;
(statearr_22113_22248[(1)] = (30));

}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_22011 === (29))){
var inst_21907 = (state_22010[(20)]);
var inst_21914 = (function(){throw inst_21907})();
var state_22010__$1 = state_22010;
var statearr_22114_22249 = state_22010__$1;
(statearr_22114_22249[(2)] = inst_21914);

(statearr_22114_22249[(1)] = (31));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_22011 === (30))){
var inst_21907 = (state_22010[(20)]);
var state_22010__$1 = state_22010;
var statearr_22115_22250 = state_22010__$1;
(statearr_22115_22250[(2)] = inst_21907);

(statearr_22115_22250[(1)] = (31));


return new cljs.core.Keyword(null,"recur","recur",(-437573268));
} else {
if((state_val_22011 === (31))){
var inst_21917 = (state_22010[(2)]);
var inst_21918 = cljs.core.PersistentHashMap.EMPTY;
var inst_21919 = eos_cljs.core.transact.call(null,e2e.proposals.prop_acc,"cycleupdate",inst_21918);
var inst_21920 = cljs.core.async.interop.p__GT_c.call(null,inst_21919);
var state_22010__$1 = (function (){var statearr_22116 = state_22010;
(statearr_22116[(21)] = inst_21917);

return statearr_22116;
})();
return cljs.core.async.impl.ioc_helpers.take_BANG_.call(null,state_22010__$1,(32),inst_21920);
} else {
return null;
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
}
});})(c__19__auto___22188,___192__auto__))
;
return ((function (switch__14__auto__,c__19__auto___22188,___192__auto__){
return (function() {
var e2e$proposals$state_machine__15__auto__ = null;
var e2e$proposals$state_machine__15__auto____0 = (function (){
var statearr_22117 = [null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null];
(statearr_22117[(0)] = e2e$proposals$state_machine__15__auto__);

(statearr_22117[(1)] = (1));

return statearr_22117;
});
var e2e$proposals$state_machine__15__auto____1 = (function (state_22010){
while(true){
var ret_value__16__auto__ = (function (){try{while(true){
var result__17__auto__ = switch__14__auto__.call(null,state_22010);
if(cljs.core.keyword_identical_QMARK_.call(null,result__17__auto__,new cljs.core.Keyword(null,"recur","recur",(-437573268)))){
continue;
} else {
return result__17__auto__;
}
break;
}
}catch (e22118){var ex__18__auto__ = e22118;
var statearr_22119_22251 = state_22010;
(statearr_22119_22251[(2)] = ex__18__auto__);


if(cljs.core.seq.call(null,(state_22010[(4)]))){
var statearr_22120_22252 = state_22010;
(statearr_22120_22252[(1)] = cljs.core.first.call(null,(state_22010[(4)])));

} else {
throw ex__18__auto__;
}

return new cljs.core.Keyword(null,"recur","recur",(-437573268));
}})();
if(cljs.core.keyword_identical_QMARK_.call(null,ret_value__16__auto__,new cljs.core.Keyword(null,"recur","recur",(-437573268)))){
var G__22253 = state_22010;
state_22010 = G__22253;
continue;
} else {
return ret_value__16__auto__;
}
break;
}
});
e2e$proposals$state_machine__15__auto__ = function(state_22010){
switch(arguments.length){
case 0:
return e2e$proposals$state_machine__15__auto____0.call(this);
case 1:
return e2e$proposals$state_machine__15__auto____1.call(this,state_22010);
}
throw(new Error('Invalid arity: ' + arguments.length));
};
e2e$proposals$state_machine__15__auto__.cljs$core$IFn$_invoke$arity$0 = e2e$proposals$state_machine__15__auto____0;
e2e$proposals$state_machine__15__auto__.cljs$core$IFn$_invoke$arity$1 = e2e$proposals$state_machine__15__auto____1;
return e2e$proposals$state_machine__15__auto__;
})()
;})(switch__14__auto__,c__19__auto___22188,___192__auto__))
})();
var state__21__auto__ = (function (){var statearr_22121 = f__20__auto__.call(null);
(statearr_22121[(6)] = c__19__auto___22188);

return statearr_22121;
})();
return cljs.core.async.impl.ioc_helpers.run_state_machine_wrapped.call(null,state__21__auto__);
});})(c__19__auto___22188,___192__auto__))
);


return done.call(null);
});

e2e.proposals.t_e2e$proposals21502.getBasis = (function (){
return new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,"meta21503","meta21503",(-1325511042),null)], null);
});

e2e.proposals.t_e2e$proposals21502.cljs$lang$type = true;

e2e.proposals.t_e2e$proposals21502.cljs$lang$ctorStr = "e2e.proposals/t_e2e$proposals21502";

e2e.proposals.t_e2e$proposals21502.cljs$lang$ctorPrWriter = (function (this__9776__auto__,writer__9777__auto__,opt__9778__auto__){
return cljs.core._write.call(null,writer__9777__auto__,"e2e.proposals/t_e2e$proposals21502");
});

/**
 * Positional factory function for e2e.proposals/t_e2e$proposals21502.
 */
e2e.proposals.__GT_t_e2e$proposals21502 = (function e2e$proposals$__GT_t_e2e$proposals21502(meta21503){
return (new e2e.proposals.t_e2e$proposals21502(meta21503));
});

}

return (new e2e.proposals.t_e2e$proposals21502(null));
});

e2e.proposals.process_cycle.cljs$lang$var = new cljs.core.Var(function(){return e2e.proposals.process_cycle;},new cljs.core.Symbol("e2e.proposals","process-cycle","e2e.proposals/process-cycle",(-929717381),null),cljs.core.PersistentHashMap.fromArrays([new cljs.core.Keyword(null,"ns","ns",(441598760)),new cljs.core.Keyword(null,"name","name",(1843675177)),new cljs.core.Keyword(null,"file","file",(-1269645878)),new cljs.core.Keyword(null,"end-column","end-column",(1425389514)),new cljs.core.Keyword(null,"column","column",(2078222095)),new cljs.core.Keyword(null,"line","line",(212345235)),new cljs.core.Keyword(null,"end-line","end-line",(1837326455)),new cljs.core.Keyword(null,"arglists","arglists",(1661989754)),new cljs.core.Keyword(null,"doc","doc",(1913296891)),new cljs.core.Keyword(null,"test","test",(577538877))],[new cljs.core.Symbol(null,"e2e.proposals","e2e.proposals",(1479174227),null),new cljs.core.Symbol(null,"process-cycle","process-cycle",(-1514138028),null),"e2e/proposals.cljs",(23),(1),(259),(259),cljs.core.List.EMPTY,null,(cljs.core.truth_(e2e.proposals.process_cycle)?e2e.proposals.process_cycle.cljs$lang$test:null)]));
e2e.proposals._main = (function e2e$proposals$_main(var_args){
var args__10338__auto__ = [];
var len__10335__auto___22257 = arguments.length;
var i__10336__auto___22258 = (0);
while(true){
if((i__10336__auto___22258 < len__10335__auto___22257)){
args__10338__auto__.push((arguments[i__10336__auto___22258]));

var G__22259 = (i__10336__auto___22258 + (1));
i__10336__auto___22258 = G__22259;
continue;
} else {
}
break;
}

var argseq__10339__auto__ = ((((0) < args__10338__auto__.length))?(new cljs.core.IndexedSeq(args__10338__auto__.slice((0)),(0),null)):null);
return e2e.proposals._main.cljs$core$IFn$_invoke$arity$variadic(argseq__10339__auto__);
});

e2e.proposals._main.cljs$core$IFn$_invoke$arity$variadic = (function (args){
return cljs.test.run_block.call(null,(function (){var env22255 = cljs.test.empty_env.call(null);
var summary22256 = cljs.core.volatile_BANG_.call(null,new cljs.core.PersistentArrayMap(null, 5, [new cljs.core.Keyword(null,"test","test",(577538877)),(0),new cljs.core.Keyword(null,"pass","pass",(1574159993)),(0),new cljs.core.Keyword(null,"fail","fail",(1706214930)),(0),new cljs.core.Keyword(null,"error","error",(-978969032)),(0),new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"summary","summary",(380847952))], null));
return cljs.core.concat.call(null,cljs.core.concat.call(null,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [((function (env22255,summary22256){
return (function (){
cljs.test.set_env_BANG_.call(null,env22255);

cljs.test.do_report.call(null,new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"begin-test-ns","begin-test-ns",(-1701237033)),new cljs.core.Keyword(null,"ns","ns",(441598760)),new cljs.core.Symbol(null,"e2e.proposals","e2e.proposals",(1479174227),null)], null));

return cljs.test.block.call(null,(function (){var env__194__auto__ = cljs.test.get_current_env.call(null);
return cljs.core.concat.call(null,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [((function (env__194__auto__,env22255,summary22256){
return (function (){
if((env__194__auto__ == null)){
cljs.test.set_env_BANG_.call(null,cljs.test.empty_env.call(null));
} else {
}

cljs.test.update_current_env_BANG_.call(null,new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"once-fixtures","once-fixtures",(1253947167))], null),cljs.core.assoc,new cljs.core.Symbol(null,"e2e.proposals","e2e.proposals",(1479174227),null),e2e.proposals.cljs_test_once_fixtures);

return null;
});})(env__194__auto__,env22255,summary22256))
], null),cljs.test.test_vars_block.call(null,new cljs.core.PersistentVector(null, 8, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Var(function(){return e2e.proposals.init;},new cljs.core.Symbol("e2e.proposals","init","e2e.proposals/init",(-458618888),null),cljs.core.PersistentHashMap.fromArrays([new cljs.core.Keyword(null,"ns","ns",(441598760)),new cljs.core.Keyword(null,"name","name",(1843675177)),new cljs.core.Keyword(null,"file","file",(-1269645878)),new cljs.core.Keyword(null,"end-column","end-column",(1425389514)),new cljs.core.Keyword(null,"column","column",(2078222095)),new cljs.core.Keyword(null,"line","line",(212345235)),new cljs.core.Keyword(null,"end-line","end-line",(1837326455)),new cljs.core.Keyword(null,"arglists","arglists",(1661989754)),new cljs.core.Keyword(null,"doc","doc",(1913296891)),new cljs.core.Keyword(null,"test","test",(577538877))],[new cljs.core.Symbol(null,"e2e.proposals","e2e.proposals",(1479174227),null),new cljs.core.Symbol(null,"init","init",(-234949907),null),"e2e/proposals.cljs",(14),(1),(60),(60),cljs.core.List.EMPTY,null,(cljs.core.truth_(e2e.proposals.init)?e2e.proposals.init.cljs$lang$test:null)])),new cljs.core.Var(function(){return e2e.proposals.proposal_payment;},new cljs.core.Symbol("e2e.proposals","proposal-payment","e2e.proposals/proposal-payment",(-924459697),null),cljs.core.PersistentHashMap.fromArrays([new cljs.core.Keyword(null,"ns","ns",(441598760)),new cljs.core.Keyword(null,"name","name",(1843675177)),new cljs.core.Keyword(null,"file","file",(-1269645878)),new cljs.core.Keyword(null,"end-column","end-column",(1425389514)),new cljs.core.Keyword(null,"column","column",(2078222095)),new cljs.core.Keyword(null,"line","line",(212345235)),new cljs.core.Keyword(null,"end-line","end-line",(1837326455)),new cljs.core.Keyword(null,"arglists","arglists",(1661989754)),new cljs.core.Keyword(null,"doc","doc",(1913296891)),new cljs.core.Keyword(null,"test","test",(577538877))],[new cljs.core.Symbol(null,"e2e.proposals","e2e.proposals",(1479174227),null),new cljs.core.Symbol(null,"proposal-payment","proposal-payment",(-65968046),null),"e2e/proposals.cljs",(26),(1),(87),(87),cljs.core.List.EMPTY,null,(cljs.core.truth_(e2e.proposals.proposal_payment)?e2e.proposals.proposal_payment.cljs$lang$test:null)])),new cljs.core.Var(function(){return e2e.proposals.new_proposal;},new cljs.core.Symbol("e2e.proposals","new-proposal","e2e.proposals/new-proposal",(-713004459),null),cljs.core.PersistentHashMap.fromArrays([new cljs.core.Keyword(null,"ns","ns",(441598760)),new cljs.core.Keyword(null,"name","name",(1843675177)),new cljs.core.Keyword(null,"file","file",(-1269645878)),new cljs.core.Keyword(null,"end-column","end-column",(1425389514)),new cljs.core.Keyword(null,"column","column",(2078222095)),new cljs.core.Keyword(null,"line","line",(212345235)),new cljs.core.Keyword(null,"end-line","end-line",(1837326455)),new cljs.core.Keyword(null,"arglists","arglists",(1661989754)),new cljs.core.Keyword(null,"doc","doc",(1913296891)),new cljs.core.Keyword(null,"test","test",(577538877))],[new cljs.core.Symbol(null,"e2e.proposals","e2e.proposals",(1479174227),null),new cljs.core.Symbol(null,"new-proposal","new-proposal",(-1057710210),null),"e2e/proposals.cljs",(22),(1),(113),(113),cljs.core.List.EMPTY,null,(cljs.core.truth_(e2e.proposals.new_proposal)?e2e.proposals.new_proposal.cljs$lang$test:null)])),new cljs.core.Var(function(){return e2e.proposals.update_proposal;},new cljs.core.Symbol("e2e.proposals","update-proposal","e2e.proposals/update-proposal",(-1251182518),null),cljs.core.PersistentHashMap.fromArrays([new cljs.core.Keyword(null,"ns","ns",(441598760)),new cljs.core.Keyword(null,"name","name",(1843675177)),new cljs.core.Keyword(null,"file","file",(-1269645878)),new cljs.core.Keyword(null,"end-column","end-column",(1425389514)),new cljs.core.Keyword(null,"column","column",(2078222095)),new cljs.core.Keyword(null,"line","line",(212345235)),new cljs.core.Keyword(null,"end-line","end-line",(1837326455)),new cljs.core.Keyword(null,"arglists","arglists",(1661989754)),new cljs.core.Keyword(null,"doc","doc",(1913296891)),new cljs.core.Keyword(null,"test","test",(577538877))],[new cljs.core.Symbol(null,"e2e.proposals","e2e.proposals",(1479174227),null),new cljs.core.Symbol(null,"update-proposal","update-proposal",(-1609555119),null),"e2e/proposals.cljs",(25),(1),(142),(142),cljs.core.List.EMPTY,null,(cljs.core.truth_(e2e.proposals.update_proposal)?e2e.proposals.update_proposal.cljs$lang$test:null)])),new cljs.core.Var(function(){return e2e.proposals.cycle_add;},new cljs.core.Symbol("e2e.proposals","cycle-add","e2e.proposals/cycle-add",(1399694237),null),cljs.core.PersistentHashMap.fromArrays([new cljs.core.Keyword(null,"ns","ns",(441598760)),new cljs.core.Keyword(null,"name","name",(1843675177)),new cljs.core.Keyword(null,"file","file",(-1269645878)),new cljs.core.Keyword(null,"end-column","end-column",(1425389514)),new cljs.core.Keyword(null,"column","column",(2078222095)),new cljs.core.Keyword(null,"line","line",(212345235)),new cljs.core.Keyword(null,"end-line","end-line",(1837326455)),new cljs.core.Keyword(null,"arglists","arglists",(1661989754)),new cljs.core.Keyword(null,"doc","doc",(1913296891)),new cljs.core.Keyword(null,"test","test",(577538877))],[new cljs.core.Symbol(null,"e2e.proposals","e2e.proposals",(1479174227),null),new cljs.core.Symbol(null,"cycle-add","cycle-add",(1071188336),null),"e2e/proposals.cljs",(19),(1),(156),(156),cljs.core.List.EMPTY,null,(cljs.core.truth_(e2e.proposals.cycle_add)?e2e.proposals.cycle_add.cljs$lang$test:null)])),new cljs.core.Var(function(){return e2e.proposals.cycle_update;},new cljs.core.Symbol("e2e.proposals","cycle-update","e2e.proposals/cycle-update",(1535968581),null),cljs.core.PersistentHashMap.fromArrays([new cljs.core.Keyword(null,"ns","ns",(441598760)),new cljs.core.Keyword(null,"name","name",(1843675177)),new cljs.core.Keyword(null,"file","file",(-1269645878)),new cljs.core.Keyword(null,"end-column","end-column",(1425389514)),new cljs.core.Keyword(null,"column","column",(2078222095)),new cljs.core.Keyword(null,"line","line",(212345235)),new cljs.core.Keyword(null,"end-line","end-line",(1837326455)),new cljs.core.Keyword(null,"arglists","arglists",(1661989754)),new cljs.core.Keyword(null,"doc","doc",(1913296891)),new cljs.core.Keyword(null,"test","test",(577538877))],[new cljs.core.Symbol(null,"e2e.proposals","e2e.proposals",(1479174227),null),new cljs.core.Symbol(null,"cycle-update","cycle-update",(-1460045646),null),"e2e/proposals.cljs",(22),(1),(187),(187),cljs.core.List.EMPTY,null,(cljs.core.truth_(e2e.proposals.cycle_update)?e2e.proposals.cycle_update.cljs$lang$test:null)])),new cljs.core.Var(function(){return e2e.proposals.vote;},new cljs.core.Symbol("e2e.proposals","vote","e2e.proposals/vote",(-517647785),null),cljs.core.PersistentHashMap.fromArrays([new cljs.core.Keyword(null,"ns","ns",(441598760)),new cljs.core.Keyword(null,"name","name",(1843675177)),new cljs.core.Keyword(null,"file","file",(-1269645878)),new cljs.core.Keyword(null,"end-column","end-column",(1425389514)),new cljs.core.Keyword(null,"column","column",(2078222095)),new cljs.core.Keyword(null,"line","line",(212345235)),new cljs.core.Keyword(null,"end-line","end-line",(1837326455)),new cljs.core.Keyword(null,"arglists","arglists",(1661989754)),new cljs.core.Keyword(null,"doc","doc",(1913296891)),new cljs.core.Keyword(null,"test","test",(577538877))],[new cljs.core.Symbol(null,"e2e.proposals","e2e.proposals",(1479174227),null),new cljs.core.Symbol(null,"vote","vote",(-839798934),null),"e2e/proposals.cljs",(14),(1),(213),(213),cljs.core.List.EMPTY,null,(cljs.core.truth_(e2e.proposals.vote)?e2e.proposals.vote.cljs$lang$test:null)])),new cljs.core.Var(function(){return e2e.proposals.process_cycle;},new cljs.core.Symbol("e2e.proposals","process-cycle","e2e.proposals/process-cycle",(-929717381),null),cljs.core.PersistentHashMap.fromArrays([new cljs.core.Keyword(null,"ns","ns",(441598760)),new cljs.core.Keyword(null,"name","name",(1843675177)),new cljs.core.Keyword(null,"file","file",(-1269645878)),new cljs.core.Keyword(null,"end-column","end-column",(1425389514)),new cljs.core.Keyword(null,"column","column",(2078222095)),new cljs.core.Keyword(null,"line","line",(212345235)),new cljs.core.Keyword(null,"end-line","end-line",(1837326455)),new cljs.core.Keyword(null,"arglists","arglists",(1661989754)),new cljs.core.Keyword(null,"doc","doc",(1913296891)),new cljs.core.Keyword(null,"test","test",(577538877))],[new cljs.core.Symbol(null,"e2e.proposals","e2e.proposals",(1479174227),null),new cljs.core.Symbol(null,"process-cycle","process-cycle",(-1514138028),null),"e2e/proposals.cljs",(23),(1),(259),(259),cljs.core.List.EMPTY,null,(cljs.core.truth_(e2e.proposals.process_cycle)?e2e.proposals.process_cycle.cljs$lang$test:null)]))], null)),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [((function (env__194__auto__,env22255,summary22256){
return (function (){
if((env__194__auto__ == null)){
return cljs.test.clear_env_BANG_.call(null);
} else {
return null;
}
});})(env__194__auto__,env22255,summary22256))
], null));
})());
});})(env22255,summary22256))
,((function (env22255,summary22256){
return (function (){
return cljs.test.do_report.call(null,new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"end-test-ns","end-test-ns",(1620675645)),new cljs.core.Keyword(null,"ns","ns",(441598760)),new cljs.core.Symbol(null,"e2e.proposals","e2e.proposals",(1479174227),null)], null));
});})(env22255,summary22256))
], null),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [((function (env22255,summary22256){
return (function (){
return cljs.core._vreset_BANG_.call(null,summary22256,cljs.core.partial.call(null,cljs.core.merge_with,cljs.core._PLUS_).call(null,cljs.core._deref.call(null,summary22256),new cljs.core.Keyword(null,"report-counters","report-counters",(-1702609242)).cljs$core$IFn$_invoke$arity$1(cljs.test.get_and_clear_env_BANG_.call(null))));
});})(env22255,summary22256))
], null)),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [((function (env22255,summary22256){
return (function (){
cljs.test.set_env_BANG_.call(null,env22255);

cljs.test.do_report.call(null,cljs.core.deref.call(null,summary22256));

cljs.test.report.call(null,cljs.core.assoc.call(null,cljs.core.deref.call(null,summary22256),new cljs.core.Keyword(null,"type","type",(1174270348)),new cljs.core.Keyword(null,"end-run-tests","end-run-tests",(267300563))));

return cljs.test.clear_env_BANG_.call(null);
});})(env22255,summary22256))
], null));
})());
});

e2e.proposals._main.cljs$lang$maxFixedArity = (0);

/** @this {Function} */
e2e.proposals._main.cljs$lang$applyTo = (function (seq22254){
var self__10327__auto__ = this;
return self__10327__auto__.cljs$core$IFn$_invoke$arity$variadic(cljs.core.seq.call(null,seq22254));
});

